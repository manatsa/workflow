import"./chunk-F5X5MWHG.js";import{a as be,b as Te}from"./chunk-C65ZXUT4.js";import"./chunk-MS4AQ6UA.js";import{a as Se,b as we}from"./chunk-HWGXTLQG.js";import{a as Me}from"./chunk-357QFKQZ.js";import{a as ve}from"./chunk-STRWBEKL.js";import{d as V}from"./chunk-GXBSGI7M.js";import{a as me,b as ce}from"./chunk-WS3LSTPP.js";import"./chunk-DX3LX2XG.js";import{b as ae,c as le}from"./chunk-TN4AHATL.js";import"./chunk-HAECDJ4T.js";import{b as ee,c as te,i as ie,j as oe,l as re,m as ne}from"./chunk-QPNPC3UF.js";import{d as D,f as T,h as O,i as R,m as A,p as B,q as $,t as G,u as H,v as q}from"./chunk-PTVBPAL6.js";import{a as se,b as pe,c as de,d as ue,e as Ce,f as fe,g as _e,h as xe,i as he,j as Ee,k as ge}from"./chunk-6LTOGVZP.js";import{a as K,b as Q,c as X,f as Y,h as Z}from"./chunk-FDHOQCIP.js";import"./chunk-SPXEAC7E.js";import"./chunk-CRE6EOZT.js";import"./chunk-YPEK7DFO.js";import{p as N,ta as j,ua as U,va as z,wa as W,ya as J}from"./chunk-SKGZNIDJ.js";import{Cb as p,Eb as F,Hb as v,Kb as y,Lb as I,Mb as o,Nb as i,Ob as f,Pb as h,Qb as E,Sb as b,Wb as C,Xb as g,cb as m,ec as P,fc as r,gc as _,hb as S,hc as L,oa as d,ob as k,pa as u,ub as s}from"./chunk-2CONVDTD.js";var x=function(t){return t.PRIVATE_LIMITED="PRIVATE_LIMITED",t.SOLE_TRADER="SOLE_TRADER",t.PUBLIC="PUBLIC",t.PARTNERSHIP="PARTNERSHIP",t.NGO="NGO",t.GOVERNMENT="GOVERNMENT",t}(x||{}),ye={[x.PRIVATE_LIMITED]:"Private Limited",[x.SOLE_TRADER]:"Sole Trader",[x.PUBLIC]:"Public",[x.PARTNERSHIP]:"Partnership",[x.NGO]:"NGO",[x.GOVERNMENT]:"Government"};var Ie=(t,a)=>a.id,Le=(t,a)=>a.value;function ke(t,a){t&1&&(o(0,"th",22),r(1,"Code"),i())}function Fe(t,a){if(t&1&&(o(0,"td",23),r(1),i()),t&2){let e=a.$implicit;m(),_(e.code)}}function Pe(t,a){t&1&&(o(0,"th",22),r(1,"Name"),i())}function Ne(t,a){if(t&1&&(o(0,"td",23),r(1),i()),t&2){let e=a.$implicit;m(),_(e.name)}}function Ve(t,a){t&1&&(o(0,"th",22),r(1,"Category"),i())}function De(t,a){if(t&1&&(o(0,"td",23),r(1),i()),t&2){let e=a.$implicit;m(),_(e.categoryName||"-")}}function Oe(t,a){t&1&&(o(0,"th",22),r(1,"Type"),i())}function Re(t,a){if(t&1&&(o(0,"td",23),r(1),i()),t&2){let e=a.$implicit;m(),_(e.corporateTypeDisplayName||"-")}}function Ae(t,a){t&1&&(o(0,"th",22),r(1,"Status"),i())}function Be(t,a){if(t&1&&(o(0,"td",23)(1,"mat-chip",24),r(2),i()()),t&2){let e=a.$implicit;m(),p("color",e.isActive?"primary":"warn"),m(),L(" ",e.isActive?"Active":"Inactive"," ")}}function $e(t,a){t&1&&(o(0,"th",22),r(1,"Actions"),i())}function Ge(t,a){if(t&1){let e=b();o(0,"td",23)(1,"button",25),C("click",function(){let n=d(e).$implicit,l=g();return u(l.editCorporate(n))}),o(2,"mat-icon"),r(3,"edit"),i()(),o(4,"button",26),C("click",function(){let n=d(e).$implicit,l=g();return u(l.toggleStatus(n))}),o(5,"mat-icon"),r(6),i()(),o(7,"button",27),C("click",function(){let n=d(e).$implicit,l=g();return u(l.deleteCorporate(n))}),o(8,"mat-icon"),r(9,"delete"),i()()()}if(t&2){let e=a.$implicit;m(4),p("matTooltip",e.isActive?"Deactivate":"Activate"),m(2),_(e.isActive?"visibility_off":"visibility")}}function He(t,a){t&1&&f(0,"tr",28)}function qe(t,a){t&1&&f(0,"tr",29)}function je(t,a){t&1&&(o(0,"div",20)(1,"mat-icon"),r(2,"corporate_fare"),i(),o(3,"p"),r(4,"No corporates found. Add your first corporate."),i()())}function Ue(t,a){t&1&&(o(0,"mat-error"),r(1,"Code is required"),i())}function ze(t,a){t&1&&(o(0,"mat-error"),r(1,"Name is required"),i())}function We(t,a){if(t&1&&(o(0,"mat-option",36),r(1),i()),t&2){let e=a.$implicit;p("value",e.id),m(),_(e.name)}}function Je(t,a){if(t&1&&(o(0,"mat-option",36),r(1),i()),t&2){let e=a.$implicit;p("value",e.value),m(),_(e.label)}}function Ke(t,a){t&1&&(o(0,"mat-error"),r(1,"Invalid email format"),i())}function Qe(t,a){if(t&1){let e=b();o(0,"mat-card",21)(1,"mat-card-header")(2,"mat-card-title"),r(3),i()(),o(4,"mat-card-content")(5,"form",30),C("ngSubmit",function(){d(e);let n=g();return u(n.saveCorporate())}),o(6,"div",31)(7,"mat-form-field",32)(8,"mat-label"),r(9,"Code"),i(),f(10,"input",33),s(11,Ue,2,0,"mat-error"),i(),o(12,"mat-form-field",32)(13,"mat-label"),r(14,"Name"),i(),f(15,"input",34),s(16,ze,2,0,"mat-error"),i()(),o(17,"div",31)(18,"mat-form-field",32)(19,"mat-label"),r(20,"Category (Industry)"),i(),o(21,"mat-select",35)(22,"mat-option",36),r(23,"-- None --"),i(),y(24,We,2,2,"mat-option",36,Ie),i()(),o(26,"mat-form-field",32)(27,"mat-label"),r(28,"Corporate Type"),i(),o(29,"mat-select",37)(30,"mat-option",36),r(31,"-- None --"),i(),y(32,Je,2,2,"mat-option",36,Le),i()()(),o(34,"mat-form-field",38)(35,"mat-label"),r(36,"Description"),i(),f(37,"textarea",39),i(),o(38,"mat-form-field",38)(39,"mat-label"),r(40,"Address"),i(),f(41,"textarea",40),i(),o(42,"div",31)(43,"mat-form-field",32)(44,"mat-label"),r(45,"Contact Email"),i(),f(46,"input",41),s(47,Ke,2,0,"mat-error"),i(),o(48,"mat-form-field",32)(49,"mat-label"),r(50,"Contact Phone"),i(),f(51,"input",42),i()(),o(52,"mat-form-field",38)(53,"mat-label"),r(54,"Website"),i(),f(55,"input",43),i(),o(56,"div",44)(57,"button",45),C("click",function(){d(e);let n=g();return u(n.showForm=!1)}),r(58,"Cancel"),i(),o(59,"button",46),r(60),i()()()()()}if(t&2){let e,c,n,l=g();m(3),_(l.editingCorporate?"Edit Corporate":"Add Corporate"),m(2),p("formGroup",l.corporateForm),m(6),v((e=l.corporateForm.get("code"))!=null&&e.hasError("required")?11:-1),m(5),v((c=l.corporateForm.get("name"))!=null&&c.hasError("required")?16:-1),m(6),p("value",null),m(2),I(l.categories),m(6),p("value",null),m(2),I(l.corporateTypes),m(15),v((n=l.corporateForm.get("contactEmail"))!=null&&n.hasError("email")?47:-1),m(12),p("disabled",l.loading||l.corporateForm.invalid),m(),L(" ",l.editingCorporate?"Update":"Create"," ")}}var Tt=(()=>{class t{fb;userService;importExportService;snackBar;corporates=[];categories=[];displayedColumns=["code","name","category","type","status","actions"];showForm=!1;editingCorporate=null;loading=!1;corporateForm;corporateTypes=Object.values(x).map(e=>({value:e,label:ye[e]}));constructor(e,c,n,l){this.fb=e,this.userService=c,this.importExportService=n,this.snackBar=l,this.corporateForm=this.fb.group({code:["",T.required],name:["",T.required],description:[""],address:[""],categoryId:[null],corporateType:[null],contactEmail:["",T.email],contactPhone:[""],website:[""]})}ngOnInit(){this.loadCorporates(),this.loadCategories()}loadCorporates(){this.userService.getCorporates().subscribe(e=>{e.success&&(this.corporates=e.data)})}loadCategories(){this.userService.getActiveCategories().subscribe(e=>{e.success&&(this.categories=e.data)})}editCorporate(e){this.editingCorporate=e,this.showForm=!0,this.corporateForm.patchValue({code:e.code,name:e.name,description:e.description,address:e.address,categoryId:e.categoryId,corporateType:e.corporateType,contactEmail:e.contactEmail,contactPhone:e.contactPhone,website:e.website})}saveCorporate(){if(this.corporateForm.invalid)return;this.loading=!0;let e=this.corporateForm.value;(this.editingCorporate?this.userService.updateCorporate(this.editingCorporate.id,e):this.userService.createCorporate(e)).subscribe({next:n=>{this.loading=!1,n.success&&(this.snackBar.open(this.editingCorporate?"Corporate updated":"Corporate created","Close",{duration:3e3}),this.showForm=!1,this.editingCorporate=null,this.corporateForm.reset(),this.loadCorporates())},error:n=>{this.loading=!1,this.snackBar.open(n.error?.message||"Operation failed","Close",{duration:3e3})}})}toggleStatus(e){(e.isActive?this.userService.deactivateCorporate(e.id):this.userService.activateCorporate(e.id)).subscribe({next:()=>{this.snackBar.open(e.isActive?"Corporate deactivated":"Corporate activated","Close",{duration:3e3}),this.loadCorporates()},error:n=>{this.snackBar.open(n.error?.message||"Operation failed","Close",{duration:3e3})}})}deleteCorporate(e){confirm(`Are you sure you want to delete "${e.name}"?`)&&this.userService.deleteCorporate(e.id).subscribe({next:()=>{this.snackBar.open("Corporate deleted","Close",{duration:3e3}),this.loadCorporates()},error:c=>{this.snackBar.open(c.error?.message||"Failed to delete","Close",{duration:3e3})}})}downloadTemplate(){this.importExportService.downloadTemplate("corporates").subscribe({next:e=>{this.importExportService.downloadFile(e,"Corporates_Template.xlsx"),this.snackBar.open("Template downloaded","Close",{duration:3e3})},error:()=>this.snackBar.open("Failed to download template","Close",{duration:3e3})})}importFromExcel(e){let c=e.target;if(!c.files?.length)return;let n=c.files[0];this.importExportService.importFromExcel("corporates",n).subscribe({next:l=>{l.success?(this.snackBar.open(l.message||"Corporates imported","Close",{duration:3e3}),this.loadCorporates()):this.snackBar.open(l.message||"Failed to import","Close",{duration:3e3}),c.value=""},error:l=>{this.snackBar.open(l.error?.message||"Failed to import","Close",{duration:3e3}),c.value=""}})}exportToExcel(){this.importExportService.exportToExcel("corporates").subscribe({next:e=>{this.importExportService.downloadFile(e,"Corporates_Export.xlsx"),this.snackBar.open("Corporates exported","Close",{duration:3e3})},error:()=>this.snackBar.open("Failed to export","Close",{duration:3e3})})}static \u0275fac=function(c){return new(c||t)(S(G),S(ve),S(Me),S(ae))};static \u0275cmp=k({type:t,selectors:[["app-corporate-list"]],decls:49,vars:7,consts:[["fileInput",""],[1,"corporate-list-container"],[1,"header"],[1,"header-actions"],["mat-stroked-button","",3,"click"],["hidden","","type","file","accept",".xlsx",3,"change"],["mat-raised-button","","color","primary",3,"click"],[1,"content-grid"],[1,"table-card"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","category"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"no-data"],[1,"form-card"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","formControlName","code"],["matInput","","formControlName","name"],["formControlName","categoryId"],[3,"value"],["formControlName","corporateType"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","description","rows","2"],["matInput","","formControlName","address","rows","2"],["matInput","","formControlName","contactEmail","type","email"],["matInput","","formControlName","contactPhone"],["matInput","","formControlName","website","placeholder","https://example.com"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(c,n){if(c&1){let l=b();o(0,"div",1)(1,"div",2)(2,"h1"),r(3,"Corporates"),i(),o(4,"div",3)(5,"button",4),C("click",function(){return d(l),u(n.downloadTemplate())}),o(6,"mat-icon"),r(7,"description"),i(),r(8," Template "),i(),o(9,"button",4),C("click",function(){d(l);let M=P(14);return u(M.click())}),o(10,"mat-icon"),r(11,"upload"),i(),r(12," Import "),i(),o(13,"input",5,0),C("change",function(M){return d(l),u(n.importFromExcel(M))}),i(),o(15,"button",4),C("click",function(){return d(l),u(n.exportToExcel())}),o(16,"mat-icon"),r(17,"download"),i(),r(18," Export "),i(),o(19,"button",6),C("click",function(){return d(l),n.showForm=!0,n.editingCorporate=null,u(n.corporateForm.reset())}),o(20,"mat-icon"),r(21,"add"),i(),r(22," Add Corporate "),i()()(),o(23,"div",7)(24,"mat-card",8)(25,"mat-card-content")(26,"table",9),h(27,10),s(28,ke,2,0,"th",11)(29,Fe,2,1,"td",12),E(),h(30,13),s(31,Pe,2,0,"th",11)(32,Ne,2,1,"td",12),E(),h(33,14),s(34,Ve,2,0,"th",11)(35,De,2,1,"td",12),E(),h(36,15),s(37,Oe,2,0,"th",11)(38,Re,2,1,"td",12),E(),h(39,16),s(40,Ae,2,0,"th",11)(41,Be,3,2,"td",12),E(),h(42,17),s(43,$e,2,0,"th",11)(44,Ge,10,2,"td",12),E(),s(45,He,1,0,"tr",18)(46,qe,1,0,"tr",19),i(),s(47,je,5,0,"div",20),i()(),s(48,Qe,61,9,"mat-card",21),i()()}c&2&&(m(23),F("with-form",n.showForm),m(3),p("dataSource",n.corporates),m(19),p("matHeaderRowDef",n.displayedColumns),m(),p("matRowDefColumns",n.displayedColumns),m(),v(n.corporates.length===0?47:-1),m(),v(n.showForm?48:-1))},dependencies:[N,H,A,D,O,R,q,B,$,Z,K,X,Y,Q,ge,se,de,_e,ue,pe,xe,Ce,fe,he,Ee,oe,ie,ee,te,ne,re,J,W,z,U,j,le,ce,me,we,Se,V,Te,be],styles:[".corporate-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}.content-grid.with-form[_ngcontent-%COMP%]{grid-template-columns:1fr 500px}@media (max-width: 1100px){.content-grid.with-form[_ngcontent-%COMP%]{grid-template-columns:1fr}}.full-width[_ngcontent-%COMP%]{width:100%}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.form-field[_ngcontent-%COMP%]{flex:1;margin-bottom:.5rem}.form-field.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:150px;text-align:center}"]})}return t})();export{Tt as CorporateListComponent};
