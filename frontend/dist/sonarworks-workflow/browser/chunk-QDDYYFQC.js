import"./chunk-MS4AQ6UA.js";import{c as b,d as Pe,e as y,f as De,g as Oe}from"./chunk-JR55QIKH.js";import{a as Ie,b as Fe}from"./chunk-OJT3OVWQ.js";import{a as Te,b as ke}from"./chunk-M4AVZ6G2.js";import{c as j}from"./chunk-5LBLILVL.js";import{a as se,b as de,c as pe,d as ce}from"./chunk-6Y7BGRIJ.js";import"./chunk-LAGNR76Q.js";import{a as Ee}from"./chunk-UAAG5SLX.js";import{a as fe,b as _e,c as Me,d as Ce,e as ge,f as Se,g as he,h as be,i as ye,j as we,k as xe,l as ve}from"./chunk-FEDFXP2D.js";import{a as ue}from"./chunk-W77BPQM7.js";import"./chunk-T6FL6ZBG.js";import{a as re,c as me,d as le}from"./chunk-XZVKBWV7.js";import{b as ne,e as oe,i as ae}from"./chunk-IGML5J3D.js";import"./chunk-DLMMVLF7.js";import"./chunk-X4PFBHKL.js";import"./chunk-ORAJKTE5.js";import{b as V,f as q,i as G,p as U}from"./chunk-DUSDXFBS.js";import{a as ee,c as te,h as ie}from"./chunk-PWNKGTLH.js";import"./chunk-PSOPTTCW.js";import"./chunk-NMO4AZKI.js";import{d as Q,g as $}from"./chunk-JQUVUDJB.js";import{j as H,m as W,qa as Y,ra as J,sa as K,ta as X,va as Z}from"./chunk-A3I6STGM.js";import{$b as E,Ab as s,Db as L,Fb as M,Hb as R,Ib as A,Jb as z,Kb as n,Lb as i,Mb as C,Nb as u,Ob as f,Ub as g,Vb as w,Zb as x,_b as v,bb as r,cc as N,dc as a,ec as S,fc as _,gb as I,hc as T,ic as k,jc as P,mc as B,nb as F,oc as h,pc as D,rc as O,tb as l}from"./chunk-2HR56SRD.js";var Re=()=>[10,25,50,100],Le=(e,o)=>["/workflows",e,"instances",o],Ae=(e,o)=>["/workflows",e,"edit",o];function ze(e,o){if(e&1&&(n(0,"mat-option",11),a(1),i()),e&2){let t=o.$implicit;s("value",t),r(),S(t)}}function Ne(e,o){e&1&&(n(0,"th",27),a(1,"Reference"),i())}function Be(e,o){if(e&1&&(n(0,"td",28)(1,"a",29),a(2),i()()),e&2){let t=o.$implicit;r(),s("routerLink",h(2,Le,t.workflowCode,t.id)),r(),_(" ",t.referenceNumber," ")}}function He(e,o){e&1&&(n(0,"th",27),a(1,"Workflow"),i())}function We(e,o){if(e&1&&(n(0,"td",28)(1,"div",30)(2,"mat-icon"),a(3),i(),n(4,"span"),a(5),i()()()),e&2){let t=o.$implicit;r(3),S(t.workflowIcon||"description"),r(2),S(t.workflowName)}}function Qe(e,o){e&1&&(n(0,"th",27),a(1,"Status"),i())}function $e(e,o){if(e&1&&(n(0,"td",28)(1,"span",31),a(2),i()()),e&2){let t=o.$implicit;r(),L(t.status.toLowerCase()),r(),_(" ",t.status," ")}}function je(e,o){e&1&&(n(0,"th",27),a(1,"Current Level"),i())}function Ve(e,o){if(e&1&&a(0),e&2){let t=w().$implicit;_(" Level ",t.currentApprovalLevel," ")}}function qe(e,o){e&1&&a(0," - ")}function Ge(e,o){if(e&1&&(n(0,"td",28),l(1,Ve,1,1)(2,qe,1,0),i()),e&2){let t=o.$implicit;r(),M(t.status==="PENDING"?1:2)}}function Ue(e,o){e&1&&(n(0,"th",27),a(1,"Submitted"),i())}function Ye(e,o){if(e&1&&(n(0,"td",28),a(1),D(2,"date"),i()),e&2){let t=o.$implicit;r(),_(" ",O(2,1,t.createdAt,"medium")," ")}}function Je(e,o){e&1&&(n(0,"th",27),a(1,"Last Updated"),i())}function Ke(e,o){if(e&1&&(n(0,"td",28),a(1),D(2,"date"),i()),e&2){let t=o.$implicit;r(),_(" ",O(2,1,t.updatedAt,"medium")," ")}}function Xe(e,o){e&1&&C(0,"th",32)}function Ze(e,o){if(e&1&&(n(0,"button",34)(1,"mat-icon"),a(2,"edit"),i(),n(3,"span"),a(4,"Edit Draft"),i()()),e&2){let t=w().$implicit;s("routerLink",h(1,Ae,t.workflowCode,t.id))}}function et(e,o){if(e&1&&(n(0,"td",28)(1,"button",33)(2,"mat-icon"),a(3,"more_vert"),i()(),n(4,"mat-menu",null,0)(6,"button",34)(7,"mat-icon"),a(8,"visibility"),i(),n(9,"span"),a(10,"View Details"),i()(),l(11,Ze,5,4,"button",34),i()()),e&2){let t=o.$implicit,d=N(5);r(),s("matMenuTriggerFor",d),r(5),s("routerLink",h(3,Le,t.workflowCode,t.id)),r(5),M(t.status==="DRAFT"?11:-1)}}function tt(e,o){e&1&&C(0,"tr",35)}function it(e,o){e&1&&C(0,"tr",36)}function nt(e,o){e&1&&(n(0,"div",25)(1,"mat-icon"),a(2,"send"),i(),n(3,"h3"),a(4,"No Submissions Yet"),i(),n(5,"p"),a(6,"Start by submitting a new workflow request."),i(),n(7,"button",37),a(8," Go to Dashboard "),i()())}var Rt=(()=>{class e{workflowService;displayedColumns=["referenceNumber","workflowName","status","currentApprovalLevel","createdAt","updatedAt","actions"];dataSource=new ve([]);searchTerm="";statusFilter="";totalElements=0;pageSize=10;currentPage=0;statuses=Object.values(Ee);paginator;sort;constructor(t){this.workflowService=t}ngOnInit(){this.loadSubmissions()}ngAfterViewInit(){this.dataSource.sort=this.sort}loadSubmissions(){this.workflowService.getMySubmissions(this.currentPage,this.pageSize,this.statusFilter||void 0).subscribe(t=>{t.success&&(this.dataSource.data=t.data.content,this.totalElements=t.data.totalElements)})}applyFilter(){this.dataSource.filter=this.searchTerm.trim().toLowerCase()}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadSubmissions()}static \u0275fac=function(d){return new(d||e)(I(ue))};static \u0275cmp=F({type:e,selectors:[["app-my-submissions"]],viewQuery:function(d,m){if(d&1&&(x(b,5),x(y,5)),d&2){let p;v(p=E())&&(m.paginator=p.first),v(p=E())&&(m.sort=p.first)}},decls:50,vars:11,consts:[["menu","matMenu"],[1,"my-submissions-container"],[1,"header"],[1,"header-stats"],[1,"table-toolbar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by reference number",3,"ngModelChange","keyup","ngModel"],["matPrefix",""],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value",""],[3,"value"],["mat-table","","matSort","",1,"data-table",3,"dataSource"],["matColumnDef","referenceNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","workflowName"],["matColumnDef","status"],["matColumnDef","currentApprovalLevel"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"empty-state"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"reference-link",3,"routerLink"],[1,"workflow-info"],[1,"badge"],["mat-header-cell",""],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"routerLink"],["mat-header-row",""],["mat-row",""],["mat-raised-button","","color","primary","routerLink","/dashboard"]],template:function(d,m){d&1&&(n(0,"div",1)(1,"div",2)(2,"h1"),a(3,"My Submissions"),i(),n(4,"div",3)(5,"mat-chip"),a(6),i()()(),n(7,"mat-card")(8,"mat-card-content")(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),a(12,"Search"),i(),n(13,"input",6),P("ngModelChange",function(c){return k(m.searchTerm,c)||(m.searchTerm=c),c}),g("keyup",function(){return m.applyFilter()}),i(),n(14,"mat-icon",7),a(15,"search"),i()(),n(16,"mat-form-field",8)(17,"mat-label"),a(18,"Status"),i(),n(19,"mat-select",9),P("ngModelChange",function(c){return k(m.statusFilter,c)||(m.statusFilter=c),c}),g("selectionChange",function(){return m.loadSubmissions()}),n(20,"mat-option",10),a(21,"All"),i(),A(22,ze,2,2,"mat-option",11,R),i()()(),n(24,"table",12),u(25,13),l(26,Ne,2,0,"th",14)(27,Be,3,5,"td",15),f(),u(28,16),l(29,He,2,0,"th",14)(30,We,6,2,"td",15),f(),u(31,17),l(32,Qe,2,0,"th",14)(33,$e,3,3,"td",15),f(),u(34,18),l(35,je,2,0,"th",14)(36,Ge,3,1,"td",15),f(),u(37,19),l(38,Ue,2,0,"th",14)(39,Ye,3,4,"td",15),f(),u(40,20),l(41,Je,2,0,"th",14)(42,Ke,3,4,"td",15),f(),u(43,21),l(44,Xe,1,0,"th",22)(45,et,12,6,"td",15),f(),l(46,tt,1,0,"tr",23)(47,it,1,0,"tr",24),i(),l(48,nt,9,0,"div",25),n(49,"mat-paginator",26),g("page",function(c){return m.onPageChange(c)}),i()()()()),d&2&&(r(6),_("",m.totalElements," total"),r(7),T("ngModel",m.searchTerm),r(6),T("ngModel",m.statusFilter),r(3),z(m.statuses),r(2),s("dataSource",m.dataSource),r(22),s("matHeaderRowDef",m.displayedColumns),r(),s("matRowDefColumns",m.displayedColumns),r(),M(m.dataSource.data.length===0?48:-1),r(),s("length",m.totalElements)("pageSize",m.pageSize)("pageSizeOptions",B(10,Re)))},dependencies:[W,H,$,Q,U,V,q,G,ie,ee,te,xe,fe,Me,he,Ce,_e,be,ge,Se,ye,we,Pe,b,Oe,y,De,re,ae,ne,oe,le,me,ke,Te,j,Z,X,K,J,Y,Fe,Ie,ce,de,se,pe],styles:[".my-submissions-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.table-toolbar[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.search-field[_ngcontent-%COMP%]{flex:1;max-width:400px}.data-table[_ngcontent-%COMP%]{width:100%}.reference-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.reference-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.workflow-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.workflow-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:20px;width:20px;height:20px}.badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500}.badge.pending[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.badge.approved[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.rejected[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.badge.draft[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.badge.escalated[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#666;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;opacity:.5}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 1.5rem}"]})}return e})();export{Rt as MySubmissionsComponent};
