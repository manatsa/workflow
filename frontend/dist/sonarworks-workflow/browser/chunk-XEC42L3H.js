import{a as Ui,b as Gi,c as Hi}from"./chunk-IENNPC4K.js";import{a as Ai,b as Li,c as Bi,d as Vi}from"./chunk-T3UOS2VF.js";import{a as Wi}from"./chunk-S5VKPXE3.js";import{a as $e,b as je}from"./chunk-A65RCWZW.js";import{b as Oi,c as Fi,d as Ni}from"./chunk-PJFAPQP2.js";import"./chunk-F5X5MWHG.js";import{a as Ri,b as Mi}from"./chunk-C65ZXUT4.js";import"./chunk-MS4AQ6UA.js";import{a as Ye,b as qe}from"./chunk-HWGXTLQG.js";import{a as ki}from"./chunk-STRWBEKL.js";import{c as si}from"./chunk-WOKYK45J.js";import"./chunk-7XCE4O6Y.js";import{d as fe}from"./chunk-GXBSGI7M.js";import{a as Be,b as Ve,c as Ue,d as Ge,e as Ti,f as He}from"./chunk-OJAC3FSA.js";import{a as Pi,b as ze}from"./chunk-WS3LSTPP.js";import"./chunk-DX3LX2XG.js";import{a as yi,b as Ei,c as Si,f as bi,g as Di,h as Le}from"./chunk-L5MAMNEM.js";import{b as vi,c as wi}from"./chunk-TN4AHATL.js";import"./chunk-HAECDJ4T.js";import{b as Re,c as hi,d as Me,e as ui,f as Oe,i as Fe,j as Ne,l as We,m as Ae}from"./chunk-QPNPC3UF.js";import{d as he,f as te,h as ue,i as ge,l as di,m as xe,n as Ce,p as ve,q as we,r as ci,t as ye,u as mi,v as Ee}from"./chunk-PTVBPAL6.js";import{a as Pe,b as _i,c as Ie,f as fi,h as ke}from"./chunk-FDHOQCIP.js";import{a as Ii}from"./chunk-72SFJ5UH.js";import"./chunk-SPXEAC7E.js";import"./chunk-CRE6EOZT.js";import{e as gi,g as xi,h as Ci}from"./chunk-YPEK7DFO.js";import{a as Jt,c as ei,d as ti,g as ii}from"./chunk-7HWBNCDZ.js";import{A as _e,C as ee,D as z,G as pt,I as Y,L as ri,N as ai,W as li,a as mt,da as _t,i as Xt,j as Zt,n as Qt,p as pe,ta as Se,ua as be,va as pi,wa as De,y as ni,ya as Te,z as oi}from"./chunk-SKGZNIDJ.js";import{A as Ft,Aa as ae,Ac as ct,B as re,Bb as zt,Cb as x,Da as le,Db as at,Dc as Z,Eb as M,Ec as Kt,Fa as ot,Hb as f,Ib as Yt,J as Nt,Jb as lt,Kb as T,Lb as P,Mb as l,Nb as a,Ob as O,Qa as Ut,Rb as st,Sb as R,V as it,W as Wt,Wb as y,X as q,Xb as p,Z as At,a as W,aa as nt,b as A,ba as Lt,cb as d,d as j,da as K,ec as de,f as tt,fb as rt,fc as s,ga as D,gc as v,hb as L,hc as w,i as k,ic as ce,j as Rt,jb as Gt,jc as E,kc as S,l as Mt,lc as b,na as Bt,nc as me,oa as h,ob as X,pa as u,pb as Ht,pc as dt,qb as se,rc as qt,s as Ot,sc as $t,ua as Vt,ub as C,vc as jt,za as G}from"./chunk-2CONVDTD.js";function an(o){let n=o.cloneNode(!0),e=n.querySelectorAll("[id]"),t=o.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<e.length;i++)e[i].removeAttribute("id");return t==="canvas"?qi(o,n):(t==="input"||t==="select"||t==="textarea")&&Yi(o,n),zi("canvas",o,n,qi),zi("input, textarea, select",o,n,Yi),n}function zi(o,n,e,t){let i=n.querySelectorAll(o);if(i.length){let r=e.querySelectorAll(o);for(let c=0;c<i.length;c++)t(i[c],r[c])}}var En=0;function Yi(o,n){n.type!=="file"&&(n.value=o.value),n.type==="radio"&&n.name&&(n.name=`mat-clone-${n.name}-${En++}`)}function qi(o,n){let e=n.getContext("2d");if(e)try{e.drawImage(o,0,0)}catch{}}function yt(o){let n=o.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function ut(o,n,e){let{top:t,bottom:i,left:r,right:c}=o;return e>=t&&e<=i&&n>=r&&n<=c}function oe(o,n,e){o.top+=n,o.bottom=o.top+o.height,o.left+=e,o.right=o.left+o.width}function $i(o,n,e,t){let{top:i,right:r,bottom:c,left:m,width:_,height:g}=o,I=_*n,N=g*n;return t>i-N&&t<c+N&&e>m-I&&e<r+I}var Ke=class{_document;positions=new Map;constructor(n){this._document=n}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:yt(e)})})}handleScroll(n){let e=ee(n),t=this.positions.get(e);if(!t)return null;let i=t.scrollPosition,r,c;if(e===this._document){let g=this.getViewportScrollPosition();r=g.top,c=g.left}else r=e.scrollTop,c=e.scrollLeft;let m=i.top-r,_=i.left-c;return this.positions.forEach((g,I)=>{g.clientRect&&e!==I&&e.contains(I)&&oe(g.clientRect,m,_)}),i.top=r,i.left=c,{top:m,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function ln(o,n){let e=o.rootNodes;if(e.length===1&&e[0].nodeType===n.ELEMENT_NODE)return e[0];let t=n.createElement("div");return e.forEach(i=>t.appendChild(i)),t}function Et(o,n,e){for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];i?o.setProperty(t,i,e?.has(t)?"important":""):o.removeProperty(t)}return o}function Q(o,n){let e=n?"":"none";Et(o.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function ji(o,n,e){Et(o.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},e)}function Xe(o,n){return n&&n!="none"?o+" "+n:o}function Ki(o,n){o.style.width=`${n.width}px`,o.style.height=`${n.height}px`,o.style.transform=Ze(n.left,n.top)}function Ze(o,n){return`translate3d(${Math.round(o)}px, ${Math.round(n)}px, 0)`}function Xi(o){let n=o.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(o)*n}function Sn(o){let n=getComputedStyle(o),e=ft(n,"transition-property"),t=e.find(m=>m==="transform"||m==="all");if(!t)return 0;let i=e.indexOf(t),r=ft(n,"transition-duration"),c=ft(n,"transition-delay");return Xi(r[i])+Xi(c[i])}function ft(o,n){return o.getPropertyValue(n).split(",").map(t=>t.trim())}var bn=new Set(["position"]),gt=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(n,e,t,i,r,c,m,_,g,I){this._document=n,this._rootElement=e,this._direction=t,this._initialDomRect=i,this._previewTemplate=r,this._previewClass=c,this._pickupPositionOnPage=m,this._initialTransform=_,this._zIndex=g,this._renderer=I}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),Zi(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return Sn(this._preview)}addEventListener(n,e){return this._renderer.listen(this._preview,n,e)}_createPreview(){let n=this._previewTemplate,e=this._previewClass,t=n?n.template:null,i;if(t&&n){let r=n.matchSize?this._initialDomRect:null,c=n.viewContainer.createEmbeddedView(t,n.context);c.detectChanges(),i=ln(c,this._document),this._previewEmbeddedView=c,n.matchSize?Ki(i,r):i.style.transform=Ze(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=an(this._rootElement),Ki(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return Et(i.style,{"pointer-events":"none",margin:Zi(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},bn),Q(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(r=>i.classList.add(r)):i.classList.add(e)),i}};function Zi(o){return"showPopover"in o}var Dn={passive:!0},Qi={passive:!1},Tn={passive:!1,capture:!0},Pn=800,Ji=new Set(["position"]),xt=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=ot(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new k;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=j.EMPTY;_pointerUpSubscription=j.EMPTY;_scrollSubscription=j.EMPTY;_resizeSubscription=j.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(e=>Q(e,n)))}_disabled=!1;beforeStarted=new k;started=new k;released=new k;ended=new k;entered=new k;exited=new k;dropped=new k;moved=this._moveEvents;data;constrainPosition;constructor(n,e,t,i,r,c,m){this._config=e,this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=c,this._renderer=m,this.withRootElement(n).withParent(e.parentDragRef||null),this._parentPositions=new Ke(t),c.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(t=>Y(t)),this._handles.forEach(t=>Q(t,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){let e=Y(n);return e!==this._rootElement&&(this._removeRootElementListeners(),this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[z(this._renderer,e,"mousedown",this._pointerDown,Qi),z(this._renderer,e,"touchstart",this._pointerDown,Dn),z(this._renderer,e,"dragstart",this._nativeDragStart,Qi)]),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?Y(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),Q(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),Q(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){let n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){let n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=n=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(n);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,n)}else this.disabled||this._initializeDragSequence(this._rootElement,n)};_pointerMove=n=>{let e=this._getPointerPositionOnPage(n);if(!this._hasStartedDragging()){let i=Math.abs(e.x-this._pickupPositionOnPage.x),r=Math.abs(e.y-this._pickupPositionOnPage.y);if(i+r>=this._config.dragStartThreshold){let m=Date.now()>=this._dragStartTime+this._getDragStartDelay(n),_=this._dropContainer;if(!m){this._endDragSequence(n);return}(!_||!_.isDragging()&&!_.isReceiving())&&(n.cancelable&&n.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(n)))}return}n.cancelable&&n.preventDefault();let t=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t,e);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=t.x-i.x+this._passiveTransform.x,r.y=t.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:n,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})};_pointerUp=n=>{this._endDragSequence(n)};_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){ie(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),t=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=z(this._renderer,e,"selectstart",In,Tn)}),t){let i=this._rootElement,r=i.parentNode,c=this._placeholder=this._createPlaceholderElement(),m=this._anchor=this._anchor||this._document.createComment("");r.insertBefore(m,i),this._initialTransform=i.style.transform||"",this._preview=new gt(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,e)),ji(i,!1,Ji),this._document.body.appendChild(r.replaceChild(c,i)),this.started.next({source:this,event:n}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(n,e){this._parentDragRef&&e.stopPropagation();let t=this.isDragging(),i=ie(e),r=!i&&e.button!==0,c=this._rootElement,m=ee(e),_=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+Pn>Date.now(),g=i?oi(e):ni(e);if(m&&m.draggable&&e.type==="mousedown"&&e.preventDefault(),t||r||_||g)return;if(this._handles.length){let H=c.style;this._rootElementTapHighlight=H.webkitTapHighlightColor||"",H.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(H=>this._updateOnScroll(H)),this._boundaryElement&&(this._boundaryRect=yt(this._boundaryElement));let I=this._previewTemplate;this._pickupPositionInElement=I&&I.template&&!I.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,e);let N=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:N.x,y:N.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(n){ji(this._rootElement,!0,Ji),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,t=e.getItemIndex(this),i=this._getPointerPositionOnPage(n),r=this._getDragDistance(i),c=e._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:r,dropPoint:i,event:n}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:c,distance:r,dropPoint:i,event:n}),e.drop(this,t,this._initialIndex,this._initialContainer,c,r,i,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:e},{x:t,y:i}){let r=this._initialContainer._getSiblingContainerFromPosition(this,n,e);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,e)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=r,this._dropContainer.enter(this,n,e,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,i),this._dropContainer._sortItem(this,n,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,e):this._applyPreviewTransform(n-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{let i=m=>{(!m||this._preview&&ee(m)===this._preview.element&&m.propertyName==="transform")&&(c(),t(),clearTimeout(r))},r=setTimeout(i,e*1.5),c=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let n=this._placeholderTemplate,e=n?n.template:null,t;return e?(this._placeholderRef=n.viewContainer.createEmbeddedView(e,n.context),this._placeholderRef.detectChanges(),t=ln(this._placeholderRef,this._document)):t=an(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(n,e,t){let i=e===this._rootElement?null:e,r=i?i.getBoundingClientRect():n,c=ie(t)?t.targetTouches[0]:t,m=this._getViewportScrollPosition(),_=c.pageX-r.left-m.left,g=c.pageY-r.top-m.top;return{x:r.left-n.left+_,y:r.top-n.top+g}}_getPointerPositionOnPage(n){let e=this._getViewportScrollPosition(),t=ie(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,i=t.pageX-e.left,r=t.pageY-e.top;if(this._ownerSVGElement){let c=this._ownerSVGElement.getScreenCTM();if(c){let m=this._ownerSVGElement.createSVGPoint();return m.x=i,m.y=r,m.matrixTransform(c.inverse())}}return{x:i,y:r}}_getConstrainedPointerPosition(n){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:t,y:i}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if(this.lockAxis==="x"||e==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:r,y:c}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,m=this._boundaryRect,{width:_,height:g}=this._getPreviewRect(),I=m.top+c,N=m.bottom-(g-c),H=m.left+r,Je=m.right-(_-r);t=en(t,H,Je),i=en(i,I,N)}return{x:t,y:i}}_updatePointerDirectionDelta(n){let{x:e,y:t}=n,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,c=Math.abs(e-r.x),m=Math.abs(t-r.y);return c>this._config.pointerDirectionChangeThreshold&&(i.x=e>r.x?1:-1,r.x=e),m>this._config.pointerDirectionChangeThreshold&&(i.y=t>r.y?1:-1,r.y=t),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,Q(this._rootElement,n))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(n=>n()),this._rootElementCleanups=void 0}_applyRootElementTransform(n,e){let t=1/this.scale,i=Ze(n*t,e*t),r=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=r.transform&&r.transform!="none"?r.transform:""),r.transform=Xe(i,this._initialTransform)}_applyPreviewTransform(n,e){let t=this._previewTemplate?.template?void 0:this._initialTransform,i=Ze(n,e);this._preview.setTransform(Xe(i,t))}_getDragDistance(n){let e=this._pickupPositionOnPage;return e?{x:n.x-e.x,y:n.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:e}=this._passiveTransform;if(n===0&&e===0||this.isDragging()||!this._boundaryElement)return;let t=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||t.width===0&&t.height===0)return;let r=i.left-t.left,c=t.right-i.right,m=i.top-t.top,_=t.bottom-i.bottom;i.width>t.width?(r>0&&(n+=r),c>0&&(n-=c)):n=0,i.height>t.height?(m>0&&(e+=m),_>0&&(e-=_)):e=0,(n!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:n})}_getDragStartDelay(n){let e=this.dragStartDelay;return typeof e=="number"?e:ie(n)?e.touch:e?e.mouse:0}_updateOnScroll(n){let e=this._parentPositions.handleScroll(n);if(e){let t=ee(n);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&oe(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=_e(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,e){let t=this._previewContainer||"global";if(t==="parent")return n;if(t==="global"){let i=this._document;return e||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Y(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=n=>{if(this._handles.length){let e=this._getTargetHandle(n);e&&!this._disabledHandles.has(e)&&!this.disabled&&n.preventDefault()}else this.disabled||n.preventDefault()};_getTargetHandle(n){return this._handles.find(e=>n.target&&(n.target===e||e.contains(n.target)))}};function en(o,n,e){return Math.max(n,Math.min(e,o))}function ie(o){return o.type[0]==="t"}function In(o){o.preventDefault()}function J(o,n,e){let t=tn(n,o.length-1),i=tn(e,o.length-1);if(t===i)return;let r=o[t],c=i<t?-1:1;for(let m=t;m!==i;m+=c)o[m]=o[m+c];o[i]=r}function tn(o,n){return Math.max(0,Math.min(n,o))}var Qe=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(n){this._dragDropRegistry=n}_previousSwap={drag:null,delta:0,overlaps:!1};start(n){this.withItems(n)}sort(n,e,t,i){let r=this._itemPositions,c=this._getItemIndexFromPointerPosition(n,e,t,i);if(c===-1&&r.length>0)return null;let m=this.orientation==="horizontal",_=r.findIndex(V=>V.drag===n),g=r[c],I=r[_].clientRect,N=g.clientRect,H=_>c?1:-1,Je=this._getItemOffsetPx(I,N,H),vn=this._getSiblingOffsetPx(_,r,H),wn=r.slice();return J(r,_,c),r.forEach((V,yn)=>{if(wn[yn]===V)return;let Pt=V.drag===n,et=Pt?Je:vn,It=Pt?n.getPlaceholderElement():V.drag.getRootElement();V.offset+=et;let kt=Math.round(V.offset*(1/V.drag.scale));m?(It.style.transform=Xe(`translate3d(${kt}px, 0, 0)`,V.initialTransform),oe(V.clientRect,0,et)):(It.style.transform=Xe(`translate3d(0, ${kt}px, 0)`,V.initialTransform),oe(V.clientRect,et,0))}),this._previousSwap.overlaps=ut(N,e,t),this._previousSwap.drag=g.drag,this._previousSwap.delta=m?i.x:i.y,{previousIndex:_,currentIndex:c}}enter(n,e,t,i){let r=i==null||i<0?this._getItemIndexFromPointerPosition(n,e,t):i,c=this._activeDraggables,m=c.indexOf(n),_=n.getPlaceholderElement(),g=c[r];if(g===n&&(g=c[r+1]),!g&&(r==null||r===-1||r<c.length-1)&&this._shouldEnterAsFirstChild(e,t)&&(g=c[0]),m>-1&&c.splice(m,1),g&&!this._dragDropRegistry.isDragging(g)){let I=g.getRootElement();I.parentElement.insertBefore(_,I),c.splice(r,0,n)}else this._element.appendChild(_),c.push(n);_.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables?.forEach(n=>{let e=n.getRootElement();if(e){let t=this._itemPositions.find(i=>i.drag===n)?.initialTransform;e.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===n)}updateOnScroll(n,e){this._itemPositions.forEach(({clientRect:t})=>{oe(t,n,e)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(n){this._element=n}_cacheItemPositions(){let n=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let t=e.getVisibleElement();return{drag:e,offset:0,initialTransform:t.style.transform||"",clientRect:yt(t)}}).sort((e,t)=>n?e.clientRect.left-t.clientRect.left:e.clientRect.top-t.clientRect.top)}_getItemOffsetPx(n,e,t){let i=this.orientation==="horizontal",r=i?e.left-n.left:e.top-n.top;return t===-1&&(r+=i?e.width-n.width:e.height-n.height),r}_getSiblingOffsetPx(n,e,t){let i=this.orientation==="horizontal",r=e[n].clientRect,c=e[n+t*-1],m=r[i?"width":"height"]*t;if(c){let _=i?"left":"top",g=i?"right":"bottom";t===-1?m-=c.clientRect[_]-r[g]:m+=r[_]-c.clientRect[g]}return m}_shouldEnterAsFirstChild(n,e){if(!this._activeDraggables.length)return!1;let t=this._itemPositions,i=this.orientation==="horizontal";if(t[0].drag!==this._activeDraggables[0]){let c=t[t.length-1].clientRect;return i?n>=c.right:e>=c.bottom}else{let c=t[0].clientRect;return i?n<=c.left:e<=c.top}}_getItemIndexFromPointerPosition(n,e,t,i){let r=this.orientation==="horizontal",c=this._itemPositions.findIndex(({drag:m,clientRect:_})=>{if(m===n)return!1;if(i){let g=r?i.x:i.y;if(m===this._previousSwap.drag&&this._previousSwap.overlaps&&g===this._previousSwap.delta)return!1}return r?e>=Math.floor(_.left)&&e<Math.floor(_.right):t>=Math.floor(_.top)&&t<Math.floor(_.bottom)});return c===-1||!this._sortPredicate(c,n)?-1:c}},Ct=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(n,e){this._document=n,this._dragDropRegistry=e}start(n){let e=this._element.childNodes;this._relatedNodes=[];for(let t=0;t<e.length;t++){let i=e[t];this._relatedNodes.push([i,i.nextSibling])}this.withItems(n)}sort(n,e,t,i){let r=this._getItemIndexFromPointerPosition(n,e,t),c=this._previousSwap;if(r===-1||this._activeItems[r]===n)return null;let m=this._activeItems[r];if(c.drag===m&&c.overlaps&&c.deltaX===i.x&&c.deltaY===i.y)return null;let _=this.getItemIndex(n),g=n.getPlaceholderElement(),I=m.getRootElement();r>_?I.after(g):I.before(g),J(this._activeItems,_,r);let N=this._getRootNode().elementFromPoint(e,t);return c.deltaX=i.x,c.deltaY=i.y,c.drag=m,c.overlaps=I===N||I.contains(N),{previousIndex:_,currentIndex:r}}enter(n,e,t,i){let r=i==null||i<0?this._getItemIndexFromPointerPosition(n,e,t):i;r===-1&&(r=this._getClosestItemIndexToPointer(n,e,t));let c=this._activeItems[r],m=this._activeItems.indexOf(n);m>-1&&this._activeItems.splice(m,1),c&&!this._dragDropRegistry.isDragging(c)?(this._activeItems.splice(r,0,n),c.getRootElement().before(n.getPlaceholderElement())):(this._activeItems.push(n),this._element.appendChild(n.getPlaceholderElement()))}withItems(n){this._activeItems=n.slice()}withSortPredicate(n){this._sortPredicate=n}reset(){let n=this._element,e=this._previousSwap;for(let t=this._relatedNodes.length-1;t>-1;t--){let[i,r]=this._relatedNodes[t];i.parentNode===n&&i.nextSibling!==r&&(r===null?n.appendChild(i):r.parentNode===n&&n.insertBefore(i,r))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(n){return this._activeItems.indexOf(n)}updateOnScroll(){this._activeItems.forEach(n=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(n){n!==this._element&&(this._element=n,this._rootNode=void 0)}_getItemIndexFromPointerPosition(n,e,t){let i=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(t)),r=i?this._activeItems.findIndex(c=>{let m=c.getRootElement();return i===m||m.contains(i)}):-1;return r===-1||!this._sortPredicate(r,n)?-1:r}_getRootNode(){return this._rootNode||(this._rootNode=_e(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(n,e,t){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,r=-1;for(let c=0;c<this._activeItems.length;c++){let m=this._activeItems[c];if(m!==n){let{x:_,y:g}=m.getRootElement().getBoundingClientRect(),I=Math.hypot(e-_,t-g);I<i&&(i=I,r=c)}}return r}},nn=.05,sn=.05,U=function(o){return o[o.NONE=0]="NONE",o[o.UP=1]="UP",o[o.DOWN=2]="DOWN",o}(U||{}),F=function(o){return o[o.NONE=0]="NONE",o[o.LEFT=1]="LEFT",o[o.RIGHT=2]="RIGHT",o}(F||{}),vt=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new k;entered=new k;exited=new k;dropped=new k;sorted=new k;receivingStarted=new k;receivingStopped=new k;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=j.EMPTY;_verticalScrollDirection=U.NONE;_horizontalScrollDirection=F.NONE;_scrollNode;_stopScrollTimers=new k;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(n,e,t,i,r){this._dragDropRegistry=e,this._ngZone=i,this._viewportRuler=r;let c=this.element=Y(n);this._document=t,this.withOrientation("vertical").withElementContainer(c),e.registerDropContainer(this),this._parentPositions=new Ke(t)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,e,t,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(n)),this._sortStrategy.enter(n,e,t,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,e,t,i,r,c,m,_={}){this._reset(),this.dropped.next({item:n,currentIndex:e,previousIndex:t,container:this,previousContainer:i,isPointerOverContainer:r,distance:c,dropPoint:m,event:_})}withItems(n){let e=this._draggables;return this._draggables=n,n.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(i=>i.isDragging()).every(i=>n.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._direction=n,this._sortStrategy instanceof Qe&&(this._sortStrategy.direction=n),this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){if(n==="mixed")this._sortStrategy=new Ct(this._document,this._dragDropRegistry);else{let e=new Qe(this._dragDropRegistry);e.direction=this._direction,e.orientation=n,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,t)=>this.sortPredicate(e,t,this)),this}withScrollableParents(n){let e=this._container;return this._scrollableElements=n.indexOf(e)===-1?[e,...n]:n.slice(),this}withElementContainer(n){if(n===this._container)return this;let e=Y(this.element),t=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(n);return t>-1&&this._scrollableElements.splice(t,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(n),this._cachedShadowRoot=null,this._scrollableElements.unshift(n),this._container=n,this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,e,t,i){if(this.sortingDisabled||!this._domRect||!$i(this._domRect,nn,e,t))return;let r=this._sortStrategy.sort(n,e,t,i);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,e){if(this.autoScrollDisabled)return;let t,i=U.NONE,r=F.NONE;if(this._parentPositions.positions.forEach((c,m)=>{m===this._document||!c.clientRect||t||$i(c.clientRect,nn,n,e)&&([i,r]=kn(m,c.clientRect,this._direction,n,e),(i||r)&&(t=m))}),!i&&!r){let{width:c,height:m}=this._viewportRuler.getViewportSize(),_={width:c,height:m,top:0,right:c,bottom:m,left:0};i=dn(_,e),r=cn(_,n),t=window}t&&(i!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=t,(i||r)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let n=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let n=this._container.style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),Ft(0,Mt).pipe(q(this._stopScrollTimers)).subscribe(()=>{let n=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===U.UP?n.scrollBy(0,-e):this._verticalScrollDirection===U.DOWN&&n.scrollBy(0,e),this._horizontalScrollDirection===F.LEFT?n.scrollBy(-e,0):this._horizontalScrollDirection===F.RIGHT&&n.scrollBy(e,0)})};_isOverContainer(n,e){return this._domRect!=null&&ut(this._domRect,n,e)}_getSiblingContainerFromPosition(n,e,t){return this._siblings.find(i=>i._canReceive(n,e,t))}_canReceive(n,e,t){if(!this._domRect||!ut(this._domRect,e,t)||!this.enterPredicate(n,this))return!1;let i=this._getShadowRoot().elementFromPoint(e,t);return i?i===this._container||this._container.contains(i):!1}_startReceiving(n,e){let t=this._activeSiblings;!t.has(n)&&e.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(t.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:e}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(n);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let n=_e(this._container);this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let n=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,n))}};function dn(o,n){let{top:e,bottom:t,height:i}=o,r=i*sn;return n>=e-r&&n<=e+r?U.UP:n>=t-r&&n<=t+r?U.DOWN:U.NONE}function cn(o,n){let{left:e,right:t,width:i}=o,r=i*sn;return n>=e-r&&n<=e+r?F.LEFT:n>=t-r&&n<=t+r?F.RIGHT:F.NONE}function kn(o,n,e,t,i){let r=dn(n,i),c=cn(n,t),m=U.NONE,_=F.NONE;if(r){let g=o.scrollTop;r===U.UP?g>0&&(m=U.UP):o.scrollHeight-g>o.clientHeight&&(m=U.DOWN)}if(c){let g=o.scrollLeft;e==="rtl"?c===F.RIGHT?g<0&&(_=F.RIGHT):o.scrollWidth+g>o.clientWidth&&(_=F.LEFT):c===F.LEFT?g>0&&(_=F.LEFT):o.scrollWidth-g>o.clientWidth&&(_=F.RIGHT)}return[m,_]}var ne={capture:!0},ht={passive:!1,capture:!0},Rn=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=X({type:o,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(t,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return o})(),St=(()=>{class o{_ngZone=D(ae);_document=D(mt);_styleLoader=D(ri);_renderer=D(rt).createRenderer(null,null);_cleanupDocumentTouchmove;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=ot([]);_globalListeners;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new k;pointerUp=new k;scroll=new k;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=z(this._renderer,this._document,"touchmove",this._persistentTouchmoveListener,ht)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(e,t){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(Rn),this._activeDragInstances.update(i=>[...i,e]),this._activeDragInstances().length===1)){let i=t.type.startsWith("touch"),r=m=>this.pointerUp.next(m),c=[["scroll",m=>this.scroll.next(m),ne],["selectstart",this._preventDefaultWhileDragging,ht]];i?c.push(["touchend",r,ne],["touchcancel",r,ne]):c.push(["mouseup",r,ne]),i||c.push(["mousemove",m=>this.pointerMove.next(m),ht]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=c.map(([m,_,g])=>z(this._renderer,this._document,m,_,g))})}}stopDragging(e){this._activeDragInstances.update(t=>{let i=t.indexOf(e);return i>-1?(t.splice(i,1),[...t]):t}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let t=[this.scroll];return e&&e!==this._document&&t.push(new tt(i=>this._ngZone.runOutsideAngular(()=>{let r=z(this._renderer,e,"scroll",c=>{this._activeDragInstances().length&&i.next(c)},ne);return()=>{r()}}))),re(...t)}registerDirectiveNode(e,t){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,t)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners?.forEach(e=>e()),this._globalListeners=void 0}static \u0275fac=function(t){return new(t||o)};static \u0275prov=nt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),Mn={dragStartThreshold:5,pointerDirectionChangeThreshold:5},bt=(()=>{class o{_document=D(mt);_ngZone=D(ae);_viewportRuler=D(xi);_dragDropRegistry=D(St);_renderer=D(rt).createRenderer(null,null);constructor(){}createDrag(e,t=Mn){return new xt(e,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new vt(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(t){return new(t||o)};static \u0275prov=nt({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})(),wt=new K("CDK_DRAG_PARENT");var mn=new K("CdkDragHandle"),pn=(()=>{class o{element=D(le);_parentDrag=D(wt,{optional:!0,skipSelf:!0});_dragDropRegistry=D(St);_stateChanges=new k;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let t=this._dragDropRegistry.getDragDirectiveForNode(e);if(t){this._parentDrag=t,t._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(t){return new(t||o)};static \u0275dir=se({type:o,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",Z]},features:[me([{provide:mn,useExisting:o}])]})}return o})(),_n=new K("CDK_DRAG_CONFIG"),fn=new K("CdkDropList"),hn=(()=>{class o{element=D(le);dropContainer=D(fn,{optional:!0,skipSelf:!0});_ngZone=D(ae);_viewContainerRef=D(Gt);_dir=D(_t,{optional:!0});_changeDetectorRef=D(ct);_selfHandle=D(mn,{optional:!0,self:!0});_parentDrag=D(wt,{optional:!0,skipSelf:!0});_dragDropRegistry=D(St);_destroyed=new k;_handles=new Rt([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new G;released=new G;ended=new G;entered=new G;exited=new G;dropped=new G;moved=new tt(e=>{let t=this._dragRef.moved.pipe(Ot(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(e);return()=>{t.unsubscribe()}});_injector=D(Vt);constructor(){let e=this.dropContainer,t=D(_n,{optional:!0}),i=D(bt);this._dragRef=i.createDrag(this.element,{dragStartThreshold:t&&t.dragStartThreshold!=null?t.dragStartThreshold:5,pointerDirectionChangeThreshold:t&&t.pointerDirectionChangeThreshold!=null?t.pointerDirectionChangeThreshold:5,zIndex:t?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),t&&this._assignDefaults(t),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(q(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){Ut(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let t=e.rootElementSelector,i=e.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let t=this._handles.getValue();t.push(e),this._handles.next(t)}_removeHandle(e){let t=this._handles.getValue(),i=t.indexOf(e);i>-1&&(t.splice(i,1),this._handles.next(t))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,t=e;this.rootElementSelector&&(t=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):Y(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let t=this._dir,i=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,c=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof i=="object"&&i?i:pt(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(c).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe(Nt(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let t=this.element.nativeElement.parentElement;for(;t;){let i=this._dragDropRegistry.getDragDirectiveForNode(t);if(i){e.withParent(i._dragRef);break}t=t.parentElement}})}_handleEvents(e){e.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),e.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(e){let{lockAxis:t,dragStartDelay:i,constrainPosition:r,previewClass:c,boundaryElement:m,draggingDisabled:_,rootElementSelector:g,previewContainer:I}=e;this.disabled=_??!1,this.dragStartDelay=i||0,t&&(this.lockAxis=t),r&&(this.constrainPosition=r),c&&(this.previewClass=c),m&&(this.boundaryElement=m),g&&(this.rootElementSelector=g),I&&(this.previewContainer=I)}_setupHandlesListener(){this._handles.pipe(At(e=>{let t=e.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),Wt(e=>re(...e.map(t=>t._stateChanges.pipe(it(t))))),q(this._destroyed)).subscribe(e=>{let t=this._dragRef,i=e.element.nativeElement;e.disabled?t.disableHandle(i):t.enableHandle(i)})}static \u0275fac=function(t){return new(t||o)};static \u0275dir=se({type:o,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){t&2&&M("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",Z],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",Kt]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[me([{provide:wt,useExisting:o}]),Bt]})}return o})(),on=new K("CdkDropListGroup");var un=(()=>{class o{element=D(le);_changeDetectorRef=D(ct);_scrollDispatcher=D(gi);_dir=D(_t,{optional:!0});_group=D(on,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new k;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=D(li).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new G;entered=new G;exited=new G;sorted=new G;_unsortedItems=new Set;constructor(){let e=D(bt),t=D(_n,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(i,r)=>this.enterPredicate(i.data,r.data),this._dropListRef.sortPredicate=(i,r,c)=>this.sortPredicate(i,r.data,c.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),o._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef))}removeItem(e){if(this._unsortedItems.delete(e),this._latestSortedRefs){let t=this._latestSortedRefs.indexOf(e._dragRef);t>-1&&(this._latestSortedRefs.splice(t,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((e,t)=>e._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=o._dropLists.indexOf(this);e>-1&&o._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(it(this._dir.value),q(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{let t=ai(this.connectedTo).map(i=>{if(typeof i=="string"){let r=o._dropLists.find(c=>c.id===i);return r}return i});if(this._group&&this._group._items.forEach(i=>{t.indexOf(i)===-1&&t.push(i)}),!this._scrollableParentsResolved){let i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let i=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(i)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=pt(this.autoScrollStep,2),e.connectedTo(t.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef)),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),e.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),e.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),re(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:t,draggingDisabled:i,sortingDisabled:r,listAutoScrollDisabled:c,listOrientation:m}=e;this.disabled=i??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=c??!1,this.orientation=m||"vertical",t&&(this.lockAxis=t)}_syncItemsWithRef(e){this._latestSortedRefs=e,this._dropListRef.withItems(e)}static \u0275fac=function(t){return new(t||o)};static \u0275dir=se({type:o,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){t&2&&(zt("id",i.id),M("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",Z],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",Z],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",Z],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[me([{provide:on,useValue:void 0},{provide:fn,useExisting:o}])]})}return o})();var gn=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=Ht({type:o});static \u0275inj=Lt({providers:[bt],imports:[Ci]})}return o})();var xn=o=>({field:o}),Dt=(o,n)=>n.name,Tt=(o,n)=>n.value;function Yn(o,n){o&1&&(l(0,"div",8)(1,"mat-icon"),s(2,"inbox"),a(),l(3,"p"),s(4,"No fields have been added to this workflow yet."),a(),l(5,"p",12),s(6,'Add fields in the "Form Fields" tab to see them here.'),a()())}function qn(o,n){if(o&1&&(l(0,"div",25),st(1,26),a()),o&2){let e=n.$implicit;p(3);let t=de(21);at("grid-column","span "+(e.columnSpan||2)),d(),x("ngTemplateOutlet",t)("ngTemplateOutletContext",dt(4,xn,e))}}function $n(o,n){if(o&1&&(l(0,"mat-card",13)(1,"mat-card-content")(2,"div",23),T(3,qn,2,6,"div",24,Dt),a()()()),o&2){let e=p(2);d(3),P(e.getUngroupedFields())}}function jn(o,n){if(o&1&&(l(0,"mat-panel-description"),s(1),a()),o&2){let e=p(2).$implicit;d(),v(e.description)}}function Kn(o,n){if(o&1&&(l(0,"div",25),st(1,26),a()),o&2){let e=n.$implicit;p(4);let t=de(21);at("grid-column","span "+(e.columnSpan||2)),d(),x("ngTemplateOutlet",t)("ngTemplateOutletContext",dt(4,xn,e))}}function Xn(o,n){if(o&1&&(l(0,"mat-card",27)(1,"mat-expansion-panel",28)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),s(4),a(),C(5,jn,2,1,"mat-panel-description"),a(),l(6,"div",23),T(7,Kn,2,6,"div",24,Dt),a()()()),o&2){let e=p().$implicit,t=p(2);d(),x("expanded",!e.collapsed)("hideToggle",!e.collapsible),d(3),v(e.title||e.name),d(),f(e.description?5:-1),d(2),P(t.getFieldsInGroup(e.name))}}function Zn(o,n){if(o&1&&C(0,Xn,9,4,"mat-card",27),o&2){let e=n.$implicit,t=p(2);f(t.getFieldsInGroup(e.name).length>0?0:-1)}}function Qn(o,n){if(o&1&&(l(0,"form",9),C(1,$n,5,0,"mat-card",13),T(2,Zn,1,1,null,null,Dt),l(4,"mat-card",13)(5,"mat-card-content")(6,"mat-form-field",14)(7,"mat-label"),s(8,"Comments (Optional)"),a(),O(9,"textarea",15),a()()(),l(10,"mat-card",13)(11,"mat-card-content")(12,"div",16)(13,"label",17),s(14,"Attachments (Optional)"),a(),l(15,"div",18)(16,"mat-icon"),s(17,"cloud_upload"),a(),l(18,"p"),s(19,"Drag and drop files here or click to browse"),a(),O(20,"input",19),a()()()(),l(21,"div",20)(22,"button",21)(23,"mat-icon"),s(24,"drafts"),a(),s(25," Save as Draft "),a(),l(26,"button",22)(27,"mat-icon"),s(28,"send"),a(),s(29," Submit for Approval "),a()()()),o&2){let e=p();x("formGroup",e.previewForm),d(),f(e.getUngroupedFields().length>0?1:-1),d(),P(e.data.fieldGroups)}}function Jn(o,n){o&1&&s(0," * ")}function eo(o,n){o&1&&s(0," (Read Only) ")}function to(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function io(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,Jn,1,0)(4,eo,1,0),a(),O(5,"input",34),C(6,to,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function no(o,n){o&1&&s(0," * ")}function oo(o,n){o&1&&s(0," (Read Only) ")}function ro(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function ao(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,no,1,0)(4,oo,1,0),a(),O(5,"textarea",35),C(6,ro,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function lo(o,n){o&1&&s(0," * ")}function so(o,n){o&1&&s(0," (Read Only) ")}function co(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function mo(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,lo,1,0)(4,so,1,0),a(),O(5,"input",36),C(6,co,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function po(o,n){o&1&&s(0," * ")}function _o(o,n){o&1&&s(0," (Read Only) ")}function fo(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function ho(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,po,1,0)(4,_o,1,0),a(),l(5,"span",37),s(6,"$\xA0"),a(),O(7,"input",36),C(8,fo,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(3),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?8:-1)}}function uo(o,n){o&1&&s(0," * ")}function go(o,n){o&1&&s(0," (Read Only) ")}function xo(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Co(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,uo,1,0)(4,go,1,0),a(),O(5,"input",38),C(6,xo,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function vo(o,n){o&1&&s(0," * ")}function wo(o,n){o&1&&s(0," (Read Only) ")}function yo(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Eo(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,vo,1,0)(4,wo,1,0),a(),O(5,"input",39),C(6,yo,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function So(o,n){o&1&&s(0," * ")}function bo(o,n){o&1&&s(0," (Read Only) ")}function Do(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function To(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,So,1,0)(4,bo,1,0),a(),O(5,"input",40)(6,"mat-datepicker-toggle",41)(7,"mat-datepicker",42,1),C(9,Do,2,1,"mat-hint"),a()),o&2){let e=de(8),t=p().field,i=p();M("readonly-field",i.isFieldReadonly(t)),d(2),w("",t.label," "),d(),f(t.isMandatory?3:-1),d(),f(i.isFieldReadonly(t)?4:-1),d(),x("matDatepicker",e)("formControlName",t.name)("readonly",i.isFieldReadonly(t)),d(),x("for",e)("disabled",i.isFieldReadonly(t)),d(),x("disabled",i.isFieldReadonly(t)),d(2),f(t.helpText?9:-1)}}function Po(o,n){o&1&&s(0," * ")}function Io(o,n){o&1&&s(0," (Read Only) ")}function ko(o,n){if(o&1&&(l(0,"mat-option",44),s(1),a()),o&2){let e=n.$implicit;x("value",e.value),d(),v(e.label)}}function Ro(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Mo(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,Po,1,0)(4,Io,1,0),a(),l(5,"mat-select",43),T(6,ko,2,2,"mat-option",44,Tt),a(),C(8,Ro,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"Select an option")("disabled",t.isFieldReadonly(e)),d(),P(t.getFieldOptions(e)),d(2),f(e.helpText?8:-1)}}function Oo(o,n){o&1&&(l(0,"span",46),s(1,"*"),a())}function Fo(o,n){o&1&&(l(0,"span",47),s(1,"(Read Only)"),a())}function No(o,n){if(o&1&&(l(0,"mat-radio-button",49),s(1),a()),o&2){let e=n.$implicit,t=p(2).field,i=p();x("value",e.value)("disabled",i.isFieldReadonly(t)),d(),v(e.label)}}function Wo(o,n){if(o&1&&(l(0,"p",50),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Ao(o,n){if(o&1&&(l(0,"div",45)(1,"label",17),s(2),C(3,Oo,2,0,"span",46)(4,Fo,2,0,"span",47),a(),l(5,"mat-radio-group",48),T(6,No,2,3,"mat-radio-button",49,Tt),a(),C(8,Wo,2,1,"p",50),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("disabled",t.isFieldReadonly(e)),d(),P(t.getFieldOptions(e)),d(2),f(e.helpText?8:-1)}}function Lo(o,n){o&1&&s(0," (Read Only) ")}function Bo(o,n){if(o&1&&(l(0,"p",50),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Vo(o,n){if(o&1&&(l(0,"div",51)(1,"mat-checkbox",48),s(2),C(3,Lo,1,0),a(),C(4,Bo,2,1,"p",50),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(),x("formControlName",e.name)("disabled",t.isFieldReadonly(e)),d(),w("",e.label," "),d(),f(t.isFieldReadonly(e)?3:-1),d(),f(e.helpText?4:-1)}}function Uo(o,n){o&1&&(l(0,"span",46),s(1,"*"),a())}function Go(o,n){o&1&&(l(0,"span",47),s(1,"(Read Only)"),a())}function Ho(o,n){if(o&1&&(l(0,"mat-checkbox",42),s(1),a()),o&2){let e=n.$implicit,t=p(2).field,i=p();x("disabled",i.isFieldReadonly(t)),d(),v(e.label)}}function zo(o,n){if(o&1&&(l(0,"p",50),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Yo(o,n){if(o&1&&(l(0,"div",52)(1,"label",17),s(2),C(3,Uo,2,0,"span",46)(4,Go,2,0,"span",47),a(),l(5,"div",53),T(6,Ho,2,2,"mat-checkbox",42,Tt),a(),C(8,zo,2,1,"p",50),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(2),P(t.getFieldOptions(e)),d(2),f(e.helpText?8:-1)}}function qo(o,n){o&1&&(l(0,"span",46),s(1,"*"),a())}function $o(o,n){o&1&&(l(0,"span",47),s(1,"(Read Only)"),a())}function jo(o,n){if(o&1&&(l(0,"p",50),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Ko(o,n){if(o&1&&(l(0,"div",54)(1,"label",17),s(2),C(3,qo,2,0,"span",46)(4,$o,2,0,"span",47),a(),l(5,"div",55)(6,"button",56)(7,"mat-icon"),s(8,"attach_file"),a(),s(9," Choose File "),a(),l(10,"span",57),s(11,"No file chosen"),a()(),C(12,jo,2,1,"p",50),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(2),x("disabled",t.isFieldReadonly(e)),d(6),f(e.helpText?12:-1)}}function Xo(o,n){o&1&&s(0," * ")}function Zo(o,n){o&1&&s(0," (Read Only) ")}function Qo(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function Jo(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,Xo,1,0)(4,Zo,1,0),a(),O(5,"input",58),C(6,Qo,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"https://")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function er(o,n){o&1&&s(0," * ")}function tr(o,n){o&1&&s(0," (Read Only) ")}function ir(o,n){if(o&1&&(l(0,"mat-hint"),s(1),a()),o&2){let e=p(2).field;d(),v(e.helpText)}}function nr(o,n){if(o&1&&(l(0,"mat-form-field",14)(1,"mat-label"),s(2),C(3,er,1,0)(4,tr,1,0),a(),O(5,"input",34),C(6,ir,2,1,"mat-hint"),a()),o&2){let e=p().field,t=p();M("readonly-field",t.isFieldReadonly(e)),d(2),w("",e.label," "),d(),f(e.isMandatory?3:-1),d(),f(t.isFieldReadonly(e)?4:-1),d(),x("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),d(),f(e.helpText?6:-1)}}function or(o,n){if(o&1&&C(0,io,7,9,"mat-form-field",29)(1,ao,7,9,"mat-form-field",29)(2,mo,7,9,"mat-form-field",29)(3,ho,9,9,"mat-form-field",29)(4,Co,7,9,"mat-form-field",29)(5,Eo,7,9,"mat-form-field",29)(6,To,10,12,"mat-form-field",29)(7,Mo,9,9,"mat-form-field",29)(8,Ao,9,8,"div",30)(9,Vo,5,7,"div",31)(10,Yo,9,6,"div",32)(11,Ko,13,7,"div",33)(12,Jo,7,9,"mat-form-field",29)(13,nr,7,9,"mat-form-field",29),o&2){let e,t=n.field;f((e=t.fieldType||t.type)==="TEXT"?0:e==="TEXTAREA"?1:e==="NUMBER"?2:e==="CURRENCY"?3:e==="EMAIL"?4:e==="PHONE"?5:e==="DATE"?6:e==="SELECT"?7:e==="RADIO"?8:e==="CHECKBOX"?9:e==="CHECKBOX_GROUP"?10:e==="FILE"?11:e==="URL"?12:13)}}var Cn=(()=>{class o{fb;dialogRef;data;previewForm;processedFields=[];constructor(e,t,i){this.fb=e,this.dialogRef=t,this.data=i,this.processedFields=this.processFields(i.fields||[]),this.previewForm=this.buildForm()}processFields(e){return e.map(t=>{let i=t.optionsText?.split(`
`).filter(r=>r.trim()).map((r,c)=>({value:r.trim(),label:r.trim(),displayOrder:c}))||t.options||[];return A(W({},t),{options:i})})}buildForm(){let e={};return this.processedFields.forEach(t=>{let i=[];t.isMandatory&&i.push(te.required),(t.fieldType==="EMAIL"||t.type==="EMAIL")&&i.push(te.email),e[t.name]=["",i]}),this.fb.group(e)}getUngroupedFields(){return this.processedFields.filter(e=>!e.fieldGroupName)}getFieldsInGroup(e){return this.processedFields.filter(t=>t.fieldGroupName===e)}getFieldOptions(e){return e.options&&Array.isArray(e.options)?e.options:e.optionsText?e.optionsText.split(`
`).filter(t=>t.trim()).map(t=>({value:t.trim(),label:t.trim()})):[]}isFieldReadonly(e){return e.readOnly||e.isReadonly||!1}close(){this.dialogRef.close()}static \u0275fac=function(t){return new(t||o)(L(ye),L(yi),L(Ei))};static \u0275cmp=X({type:o,selectors:[["app-workflow-preview-dialog"]],decls:22,vars:4,consts:[["fieldTemplate",""],["picker",""],[1,"preview-dialog"],[1,"dialog-header"],[1,"header-content"],[1,"workflow-icon"],[1,"description"],[1,"preview-badge"],[1,"empty-state"],[3,"formGroup"],["align","end"],["mat-button","",3,"click"],[1,"hint"],[1,"form-card"],["appearance","outline",1,"full-width"],["matInput","","rows","3","placeholder","Add any additional comments..."],[1,"attachments-section"],[1,"field-label"],[1,"file-upload-area"],["type","file","multiple","","disabled",""],[1,"form-actions"],["mat-button","","type","button","disabled",""],["mat-raised-button","","color","primary","type","button","disabled",""],[1,"fields-grid"],[1,"field-wrapper",3,"grid-column"],[1,"field-wrapper"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-card","group-card"],[3,"expanded","hideToggle"],["appearance","outline",1,"full-width",3,"readonly-field"],[1,"radio-field",3,"readonly-field"],[1,"checkbox-field",3,"readonly-field"],[1,"checkbox-group-field",3,"readonly-field"],[1,"file-field",3,"readonly-field"],["matInput","",3,"formControlName","placeholder","readonly"],["matInput","","rows","4",3,"formControlName","placeholder","readonly"],["matInput","","type","number",3,"formControlName","placeholder","readonly"],["matPrefix",""],["matInput","","type","email",3,"formControlName","placeholder","readonly"],["matInput","","type","tel",3,"formControlName","placeholder","readonly"],["matInput","",3,"matDatepicker","formControlName","readonly"],["matIconSuffix","",3,"for","disabled"],[3,"disabled"],[3,"formControlName","placeholder","disabled"],[3,"value"],[1,"radio-field"],[1,"required"],[1,"readonly-badge"],[3,"formControlName","disabled"],[3,"value","disabled"],[1,"hint-text"],[1,"checkbox-field"],[1,"checkbox-group-field"],[1,"checkbox-options"],[1,"file-field"],[1,"file-input-wrapper"],["mat-stroked-button","","type","button",3,"disabled"],[1,"file-hint"],["matInput","","type","url",3,"formControlName","placeholder","readonly"]],template:function(t,i){if(t&1){let r=R();l(0,"div",2)(1,"div",3)(2,"div",4)(3,"mat-icon",5),s(4),a(),l(5,"div")(6,"h2"),s(7),a(),l(8,"p",6),s(9),a()()(),l(10,"div",7)(11,"mat-icon"),s(12,"visibility"),a(),s(13," Preview Mode "),a()(),l(14,"mat-dialog-content"),C(15,Yn,7,0,"div",8)(16,Qn,30,2,"form",9),a(),l(17,"mat-dialog-actions",10)(18,"button",11),y("click",function(){return h(r),u(i.close())}),s(19,"Close Preview"),a()()(),C(20,or,14,1,"ng-template",null,0,jt)}t&2&&(d(4),v(i.data.workflowIcon||"description"),d(3),v(i.data.workflowName||"Untitled Workflow"),d(2),v(i.data.workflowDescription||"No description"),d(6),f(i.processedFields.length===0?15:16))},dependencies:[pe,Zt,Ee,xe,he,Ce,ue,ge,ve,we,Le,Di,bi,ke,Pe,Ie,Ne,Fe,Re,Me,ui,Oe,Ae,We,qe,Ye,fe,Te,De,be,Se,je,$e,Hi,Ui,Gi,Vi,Ai,Li,Bi,si,He,Be,Ve,Ge,Ue,ze],styles:[".preview-dialog[_ngcontent-%COMP%]{min-width:700px;max-width:900px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:1rem 1.5rem;background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;margin:-24px -24px 0}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.workflow-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;opacity:.9}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.dialog-header[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:.25rem 0 0;opacity:.9;font-size:.875rem}.preview-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:#fff3;padding:.5rem 1rem;border-radius:20px;font-size:.875rem}.preview-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}mat-dialog-content[_ngcontent-%COMP%]{padding-top:1.5rem!important;max-height:60vh}.form-card[_ngcontent-%COMP%]{margin-bottom:1rem}.fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem}.field-wrapper[_ngcontent-%COMP%]{min-width:0}.full-width[_ngcontent-%COMP%]{width:100%}.radio-field[_ngcontent-%COMP%], .checkbox-field[_ngcontent-%COMP%], .checkbox-group-field[_ngcontent-%COMP%], .file-field[_ngcontent-%COMP%]{padding:.5rem 0}.field-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:#0009;margin-bottom:.5rem}.required[_ngcontent-%COMP%]{color:#f44336}.hint-text[_ngcontent-%COMP%]{font-size:.75rem;color:#0009;margin:.25rem 0 0}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkbox-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.file-input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.file-hint[_ngcontent-%COMP%]{color:#0009;font-size:.875rem}.attachments-section[_ngcontent-%COMP%]{padding:.5rem 0}.file-upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:2rem;text-align:center;color:#666;cursor:not-allowed;opacity:.7}.file-upload-area[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999}.file-upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0}.file-upload-area[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:1rem 0;border-top:1px solid #eee;margin-top:1rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0 0}.empty-state[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.875rem;opacity:.7}mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;border-top:1px solid #eee}.group-card[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.readonly-field[_ngcontent-%COMP%]{opacity:.7;background-color:#f5f5f5;border-radius:4px}.readonly-badge[_ngcontent-%COMP%]{font-size:.75rem;color:#666;font-style:italic}"]})}return o})();var B=(o,n)=>n.id,rr=(o,n)=>n.value,$=(o,n)=>n.name;function ar(o,n){o&1&&(l(0,"mat-error"),s(1,"Name is required"),a())}function lr(o,n){if(o&1&&(l(0,"mat-option",16)(1,"mat-icon"),s(2),a(),s(3),a()),o&2){let e=n.$implicit;x("value",e),d(2),v(e),d(),w(" ",e," ")}}function sr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),v(e.name)}}function dr(o,n){if(o&1){let e=R();l(0,"div",70),y("click",function(){let i=h(e).$implicit,r=p();return u(r.addField(i.value))}),l(1,"mat-icon"),s(2),a(),l(3,"span"),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.icon),d(2),v(e.label)}}function cr(o,n){o&1&&(l(0,"div",74)(1,"p")(2,"strong"),s(3,"1."),a(),s(4," Click a function to copy its syntax to clipboard"),a(),l(5,"p")(6,"strong"),s(7,"2."),a(),s(8," Use functions in field default values or calculated fields"),a(),l(9,"p")(10,"strong"),s(11,"3."),a(),s(12," Replace "),l(13,"code"),s(14,"fieldName"),a(),s(15," with your actual field names"),a(),l(16,"p")(17,"strong"),s(18,"4."),a(),s(19," Functions can be nested: "),l(20,"code"),s(21,"UPPER(TRIM(fieldName))"),a()(),l(22,"p")(23,"strong"),s(24,"Example:"),a()(),l(25,"code",75),s(26,'IF(amount > 1000, "High Value", "Standard")'),a()())}function mr(o,n){if(o&1){let e=R();l(0,"div",71)(1,"div",72),y("click",function(){h(e);let i=p();return u(i.showUsageGuide=!i.showUsageGuide)}),l(2,"mat-icon"),s(3),a(),l(4,"span"),s(5,"How to use functions"),a()(),C(6,cr,27,0,"div",73),a()}if(o&2){let e=p();d(3),v(e.showUsageGuide?"expand_less":"help_outline"),d(3),x("ngIf",e.showUsageGuide)}}function pr(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a(),l(5,"div",83),s(6),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description),d(2),v(e.category)}}function _r(o,n){if(o&1&&(l(0,"div",79)(1,"mat-icon"),s(2,"search_off"),a(),l(3,"p"),s(4),a()()),o&2){let e=p(2);d(4),w('No functions found for "',e.functionSearch,'"')}}function fr(o,n){if(o&1){let e=R();l(0,"div",43)(1,"div",76)(2,"span"),s(3),a(),l(4,"button",77),y("click",function(){h(e);let i=p();return u(i.functionSearch="")}),l(5,"mat-icon"),s(6,"close"),a()()(),T(7,pr,7,3,"div",78,$),C(9,_r,5,1,"div",79),a()}if(o&2){let e=p();d(3),w("",e.getFilteredFunctions().length," results"),d(4),P(e.getFilteredFunctions()),d(2),f(e.getFilteredFunctions().length===0?9:-1)}}function hr(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description)}}function ur(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description)}}function gr(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description)}}function xr(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description)}}function Cr(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description)}}function vr(o,n){if(o&1){let e=R();l(0,"div",80),y("click",function(){let i=h(e).$implicit,r=p(2);return u(r.insertFunction(i))}),l(1,"div",81),s(2),a(),l(3,"div",82),s(4),a()()}if(o&2){let e=n.$implicit;d(2),v(e.name),d(2),v(e.description)}}function wr(o,n){if(o&1){let e=R();l(0,"mat-accordion",44)(1,"mat-expansion-panel",84),y("opened",function(){h(e);let i=p();return u(i.expandedCategories.string=!0)})("closed",function(){h(e);let i=p();return u(i.expandedCategories.string=!1)}),l(2,"mat-expansion-panel-header")(3,"mat-panel-title")(4,"mat-icon"),s(5,"text_fields"),a(),s(6),a()(),l(7,"div",85),T(8,hr,5,2,"div",78,$),a()(),l(10,"mat-expansion-panel",84),y("opened",function(){h(e);let i=p();return u(i.expandedCategories.number=!0)})("closed",function(){h(e);let i=p();return u(i.expandedCategories.number=!1)}),l(11,"mat-expansion-panel-header")(12,"mat-panel-title")(13,"mat-icon"),s(14,"pin"),a(),s(15),a()(),l(16,"div",85),T(17,ur,5,2,"div",78,$),a()(),l(19,"mat-expansion-panel",84),y("opened",function(){h(e);let i=p();return u(i.expandedCategories.date=!0)})("closed",function(){h(e);let i=p();return u(i.expandedCategories.date=!1)}),l(20,"mat-expansion-panel-header")(21,"mat-panel-title")(22,"mat-icon"),s(23,"calendar_today"),a(),s(24),a()(),l(25,"div",85),T(26,gr,5,2,"div",78,$),a()(),l(28,"mat-expansion-panel",84),y("opened",function(){h(e);let i=p();return u(i.expandedCategories.boolean=!0)})("closed",function(){h(e);let i=p();return u(i.expandedCategories.boolean=!1)}),l(29,"mat-expansion-panel-header")(30,"mat-panel-title")(31,"mat-icon"),s(32,"toggle_on"),a(),s(33),a()(),l(34,"div",85),T(35,xr,5,2,"div",78,$),a()(),l(37,"mat-expansion-panel",84),y("opened",function(){h(e);let i=p();return u(i.expandedCategories.utility=!0)})("closed",function(){h(e);let i=p();return u(i.expandedCategories.utility=!1)}),l(38,"mat-expansion-panel-header")(39,"mat-panel-title")(40,"mat-icon"),s(41,"functions"),a(),s(42),a()(),l(43,"div",85),T(44,Cr,5,2,"div",78,$),a()(),l(46,"mat-expansion-panel",84),y("opened",function(){h(e);let i=p();return u(i.expandedCategories.other=!0)})("closed",function(){h(e);let i=p();return u(i.expandedCategories.other=!1)}),l(47,"mat-expansion-panel-header")(48,"mat-panel-title")(49,"mat-icon"),s(50,"more_horiz"),a(),s(51),a()(),l(52,"div",85),T(53,vr,5,2,"div",78,$),a()()()}if(o&2){let e=p();d(),x("expanded",e.expandedCategories.string),d(5),w(" String Functions (",e.stringFunctions.length,")"),d(2),P(e.stringFunctions),d(2),x("expanded",e.expandedCategories.number),d(5),w(" Number Functions (",e.numberFunctions.length,")"),d(2),P(e.numberFunctions),d(2),x("expanded",e.expandedCategories.date),d(5),w(" Date Functions (",e.dateFunctions.length,")"),d(2),P(e.dateFunctions),d(2),x("expanded",e.expandedCategories.boolean),d(5),w(" Boolean/Logic Functions (",e.booleanFunctions.length,")"),d(2),P(e.booleanFunctions),d(2),x("expanded",e.expandedCategories.utility),d(5),w(" Utility Functions (",e.utilityFunctions.length,")"),d(2),P(e.utilityFunctions),d(2),x("expanded",e.expandedCategories.other),d(5),w(" Other Functions (",e.otherFunctions.length,")"),d(2),P(e.otherFunctions)}}function yr(o,n){o&1&&(l(0,"mat-chip"),s(1,"Required"),a())}function Er(o,n){if(o&1){let e=R();l(0,"mat-form-field",13)(1,"mat-label"),s(2,"Options (one per line)"),a(),l(3,"textarea",95),b("ngModelChange",function(i){h(e);let r=p().$implicit;return S(r.optionsText,i)||(r.optionsText=i),u(i)}),a()()}if(o&2){let e=p().$implicit;d(3),E("ngModel",e.optionsText)}}function Sr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),v(e.title||"Untitled Screen")}}function br(o,n){if(o&1){let e=R();l(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),s(3,"Screen"),a(),l(4,"mat-select",90),b("ngModelChange",function(i){h(e);let r=p().$implicit;return S(r.screenId,i)||(r.screenId=i),u(i)}),l(5,"mat-option",16),s(6,"None"),a(),T(7,Sr,2,2,"mat-option",16,B),a(),l(9,"mat-hint"),s(10,"Assign field to a screen for multi-step forms"),a()()()}if(o&2){let e=p().$implicit,t=p();d(4),E("ngModel",e.screenId),d(),x("value",null),d(2),P(t.screens)}}function Dr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),v(e.title)}}function Tr(o,n){if(o&1){let e=R();l(0,"mat-checkbox",96),b("ngModelChange",function(i){h(e);let r=p().$implicit;return S(r.isLimited,i)||(r.isLimited=i),u(i)}),y("change",function(){h(e);let i=p().$implicit,r=p();return u(r.onLimitedChange(i))}),s(1," Limited "),a()}if(o&2){let e=p().$implicit,t=p();E("ngModel",e.isLimited),x("disabled",!e.isLimited&&t.hasLimitedField())}}function Pr(o,n){if(o&1){let e=R();l(0,"mat-expansion-panel",47)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",86),s(4,"drag_indicator"),a(),l(5,"mat-icon"),s(6),a(),s(7),a(),l(8,"mat-panel-description"),s(9),C(10,yr,2,0,"mat-chip"),a()(),l(11,"div",87)(12,"div",9)(13,"mat-form-field",10)(14,"mat-label"),s(15,"Label"),a(),l(16,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.label,i)||(r.label=i),u(i)}),a()(),l(17,"mat-form-field",10)(18,"mat-label"),s(19,"Name"),a(),l(20,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.name,i)||(r.name=i),u(i)}),a()()(),l(21,"mat-form-field",13)(22,"mat-label"),s(23,"Placeholder"),a(),l(24,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.placeholder,i)||(r.placeholder=i),u(i)}),a()(),l(25,"mat-form-field",13)(26,"mat-label"),s(27,"Value"),a(),l(28,"input",89),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.value,i)||(r.value=i),u(i)}),a(),l(29,"mat-hint"),s(30,"Enter a preset value or use a function (click Functions tab to copy syntax)"),a()(),C(31,Er,4,1,"mat-form-field",13)(32,br,11,2,"div",9),l(33,"div",9)(34,"mat-form-field",10)(35,"mat-label"),s(36,"Field Group"),a(),l(37,"mat-select",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.fieldGroupId,i)||(r.fieldGroupId=i),u(i)}),l(38,"mat-option",16),s(39,"None"),a(),T(40,Dr,2,2,"mat-option",16,B),a()(),l(42,"mat-form-field",10)(43,"mat-label"),s(44,"Column Span"),a(),l(45,"mat-select",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.columnSpan,i)||(r.columnSpan=i),u(i)}),l(46,"mat-option",16),s(47,"1 Column"),a(),l(48,"mat-option",16),s(49,"2 Columns"),a(),l(50,"mat-option",16),s(51,"3 Columns"),a(),l(52,"mat-option",16),s(53,"Full Width"),a()()()(),l(54,"div",21)(55,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.required,i)||(r.required=i),u(i)}),s(56,"Required"),a(),l(57,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.readOnly,i)||(r.readOnly=i),u(i)}),s(58,"Read Only"),a(),l(59,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.hidden,i)||(r.hidden=i),u(i)}),s(60,"Hidden"),a(),l(61,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.isUnique,i)||(r.isUnique=i),u(i)}),s(62,"Unique"),a(),l(63,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.isTitle,i)||(r.isTitle=i),u(i)}),s(64,"Make Title"),a(),l(65,"mat-checkbox",91),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.inSummary,i)||(r.inSummary=i),u(i)}),s(66,"Summary"),a(),C(67,Tr,2,2,"mat-checkbox",92),a(),l(68,"div",93)(69,"button",94),y("click",function(){let i=h(e).$index,r=p();return u(r.removeField(i))}),l(70,"mat-icon"),s(71,"delete"),a(),s(72," Remove "),a()()()()}if(o&2){let e=n.$implicit,t=p();d(6),v(t.getFieldIcon(e.type)),d(),w(" ",e.label||"Untitled Field"," "),d(2),w(" ",e.type," "),d(),f(e.required?10:-1),d(6),E("ngModel",e.label),d(4),E("ngModel",e.name),d(4),E("ngModel",e.placeholder),d(4),E("ngModel",e.value),d(3),f(e.type==="SELECT"||e.type==="MULTISELECT"||e.type==="RADIO"||e.type==="CHECKBOX_GROUP"?31:-1),d(),f(t.screens.length>0?32:-1),d(5),E("ngModel",e.fieldGroupId),d(),x("value",null),d(2),P(t.fieldGroups),d(5),E("ngModel",e.columnSpan),d(),x("value",1),d(2),x("value",2),d(2),x("value",3),d(2),x("value",4),d(3),E("ngModel",e.required),d(2),E("ngModel",e.readOnly),d(2),E("ngModel",e.hidden),d(2),E("ngModel",e.isUnique),d(2),E("ngModel",e.isTitle),d(2),E("ngModel",e.inSummary),d(2),f(t.isFinancialWorkflow()&&t.isAmountField(e.type)?67:-1)}}function Ir(o,n){o&1&&(l(0,"div",48)(1,"mat-icon"),s(2,"touch_app"),a(),l(3,"p"),s(4,"Click on field types to add them to your form"),a()())}function kr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),v(e.title||"Untitled Screen")}}function Rr(o,n){if(o&1){let e=R();l(0,"mat-form-field",13)(1,"mat-label"),s(2,"Screen"),a(),l(3,"mat-select",90),b("ngModelChange",function(i){h(e);let r=p().$implicit;return S(r.screenId,i)||(r.screenId=i),u(i)}),l(4,"mat-option",16),s(5,"None"),a(),T(6,kr,2,2,"mat-option",16,B),a(),l(8,"mat-hint"),s(9,"Assign this group to a screen"),a()()}if(o&2){let e=p().$implicit,t=p();d(3),E("ngModel",e.screenId),d(),x("value",null),d(2),P(t.screens)}}function Mr(o,n){if(o&1){let e=R();l(0,"mat-expansion-panel",51)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),s(3),a(),l(4,"mat-panel-description"),s(5),a()(),l(6,"div",97)(7,"div",9)(8,"mat-form-field",10)(9,"mat-label"),s(10,"Title"),a(),l(11,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.title,i)||(r.title=i),u(i)}),a()(),l(12,"mat-form-field",10)(13,"mat-label"),s(14,"Display Order"),a(),l(15,"input",98),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.displayOrder,i)||(r.displayOrder=i),u(i)}),a()()(),l(16,"mat-form-field",13)(17,"mat-label"),s(18,"Description"),a(),l(19,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.description,i)||(r.description=i),u(i)}),a()(),C(20,Rr,10,2,"mat-form-field",13),l(21,"div",21)(22,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.collapsible,i)||(r.collapsible=i),u(i)}),s(23,"Collapsible"),a(),l(24,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.collapsed,i)||(r.collapsed=i),u(i)}),s(25,"Start Collapsed"),a()(),l(26,"div",99)(27,"button",94),y("click",function(){let i=h(e).$index,r=p();return u(r.removeFieldGroup(i))}),l(28,"mat-icon"),s(29,"delete"),a(),s(30," Remove Group "),a()()()()}if(o&2){let e=n.$implicit,t=p();d(3),v(e.title||"Untitled Group"),d(2),w(" ",t.getFieldsInGroup(e.id).length," fields "),d(6),E("ngModel",e.title),d(4),E("ngModel",e.displayOrder),d(4),E("ngModel",e.description),d(),f(t.screens.length>0?20:-1),d(2),E("ngModel",e.collapsible),d(2),E("ngModel",e.collapsed)}}function Or(o,n){o&1&&(l(0,"div",52)(1,"mat-icon"),s(2,"dashboard"),a(),l(3,"p"),s(4,"No field groups defined. Groups help organize fields into titled sections."),a()())}function Fr(o,n){o&1&&(l(0,"div",100)(1,"mat-icon"),s(2,"info"),a(),l(3,"p"),s(4,"Without screens, the form displays as a single page. Add 2+ screens to create a multi-step wizard."),a()())}function Nr(o,n){if(o&1){let e=R();l(0,"mat-expansion-panel",56)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",86),s(4,"drag_indicator"),a(),l(5,"mat-icon"),s(6),a(),s(7),a(),l(8,"mat-panel-description"),s(9),a()(),l(10,"div",101)(11,"div",9)(12,"mat-form-field",10)(13,"mat-label"),s(14,"Title"),a(),l(15,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.title,i)||(r.title=i),u(i)}),a()(),l(16,"mat-form-field",10)(17,"mat-label"),s(18,"Display Order"),a(),l(19,"input",98),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.displayOrder,i)||(r.displayOrder=i),u(i)}),a()()(),l(20,"mat-form-field",13)(21,"mat-label"),s(22,"Description"),a(),l(23,"input",88),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.description,i)||(r.description=i),u(i)}),a()(),l(24,"mat-form-field",10)(25,"mat-label"),s(26,"Icon"),a(),l(27,"mat-select",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.icon,i)||(r.icon=i),u(i)}),l(28,"mat-option",102),s(29,"view_carousel"),a(),l(30,"mat-option",103),s(31,"article"),a(),l(32,"mat-option",104),s(33,"assignment"),a(),l(34,"mat-option",105),s(35,"description"),a(),l(36,"mat-option",106),s(37,"info"),a(),l(38,"mat-option",107),s(39,"checklist"),a(),l(40,"mat-option",108),s(41,"fact_check"),a(),l(42,"mat-option",109),s(43,"summarize"),a()()(),l(44,"div",110)(45,"button",94),y("click",function(){let i=h(e).$index,r=p();return u(r.removeScreen(i))}),l(46,"mat-icon"),s(47,"delete"),a(),s(48," Remove Screen "),a()()()()}if(o&2){let e=n.$implicit,t=p();d(6),v(e.icon||"view_carousel"),d(),w(" ",e.title||"Untitled Screen"," "),d(2),ce(" ",t.getFieldsInScreen(e.id).length," fields, ",t.getFieldGroupsInScreen(e.id).length," groups "),d(6),E("ngModel",e.title),d(4),E("ngModel",e.displayOrder),d(4),E("ngModel",e.description),d(4),E("ngModel",e.icon)}}function Wr(o,n){o&1&&(l(0,"div",57)(1,"mat-icon"),s(2,"warning"),a(),l(3,"p"),s(4,"Add at least one more screen to enable multi-step navigation."),a()())}function Ar(o,n){if(o&1&&(s(0),qt(1,"currency")),o&2){let e=p().$implicit;w(" - Up to ",$t(1,1,e.amountLimit)," ")}}function Lr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),ce("",e.fullName," (",e.email,")")}}function Br(o,n){if(o&1){let e=R();l(0,"mat-form-field",13)(1,"mat-label"),s(2,"Select User"),a(),l(3,"mat-select",113),b("ngModelChange",function(i){h(e);let r=p().$implicit;return S(r.approverId,i)||(r.approverId=i),u(i)}),y("selectionChange",function(){h(e);let i=p().$implicit,r=p();return u(r.onUserSelected(i))}),T(4,Lr,2,3,"mat-option",16,B),a(),l(6,"mat-hint"),s(7,"Select the approver for this level"),a()()}if(o&2){let e=p().$implicit,t=p();d(3),E("ngModel",e.approverId),d(),P(t.users)}}function Vr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),v(e.name)}}function Ur(o,n){if(o&1){let e=R();l(0,"mat-form-field",13)(1,"mat-label"),s(2,"Select Role"),a(),l(3,"mat-select",90),b("ngModelChange",function(i){h(e);let r=p().$implicit;return S(r.roleId,i)||(r.roleId=i),u(i)}),T(4,Vr,2,2,"mat-option",16,B),a()()}if(o&2){let e=p().$implicit,t=p();d(3),E("ngModel",e.roleId),d(),P(t.roles)}}function Gr(o,n){if(o&1){let e=R();l(0,"mat-expansion-panel",60)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon",86),s(4,"drag_indicator"),a(),s(5),a(),l(6,"mat-panel-description"),s(7),C(8,Ar,2,3),a()(),l(9,"div",111)(10,"div",9)(11,"mat-form-field",10)(12,"mat-label"),s(13,"Level"),a(),l(14,"input",112),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.level,i)||(r.level=i),u(i)}),a(),l(15,"mat-hint"),s(16,"Same level = parallel approval"),a()(),l(17,"mat-form-field",10)(18,"mat-label"),s(19,"Approver Type"),a(),l(20,"mat-select",113),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.approverType,i)||(r.approverType=i),u(i)}),y("selectionChange",function(){let i=h(e).$implicit,r=p();return u(r.onApproverTypeChange(i))}),l(21,"mat-option",114),s(22,"Specific User"),a(),l(23,"mat-option",115),s(24,"Role"),a()()()(),C(25,Br,8,1,"mat-form-field",13)(26,Ur,6,1,"mat-form-field",13),l(27,"div",9)(28,"mat-form-field",10)(29,"mat-label"),s(30,"Amount Limit"),a(),l(31,"input",98),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.amountLimit,i)||(r.amountLimit=i),u(i)}),a(),l(32,"mat-hint"),s(33,"Leave blank for no limit"),a()(),l(34,"mat-form-field",10)(35,"mat-label"),s(36,"Email"),a(),l(37,"input",116),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.email,i)||(r.email=i),u(i)}),a(),l(38,"mat-hint"),s(39),a()()(),l(40,"div",21)(41,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.canEscalate,i)||(r.canEscalate=i),u(i)}),s(42,"Can Escalate"),a(),l(43,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.requireComment,i)||(r.requireComment=i),u(i)}),s(44,"Require Comment"),a(),l(45,"mat-checkbox",90),b("ngModelChange",function(i){let r=h(e).$implicit;return S(r.emailNotification,i)||(r.emailNotification=i),u(i)}),s(46,"Email Notification"),a()(),l(47,"div",117)(48,"button",94),y("click",function(){let i=h(e).$index,r=p();return u(r.removeApprover(i))}),l(49,"mat-icon"),s(50,"delete"),a(),s(51," Remove Level "),a()()()()}if(o&2){let e=n.$implicit,t=p();d(5),ce(" Level ",e.level,": ",t.getApproverDisplayName(e)||"Approver"," "),d(2),w(" ",e.approverType," "),d(),f(e.amountLimit?8:-1),d(6),E("ngModel",e.level),d(6),E("ngModel",e.approverType),d(5),f(e.approverType==="USER"?25:-1),d(),f(e.approverType==="ROLE"?26:-1),d(5),E("ngModel",e.amountLimit),d(6),E("ngModel",e.email),x("readonly",e.approverType==="USER"),d(2),v(e.approverType==="USER"?"Auto-populated from user":"For email notifications"),d(2),E("ngModel",e.canEscalate),d(2),E("ngModel",e.requireComment),d(2),E("ngModel",e.emailNotification)}}function Hr(o,n){o&1&&(l(0,"div",52)(1,"mat-icon"),s(2,"approval"),a(),l(3,"p"),s(4,"No approval levels defined. Add levels to create an approval chain."),a()())}function zr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),v(e.name)}}function Yr(o,n){if(o&1&&s(0),o&2){let e=p().$implicit;w(" (",e.corporateName,") ")}}function qr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),C(2,Yr,1,1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),w("",e.name," "),d(),f(e.corporateName?2:-1)}}function $r(o,n){if(o&1&&s(0),o&2){let e=p().$implicit;w(" (",e.sbuName,") ")}}function jr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),C(2,$r,1,1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),w("",e.name," "),d(),f(e.sbuName?2:-1)}}function Kr(o,n){if(o&1&&s(0),o&2){let e=p().$implicit;w(" (",e.corporateName,") ")}}function Xr(o,n){if(o&1&&(l(0,"mat-option",16),s(1),C(2,Kr,1,1),a()),o&2){let e=n.$implicit;x("value",e.id),d(),w("",e.name," "),d(),f(e.corporateName?2:-1)}}function Zr(o,n){o&1&&(l(0,"p",68),s(1,"No restrictions - All users can access this workflow"),a())}function Qr(o,n){if(o&1&&(l(0,"mat-chip"),s(1),a()),o&2){let e=n.$implicit;d(),v(e)}}function Jr(o,n){if(o&1&&(l(0,"div",69),T(1,Qr,2,1,"mat-chip",null,lt),a()),o&2){let e=p();d(),P(e.getAccessSummary())}}var fl=(()=>{class o{fb;workflowService;userService;departmentService;router;route;snackBar;dialog;isEdit=!1;loading=!1;workflowId=null;workflowName="";formId=null;destroy$=new k;basicForm;fields=[];fieldGroups=[];screens=[];approvers=[];workflowTypes=[];users=[];roles=[];corporates=[];sbus=[];filteredSbus=[];branches=[];filteredBranches=[];departments=[];filteredDepartments=[];functionSearch="";showUsageGuide=!1;icons=["description","assignment","receipt","request_quote","shopping_cart","account_balance","attach_money","credit_card","flight","hotel","directions_car","inventory","local_shipping","build","engineering"];fieldTypes=[{value:"TEXT",label:"Text",icon:"text_fields"},{value:"TEXTAREA",label:"Text Area",icon:"notes"},{value:"NUMBER",label:"Number",icon:"pin"},{value:"EMAIL",label:"Email",icon:"email"},{value:"PHONE",label:"Phone",icon:"phone"},{value:"PASSWORD",label:"Password",icon:"password"},{value:"DATE",label:"Date",icon:"calendar_today"},{value:"DATETIME",label:"Date & Time",icon:"schedule"},{value:"SELECT",label:"Dropdown",icon:"arrow_drop_down_circle"},{value:"MULTISELECT",label:"Multi-Select",icon:"checklist_rtl"},{value:"RADIO",label:"Radio Buttons",icon:"radio_button_checked"},{value:"CHECKBOX",label:"Checkbox",icon:"check_box"},{value:"CHECKBOX_GROUP",label:"Checkbox Group",icon:"checklist"},{value:"FILE",label:"File Upload",icon:"attach_file"},{value:"CURRENCY",label:"Currency",icon:"attach_money"},{value:"URL",label:"URL",icon:"link"},{value:"USER",label:"User Select",icon:"person_search"},{value:"HIDDEN",label:"Hidden Field",icon:"visibility_off"},{value:"LABEL",label:"Label/Text",icon:"label"},{value:"DIVIDER",label:"Divider",icon:"horizontal_rule"}];expandedCategories={string:!0,number:!1,date:!1,boolean:!1,utility:!1,other:!1};stringFunctions=[{name:"UPPER(field)",description:"Convert text to uppercase",syntax:"UPPER(fieldName)"},{name:"LOWER(field)",description:"Convert text to lowercase",syntax:"LOWER(fieldName)"},{name:"TRIM(field)",description:"Remove leading/trailing spaces",syntax:"TRIM(fieldName)"},{name:"LTRIM(field)",description:"Remove leading spaces",syntax:"LTRIM(fieldName)"},{name:"RTRIM(field)",description:"Remove trailing spaces",syntax:"RTRIM(fieldName)"},{name:"CONCAT(a, b)",description:"Join two or more text values",syntax:"CONCAT(field1, field2)"},{name:"CONCAT_WS(sep, a, b)",description:"Join with separator",syntax:'CONCAT_WS("-", field1, field2)'},{name:"LEFT(field, n)",description:"Get first n characters",syntax:"LEFT(fieldName, 5)"},{name:"RIGHT(field, n)",description:"Get last n characters",syntax:"RIGHT(fieldName, 5)"},{name:"SUBSTRING(field, start, len)",description:"Extract part of text",syntax:"SUBSTRING(fieldName, 1, 5)"},{name:"LENGTH(field)",description:"Get text length",syntax:"LENGTH(fieldName)"},{name:"REPLACE(field, old, new)",description:"Replace text",syntax:'REPLACE(fieldName, "old", "new")'},{name:"REPLACE_ALL(field, old, new)",description:"Replace all occurrences",syntax:'REPLACE_ALL(fieldName, "old", "new")'},{name:"CONTAINS(field, text)",description:"Check if text contains value",syntax:'CONTAINS(fieldName, "search")'},{name:"STARTS_WITH(field, text)",description:"Check if text starts with value",syntax:'STARTS_WITH(fieldName, "prefix")'},{name:"ENDS_WITH(field, text)",description:"Check if text ends with value",syntax:'ENDS_WITH(fieldName, "suffix")'},{name:"REVERSE(field)",description:"Reverse text string",syntax:"REVERSE(fieldName)"},{name:"REPEAT(field, n)",description:"Repeat text n times",syntax:"REPEAT(fieldName, 3)"},{name:"PAD_LEFT(field, len, char)",description:"Pad text on left",syntax:'PAD_LEFT(fieldName, 10, "0")'},{name:"PAD_RIGHT(field, len, char)",description:"Pad text on right",syntax:'PAD_RIGHT(fieldName, 10, " ")'},{name:"CAPITALIZE(field)",description:"Capitalize first letter",syntax:"CAPITALIZE(fieldName)"},{name:"TITLE_CASE(field)",description:"Title case all words",syntax:"TITLE_CASE(fieldName)"},{name:"SPLIT(field, sep)",description:"Split text by separator",syntax:'SPLIT(fieldName, ",")'},{name:"JOIN(array, sep)",description:"Join array with separator",syntax:'JOIN(arrayField, ", ")'},{name:"INDEX_OF(field, text)",description:"Find position of text",syntax:'INDEX_OF(fieldName, "search")'},{name:"REGEX_MATCH(field, pattern)",description:"Match regex pattern",syntax:'REGEX_MATCH(fieldName, "\\\\d+")'},{name:"REGEX_REPLACE(field, pattern, rep)",description:"Replace with regex",syntax:'REGEX_REPLACE(fieldName, "\\\\d+", "#")'}];numberFunctions=[{name:"SUM(a, b, ...)",description:"Add numbers together",syntax:"SUM(field1, field2, field3)"},{name:"SUBTRACT(a, b)",description:"Subtract b from a",syntax:"SUBTRACT(field1, field2)"},{name:"MULTIPLY(a, b)",description:"Multiply numbers",syntax:"MULTIPLY(field1, field2)"},{name:"DIVIDE(a, b)",description:"Divide a by b",syntax:"DIVIDE(field1, field2)"},{name:"ROUND(field, decimals)",description:"Round to decimal places",syntax:"ROUND(fieldName, 2)"},{name:"FLOOR(field)",description:"Round down to integer",syntax:"FLOOR(fieldName)"},{name:"CEIL(field)",description:"Round up to integer",syntax:"CEIL(fieldName)"},{name:"TRUNC(field)",description:"Truncate decimal part",syntax:"TRUNC(fieldName)"},{name:"ABS(field)",description:"Get absolute value",syntax:"ABS(fieldName)"},{name:"SIGN(field)",description:"Get sign (-1, 0, 1)",syntax:"SIGN(fieldName)"},{name:"MIN(a, b, ...)",description:"Get minimum value",syntax:"MIN(field1, field2)"},{name:"MAX(a, b, ...)",description:"Get maximum value",syntax:"MAX(field1, field2)"},{name:"AVERAGE(a, b, ...)",description:"Calculate average",syntax:"AVERAGE(field1, field2, field3)"},{name:"MEDIAN(a, b, ...)",description:"Calculate median",syntax:"MEDIAN(field1, field2, field3)"},{name:"COUNT(a, b, ...)",description:"Count non-empty values",syntax:"COUNT(field1, field2, field3)"},{name:"PERCENTAGE(value, total)",description:"Calculate percentage",syntax:"PERCENTAGE(part, total)"},{name:"MOD(a, b)",description:"Get remainder of division",syntax:"MOD(field1, field2)"},{name:"POWER(base, exp)",description:"Raise to power",syntax:"POWER(fieldName, 2)"},{name:"SQRT(field)",description:"Square root",syntax:"SQRT(fieldName)"},{name:"LOG(field)",description:"Natural logarithm",syntax:"LOG(fieldName)"},{name:"LOG10(field)",description:"Base 10 logarithm",syntax:"LOG10(fieldName)"},{name:"EXP(field)",description:"e raised to power",syntax:"EXP(fieldName)"},{name:"CLAMP(field, min, max)",description:"Limit to range",syntax:"CLAMP(fieldName, 0, 100)"},{name:"IS_NUMBER(field)",description:"Check if value is number",syntax:"IS_NUMBER(fieldName)"}];dateFunctions=[{name:"TODAY()",description:"Get current date",syntax:"TODAY()"},{name:"NOW()",description:"Get current date and time",syntax:"NOW()"},{name:"DATE(y, m, d)",description:"Create date from parts",syntax:"DATE(2024, 12, 25)"},{name:"TIME(h, m, s)",description:"Create time from parts",syntax:"TIME(14, 30, 0)"},{name:"DATE_FORMAT(field, format)",description:"Format date",syntax:'DATE_FORMAT(fieldName, "DD/MM/YYYY")'},{name:"DATE_PARSE(text, format)",description:"Parse date from text",syntax:'DATE_PARSE(fieldName, "DD/MM/YYYY")'},{name:"DATE_ADD(field, n, unit)",description:"Add time to date",syntax:'DATE_ADD(fieldName, 7, "days")'},{name:"DATE_SUBTRACT(field, n, unit)",description:"Subtract time from date",syntax:'DATE_SUBTRACT(fieldName, 1, "month")'},{name:"DATE_DIFF(a, b, unit)",description:"Difference between dates",syntax:'DATE_DIFF(startDate, endDate, "days")'},{name:"YEAR(field)",description:"Extract year from date",syntax:"YEAR(fieldName)"},{name:"MONTH(field)",description:"Extract month from date",syntax:"MONTH(fieldName)"},{name:"DAY(field)",description:"Extract day from date",syntax:"DAY(fieldName)"},{name:"HOUR(field)",description:"Extract hour from datetime",syntax:"HOUR(fieldName)"},{name:"MINUTE(field)",description:"Extract minute from datetime",syntax:"MINUTE(fieldName)"},{name:"SECOND(field)",description:"Extract second from datetime",syntax:"SECOND(fieldName)"},{name:"WEEKDAY(field)",description:"Get day of week (1-7)",syntax:"WEEKDAY(fieldName)"},{name:"WEEK_OF_YEAR(field)",description:"Get week number",syntax:"WEEK_OF_YEAR(fieldName)"},{name:"QUARTER(field)",description:"Get quarter (1-4)",syntax:"QUARTER(fieldName)"},{name:"START_OF_MONTH(field)",description:"Get first day of month",syntax:"START_OF_MONTH(fieldName)"},{name:"END_OF_MONTH(field)",description:"Get last day of month",syntax:"END_OF_MONTH(fieldName)"},{name:"START_OF_YEAR(field)",description:"Get first day of year",syntax:"START_OF_YEAR(fieldName)"},{name:"END_OF_YEAR(field)",description:"Get last day of year",syntax:"END_OF_YEAR(fieldName)"},{name:"START_OF_WEEK(field)",description:"Get first day of week",syntax:"START_OF_WEEK(fieldName)"},{name:"IS_WEEKEND(field)",description:"Check if date is weekend",syntax:"IS_WEEKEND(fieldName)"},{name:"IS_WORKDAY(field)",description:"Check if date is workday",syntax:"IS_WORKDAY(fieldName)"},{name:"IS_PAST(field)",description:"Check if date is in past",syntax:"IS_PAST(fieldName)"},{name:"IS_FUTURE(field)",description:"Check if date is in future",syntax:"IS_FUTURE(fieldName)"},{name:"BUSINESS_DAYS(a, b)",description:"Count business days between dates",syntax:"BUSINESS_DAYS(startDate, endDate)"},{name:"ADD_BUSINESS_DAYS(field, n)",description:"Add business days",syntax:"ADD_BUSINESS_DAYS(fieldName, 5)"},{name:"AGE(birthDate)",description:"Calculate age in years",syntax:"AGE(birthDateField)"}];booleanFunctions=[{name:"IF(condition, then, else)",description:"Conditional logic",syntax:'IF(field > 100, "High", "Low")'},{name:"IFS(cond1, val1, ...)",description:"Multiple conditions",syntax:'IFS(field > 100, "High", field > 50, "Medium", true, "Low")'},{name:"AND(a, b, ...)",description:"All conditions must be true",syntax:"AND(condition1, condition2)"},{name:"OR(a, b, ...)",description:"Any condition must be true",syntax:"OR(condition1, condition2)"},{name:"XOR(a, b)",description:"Exclusive OR",syntax:"XOR(condition1, condition2)"},{name:"NOT(condition)",description:"Reverse boolean value",syntax:"NOT(fieldName)"},{name:"TRUE()",description:"Returns true value",syntax:"TRUE()"},{name:"FALSE()",description:"Returns false value",syntax:"FALSE()"},{name:"IS_EMPTY(field)",description:"Check if field is empty",syntax:"IS_EMPTY(fieldName)"},{name:"IS_NOT_EMPTY(field)",description:"Check if field has value",syntax:"IS_NOT_EMPTY(fieldName)"},{name:"IS_NULL(field)",description:"Check if field is null",syntax:"IS_NULL(fieldName)"},{name:"IS_BLANK(field)",description:"Check if empty or whitespace",syntax:"IS_BLANK(fieldName)"},{name:"EQUALS(a, b)",description:"Check if values are equal",syntax:"EQUALS(field1, field2)"},{name:"NOT_EQUALS(a, b)",description:"Check if values differ",syntax:"NOT_EQUALS(field1, field2)"},{name:"GREATER_THAN(a, b)",description:"Check if a > b",syntax:"GREATER_THAN(field1, field2)"},{name:"GREATER_OR_EQUAL(a, b)",description:"Check if a >= b",syntax:"GREATER_OR_EQUAL(field1, field2)"},{name:"LESS_THAN(a, b)",description:"Check if a < b",syntax:"LESS_THAN(field1, field2)"},{name:"LESS_OR_EQUAL(a, b)",description:"Check if a <= b",syntax:"LESS_OR_EQUAL(field1, field2)"},{name:"BETWEEN(field, min, max)",description:"Check if value is in range",syntax:"BETWEEN(fieldName, 10, 100)"},{name:"IN(field, list)",description:"Check if value is in list",syntax:'IN(fieldName, ["A", "B", "C"])'},{name:"NOT_IN(field, list)",description:"Check if value not in list",syntax:'NOT_IN(fieldName, ["X", "Y", "Z"])'},{name:"IS_VALID_EMAIL(field)",description:"Validate email format",syntax:"IS_VALID_EMAIL(emailField)"},{name:"IS_VALID_PHONE(field)",description:"Validate phone format",syntax:"IS_VALID_PHONE(phoneField)"},{name:"IS_VALID_URL(field)",description:"Validate URL format",syntax:"IS_VALID_URL(urlField)"}];utilityFunctions=[{name:"COALESCE(a, b, ...)",description:"Return first non-empty value",syntax:'COALESCE(field1, field2, "default")'},{name:"DEFAULT(field, value)",description:"Set default if empty",syntax:'DEFAULT(fieldName, "N/A")'},{name:"FORMAT_CURRENCY(field, currency)",description:"Format as currency",syntax:'FORMAT_CURRENCY(amount, "USD")'},{name:"FORMAT_NUMBER(field, decimals)",description:"Format number with decimals",syntax:"FORMAT_NUMBER(fieldName, 2)"},{name:"FORMAT_PERCENT(field)",description:"Format as percentage",syntax:"FORMAT_PERCENT(fieldName)"},{name:"TO_NUMBER(field)",description:"Convert text to number",syntax:"TO_NUMBER(fieldName)"},{name:"TO_TEXT(field)",description:"Convert value to text",syntax:"TO_TEXT(fieldName)"},{name:"TO_BOOLEAN(field)",description:"Convert value to boolean",syntax:"TO_BOOLEAN(fieldName)"},{name:"TO_DATE(field)",description:"Convert text to date",syntax:"TO_DATE(fieldName)"},{name:"UUID()",description:"Generate unique identifier",syntax:"UUID()"},{name:"SEQUENCE(prefix)",description:"Generate sequential number",syntax:'SEQUENCE("INV-")'},{name:"CURRENT_USER()",description:"Get current user name",syntax:"CURRENT_USER()"},{name:"CURRENT_USER_EMAIL()",description:"Get current user email",syntax:"CURRENT_USER_EMAIL()"},{name:"CURRENT_USER_ID()",description:"Get current user ID",syntax:"CURRENT_USER_ID()"},{name:"CURRENT_USER_DEPT()",description:"Get current user department",syntax:"CURRENT_USER_DEPT()"},{name:"CURRENT_USER_SBU()",description:"Get current user SBU",syntax:"CURRENT_USER_SBU()"},{name:"FIELD_VALUE(name)",description:"Get value of another field",syntax:'FIELD_VALUE("otherFieldName")'},{name:"LOOKUP(field, source)",description:"Lookup value from data source",syntax:'LOOKUP(fieldName, "employees")'},{name:"TYPE_OF(field)",description:"Get type of value",syntax:"TYPE_OF(fieldName)"},{name:"HASH(field)",description:"Generate hash of value",syntax:"HASH(fieldName)"}];otherFunctions=[{name:"ARRAY_LENGTH(field)",description:"Get length of array",syntax:"ARRAY_LENGTH(arrayField)"},{name:"ARRAY_FIRST(field)",description:"Get first element of array",syntax:"ARRAY_FIRST(arrayField)"},{name:"ARRAY_LAST(field)",description:"Get last element of array",syntax:"ARRAY_LAST(arrayField)"},{name:"ARRAY_CONTAINS(field, val)",description:"Check if array contains value",syntax:'ARRAY_CONTAINS(arrayField, "value")'},{name:"ARRAY_UNIQUE(field)",description:"Remove duplicates from array",syntax:"ARRAY_UNIQUE(arrayField)"},{name:"ARRAY_SORT(field)",description:"Sort array values",syntax:"ARRAY_SORT(arrayField)"},{name:"JSON_GET(field, path)",description:"Get value from JSON path",syntax:'JSON_GET(jsonField, "data.name")'},{name:"JSON_SET(field, path, val)",description:"Set value in JSON",syntax:'JSON_SET(jsonField, "data.name", "value")'},{name:"ENCODE_BASE64(field)",description:"Encode to Base64",syntax:"ENCODE_BASE64(fieldName)"},{name:"DECODE_BASE64(field)",description:"Decode from Base64",syntax:"DECODE_BASE64(fieldName)"},{name:"ENCODE_URL(field)",description:"URL encode text",syntax:"ENCODE_URL(fieldName)"},{name:"DECODE_URL(field)",description:"URL decode text",syntax:"DECODE_URL(fieldName)"},{name:"RANDOM()",description:"Generate random number 0-1",syntax:"RANDOM()"},{name:"RANDOM_INT(min, max)",description:"Generate random integer",syntax:"RANDOM_INT(1, 100)"},{name:"SWITCH(field, cases)",description:"Multi-case conditional",syntax:'SWITCH(status, "A", "Active", "I", "Inactive", "Unknown")'},{name:"TEMPLATE(str, vars)",description:"String template with variables",syntax:'TEMPLATE("Hello {name}", {"name": fieldName})'}];constructor(e,t,i,r,c,m,_,g){this.fb=e,this.workflowService=t,this.userService=i,this.departmentService=r,this.router=c,this.route=m,this.snackBar=_,this.dialog=g,this.basicForm=this.fb.group({name:["",te.required],code:[""],description:[""],icon:["description"],workflowTypeId:[null],workflowCategory:["NON_FINANCIAL"],isActive:[!0],commentsMandatory:[!1],commentsMandatoryOnReject:[!0],commentsMandatoryOnEscalate:[!0],corporateIds:[[]],sbuIds:[[]],branchIds:[[]],departmentIds:[[]]})}ngOnInit(){this.loadWorkflowTypes(),this.loadUsers(),this.loadRoles(),this.loadCorporates(),this.loadSbus(),this.loadBranches(),this.loadDepartments(),this.route.params.pipe(q(this.destroy$)).subscribe(e=>{let t=e.id||null;t!==this.workflowId&&(this.workflowId=t,this.resetForm(),this.workflowId&&this.workflowId!=="new"?(this.isEdit=!0,this.loadWorkflow()):this.isEdit=!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}resetForm(){this.formId=null,this.workflowName="",this.fields=[],this.fieldGroups=[],this.screens=[],this.approvers=[],this.basicForm.reset({name:"",code:"",description:"",icon:"description",workflowTypeId:"",workflowCategory:"NON_FINANCIAL",isActive:!0,commentsMandatory:!1,commentsMandatoryOnReject:!0,commentsMandatoryOnEscalate:!0,corporateIds:[],sbuIds:[],branchIds:[],departmentIds:[]}),this.filteredSbus=[...this.sbus],this.filteredBranches=[...this.branches],this.filteredDepartments=[...this.departments]}loadWorkflowTypes(){this.workflowService.getWorkflowTypes().subscribe(e=>{e.success&&(this.workflowTypes=e.data)})}loadUsers(){this.userService.getUsers().subscribe(e=>{e.success&&(this.users=e.data)})}loadRoles(){this.userService.getRoles().subscribe(e=>{e.success&&(this.roles=e.data)})}loadCorporates(){this.userService.getActiveCorporates().subscribe(e=>{e.success&&(this.corporates=e.data)})}loadSbus(){this.userService.getSbus().subscribe(e=>{e.success&&(this.sbus=e.data,this.filteredSbus=[...this.sbus])})}loadBranches(){this.userService.getActiveBranches().subscribe(e=>{e.success&&(this.branches=e.data,this.filteredBranches=[...this.branches])})}loadDepartments(){this.departmentService.getActiveDepartments().subscribe(e=>{e.success&&(this.departments=e.data,this.filteredDepartments=[...this.departments])})}onCorporateChange(){let e=this.basicForm.get("corporateIds")?.value||[];e.length>0?(this.filteredSbus=this.sbus.filter(m=>e.includes(m.corporateId||"")),this.filteredDepartments=this.departments.filter(m=>e.includes(m.corporateId||""))):(this.filteredSbus=[...this.sbus],this.filteredDepartments=[...this.departments]);let t=this.basicForm.get("sbuIds")?.value||[],i=t.filter(m=>this.filteredSbus.some(_=>_.id===m));i.length!==t.length&&this.basicForm.patchValue({sbuIds:i});let r=this.basicForm.get("departmentIds")?.value||[],c=r.filter(m=>this.filteredDepartments.some(_=>_.id===m));c.length!==r.length&&this.basicForm.patchValue({departmentIds:c}),this.onSbuChange()}onSbuChange(){let e=this.basicForm.get("sbuIds")?.value||[],t=this.basicForm.get("corporateIds")?.value||[];if(e.length>0)this.filteredBranches=this.branches.filter(c=>e.includes(c.sbuId));else if(t.length>0){let c=this.sbus.filter(m=>t.includes(m.corporateId||"")).map(m=>m.id);this.filteredBranches=this.branches.filter(m=>c.includes(m.sbuId))}else this.filteredBranches=[...this.branches];let i=this.basicForm.get("branchIds")?.value||[],r=i.filter(c=>this.filteredBranches.some(m=>m.id===c));r.length!==i.length&&this.basicForm.patchValue({branchIds:r})}loadWorkflow(){this.workflowId&&this.workflowService.getWorkflow(this.workflowId).subscribe(e=>{if(e.success){let t=e.data;this.workflowName=t.name||"",this.basicForm.patchValue({name:t.name,code:t.code,description:t.description,icon:t.icon,workflowTypeId:t.workflowTypeId||t.workflowType?.id,isActive:t.active??t.isActive??!0,commentsMandatory:t.commentsMandatory??!1,commentsMandatoryOnReject:t.commentsMandatoryOnReject??!0,commentsMandatoryOnEscalate:t.commentsMandatoryOnEscalate??!0,workflowCategory:t.workflowCategory||"NON_FINANCIAL",corporateIds:t.corporateIds||[],sbuIds:t.sbuIds||[],branchIds:t.branchIds||[],departmentIds:t.departmentIds||[]}),setTimeout(()=>{this.onCorporateChange()},100),t.forms?.[0]&&(this.formId=t.forms[0].id,this.fields=t.forms[0].fields?.map(i=>A(W({},i),{type:i.fieldType||i.type,value:i.value||i.defaultValue||"",required:i.isMandatory??i.required??!1,readOnly:i.isReadonly??i.readOnly??!1,hidden:i.isHidden??i.hidden??!1,isUnique:i.isUnique??!1,isTitle:i.isTitle??!1,isLimited:i.isLimited??!1,inSummary:i.inSummary??!1,optionsText:i.options?.map(r=>r.value).join(`
`)||""}))||[],this.fieldGroups=t.forms[0].fieldGroups||[],this.screens=t.forms[0].screens||[]),this.approvers=(t.approvers||[]).map(i=>A(W({},i),{approverId:i.userId||i.approverId||null,approverType:i.approverType||(i.userId?"USER":i.roleId?"ROLE":"USER")}))}})}getFieldIcon(e){return this.fieldTypes.find(i=>i.value===e)?.icon||"text_fields"}addField(e){let t={id:"temp_"+Date.now(),type:e,name:"",label:"",placeholder:"",value:"",required:!1,readOnly:!1,hidden:!1,isUnique:!1,isTitle:!1,isLimited:!1,columnSpan:2,displayOrder:this.fields.length,fieldGroupId:null,optionsText:""};this.fields.push(t)}removeField(e){this.fields.splice(e,1)}dropField(e){J(this.fields,e.previousIndex,e.currentIndex),this.fields.forEach((t,i)=>t.displayOrder=i)}addFieldGroup(){let e={id:"temp_"+Date.now(),title:"",description:"",displayOrder:this.fieldGroups.length,collapsible:!1,collapsed:!1};this.fieldGroups.push(e)}removeFieldGroup(e){let t=this.fieldGroups[e].id;this.fields.forEach(i=>{i.fieldGroupId===t&&(i.fieldGroupId=null)}),this.fieldGroups.splice(e,1)}getFieldsInGroup(e){return this.fields.filter(t=>t.fieldGroupId===e)}addScreen(){let e={id:"temp_"+Date.now(),title:"",description:"",displayOrder:this.screens.length,icon:"view_carousel"};this.screens.push(e)}removeScreen(e){let t=this.screens[e].id;this.fields.forEach(i=>{i.screenId===t&&(i.screenId=null)}),this.fieldGroups.forEach(i=>{i.screenId===t&&(i.screenId=null)}),this.screens.splice(e,1)}dropScreen(e){J(this.screens,e.previousIndex,e.currentIndex),this.screens.forEach((t,i)=>t.displayOrder=i)}getFieldsInScreen(e){return this.fields.filter(t=>t.screenId===e)}getFieldGroupsInScreen(e){return this.fieldGroups.filter(t=>t.screenId===e)}insertFunction(e){navigator.clipboard.writeText(e.syntax).then(()=>{this.snackBar.open(`Copied: ${e.syntax}`,"Close",{duration:3e3})}).catch(()=>{this.snackBar.open(`Function: ${e.syntax}`,"Close",{duration:5e3})})}getFilteredFunctions(){if(!this.functionSearch)return[];let e=this.functionSearch.toLowerCase();return[...this.stringFunctions.map(i=>A(W({},i),{category:"String"})),...this.numberFunctions.map(i=>A(W({},i),{category:"Number"})),...this.dateFunctions.map(i=>A(W({},i),{category:"Date"})),...this.booleanFunctions.map(i=>A(W({},i),{category:"Boolean/Logic"})),...this.utilityFunctions.map(i=>A(W({},i),{category:"Utility"})),...this.otherFunctions.map(i=>A(W({},i),{category:"Other"}))].filter(i=>i.name.toLowerCase().includes(e)||i.description.toLowerCase().includes(e)||i.category.toLowerCase().includes(e))}getAccessSummary(){let e=[],t=this.basicForm.get("corporateIds")?.value||[],i=this.basicForm.get("sbuIds")?.value||[],r=this.basicForm.get("branchIds")?.value||[],c=this.basicForm.get("departmentIds")?.value||[];return t.forEach(m=>{let _=this.corporates.find(g=>g.id===m);_&&e.push(`Corporate: ${_.name}`)}),i.forEach(m=>{let _=this.sbus.find(g=>g.id===m);_&&e.push(`SBU: ${_.name}`)}),r.forEach(m=>{let _=this.branches.find(g=>g.id===m);_&&e.push(`Branch: ${_.name}`)}),c.forEach(m=>{let _=this.departments.find(g=>g.id===m);_&&e.push(`Department: ${_.name}`)}),e}isFinancialWorkflow(){return this.basicForm.get("workflowCategory")?.value==="FINANCIAL"}isAmountField(e){return e==="NUMBER"||e==="CURRENCY"}hasLimitedField(){return this.fields.some(e=>e.isLimited)}onLimitedChange(e){e.isLimited&&this.fields.forEach(t=>{t.id!==e.id&&(t.isLimited=!1)})}addApprover(){let t={level:(this.approvers.length>0?Math.max(...this.approvers.map(i=>i.level)):0)+1,approverType:"USER",approverId:null,roleId:null,email:"",amountLimit:null,canEscalate:!0,requireComment:!1,emailNotification:!0};this.approvers.push(t)}onApproverTypeChange(e){e.approverId=null,e.roleId=null,e.approverType!=="USER"&&(e.email="")}onUserSelected(e){if(e.approverId){let t=this.users.find(i=>i.id===e.approverId);t&&(e.email=t.email||"")}else e.email=""}getApproverDisplayName(e){if(e.approverType==="USER"){let t=e.approverId||e.userId;if(t){let i=this.users.find(r=>r.id===t);if(i?.fullName)return i.fullName}if(e.approverName)return e.approverName}if(e.approverType==="ROLE"&&e.roleId){let t=this.roles.find(i=>i.id===e.roleId);if(t?.name)return t.name;if(e.approverName)return e.approverName}return e.approverName||""}removeApprover(e){this.approvers.splice(e,1)}dropApprover(e){J(this.approvers,e.previousIndex,e.currentIndex)}preview(){this.dialog.open(Cn,{width:"900px",maxHeight:"90vh",panelClass:"preview-dialog-container",data:{workflowName:this.basicForm.get("name")?.value||"Untitled Workflow",workflowDescription:this.basicForm.get("description")?.value||"",workflowIcon:this.basicForm.get("icon")?.value||"description",fields:this.fields,fieldGroups:this.fieldGroups,screens:this.screens}})}saveWorkflow(){if(this.basicForm.invalid){this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});return}this.loading=!0;let e=this.fields.map(r=>A(W({},r),{fieldType:r.type||r.fieldType,defaultValue:r.value||r.defaultValue||"",isMandatory:r.required??r.isMandatory??!1,isReadonly:r.readOnly??r.isReadonly??!1,isHidden:r.hidden??r.isHidden??!1,isUnique:r.isUnique??!1,isTitle:r.isTitle??!1,isLimited:r.isLimited??!1,inSummary:r.inSummary??!1,options:r.optionsText?.split(`
`).filter(c=>c.trim()).map((c,m)=>({value:c.trim(),label:c.trim(),displayOrder:m}))||[]})),t=A(W({},this.basicForm.value),{forms:[{id:this.formId,name:"Main Form",fields:e,fieldGroups:this.fieldGroups,screens:this.screens}],approvers:this.approvers});(this.isEdit?this.workflowService.updateWorkflow(this.workflowId,t):this.workflowService.createWorkflow(t)).subscribe({next:r=>{this.loading=!1,r.success&&(this.snackBar.open(this.isEdit?"Workflow updated successfully":"Workflow created successfully","Close",{duration:3e3}),this.router.navigate(["/workflows"]))},error:r=>{this.loading=!1,this.snackBar.open(r.error?.message||"Failed to save workflow","Close",{duration:3e3})}})}static \u0275fac=function(t){return new(t||o)(L(ye),L(Ii),L(ki),L(Wi),L(ei),L(Jt),L(vi),L(Si))};static \u0275cmp=X({type:o,selectors:[["app-workflow-builder"]],decls:211,vars:16,consts:[[1,"workflow-builder-container"],[1,"header"],["mat-icon-button","","routerLink","/workflows"],[1,"header-actions"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["label","Basic Info"],[1,"tab-content"],[3,"formGroup"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","formControlName","name"],["matInput","","formControlName","code",3,"readonly"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","description","rows","3"],["formControlName","icon"],[3,"value"],["formControlName","workflowTypeId"],["formControlName","workflowCategory"],["value","NON_FINANCIAL"],["value","FINANCIAL"],[1,"checkbox-row"],["formControlName","isActive"],["formControlName","commentsMandatory"],["formControlName","commentsMandatoryOnReject"],["formControlName","commentsMandatoryOnEscalate"],["label","Form Builder"],[1,"builder-layout"],[1,"field-palette"],[1,"palette-content"],[1,"palette-tabs"],["label","Field Types"],[1,"palette-tab-content"],[1,"field-types"],[1,"field-type-item"],[1,"palette-section"],["mat-stroked-button","",3,"click"],["label","Functions"],[1,"function-search"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name or category...",3,"ngModelChange","ngModel"],["matSuffix",""],["class","function-usage-guide",4,"ngIf"],[1,"search-results"],["multi","",1,"function-accordion"],[1,"form-canvas"],["cdkDropList","",1,"field-list",3,"cdkDropListDropped"],["cdkDrag","",1,"field-panel"],[1,"empty-canvas"],["label","Field Groups"],["mat-raised-button","","color","primary",3,"click"],[1,"group-panel"],[1,"empty-state"],["label","Screens"],["class","screen-info",4,"ngIf"],["cdkDropList","",1,"screen-list",3,"cdkDropListDropped"],["cdkDrag","",1,"screen-panel"],[1,"screen-warning"],["label","Approvers"],["cdkDropList","",1,"approver-list",3,"cdkDropListDropped"],["cdkDrag","",1,"approver-panel"],["label","Access Restrictions"],[1,"access-info"],["formControlName","corporateIds","multiple","",3,"selectionChange"],["formControlName","sbuIds","multiple","",3,"selectionChange"],["formControlName","branchIds","multiple",""],["formControlName","departmentIds","multiple",""],[1,"access-summary"],[1,"no-restrictions"],[1,"restriction-chips"],[1,"field-type-item",3,"click"],[1,"function-usage-guide"],[1,"guide-header",3,"click"],["class","guide-content",4,"ngIf"],[1,"guide-content"],[1,"example"],[1,"search-results-header"],["mat-icon-button","",3,"click"],[1,"function-item"],[1,"no-results"],[1,"function-item",3,"click"],[1,"function-name"],[1,"function-desc"],[1,"function-category-tag"],[3,"opened","closed","expanded"],[1,"function-list"],["cdkDragHandle",""],[1,"field-config"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","placeholder","Static value or function e.g. TODAY(), CURRENT_USER()",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["matTooltip","Include this field in approval email summary",3,"ngModelChange","ngModel"],["matTooltip","Mark this field as the amount to check against approver limits for auto-escalation",3,"ngModel","disabled"],[1,"field-actions"],["mat-button","","color","warn",3,"click"],["matInput","","rows","4","placeholder",`Option 1
Option 2
Option 3`,3,"ngModelChange","ngModel"],["matTooltip","Mark this field as the amount to check against approver limits for auto-escalation",3,"ngModelChange","change","ngModel","disabled"],[1,"group-config"],["matInput","","type","number",3,"ngModelChange","ngModel"],[1,"group-actions"],[1,"screen-info"],[1,"screen-config"],["value","view_carousel"],["value","article"],["value","assignment"],["value","description"],["value","info"],["value","checklist"],["value","fact_check"],["value","summarize"],[1,"screen-actions"],[1,"approver-config"],["matInput","","type","number","min","1",3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","USER"],["value","ROLE"],["matInput","","type","email",3,"ngModelChange","ngModel","readonly"],[1,"approver-actions"]],template:function(t,i){if(t&1&&(l(0,"div",0)(1,"div",1)(2,"button",2)(3,"mat-icon"),s(4,"arrow_back"),a()(),l(5,"h1"),s(6),a(),l(7,"div",3)(8,"button",4),y("click",function(){return i.preview()}),l(9,"mat-icon"),s(10,"visibility"),a(),s(11," Preview "),a(),l(12,"button",5),y("click",function(){return i.saveWorkflow()}),l(13,"mat-icon"),s(14,"save"),a(),s(15),a()()(),l(16,"mat-tab-group")(17,"mat-tab",6)(18,"div",7)(19,"mat-card")(20,"mat-card-content")(21,"form",8)(22,"div",9)(23,"mat-form-field",10)(24,"mat-label"),s(25,"Workflow Name"),a(),O(26,"input",11),C(27,ar,2,0,"mat-error"),a(),l(28,"mat-form-field",10)(29,"mat-label"),s(30,"Code"),a(),O(31,"input",12),l(32,"mat-hint"),s(33,"Unique identifier (auto-generated if blank)"),a()()(),l(34,"mat-form-field",13)(35,"mat-label"),s(36,"Description"),a(),O(37,"textarea",14),a(),l(38,"div",9)(39,"mat-form-field",10)(40,"mat-label"),s(41,"Icon"),a(),l(42,"mat-select",15),T(43,lr,4,3,"mat-option",16,lt),a()(),l(45,"mat-form-field",10)(46,"mat-label"),s(47,"Workflow Type"),a(),l(48,"mat-select",17),T(49,sr,2,2,"mat-option",16,B),a()()(),l(51,"div",9)(52,"mat-form-field",10)(53,"mat-label"),s(54,"Workflow Category"),a(),l(55,"mat-select",18)(56,"mat-option",19),s(57,"Non-Financial"),a(),l(58,"mat-option",20),s(59,"Financial"),a()(),l(60,"mat-hint"),s(61,"Financial workflows enable amount-based approval limits"),a()()(),l(62,"div",21)(63,"mat-checkbox",22),s(64,"Active"),a(),l(65,"mat-checkbox",23),s(66,"Comments Mandatory on Approval"),a(),l(67,"mat-checkbox",24),s(68,"Comments Mandatory on Reject"),a(),l(69,"mat-checkbox",25),s(70,"Comments Mandatory on Escalate"),a()()()()()()(),l(71,"mat-tab",26)(72,"div",7)(73,"div",27)(74,"div",28)(75,"mat-card")(76,"mat-card-content",29)(77,"mat-tab-group",30)(78,"mat-tab",31)(79,"div",32)(80,"div",33),T(81,dr,5,2,"div",34,rr),a(),l(83,"div",35)(84,"h4"),s(85,"Groups"),a(),l(86,"button",36),y("click",function(){return i.addFieldGroup()}),l(87,"mat-icon"),s(88,"dashboard"),a(),s(89," Add Field Group "),a()()()(),l(90,"mat-tab",37)(91,"div",32)(92,"div",38)(93,"mat-form-field",39)(94,"mat-label"),s(95,"Search functions"),a(),l(96,"input",40),b("ngModelChange",function(c){return S(i.functionSearch,c)||(i.functionSearch=c),c}),a(),l(97,"mat-icon",41),s(98,"search"),a()()(),C(99,mr,7,2,"div",42)(100,fr,10,2,"div",43)(101,wr,55,12,"mat-accordion",44),a()()()()()(),l(102,"div",45)(103,"mat-card")(104,"mat-card-header")(105,"mat-card-title"),s(106,"Form Layout"),a()(),l(107,"mat-card-content")(108,"div",46),y("cdkDropListDropped",function(c){return i.dropField(c)}),T(109,Pr,73,24,"mat-expansion-panel",47,B),C(111,Ir,5,0,"div",48),a()()()()()()(),l(112,"mat-tab",49)(113,"div",7)(114,"mat-card")(115,"mat-card-header")(116,"mat-card-title"),s(117,"Field Groups"),a(),l(118,"button",50),y("click",function(){return i.addFieldGroup()}),l(119,"mat-icon"),s(120,"add"),a(),s(121," Add Group "),a()(),l(122,"mat-card-content"),T(123,Mr,31,8,"mat-expansion-panel",51,B),C(125,Or,5,0,"div",52),a()()()(),l(126,"mat-tab",53)(127,"div",7)(128,"mat-card")(129,"mat-card-header")(130,"mat-card-title"),s(131,"Form Screens"),a(),l(132,"button",50),y("click",function(){return i.addScreen()}),l(133,"mat-icon"),s(134,"add"),a(),s(135," Add Screen "),a()(),l(136,"mat-card-content"),C(137,Fr,5,0,"div",54),l(138,"div",55),y("cdkDropListDropped",function(c){return i.dropScreen(c)}),T(139,Nr,49,8,"mat-expansion-panel",56,B),a(),C(141,Wr,5,0,"div",57),a()()()(),l(142,"mat-tab",58)(143,"div",7)(144,"mat-card")(145,"mat-card-header")(146,"mat-card-title"),s(147,"Approval Levels"),a(),l(148,"button",50),y("click",function(){return i.addApprover()}),l(149,"mat-icon"),s(150,"add"),a(),s(151," Add Approver "),a()(),l(152,"mat-card-content")(153,"div",59),y("cdkDropListDropped",function(c){return i.dropApprover(c)}),T(154,Gr,52,15,"mat-expansion-panel",60,Yt),a(),C(156,Hr,5,0,"div",52),a()()()(),l(157,"mat-tab",61)(158,"div",7)(159,"mat-card")(160,"mat-card-header")(161,"mat-card-title")(162,"mat-icon"),s(163,"lock"),a(),s(164," Access Restrictions "),a()(),l(165,"mat-card-content")(166,"div",62)(167,"mat-icon"),s(168,"info"),a(),l(169,"p"),s(170,"Leave all fields empty to make this workflow visible to all users. Select specific corporates, SBUs, branches, or departments to restrict access."),a()(),l(171,"form",8)(172,"div",9)(173,"mat-form-field",10)(174,"mat-label"),s(175,"Corporates"),a(),l(176,"mat-select",63),y("selectionChange",function(){return i.onCorporateChange()}),T(177,zr,2,2,"mat-option",16,B),a(),l(179,"mat-hint"),s(180,"Users from selected corporates can access this workflow"),a()(),l(181,"mat-form-field",10)(182,"mat-label"),s(183,"SBUs"),a(),l(184,"mat-select",64),y("selectionChange",function(){return i.onSbuChange()}),T(185,qr,3,3,"mat-option",16,B),a(),l(187,"mat-hint"),s(188,"Filter by corporate first for relevant SBUs"),a()()(),l(189,"div",9)(190,"mat-form-field",10)(191,"mat-label"),s(192,"Branches"),a(),l(193,"mat-select",65),T(194,jr,3,3,"mat-option",16,B),a(),l(196,"mat-hint"),s(197,"Filter by SBU first for relevant branches"),a()(),l(198,"mat-form-field",10)(199,"mat-label"),s(200,"Departments"),a(),l(201,"mat-select",66),T(202,Xr,3,3,"mat-option",16,B),a(),l(204,"mat-hint"),s(205,"Filter by corporate first for relevant departments"),a()()()(),l(206,"div",67)(207,"h4"),s(208,"Current Access Summary"),a(),C(209,Zr,2,0,"p",68)(210,Jr,3,0,"div",69),a()()()()()()()),t&2){let r;d(6),v(i.isEdit?"Editing: "+i.workflowName:"Create Workflow"),d(6),x("disabled",i.loading),d(3),w(" ",i.loading?"Saving...":"Save Workflow"," "),d(6),x("formGroup",i.basicForm),d(6),f((r=i.basicForm.get("name"))!=null&&r.hasError("required")?27:-1),d(4),x("readonly",i.isEdit),d(12),P(i.icons),d(6),P(i.workflowTypes),d(32),P(i.fieldTypes),d(15),E("ngModel",i.functionSearch),d(3),x("ngIf",!i.functionSearch),d(),f(i.functionSearch?100:101),d(9),P(i.fields),d(2),f(i.fields.length===0?111:-1),d(12),P(i.fieldGroups),d(2),f(i.fieldGroups.length===0?125:-1),d(12),x("ngIf",i.screens.length===0),d(2),P(i.screens),d(2),f(i.screens.length===1?141:-1),d(13),P(i.approvers),d(2),f(i.approvers.length===0?156:-1),d(15),x("formGroup",i.basicForm),d(6),P(i.corporates),d(8),P(i.filteredSbus),d(9),P(i.filteredBranches),d(8),P(i.filteredDepartments),d(7),f(i.getAccessSummary().length===0?209:210)}},dependencies:[pe,Xt,Qt,Ee,xe,he,Ce,ue,ge,ci,ve,we,mi,di,ii,ti,gn,un,hn,pn,ke,Pe,Ie,fi,_i,Ni,Oi,Fi,Ne,Fe,Re,Me,hi,Oe,Ae,We,qe,Ye,fe,Te,De,pi,be,Se,je,$e,He,Ti,Be,Ve,Ge,Ue,ze,Pi,wi,Le,Mi,Ri],styles:[".workflow-builder-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{flex:1;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.tab-content[_ngcontent-%COMP%]{padding:1rem 0}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.form-field[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%}.checkbox-row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem 2rem;margin:1rem 0}.builder-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:1rem}.field-palette[_ngcontent-%COMP%]{position:sticky;top:0;height:calc(100vh - 140px);min-height:500px}.field-palette[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.field-palette[_ngcontent-%COMP%]   mat-card-content.palette-content[_ngcontent-%COMP%]{padding:0!important;flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:0}.palette-tabs[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.palette-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group{height:100%;display:flex;flex-direction:column}.palette-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{flex-shrink:0}.palette-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{flex:1;min-height:0}.palette-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body{height:100%}.palette-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-content{height:100%;overflow:hidden;display:flex;flex-direction:column}.palette-tab-content[_ngcontent-%COMP%]{padding:1rem;flex:1;overflow-y:auto;min-height:0}.field-types[_ngcontent-%COMP%]{display:grid;gap:.5rem}.field-type-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;border:1px solid #ddd;border-radius:4px;cursor:pointer;transition:all .2s}.field-type-item[_ngcontent-%COMP%]:hover{background:#e3f2fd;border-color:#1976d2}.palette-section[_ngcontent-%COMP%]{margin-top:1rem;padding-top:1rem;border-top:1px solid #eee}.palette-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.875rem;color:#666}.function-category[_ngcontent-%COMP%]{margin-bottom:1.25rem}.function-category[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0 0 .5rem;font-size:.8rem;font-weight:600;color:#1976d2;padding-bottom:.375rem;border-bottom:1px solid #e0e0e0}.function-category[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.function-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.125rem}.function-item[_ngcontent-%COMP%]{padding:.375rem .5rem;border-radius:4px;cursor:pointer;transition:background .2s;border:1px solid transparent}.function-item[_ngcontent-%COMP%]:hover{background:#e3f2fd;border-color:#90caf9}.function-name[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:.7rem;font-weight:500;color:#1565c0}.function-desc[_ngcontent-%COMP%]{font-size:.65rem;color:#666;margin-top:.125rem}.function-search[_ngcontent-%COMP%]{margin-bottom:.75rem}.function-search[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.function-search[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.function-usage-guide[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;margin-bottom:1rem;overflow:hidden}.guide-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;cursor:pointer;font-size:.8rem;font-weight:500;color:#1976d2;transition:background .2s}.guide-header[_ngcontent-%COMP%]:hover{background:#e3f2fd}.guide-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.guide-content[_ngcontent-%COMP%]{padding:0 .75rem .75rem;font-size:.75rem;color:#555}.guide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0}.guide-content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#e0e0e0;padding:.125rem .25rem;border-radius:3px;font-family:Roboto Mono,monospace;font-size:.7rem}.guide-content[_ngcontent-%COMP%]   code.example[_ngcontent-%COMP%]{display:block;margin-top:.5rem;padding:.5rem;background:#1976d2;color:#fff}.search-results[_ngcontent-%COMP%]{margin-top:.5rem}.search-results-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.25rem 0;font-size:.75rem;color:#666;border-bottom:1px solid #e0e0e0;margin-bottom:.5rem}.search-results-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.search-results-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.function-category-tag[_ngcontent-%COMP%]{font-size:.6rem;color:#fff;background:#1976d2;padding:.125rem .375rem;border-radius:3px;margin-top:.25rem;display:inline-block}.no-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:2rem;color:#999;text-align:center}.no-results[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;margin-bottom:.5rem}.no-results[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8rem}.field-list[_ngcontent-%COMP%]{min-height:200px}.field-panel[_ngcontent-%COMP%], .group-panel[_ngcontent-%COMP%], .approver-panel[_ngcontent-%COMP%], .screen-panel[_ngcontent-%COMP%]{margin-bottom:.5rem}.field-config[_ngcontent-%COMP%], .group-config[_ngcontent-%COMP%], .approver-config[_ngcontent-%COMP%], .screen-config[_ngcontent-%COMP%]{padding:1rem}.field-actions[_ngcontent-%COMP%], .group-actions[_ngcontent-%COMP%], .approver-actions[_ngcontent-%COMP%], .screen-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:1rem}.screen-info[_ngcontent-%COMP%], .screen-warning[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:1rem;background:#e3f2fd;border-radius:8px;margin-bottom:1rem}.screen-warning[_ngcontent-%COMP%]{background:#fff3e0}.screen-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .screen-warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;flex-shrink:0}.screen-warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f57c00}.screen-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .screen-warning[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#333}.screen-list[_ngcontent-%COMP%]{min-height:100px}.empty-canvas[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666;text-align:center}.empty-canvas[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.section-title[_ngcontent-%COMP%]{margin:1.5rem 0 .25rem;font-size:1rem;font-weight:500;color:#333}.section-hint[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.85rem;color:#666}.access-info[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem;padding:1rem;background:#e3f2fd;border-radius:8px;margin-bottom:1.5rem}.access-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;flex-shrink:0}.access-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#1565c0;font-size:.9rem}.access-summary[_ngcontent-%COMP%]{margin-top:2rem;padding-top:1.5rem;border-top:1px solid #e0e0e0}.access-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1rem;font-weight:500;color:#333}.no-restrictions[_ngcontent-%COMP%]{color:#4caf50;font-weight:500;display:flex;align-items:center;gap:.5rem}.restriction-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}"]})}return o})();export{fl as WorkflowBuilderComponent};
