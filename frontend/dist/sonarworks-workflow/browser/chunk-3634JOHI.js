import{a as Z,b as q,e as $}from"./chunk-CPENUMIN.js";import{a as N}from"./chunk-CZLTQM4N.js";import{a as W}from"./chunk-2CETHFK6.js";import{a as Q,b as U,c as G,d as H}from"./chunk-6Y7BGRIJ.js";import"./chunk-LAGNR76Q.js";import{a as K}from"./chunk-W77BPQM7.js";import"./chunk-T6FL6ZBG.js";import"./chunk-X4PFBHKL.js";import"./chunk-ORAJKTE5.js";import"./chunk-DUSDXFBS.js";import{h as E}from"./chunk-PSOPTTCW.js";import"./chunk-NMO4AZKI.js";import{a as V}from"./chunk-3QXD4PCM.js";import{b as A,c as B,d as P,e as R,g as I}from"./chunk-JQUVUDJB.js";import{ca as c,m as F,qa as O,ra as L,sa as j,va as z}from"./chunk-A3I6STGM.js";import{Ab as m,Fb as w,Ib as x,Jb as k,Kb as e,Lb as t,Mb as C,Qb as M,Ub as v,Vb as D,aa as u,bb as o,cc as T,dc as r,ec as l,gb as _,na as h,nb as g,nc as S,oa as f,ob as b,tb as y}from"./chunk-2HR56SRD.js";var J=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=b({type:i});static \u0275inj=u({imports:[c,E,E,c]})}return i})();var X=(()=>{class i{static \u0275fac=function(a){return new(a||i)};static \u0275mod=b({type:i});static \u0275inj=u({imports:[c,c]})}return i})();var de=i=>["/workflows/builder",i],le=i=>["/workflows",i,"instances"],ee=(i,d)=>d.id;function ce(i,d){i&1&&(e(0,"mat-expansion-panel",12)(1,"mat-expansion-panel-header")(2,"mat-icon"),r(3,"admin_panel_settings"),t(),e(4,"span"),r(5,"System Admin"),t()(),e(6,"div",14)(7,"a",29)(8,"mat-icon"),r(9,"people"),t(),e(10,"span"),r(11,"Users"),t()(),e(12,"a",30)(13,"mat-icon"),r(14,"security"),t(),e(15,"span"),r(16,"Roles"),t()(),e(17,"a",31)(18,"mat-icon"),r(19,"business"),t(),e(20,"span"),r(21,"SBU Management"),t()(),e(22,"a",32)(23,"mat-icon"),r(24,"settings"),t(),e(25,"span"),r(26,"Settings"),t()(),e(27,"a",33)(28,"mat-icon"),r(29,"history"),t(),e(30,"span"),r(31,"Audit Logs"),t()()()())}function me(i,d){if(i&1&&(e(0,"a",15)(1,"mat-icon"),r(2,"edit"),t(),e(3,"span"),r(4),t()()),i&2){let n=d.$implicit;m("routerLink",S(2,de,n.id)),o(4),l(n.name)}}function pe(i,d){if(i&1&&(e(0,"mat-expansion-panel",12)(1,"mat-expansion-panel-header")(2,"mat-icon"),r(3,"build"),t(),e(4,"span"),r(5,"Workflow Admin"),t()(),e(6,"div",14)(7,"a",34)(8,"mat-icon"),r(9,"list"),t(),e(10,"span"),r(11,"Manage Workflows"),t()(),x(12,me,5,4,"a",15,ee),t()()),i&2){let n=D();o(12),k(n.workflows)}}function ue(i,d){if(i&1&&(e(0,"a",15)(1,"mat-icon"),r(2),t(),e(3,"span"),r(4),t()()),i&2){let n=d.$implicit;m("routerLink",S(3,le,n.code)),o(2),l(n.icon||"description"),o(2),l(n.name)}}var Ze=(()=>{class i{authService;workflowService;router;workflows=[];activeWorkflows=[];constructor(n,a,s){this.authService=n,this.workflowService=a,this.router=s}ngOnInit(){this.loadWorkflows()}get fullName(){return this.authService.currentUser?.fullName||"User"}get userInitials(){return this.fullName.split(" ").map(a=>a[0]).join("").substring(0,2).toUpperCase()}get userType(){return this.authService.currentUser?.userType||"STAFF"}get isAdmin(){return this.authService.hasRole("ROLE_ADMIN")||this.authService.hasPrivilege("ADMIN")}get canBuildWorkflows(){return this.isAdmin||this.authService.hasPrivilege("WORKFLOW_BUILDER")}loadWorkflows(){this.workflowService.getWorkflows().subscribe(n=>{n.success&&(this.workflows=n.data)}),this.workflowService.getActiveWorkflows().subscribe(n=>{n.success&&(this.activeWorkflows=n.data)})}toggleSidebar(){}logout(){this.authService.logout()}static \u0275fac=function(a){return new(a||i)(_(V),_(K),_(B))};static \u0275cmp=g({type:i,selectors:[["app-main-layout"]],decls:75,vars:7,consts:[["userMenu","matMenu"],[1,"layout-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"brand-text"],[1,"user-profile"],[1,"avatar"],[1,"user-info"],[1,"name"],[1,"role"],[1,"sidebar-nav"],["routerLink","/dashboard","routerLinkActive","active",1,"menu-item"],[1,"nav-panel"],[1,"nav-panel",3,"expanded"],[1,"submenu"],[1,"menu-item",3,"routerLink"],["routerLink","/approvals","routerLinkActive","active",1,"menu-item"],["routerLink","/my-submissions","routerLinkActive","active",1,"menu-item"],[1,"sidebar-footer"],[1,"main-content"],[1,"main-header"],[1,"header-left"],["mat-icon-button","",3,"click"],[1,"header-right"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink","/profile"],["mat-menu-item","","routerLink","/change-password"],["mat-menu-item","",3,"click"],[1,"page-content"],["routerLink","/users","routerLinkActive","active",1,"menu-item"],["routerLink","/roles","routerLinkActive","active",1,"menu-item"],["routerLink","/sbus","routerLinkActive","active",1,"menu-item"],["routerLink","/settings","routerLinkActive","active",1,"menu-item"],["routerLink","/audit","routerLinkActive","active",1,"menu-item"],["routerLink","/workflows","routerLinkActive","active",1,"menu-item"]],template:function(a,s){if(a&1){let p=M();e(0,"div",1)(1,"aside",2)(2,"div",3)(3,"mat-icon"),r(4,"workflow"),t(),e(5,"span",4),r(6,"Sonarworks"),t()(),e(7,"div",5)(8,"div",6),r(9),t(),e(10,"div",7)(11,"div",8),r(12),t(),e(13,"div",9),r(14),t()()(),e(15,"nav",10)(16,"a",11)(17,"mat-icon"),r(18,"dashboard"),t(),e(19,"span"),r(20,"Dashboard"),t()(),y(21,ce,32,0,"mat-expansion-panel",12)(22,pe,14,0,"mat-expansion-panel",12),e(23,"mat-expansion-panel",13)(24,"mat-expansion-panel-header")(25,"mat-icon"),r(26,"folder"),t(),e(27,"span"),r(28,"Workflows"),t()(),e(29,"div",14),x(30,ue,5,5,"a",15,ee),t()(),e(32,"a",16)(33,"mat-icon"),r(34,"thumb_up"),t(),e(35,"span"),r(36,"Pending Approvals"),t()(),e(37,"a",17)(38,"mat-icon"),r(39,"send"),t(),e(40,"span"),r(41,"My Submissions"),t()()(),e(42,"div",18)(43,"small"),r(44,"v1.0.0"),t()()(),e(45,"main",19)(46,"header",20)(47,"div",21)(48,"button",22),v("click",function(){return h(p),f(s.toggleSidebar())}),e(49,"mat-icon"),r(50,"menu"),t()()(),e(51,"div",23)(52,"button",24)(53,"mat-icon"),r(54,"account_circle"),t()(),e(55,"mat-menu",null,0)(57,"button",25)(58,"mat-icon"),r(59,"person"),t(),e(60,"span"),r(61,"Profile"),t()(),e(62,"button",26)(63,"mat-icon"),r(64,"lock"),t(),e(65,"span"),r(66,"Change Password"),t()(),C(67,"mat-divider"),e(68,"button",27),v("click",function(){return h(p),f(s.logout())}),e(69,"mat-icon"),r(70,"exit_to_app"),t(),e(71,"span"),r(72,"Logout"),t()()()()(),e(73,"div",28),C(74,"router-outlet"),t()()()}if(a&2){let p=T(56);o(9),l(s.userInitials),o(3),l(s.fullName),o(2),l(s.userType),o(7),w(s.isAdmin?21:-1),o(),w(s.canBuildWorkflows?22:-1),o(),m("expanded",!0),o(7),k(s.activeWorkflows),o(22),m("matMenuTriggerFor",p)}},dependencies:[F,I,A,P,R,J,X,N,W,L,O,z,j,H,U,Q,G,$,Z,q],styles:[".layout-container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.sidebar[_ngcontent-%COMP%]{width:260px;background:#263238;color:#fff;display:flex;flex-direction:column;position:fixed;height:100vh;z-index:1000}.sidebar-header[_ngcontent-%COMP%]{padding:1rem;background:#1e272c;display:flex;align-items:center;gap:.5rem;font-size:1.25rem;font-weight:500}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:#1e272c;border-bottom:1px solid #37474f}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#1976d2;display:flex;align-items:center;justify-content:center;font-weight:500}.user-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}.user-info[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:.5rem 0}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;color:#fff;text-decoration:none;cursor:pointer;transition:background .2s}.menu-item[_ngcontent-%COMP%]:hover{background:#37474f}.menu-item.active[_ngcontent-%COMP%]{background:#1976d2}.nav-panel[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;color:#fff}.nav-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:0 1rem;color:#fff}.nav-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.submenu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding-left:2.5rem;font-size:.875rem}.sidebar-footer[_ngcontent-%COMP%]{padding:1rem;text-align:center;border-top:1px solid #37474f}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:260px;min-height:100vh;display:flex;flex-direction:column}.main-header[_ngcontent-%COMP%]{background:#fff;padding:.5rem 1rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #e0e0e0;position:sticky;top:0;z-index:100}.page-content[_ngcontent-%COMP%]{flex:1;padding:1.5rem;background:#f5f5f5}"]})}return i})();export{Ze as MainLayoutComponent};
