import{d as ae}from"./chunk-5I3ZFOT5.js";import{a as fe}from"./chunk-3PMLAS3Y.js";import"./chunk-WPDQKNTD.js";import"./chunk-5LBLILVL.js";import"./chunk-LAGNR76Q.js";import"./chunk-DLMMVLF7.js";import{b as se,f as le,i as me,p as pe}from"./chunk-DUSDXFBS.js";import"./chunk-NMO4AZKI.js";import{a as h}from"./chunk-3QXD4PCM.js";import{b as re,c as _,f as ie}from"./chunk-JQUVUDJB.js";import{a as $,m as J,o as ee,p as te,qa as de,ra as ce,s as oe,sa as ue,t as ne,va as he}from"./chunk-A3I6STGM.js";import{$ as k,$b as A,Db as U,E as x,Fb as W,Gb as H,Ib as z,Jb as Q,Ka as O,Kb as s,Lb as m,Mb as G,Na as B,Qb as w,Ub as u,Vb as K,Z as I,Zb as v,_b as M,ab as N,bb as c,ca as P,dc as C,eb as V,ec as Y,fa as l,gb as g,hb as L,hc as q,ia as R,ic as X,jc as Z,na as p,nb as y,oa as d,p as b,ta as E,tb as j,wa as F,ya as T,za as D}from"./chunk-2HR56SRD.js";var Ae="@",Se=(()=>{class t{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=l(E);loadingSchedulerFn=l(be,{optional:!0});_engine;constructor(e,n,r,i,a){this.doc=e,this.delegate=n,this.zone=r,this.animationType=i,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-6KLIWPRO.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(r=>{throw new I(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let a=new i(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new S(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let f=a.createRenderer(e,n);i.use(f),this.scheduler??=this.injector.get(F,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{i.use(r)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){L()};static \u0275prov=k({token:t,factory:t.\u0275fac})}return t})(),S=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,n,r){this.delegate.insertBefore(o,e,n,r)}removeChild(o,e,n){this.delegate.removeChild(o,e,n)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,n,r){this.delegate.setAttribute(o,e,n,r)}removeAttribute(o,e,n){this.delegate.removeAttribute(o,e,n)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,n,r){this.delegate.setStyle(o,e,n,r)}removeStyle(o,e,n){this.delegate.removeStyle(o,e,n)}setProperty(o,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(o,e,n)),this.delegate.setProperty(o,e,n)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,n,r){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(o,e,n,r)),this.delegate.listen(o,e,n,r)}shouldReplay(o){return this.replay!==null&&o.startsWith(Ae)}},be=new P("");function ge(t="animations"){return B("NgAsyncAnimations"),R([{provide:V,useFactory:(o,e,n)=>new Se(o,e,n,t),deps:[$,ee,D]},{provide:O,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var xe=["commandInput"],Ie=["consoleBody"];function ke(t,o){if(t&1&&(s(0,"div"),C(1),m()),t&2){let e=o.$implicit;U(e.type),c(),Y(e.text)}}var ye=(()=>{class t{settingService;close=new T;commandInput;consoleBody;command="";output=[{text:"Sonarworks Command Console",type:"info"},{text:'Type "help" for available commands',type:"info"},{text:"",type:"output"}];constructor(e){this.settingService=e}ngAfterViewInit(){this.commandInput.nativeElement.focus()}executeCommand(){this.command.trim()&&(this.output.push({text:`> ${this.command}`,type:"output"}),this.settingService.executeCommand(this.command).subscribe({next:e=>{e.success&&e.data?e.data.output.forEach(n=>{this.output.push({text:n,type:e.data.success?"success":"error"})}):this.output.push({text:e.message||"Command failed",type:"error"}),this.scrollToBottom()},error:e=>{this.output.push({text:e.error?.message||"Error executing command",type:"error"}),this.scrollToBottom()}}),this.command="")}scrollToBottom(){setTimeout(()=>{let e=this.consoleBody.nativeElement;e.scrollTop=e.scrollHeight},100)}static \u0275fac=function(n){return new(n||t)(g(fe))};static \u0275cmp=y({type:t,selectors:[["app-command-console"]],viewQuery:function(n,r){if(n&1&&(v(xe,5),v(Ie,5)),n&2){let i;M(i=A())&&(r.commandInput=i.first),M(i=A())&&(r.consoleBody=i.first)}},outputs:{close:"close"},decls:16,vars:1,consts:[["consoleBody",""],["commandInput",""],[1,"command-console"],[1,"command-console-header"],["mat-icon-button","",3,"click"],[1,"command-console-body"],[3,"class"],[1,"input-line"],[1,"prompt"],["type","text","autofocus","",1,"command-console-input",3,"ngModelChange","keydown.enter","ngModel"]],template:function(n,r){if(n&1){let i=w();s(0,"div",2)(1,"div",3)(2,"span"),C(3,"Command Console"),m(),s(4,"button",4),u("click",function(){return p(i),d(r.close.emit())}),s(5,"mat-icon"),C(6,"close"),m()()(),s(7,"div",5,0),z(9,ke,2,3,"div",6,H),s(11,"div",7)(12,"span",8),C(13,">"),m(),s(14,"input",9,1),Z("ngModelChange",function(f){return p(i),X(r.command,f)||(r.command=f),d(f)}),u("keydown.enter",function(){return p(i),d(r.executeCommand())}),m()()()()}n&2&&(c(9),Q(r.output),c(5),q("ngModel",r.command))},dependencies:[J,pe,se,le,me,ce,de,he,ue],styles:[".command-console[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;max-width:800px;background:#1e1e1e;border-radius:8px;box-shadow:0 8px 32px #0000004d;z-index:9999}.command-console-header[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#333;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;color:#fff}.command-console-body[_ngcontent-%COMP%]{padding:1rem;max-height:400px;overflow-y:auto;font-family:Consolas,Monaco,monospace;font-size:14px}.output[_ngcontent-%COMP%]{color:#0f0}.error[_ngcontent-%COMP%]{color:#f44}.info[_ngcontent-%COMP%]{color:#0af}.success[_ngcontent-%COMP%]{color:#4f4}.input-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.prompt[_ngcontent-%COMP%]{color:#0f0}.command-console-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:#0f0;font-family:Consolas,Monaco,monospace;font-size:14px;outline:none}"]})}return t})();function Pe(t,o){if(t&1){let e=w();s(0,"app-command-console",0),u("close",function(){p(e);let r=K();return d(r.showConsole=!1)}),m()}}var we=(()=>{class t{authService;showConsole=!1;constructor(e){this.authService=e}get isSuperUser(){return this.authService.currentUser?.username==="super"}handleKeyboardEvent(e){e.ctrlKey&&e.altKey&&e.key.toLowerCase()==="p"&&(e.preventDefault(),this.isSuperUser&&(this.showConsole=!this.showConsole))}static \u0275fac=function(n){return new(n||t)(g(h))};static \u0275cmp=y({type:t,selectors:[["app-root"]],hostBindings:function(n,r){n&1&&u("keydown",function(a){return r.handleKeyboardEvent(a)},!1,N)},decls:2,vars:1,consts:[[3,"close"]],template:function(n,r){n&1&&(G(0,"router-outlet"),j(1,Pe,1,0,"app-command-console")),n&2&&(c(),W(r.showConsole&&r.isSuperUser?1:-1))},dependencies:[re,ye],encapsulation:2})}return t})();var _e=(t,o)=>{let e=l(h),n=l(_);return e.isAuthenticated?!0:(n.navigate(["/login"],{queryParams:{returnUrl:o.url}}),!1)};var ve=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-365377FF.js").then(t=>t.LoginComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-LFYNAKFX.js").then(t=>t.ForgotPasswordComponent)},{path:"reset-password",loadComponent:()=>import("./chunk-7C5NZG6B.js").then(t=>t.ResetPasswordComponent)},{path:"",loadComponent:()=>import("./chunk-3634JOHI.js").then(t=>t.MainLayoutComponent),canActivate:[_e],children:[{path:"dashboard",loadComponent:()=>import("./chunk-4IAOK2GD.js").then(t=>t.DashboardComponent)},{path:"profile",loadComponent:()=>import("./chunk-66D5CYYT.js").then(t=>t.ProfileComponent)},{path:"change-password",loadComponent:()=>import("./chunk-GQE3CNWH.js").then(t=>t.ChangePasswordComponent)},{path:"users",loadComponent:()=>import("./chunk-CR3HSJV5.js").then(t=>t.UserListComponent)},{path:"users/new",loadComponent:()=>import("./chunk-JMZSDPRO.js").then(t=>t.UserFormComponent)},{path:"users/:id",loadComponent:()=>import("./chunk-JMZSDPRO.js").then(t=>t.UserFormComponent)},{path:"roles",loadComponent:()=>import("./chunk-GR5QXG4U.js").then(t=>t.RoleListComponent)},{path:"sbus",loadComponent:()=>import("./chunk-P76UFYFS.js").then(t=>t.SbuListComponent)},{path:"settings",loadComponent:()=>import("./chunk-UF2QM7SQ.js").then(t=>t.SettingsComponent)},{path:"audit",loadComponent:()=>import("./chunk-VMIEN4EG.js").then(t=>t.AuditLogComponent)},{path:"workflows",loadComponent:()=>import("./chunk-FIW47F5R.js").then(t=>t.WorkflowListComponent)},{path:"workflows/builder/new",loadComponent:()=>import("./chunk-OO74DBPV.js").then(t=>t.WorkflowBuilderComponent)},{path:"workflows/builder/:id",loadComponent:()=>import("./chunk-OO74DBPV.js").then(t=>t.WorkflowBuilderComponent)},{path:"workflows/:workflowCode/instances",loadComponent:()=>import("./chunk-ONXBKIRB.js").then(t=>t.WorkflowInstancesComponent)},{path:"workflows/:workflowCode/new",loadComponent:()=>import("./chunk-BXV2S5QY.js").then(t=>t.WorkflowFormComponent)},{path:"workflows/:workflowCode/instances/:instanceId",loadComponent:()=>import("./chunk-ZLICVOEX.js").then(t=>t.InstanceDetailComponent)},{path:"approvals",loadComponent:()=>import("./chunk-XERBSSFV.js").then(t=>t.ApprovalListComponent)},{path:"approvals/:id",loadComponent:()=>import("./chunk-H2XQJWMU.js").then(t=>t.ApprovalDetailComponent)},{path:"my-submissions",loadComponent:()=>import("./chunk-QDDYYFQC.js").then(t=>t.MySubmissionsComponent)}]},{path:"**",redirectTo:"dashboard"}];var Me=(t,o)=>{let e=l(h),n=l(_),r=e.token;return r&&(t=t.clone({setHeaders:{Authorization:`Bearer ${r}`}})),o(t).pipe(x(i=>(i.status===401&&(e.logout(),n.navigate(["/login"])),b(()=>i))))};te(we,{providers:[ie(ve),ge(),oe(ne([Me])),ae()]}).catch(t=>console.error(t));
