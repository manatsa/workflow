import{c as g,d as ue,e as v,f as _e,g as Ce}from"./chunk-JR55QIKH.js";import{a as he,b as ge}from"./chunk-OJT3OVWQ.js";import"./chunk-M4AVZ6G2.js";import"./chunk-5LBLILVL.js";import"./chunk-LAGNR76Q.js";import{a as ie,b as ne,c as ae,d as oe,e as re,f as le,g as me,h as pe,i as de,j as ce,k as se,l as fe}from"./chunk-FEDFXP2D.js";import{a as te}from"./chunk-W77BPQM7.js";import"./chunk-T6FL6ZBG.js";import{a as X,c as Z,d as ee}from"./chunk-XZVKBWV7.js";import{b as G,e as J,i as K}from"./chunk-IGML5J3D.js";import"./chunk-DLMMVLF7.js";import"./chunk-X4PFBHKL.js";import"./chunk-ORAJKTE5.js";import{b as N,f as H,i as B,p as Q}from"./chunk-DUSDXFBS.js";import{a as q,c as U,h as Y}from"./chunk-PWNKGTLH.js";import"./chunk-PSOPTTCW.js";import"./chunk-NMO4AZKI.js";import{d as F,g as z}from"./chunk-JQUVUDJB.js";import{j as I,m as R,qa as W,ra as $,ta as j,va as V}from"./chunk-A3I6STGM.js";import{$b as y,Ab as c,Fb as E,Kb as i,Lb as n,Mb as C,Nb as s,Ob as f,Ub as M,Zb as S,_b as w,bb as r,dc as o,ec as h,fc as _,gb as A,hc as P,ic as b,jc as T,mc as k,nb as L,nc as x,pc as D,rc as O,tb as m}from"./chunk-2HR56SRD.js";var Me=()=>[10,25,50,100],ve=e=>["/approvals",e];function Se(e,a){e&1&&(i(0,"th",21),o(1,"Reference"),n())}function we(e,a){if(e&1&&(i(0,"td",22)(1,"a",23),o(2),n()()),e&2){let t=a.$implicit;r(),c("routerLink",x(2,ve,t.id)),r(),_(" ",t.referenceNumber," ")}}function ye(e,a){e&1&&(i(0,"th",21),o(1,"Workflow"),n())}function xe(e,a){if(e&1&&(i(0,"td",22)(1,"div",24)(2,"mat-icon"),o(3),n(),i(4,"span"),o(5),n()()()),e&2){let t=a.$implicit;r(3),h(t.workflowIcon||"description"),r(2),h(t.workflowName)}}function Ae(e,a){e&1&&(i(0,"th",21),o(1,"Submitted By"),n())}function Le(e,a){if(e&1&&(i(0,"td",22),o(1),n()),e&2){let t=a.$implicit;r(),h(t.initiatorName)}}function Ee(e,a){e&1&&(i(0,"th",21),o(1,"Level"),n())}function Pe(e,a){if(e&1&&(i(0,"td",22),o(1),n()),e&2){let t=a.$implicit;r(),_(" Level ",t.currentApprovalLevel," ")}}function be(e,a){e&1&&(i(0,"th",21),o(1,"Submitted"),n())}function Te(e,a){if(e&1&&(i(0,"td",22),o(1),D(2,"date"),n()),e&2){let t=a.$implicit;r(),_(" ",O(2,1,t.createdAt,"medium")," ")}}function ke(e,a){e&1&&C(0,"th",25)}function De(e,a){if(e&1&&(i(0,"td",22)(1,"button",26),o(2," Review "),n()()),e&2){let t=a.$implicit;r(),c("routerLink",x(1,ve,t.id))}}function Oe(e,a){e&1&&C(0,"tr",27)}function Ie(e,a){e&1&&C(0,"tr",28)}function Re(e,a){e&1&&(i(0,"div",19)(1,"mat-icon"),o(2,"thumb_up"),n(),i(3,"h3"),o(4,"All Caught Up!"),n(),i(5,"p"),o(6,"You have no pending approvals at this time."),n()())}var mt=(()=>{class e{workflowService;displayedColumns=["referenceNumber","workflowName","initiatorName","currentApprovalLevel","createdAt","actions"];dataSource=new fe([]);searchTerm="";totalElements=0;pageSize=10;currentPage=0;paginator;sort;constructor(t){this.workflowService=t}ngOnInit(){this.loadApprovals()}ngAfterViewInit(){this.dataSource.sort=this.sort}loadApprovals(){this.workflowService.getPendingApprovals(this.currentPage,this.pageSize).subscribe(t=>{t.success&&(this.dataSource.data=t.data.content,this.totalElements=t.data.totalElements)})}applyFilter(){this.dataSource.filter=this.searchTerm.trim().toLowerCase()}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadApprovals()}static \u0275fac=function(p){return new(p||e)(A(te))};static \u0275cmp=L({type:e,selectors:[["app-approval-list"]],viewQuery:function(p,l){if(p&1&&(S(g,5),S(v,5)),p&2){let d;w(d=y())&&(l.paginator=d.first),w(d=y())&&(l.sort=d.first)}},decls:39,vars:10,consts:[[1,"approval-list-container"],[1,"header"],[1,"header-stats"],[1,"table-toolbar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by reference or workflow",3,"ngModelChange","keyup","ngModel"],["matPrefix",""],["mat-table","","matSort","",1,"data-table",3,"dataSource"],["matColumnDef","referenceNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","workflowName"],["matColumnDef","initiatorName"],["matColumnDef","currentApprovalLevel"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"empty-state"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"reference-link",3,"routerLink"],[1,"workflow-info"],["mat-header-cell",""],["mat-raised-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(p,l){p&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Pending Approvals"),n(),i(4,"div",2)(5,"mat-chip"),o(6),n()()(),i(7,"mat-card")(8,"mat-card-content")(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),o(12,"Search"),n(),i(13,"input",5),T("ngModelChange",function(u){return b(l.searchTerm,u)||(l.searchTerm=u),u}),M("keyup",function(){return l.applyFilter()}),n(),i(14,"mat-icon",6),o(15,"search"),n()()(),i(16,"table",7),s(17,8),m(18,Se,2,0,"th",9)(19,we,3,4,"td",10),f(),s(20,11),m(21,ye,2,0,"th",9)(22,xe,6,2,"td",10),f(),s(23,12),m(24,Ae,2,0,"th",9)(25,Le,2,1,"td",10),f(),s(26,13),m(27,Ee,2,0,"th",9)(28,Pe,2,1,"td",10),f(),s(29,14),m(30,be,2,0,"th",9)(31,Te,3,4,"td",10),f(),s(32,15),m(33,ke,1,0,"th",16)(34,De,3,3,"td",10),f(),m(35,Oe,1,0,"tr",17)(36,Ie,1,0,"tr",18),n(),m(37,Re,7,0,"div",19),i(38,"mat-paginator",20),M("page",function(u){return l.onPageChange(u)}),n()()()()),p&2&&(r(6),_("",l.totalElements," pending"),r(7),P("ngModel",l.searchTerm),r(3),c("dataSource",l.dataSource),r(19),c("matHeaderRowDef",l.displayedColumns),r(),c("matRowDefColumns",l.displayedColumns),r(),E(l.dataSource.data.length===0?37:-1),r(),c("length",l.totalElements)("pageSize",l.pageSize)("pageSizeOptions",k(9,Me)))},dependencies:[R,I,z,F,Q,N,H,B,Y,q,U,se,ie,ae,me,oe,ne,pe,re,le,de,ce,ue,g,Ce,v,_e,X,K,G,J,ee,Z,V,j,$,W,ge,he],styles:[".approval-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.table-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-field[_ngcontent-%COMP%]{width:400px}.data-table[_ngcontent-%COMP%]{width:100%}.reference-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.reference-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.workflow-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.workflow-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:20px;width:20px;height:20px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#666;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;opacity:.7}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return e})();export{mt as ApprovalListComponent};
