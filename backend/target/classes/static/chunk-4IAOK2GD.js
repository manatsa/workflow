import{a as G}from"./chunk-UAAG5SLX.js";import{a as z,b as L,c as W,d as $,e as F,f as j,g as B,h as U,i as V,j as Y,k as q}from"./chunk-FEDFXP2D.js";import{a as H}from"./chunk-W77BPQM7.js";import"./chunk-T6FL6ZBG.js";import{a as T,b as I,c as R,f as A,h as N}from"./chunk-PWNKGTLH.js";import"./chunk-PSOPTTCW.js";import"./chunk-NMO4AZKI.js";import{a as y}from"./chunk-3QXD4PCM.js";import{d as S,g as E}from"./chunk-JQUVUDJB.js";import{m as b,qa as D,ra as k,ta as P,va as O}from"./chunk-A3I6STGM.js";import{Ab as s,Fb as h,Ib as w,Jb as x,Kb as n,Lb as i,Mb as u,Nb as p,Ob as f,Vb as v,bb as r,dc as a,ec as m,fc as M,gb as C,nb as g,nc as _,tb as c}from"./chunk-2HR56SRD.js";var J=t=>["/workflows",t,"new"],K=t=>["/approvals",t],Q=(t,o)=>o.id;function X(t,o){if(t&1&&(n(0,"mat-card",9)(1,"mat-icon"),a(2),i(),n(3,"h3"),a(4),i(),n(5,"p"),a(6),i()()),t&2){let e=o.$implicit;s("routerLink",_(4,J,e.code)),r(2),m(e.icon||"description"),r(2),m(e.name),r(2),m(e.description)}}function Z(t,o){t&1&&(n(0,"p",11),a(1,"No pending approvals"),i())}function tt(t,o){t&1&&(n(0,"th",21),a(1,"Reference"),i())}function et(t,o){if(t&1&&(n(0,"td",22),a(1),i()),t&2){let e=o.$implicit;r(),m(e.referenceNumber)}}function nt(t,o){t&1&&(n(0,"th",21),a(1,"Workflow"),i())}function it(t,o){if(t&1&&(n(0,"td",22),a(1),i()),t&2){let e=o.$implicit;r(),m(e.workflowName)}}function at(t,o){t&1&&(n(0,"th",21),a(1,"Submitted By"),i())}function ot(t,o){if(t&1&&(n(0,"td",22),a(1),i()),t&2){let e=o.$implicit;r(),m(e.initiatorName)}}function rt(t,o){t&1&&u(0,"th",21)}function mt(t,o){if(t&1&&(n(0,"td",22)(1,"button",23),a(2," Review "),i()()),t&2){let e=o.$implicit;r(),s("routerLink",_(1,K,e.id))}}function lt(t,o){t&1&&u(0,"tr",24)}function dt(t,o){t&1&&u(0,"tr",25)}function ct(t,o){if(t&1&&(n(0,"table",12),p(1,13),c(2,tt,2,0,"th",14)(3,et,2,1,"td",15),f(),p(4,16),c(5,nt,2,0,"th",14)(6,it,2,1,"td",15),f(),p(7,17),c(8,at,2,0,"th",14)(9,ot,2,1,"td",15),f(),p(10,18),c(11,rt,1,0,"th",14)(12,mt,3,3,"td",15),f(),c(13,lt,1,0,"tr",19)(14,dt,1,0,"tr",20),i()),t&2){let e=v();s("dataSource",e.pendingApprovals),r(13),s("matHeaderRowDef",e.displayedColumns),r(),s("matRowDefColumns",e.displayedColumns)}}var Dt=(()=>{class t{authService;workflowService;workflows=[];pendingApprovals=[];pendingCount=0;submissionsCount=0;approvedCount=0;displayedColumns=["referenceNumber","workflowName","initiatorName","actions"];constructor(e,l){this.authService=e,this.workflowService=l}get fullName(){return this.authService.currentUser?.fullName||"User"}ngOnInit(){this.loadData()}loadData(){this.workflowService.getActiveWorkflows().subscribe(e=>{e.success&&(this.workflows=e.data)}),this.workflowService.getPendingApprovals(0,5).subscribe(e=>{e.success&&(this.pendingApprovals=e.data.content,this.pendingCount=e.data.totalElements)}),this.workflowService.getMySubmissions(0,100).subscribe(e=>{e.success&&(this.submissionsCount=e.data.totalElements,this.approvedCount=e.data.content.filter(l=>l.status===G.APPROVED).length)})}static \u0275fac=function(l){return new(l||t)(C(y),C(H))};static \u0275cmp=g({type:t,selectors:[["app-dashboard"]],decls:54,vars:6,consts:[[1,"dashboard"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],[1,"content-grid"],[1,"card"],[1,"workflow-grid"],[1,"workflow-card",3,"routerLink"],["mat-button","","color","primary","routerLink","/approvals"],[1,"no-data"],["mat-table","",1,"data-table",3,"dataSource"],["matColumnDef","referenceNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","workflowName"],["matColumnDef","initiatorName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(l,d){l&1&&(n(0,"div",0)(1,"h1"),a(2),i(),n(3,"div",1)(4,"mat-card",2)(5,"mat-icon"),a(6,"pending"),i(),n(7,"div",3)(8,"span",4),a(9),i(),n(10,"span",5),a(11,"Pending Approvals"),i()()(),n(12,"mat-card",2)(13,"mat-icon"),a(14,"send"),i(),n(15,"div",3)(16,"span",4),a(17),i(),n(18,"span",5),a(19,"My Submissions"),i()()(),n(20,"mat-card",2)(21,"mat-icon"),a(22,"check_circle"),i(),n(23,"div",3)(24,"span",4),a(25),i(),n(26,"span",5),a(27,"Approved"),i()()(),n(28,"mat-card",2)(29,"mat-icon"),a(30,"folder"),i(),n(31,"div",3)(32,"span",4),a(33),i(),n(34,"span",5),a(35,"Active Workflows"),i()()()(),n(36,"div",6)(37,"mat-card",7)(38,"mat-card-header")(39,"mat-card-title"),a(40,"Available Workflows"),i()(),n(41,"mat-card-content")(42,"div",8),w(43,X,7,6,"mat-card",9,Q),i()()(),n(45,"mat-card",7)(46,"mat-card-header")(47,"mat-card-title"),a(48,"Recent Pending Approvals"),i(),n(49,"button",10),a(50,"View All"),i()(),n(51,"mat-card-content"),c(52,Z,2,0,"p",11)(53,ct,15,3,"table",12),i()()()()),l&2&&(r(2),M("Welcome, ",d.fullName,"!"),r(7),m(d.pendingCount),r(8),m(d.submissionsCount),r(8),m(d.approvedCount),r(8),m(d.workflows.length),r(10),x(d.workflows),r(9),h(d.pendingApprovals.length===0?52:53))},dependencies:[b,E,S,N,T,R,A,I,k,D,O,P,q,z,W,B,$,L,U,F,j,V,Y],styles:[".dashboard[_ngcontent-%COMP%]{padding:1rem}h1[_ngcontent-%COMP%]{margin-bottom:1.5rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem}.stat-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem;color:#1976d2}.stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-value[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:500}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:.875rem}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:1rem}.card[_ngcontent-%COMP%]{height:fit-content}mat-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.workflow-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;padding:1rem 0}.workflow-card[_ngcontent-%COMP%]{padding:1rem;text-align:center;cursor:pointer;transition:transform .2s,box-shadow .2s}.workflow-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.workflow-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:#1976d2}.workflow-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:.5rem 0 .25rem;font-size:.875rem}.workflow-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.75rem;color:#666}.data-table[_ngcontent-%COMP%]{width:100%}.no-data[_ngcontent-%COMP%]{text-align:center;color:#666;padding:2rem}"]})}return t})();export{Dt as DashboardComponent};
