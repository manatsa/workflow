import{d as ae}from"./chunk-XGYV3QI7.js";import{a as fe}from"./chunk-V6VZ6TGW.js";import"./chunk-DVTP2NLI.js";import"./chunk-RP3FIGZU.js";import"./chunk-22QFHSXK.js";import{d as se,h as pe,k as me,s as le}from"./chunk-JITRQZ7S.js";import"./chunk-W4XF3NOO.js";import{a as h}from"./chunk-4FIQ4TSC.js";import{b as re,c as _,f as ie}from"./chunk-PKMLTJ2J.js";import{a as $,m as J,o as ee,p as te,qa as de,ra as ce,s as oe,sa as ue,t as ne,va as he}from"./chunk-LBWRLA47.js";import{$ as k,$b as M,Db as U,E as x,Fb as W,Gb as H,Ib as z,Jb as Q,Ka as B,Kb as s,Lb as m,Mb as G,Na as O,Qb as w,Ub as u,Vb as K,Z as I,Zb as v,_b as A,ab as N,bb as c,ca as R,dc as C,eb as L,ec as Y,fa as p,gb as g,hb as V,hc as q,ia as P,ic as X,jc as Z,na as l,nb as y,oa as d,p as b,ta as F,tb as j,wa as E,ya as D,za as T}from"./chunk-5XIHPI6O.js";var Me="@",Se=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=p(F);loadingSchedulerFn=p(be,{optional:!0});_engine;constructor(t,n,r,i,a){this.doc=t,this.delegate=n,this.zone=r,this.animationType=i,this.moduleImpl=a}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-C235IHH7.js").then(r=>r),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(t):n=t(),n.catch(r=>{throw new I(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:i})=>{this._engine=r(this.animationType,this.doc);let a=new i(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,n){let r=this.delegate.createRenderer(t,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let i=new S(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let f=a.createRenderer(t,n);i.use(f),this.scheduler??=this.injector.get(E,null,{optional:!0}),this.scheduler?.notify(10)}).catch(a=>{i.use(r)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(t){this._engine?.flush(),this.delegate.componentReplaced?.(t)}static \u0275fac=function(n){V()};static \u0275prov=k({token:e,factory:e.\u0275fac})}return e})(),S=class{delegate;replay=[];\u0275type=1;constructor(o){this.delegate=o}use(o){if(this.delegate=o,this.replay!==null){for(let t of this.replay)t(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,t){return this.delegate.createElement(o,t)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,t){this.delegate.appendChild(o,t)}insertBefore(o,t,n,r){this.delegate.insertBefore(o,t,n,r)}removeChild(o,t,n){this.delegate.removeChild(o,t,n)}selectRootElement(o,t){return this.delegate.selectRootElement(o,t)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,t,n,r){this.delegate.setAttribute(o,t,n,r)}removeAttribute(o,t,n){this.delegate.removeAttribute(o,t,n)}addClass(o,t){this.delegate.addClass(o,t)}removeClass(o,t){this.delegate.removeClass(o,t)}setStyle(o,t,n,r){this.delegate.setStyle(o,t,n,r)}removeStyle(o,t,n){this.delegate.removeStyle(o,t,n)}setProperty(o,t,n){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(o,t,n)),this.delegate.setProperty(o,t,n)}setValue(o,t){this.delegate.setValue(o,t)}listen(o,t,n,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(o,t,n,r)),this.delegate.listen(o,t,n,r)}shouldReplay(o){return this.replay!==null&&o.startsWith(Me)}},be=new R("");function ge(e="animations"){return O("NgAsyncAnimations"),P([{provide:L,useFactory:(o,t,n)=>new Se(o,t,n,e),deps:[$,ee,T]},{provide:B,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var xe=["commandInput"],Ie=["consoleBody"];function ke(e,o){if(e&1&&(s(0,"div"),C(1),m()),e&2){let t=o.$implicit;U(t.type),c(),Y(t.text)}}var ye=(()=>{class e{settingService;close=new D;commandInput;consoleBody;command="";output=[{text:"Sonarworks Command Console",type:"info"},{text:'Type "help" for available commands',type:"info"},{text:"",type:"output"}];constructor(t){this.settingService=t}ngAfterViewInit(){this.commandInput.nativeElement.focus()}executeCommand(){this.command.trim()&&(this.output.push({text:`> ${this.command}`,type:"output"}),this.settingService.executeCommand(this.command).subscribe({next:t=>{t.success&&t.data?t.data.output.forEach(n=>{this.output.push({text:n,type:t.data.success?"success":"error"})}):this.output.push({text:t.message||"Command failed",type:"error"}),this.scrollToBottom()},error:t=>{this.output.push({text:t.error?.message||"Error executing command",type:"error"}),this.scrollToBottom()}}),this.command="")}scrollToBottom(){setTimeout(()=>{let t=this.consoleBody.nativeElement;t.scrollTop=t.scrollHeight},100)}static \u0275fac=function(n){return new(n||e)(g(fe))};static \u0275cmp=y({type:e,selectors:[["app-command-console"]],viewQuery:function(n,r){if(n&1&&(v(xe,5),v(Ie,5)),n&2){let i;A(i=M())&&(r.commandInput=i.first),A(i=M())&&(r.consoleBody=i.first)}},outputs:{close:"close"},decls:16,vars:1,consts:[["consoleBody",""],["commandInput",""],[1,"command-console"],[1,"command-console-header"],["mat-icon-button","",3,"click"],[1,"command-console-body"],[3,"class"],[1,"input-line"],[1,"prompt"],["type","text","autofocus","",1,"command-console-input",3,"ngModelChange","keydown.enter","ngModel"]],template:function(n,r){if(n&1){let i=w();s(0,"div",2)(1,"div",3)(2,"span"),C(3,"Command Console"),m(),s(4,"button",4),u("click",function(){return l(i),d(r.close.emit())}),s(5,"mat-icon"),C(6,"close"),m()()(),s(7,"div",5,0),z(9,ke,2,3,"div",6,H),s(11,"div",7)(12,"span",8),C(13,">"),m(),s(14,"input",9,1),Z("ngModelChange",function(f){return l(i),X(r.command,f)||(r.command=f),d(f)}),u("keydown.enter",function(){return l(i),d(r.executeCommand())}),m()()()()}n&2&&(c(9),Q(r.output),c(5),q("ngModel",r.command))},dependencies:[J,le,se,pe,me,ce,de,he,ue],styles:[".command-console[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:80%;max-width:800px;background:#1e1e1e;border-radius:8px;box-shadow:0 8px 32px #0000004d;z-index:9999}.command-console-header[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#333;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center;color:#fff}.command-console-body[_ngcontent-%COMP%]{padding:1rem;max-height:400px;overflow-y:auto;font-family:Consolas,Monaco,monospace;font-size:14px}.output[_ngcontent-%COMP%]{color:#0f0}.error[_ngcontent-%COMP%]{color:#f44}.info[_ngcontent-%COMP%]{color:#0af}.success[_ngcontent-%COMP%]{color:#4f4}.input-line[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.prompt[_ngcontent-%COMP%]{color:#0f0}.command-console-input[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;color:#0f0;font-family:Consolas,Monaco,monospace;font-size:14px;outline:none}"]})}return e})();function Re(e,o){if(e&1){let t=w();s(0,"app-command-console",0),u("close",function(){l(t);let r=K();return d(r.showConsole=!1)}),m()}}var we=(()=>{class e{authService;showConsole=!1;constructor(t){this.authService=t}get isSuperUser(){return this.authService.currentUser?.username==="super"}handleKeyboardEvent(t){t.ctrlKey&&t.altKey&&t.key.toLowerCase()==="p"&&(t.preventDefault(),this.isSuperUser&&(this.showConsole=!this.showConsole))}static \u0275fac=function(n){return new(n||e)(g(h))};static \u0275cmp=y({type:e,selectors:[["app-root"]],hostBindings:function(n,r){n&1&&u("keydown",function(a){return r.handleKeyboardEvent(a)},!1,N)},decls:2,vars:1,consts:[[3,"close"]],template:function(n,r){n&1&&(G(0,"router-outlet"),j(1,Re,1,0,"app-command-console")),n&2&&(c(),W(r.showConsole&&r.isSuperUser?1:-1))},dependencies:[re,ye],encapsulation:2})}return e})();var _e=(e,o)=>{let t=p(h),n=p(_);return t.isAuthenticated?!0:(n.navigate(["/login"],{queryParams:{returnUrl:o.url}}),!1)};var ve=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"login",loadComponent:()=>import("./chunk-LX45TMRX.js").then(e=>e.LoginComponent)},{path:"forgot-password",loadComponent:()=>import("./chunk-6TZFFXK5.js").then(e=>e.ForgotPasswordComponent)},{path:"reset-password",loadComponent:()=>import("./chunk-A5TTFIUI.js").then(e=>e.ResetPasswordComponent)},{path:"",loadComponent:()=>import("./chunk-CSWUEIDQ.js").then(e=>e.MainLayoutComponent),canActivate:[_e],children:[{path:"dashboard",loadComponent:()=>import("./chunk-XGIEWRAI.js").then(e=>e.DashboardComponent)},{path:"profile",loadComponent:()=>import("./chunk-CONHPY3I.js").then(e=>e.ProfileComponent)},{path:"change-password",loadComponent:()=>import("./chunk-YDVBMP5I.js").then(e=>e.ChangePasswordComponent)},{path:"users",loadComponent:()=>import("./chunk-2G634CA5.js").then(e=>e.UserListComponent)},{path:"users/new",loadComponent:()=>import("./chunk-SQOIWHNP.js").then(e=>e.UserFormComponent)},{path:"users/:id",loadComponent:()=>import("./chunk-SQOIWHNP.js").then(e=>e.UserFormComponent)},{path:"roles",loadComponent:()=>import("./chunk-7YLYZDDC.js").then(e=>e.RoleListComponent)},{path:"categories",loadComponent:()=>import("./chunk-DJ5GQX7N.js").then(e=>e.CategoryListComponent)},{path:"corporates",loadComponent:()=>import("./chunk-VZRZLT7R.js").then(e=>e.CorporateListComponent)},{path:"sbus",loadComponent:()=>import("./chunk-K3QQXMTV.js").then(e=>e.SbuListComponent)},{path:"branches",loadComponent:()=>import("./chunk-LD52UOUE.js").then(e=>e.BranchListComponent)},{path:"departments",loadComponent:()=>import("./chunk-YKKLSORD.js").then(e=>e.DepartmentListComponent)},{path:"settings",loadComponent:()=>import("./chunk-QGQ5XH7E.js").then(e=>e.SettingsComponent)},{path:"audit",loadComponent:()=>import("./chunk-4DHPBVL2.js").then(e=>e.AuditLogComponent)},{path:"workflows",loadComponent:()=>import("./chunk-NYYSLRKD.js").then(e=>e.WorkflowListComponent)},{path:"workflows/builder/new",loadComponent:()=>import("./chunk-7NLECUSN.js").then(e=>e.WorkflowBuilderComponent)},{path:"workflows/builder/:id",loadComponent:()=>import("./chunk-7NLECUSN.js").then(e=>e.WorkflowBuilderComponent),runGuardsAndResolvers:"paramsChange"},{path:"workflows/:workflowCode/instances",loadComponent:()=>import("./chunk-OVIRZAQL.js").then(e=>e.WorkflowInstancesComponent)},{path:"workflows/:workflowCode/new",loadComponent:()=>import("./chunk-CER4J2HA.js").then(e=>e.WorkflowFormComponent)},{path:"workflows/:workflowCode/edit/:instanceId",loadComponent:()=>import("./chunk-CER4J2HA.js").then(e=>e.WorkflowFormComponent)},{path:"workflows/:workflowCode/instances/:instanceId",loadComponent:()=>import("./chunk-LLQ3TMNM.js").then(e=>e.InstanceDetailComponent)},{path:"approvals",loadComponent:()=>import("./chunk-SB5GMBUK.js").then(e=>e.ApprovalListComponent)},{path:"approvals/:id",loadComponent:()=>import("./chunk-YBEESXQ7.js").then(e=>e.ApprovalDetailComponent)},{path:"my-submissions",loadComponent:()=>import("./chunk-3E6FTWJW.js").then(e=>e.MySubmissionsComponent)}]},{path:"**",redirectTo:"dashboard"}];var Ae=(e,o)=>{let t=p(h),n=p(_),r=t.token;return r&&(e=e.clone({setHeaders:{Authorization:`Bearer ${r}`}})),o(e).pipe(x(i=>(i.status===401&&(t.logout(),n.navigate(["/login"])),b(()=>i))))};te(we,{providers:[ie(ve),ge(),oe(ne([Ae])),ae()]}).catch(e=>console.error(e));
