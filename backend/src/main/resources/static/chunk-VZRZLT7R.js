import"./chunk-F5X5MWHG.js";import{a as vt,b as St}from"./chunk-4M7UJXFZ.js";import"./chunk-MS4AQ6UA.js";import{a as gt,b as Et}from"./chunk-B7S7HKPH.js";import{c as N}from"./chunk-RP3FIGZU.js";import{a as ot,b as nt}from"./chunk-LUBHRDD6.js";import"./chunk-22QFHSXK.js";import{a as lt,b as mt,c as ct,d as dt,e as pt,f as st,g as ut,h as Ct,i as ft,j as _t,k as ht}from"./chunk-S7OVDIVJ.js";import"./chunk-KPLEND2O.js";import{a as xt}from"./chunk-3HKR6USX.js";import{a as rt,b as at}from"./chunk-XQHIDIE5.js";import"./chunk-LETYTNCA.js";import"./chunk-M3GLKEYP.js";import{a as tt,c as et,d as it}from"./chunk-ZK2UDSKG.js";import{b as X,c as Y,i as Z}from"./chunk-FHBRY4FZ.js";import{d as D,f as M,h as F,i as O,l as R,n as k,o as A,r as V,s as B,t as $}from"./chunk-JITRQZ7S.js";import{a as z,b as W,c as J,f as K,h as Q}from"./chunk-LB6LFADN.js";import"./chunk-Q5RCCGFX.js";import"./chunk-W4XF3NOO.js";import{m as P,qa as G,ra as H,sa as q,ta as j,va as U}from"./chunk-LBWRLA47.js";import{Ab as p,Cb as L,Fb as v,Ib as b,Jb as w,Kb as o,Lb as i,Mb as s,Nb as f,Ob as _,Qb as T,Ub as h,Vb as x,bb as l,dc as n,ec as u,fc as y,gb as S,na as g,nb as I,oa as E,tb as d}from"./chunk-5XIHPI6O.js";var C=function(t){return t.PRIVATE_LIMITED="PRIVATE_LIMITED",t.SOLE_TRADER="SOLE_TRADER",t.PUBLIC="PUBLIC",t.PARTNERSHIP="PARTNERSHIP",t.NGO="NGO",t.GOVERNMENT="GOVERNMENT",t}(C||{}),Mt={[C.PRIVATE_LIMITED]:"Private Limited",[C.SOLE_TRADER]:"Sole Trader",[C.PUBLIC]:"Public",[C.PARTNERSHIP]:"Partnership",[C.NGO]:"NGO",[C.GOVERNMENT]:"Government"};var bt=(t,r)=>r.id,wt=(t,r)=>r.value;function Tt(t,r){t&1&&(o(0,"th",18),n(1,"Code"),i())}function yt(t,r){if(t&1&&(o(0,"td",19),n(1),i()),t&2){let e=r.$implicit;l(),u(e.code)}}function It(t,r){t&1&&(o(0,"th",18),n(1,"Name"),i())}function Lt(t,r){if(t&1&&(o(0,"td",19),n(1),i()),t&2){let e=r.$implicit;l(),u(e.name)}}function Pt(t,r){t&1&&(o(0,"th",18),n(1,"Category"),i())}function Nt(t,r){if(t&1&&(o(0,"td",19),n(1),i()),t&2){let e=r.$implicit;l(),u(e.categoryName||"-")}}function Dt(t,r){t&1&&(o(0,"th",18),n(1,"Type"),i())}function Ft(t,r){if(t&1&&(o(0,"td",19),n(1),i()),t&2){let e=r.$implicit;l(),u(e.corporateTypeDisplayName||"-")}}function Ot(t,r){t&1&&(o(0,"th",18),n(1,"Status"),i())}function Rt(t,r){if(t&1&&(o(0,"td",19)(1,"mat-chip",20),n(2),i()()),t&2){let e=r.$implicit;l(),p("color",e.isActive?"primary":"warn"),l(),y(" ",e.isActive?"Active":"Inactive"," ")}}function kt(t,r){t&1&&(o(0,"th",18),n(1,"Actions"),i())}function At(t,r){if(t&1){let e=T();o(0,"td",19)(1,"button",21),h("click",function(){let a=g(e).$implicit,c=x();return E(c.editCorporate(a))}),o(2,"mat-icon"),n(3,"edit"),i()(),o(4,"button",22),h("click",function(){let a=g(e).$implicit,c=x();return E(c.toggleStatus(a))}),o(5,"mat-icon"),n(6),i()(),o(7,"button",23),h("click",function(){let a=g(e).$implicit,c=x();return E(c.deleteCorporate(a))}),o(8,"mat-icon"),n(9,"delete"),i()()()}if(t&2){let e=r.$implicit;l(4),p("matTooltip",e.isActive?"Deactivate":"Activate"),l(2),u(e.isActive?"visibility_off":"visibility")}}function Vt(t,r){t&1&&s(0,"tr",24)}function Bt(t,r){t&1&&s(0,"tr",25)}function $t(t,r){t&1&&(o(0,"div",16)(1,"mat-icon"),n(2,"corporate_fare"),i(),o(3,"p"),n(4,"No corporates found. Add your first corporate."),i()())}function Gt(t,r){t&1&&(o(0,"mat-error"),n(1,"Code is required"),i())}function Ht(t,r){t&1&&(o(0,"mat-error"),n(1,"Name is required"),i())}function qt(t,r){if(t&1&&(o(0,"mat-option",32),n(1),i()),t&2){let e=r.$implicit;p("value",e.id),l(),u(e.name)}}function jt(t,r){if(t&1&&(o(0,"mat-option",32),n(1),i()),t&2){let e=r.$implicit;p("value",e.value),l(),u(e.label)}}function Ut(t,r){t&1&&(o(0,"mat-error"),n(1,"Invalid email format"),i())}function zt(t,r){if(t&1){let e=T();o(0,"mat-card",17)(1,"mat-card-header")(2,"mat-card-title"),n(3),i()(),o(4,"mat-card-content")(5,"form",26),h("ngSubmit",function(){g(e);let a=x();return E(a.saveCorporate())}),o(6,"div",27)(7,"mat-form-field",28)(8,"mat-label"),n(9,"Code"),i(),s(10,"input",29),d(11,Gt,2,0,"mat-error"),i(),o(12,"mat-form-field",28)(13,"mat-label"),n(14,"Name"),i(),s(15,"input",30),d(16,Ht,2,0,"mat-error"),i()(),o(17,"div",27)(18,"mat-form-field",28)(19,"mat-label"),n(20,"Category (Industry)"),i(),o(21,"mat-select",31)(22,"mat-option",32),n(23,"-- None --"),i(),b(24,qt,2,2,"mat-option",32,bt),i()(),o(26,"mat-form-field",28)(27,"mat-label"),n(28,"Corporate Type"),i(),o(29,"mat-select",33)(30,"mat-option",32),n(31,"-- None --"),i(),b(32,jt,2,2,"mat-option",32,wt),i()()(),o(34,"mat-form-field",34)(35,"mat-label"),n(36,"Description"),i(),s(37,"textarea",35),i(),o(38,"mat-form-field",34)(39,"mat-label"),n(40,"Address"),i(),s(41,"textarea",36),i(),o(42,"div",27)(43,"mat-form-field",28)(44,"mat-label"),n(45,"Contact Email"),i(),s(46,"input",37),d(47,Ut,2,0,"mat-error"),i(),o(48,"mat-form-field",28)(49,"mat-label"),n(50,"Contact Phone"),i(),s(51,"input",38),i()(),o(52,"mat-form-field",34)(53,"mat-label"),n(54,"Website"),i(),s(55,"input",39),i(),o(56,"div",40)(57,"button",41),h("click",function(){g(e);let a=x();return E(a.showForm=!1)}),n(58,"Cancel"),i(),o(59,"button",42),n(60),i()()()()()}if(t&2){let e,m,a,c=x();l(3),u(c.editingCorporate?"Edit Corporate":"Add Corporate"),l(2),p("formGroup",c.corporateForm),l(6),v((e=c.corporateForm.get("code"))!=null&&e.hasError("required")?11:-1),l(5),v((m=c.corporateForm.get("name"))!=null&&m.hasError("required")?16:-1),l(6),p("value",null),l(2),w(c.categories),l(6),p("value",null),l(2),w(c.corporateTypes),l(15),v((a=c.corporateForm.get("contactEmail"))!=null&&a.hasError("email")?47:-1),l(12),p("disabled",c.loading||c.corporateForm.invalid),l(),y(" ",c.editingCorporate?"Update":"Create"," ")}}var Ee=(()=>{class t{fb;userService;snackBar;corporates=[];categories=[];displayedColumns=["code","name","category","type","status","actions"];showForm=!1;editingCorporate=null;loading=!1;corporateForm;corporateTypes=Object.values(C).map(e=>({value:e,label:Mt[e]}));constructor(e,m,a){this.fb=e,this.userService=m,this.snackBar=a,this.corporateForm=this.fb.group({code:["",M.required],name:["",M.required],description:[""],address:[""],categoryId:[null],corporateType:[null],contactEmail:["",M.email],contactPhone:[""],website:[""]})}ngOnInit(){this.loadCorporates(),this.loadCategories()}loadCorporates(){this.userService.getCorporates().subscribe(e=>{e.success&&(this.corporates=e.data)})}loadCategories(){this.userService.getActiveCategories().subscribe(e=>{e.success&&(this.categories=e.data)})}editCorporate(e){this.editingCorporate=e,this.showForm=!0,this.corporateForm.patchValue({code:e.code,name:e.name,description:e.description,address:e.address,categoryId:e.categoryId,corporateType:e.corporateType,contactEmail:e.contactEmail,contactPhone:e.contactPhone,website:e.website})}saveCorporate(){if(this.corporateForm.invalid)return;this.loading=!0;let e=this.corporateForm.value;(this.editingCorporate?this.userService.updateCorporate(this.editingCorporate.id,e):this.userService.createCorporate(e)).subscribe({next:a=>{this.loading=!1,a.success&&(this.snackBar.open(this.editingCorporate?"Corporate updated":"Corporate created","Close",{duration:3e3}),this.showForm=!1,this.editingCorporate=null,this.corporateForm.reset(),this.loadCorporates())},error:a=>{this.loading=!1,this.snackBar.open(a.error?.message||"Operation failed","Close",{duration:3e3})}})}toggleStatus(e){(e.isActive?this.userService.deactivateCorporate(e.id):this.userService.activateCorporate(e.id)).subscribe({next:()=>{this.snackBar.open(e.isActive?"Corporate deactivated":"Corporate activated","Close",{duration:3e3}),this.loadCorporates()},error:a=>{this.snackBar.open(a.error?.message||"Operation failed","Close",{duration:3e3})}})}deleteCorporate(e){confirm(`Are you sure you want to delete "${e.name}"?`)&&this.userService.deleteCorporate(e.id).subscribe({next:()=>{this.snackBar.open("Corporate deleted","Close",{duration:3e3}),this.loadCorporates()},error:m=>{this.snackBar.open(m.error?.message||"Failed to delete","Close",{duration:3e3})}})}static \u0275fac=function(m){return new(m||t)(S(V),S(xt),S(rt))};static \u0275cmp=I({type:t,selectors:[["app-corporate-list"]],decls:34,vars:7,consts:[[1,"corporate-list-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],[1,"content-grid"],[1,"table-card"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","category"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"no-data"],[1,"form-card"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-icon-button","","matTooltip","Edit",3,"click"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"form-field"],["matInput","","formControlName","code"],["matInput","","formControlName","name"],["formControlName","categoryId"],[3,"value"],["formControlName","corporateType"],["appearance","outline",1,"form-field","full-width"],["matInput","","formControlName","description","rows","2"],["matInput","","formControlName","address","rows","2"],["matInput","","formControlName","contactEmail","type","email"],["matInput","","formControlName","contactPhone"],["matInput","","formControlName","website","placeholder","https://example.com"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(m,a){m&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),n(3,"Corporates"),i(),o(4,"button",2),h("click",function(){return a.showForm=!0,a.editingCorporate=null,a.corporateForm.reset()}),o(5,"mat-icon"),n(6,"add"),i(),n(7," Add Corporate "),i()(),o(8,"div",3)(9,"mat-card",4)(10,"mat-card-content")(11,"table",5),f(12,6),d(13,Tt,2,0,"th",7)(14,yt,2,1,"td",8),_(),f(15,9),d(16,It,2,0,"th",7)(17,Lt,2,1,"td",8),_(),f(18,10),d(19,Pt,2,0,"th",7)(20,Nt,2,1,"td",8),_(),f(21,11),d(22,Dt,2,0,"th",7)(23,Ft,2,1,"td",8),_(),f(24,12),d(25,Ot,2,0,"th",7)(26,Rt,3,2,"td",8),_(),f(27,13),d(28,kt,2,0,"th",7)(29,At,10,2,"td",8),_(),d(30,Vt,1,0,"tr",14)(31,Bt,1,0,"tr",15),i(),d(32,$t,5,0,"div",16),i()(),d(33,zt,61,9,"mat-card",17),i()()),m&2&&(l(8),L("with-form",a.showForm),l(3),p("dataSource",a.corporates),l(19),p("matHeaderRowDef",a.displayedColumns),l(),p("matRowDefColumns",a.displayedColumns),l(),v(a.corporates.length===0?32:-1),l(),v(a.showForm?33:-1))},dependencies:[P,B,R,D,F,O,$,k,A,Q,z,J,K,W,ht,lt,ct,ut,dt,mt,Ct,pt,st,ft,_t,tt,Z,X,Y,it,et,U,j,q,H,G,at,nt,ot,Et,gt,N,St,vt],styles:[".corporate-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem}.content-grid.with-form[_ngcontent-%COMP%]{grid-template-columns:1fr 500px}@media (max-width: 1100px){.content-grid.with-form[_ngcontent-%COMP%]{grid-template-columns:1fr}}.full-width[_ngcontent-%COMP%]{width:100%}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.form-field[_ngcontent-%COMP%]{flex:1;margin-bottom:.5rem}.form-field.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem}table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:150px;text-align:center}"]})}return t})();export{Ee as CorporateListComponent};
