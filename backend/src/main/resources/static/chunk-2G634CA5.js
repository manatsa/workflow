import{a as Ge,b as We,c as qe}from"./chunk-IGTQ3GOP.js";import{a as H,b as ze,c as Q,d as He,e as Qe}from"./chunk-WYL5XVCT.js";import"./chunk-4M7UJXFZ.js";import"./chunk-B7S7HKPH.js";import"./chunk-RP3FIGZU.js";import{a as be,b as Me,c as Se,d as ke}from"./chunk-ARJGZQI5.js";import{a as he,b as ve}from"./chunk-D7R5IUPR.js";import{a as Ee,b as De,c as Ue,e as Te,f as we,g as Pe,h as F}from"./chunk-5TLSQL4E.js";import{a as V,b as A}from"./chunk-LUBHRDD6.js";import"./chunk-22QFHSXK.js";import{a as ye,b as Ie,c as Le,d as Oe,e as Be,f as Re,g as Ne,h as Fe,i as Ve,j as Ae,k as $e,l as je}from"./chunk-S7OVDIVJ.js";import"./chunk-KPLEND2O.js";import{a as z}from"./chunk-3HKR6USX.js";import{a as $,b as j}from"./chunk-XQHIDIE5.js";import"./chunk-LETYTNCA.js";import"./chunk-M3GLKEYP.js";import{a as ge,c as Ce,d as xe}from"./chunk-ZK2UDSKG.js";import{b as ue,e as _e,i as fe}from"./chunk-FHBRY4FZ.js";import{d as re,h as le,k as se,s as me}from"./chunk-JITRQZ7S.js";import{a as de,c as ce,h as pe}from"./chunk-LB6LFADN.js";import"./chunk-Q5RCCGFX.js";import"./chunk-W4XF3NOO.js";import{c as ne,d as ae,g as oe}from"./chunk-PKMLTJ2J.js";import{j as y,m as I,qa as L,ra as O,sa as B,ta as R,va as N}from"./chunk-LBWRLA47.js";import{$b as q,Ab as S,Db as P,Fb as u,Hb as J,Ib as x,Jb as h,Kb as i,Lb as t,Mb as v,Nb as b,Ob as M,Qb as k,Ub as _,Vb as p,Zb as G,_b as W,bb as l,cc as K,dc as a,ec as m,fc as E,gb as f,hc as X,ic as Z,jc as ee,mc as te,na as g,nb as w,nc as ie,oa as C,pc as D,rc as U,tb as c}from"./chunk-5XIHPI6O.js";var ot=(e,r)=>r.id||r,Y=(e,r)=>r.id;function rt(e,r){e&1&&(i(0,"span",9),a(1,"Locked"),t())}function lt(e,r){e&1&&(i(0,"span",10),a(1,"Active"),t())}function st(e,r){e&1&&(i(0,"span",11),a(1,"Inactive"),t())}function mt(e,r){e&1&&a(0," Locked ")}function dt(e,r){e&1&&a(0," Active ")}function ct(e,r){e&1&&a(0," Inactive ")}function pt(e,r){if(e&1&&(i(0,"div",19)(1,"span",16),a(2,"Lock Reason"),t(),i(3,"span",17),a(4),t()()),e&2){let n=p();l(4),m(n.data.lockReason)}}function ut(e,r){if(e&1&&(i(0,"mat-chip"),a(1),t()),e&2){let n=r.$implicit;l(),m(n.name||n)}}function _t(e,r){if(e&1&&(i(0,"div",22),x(1,ut,2,1,"mat-chip",null,ot),t()),e&2){let n=p();l(),h(n.data.roles)}}function ft(e,r){e&1&&(i(0,"p",23),a(1,"No roles assigned"),t())}function gt(e,r){if(e&1&&(i(0,"mat-chip",32),a(1),t()),e&2){let n=r.$implicit;l(),m(n)}}function Ct(e,r){if(e&1&&(i(0,"div",22),x(1,gt,2,1,"mat-chip",32,J),t()),e&2){let n=p();l(),h(n.data.privileges)}}function xt(e,r){e&1&&(i(0,"p",23),a(1,"No privileges assigned"),t())}function ht(e,r){if(e&1&&(i(0,"mat-chip"),a(1),t()),e&2){let n=r.$implicit;l(),m(n.name)}}function vt(e,r){if(e&1&&(i(0,"div",22),x(1,ht,2,1,"mat-chip",null,Y),t()),e&2){let n=p();l(),h(n.data.corporates)}}function bt(e,r){if(e&1&&(i(0,"p",23),a(1),t()),e&2){let n=p();l(),E("",n.data.corporateIds.length," corporate(s) assigned")}}function Mt(e,r){e&1&&(i(0,"p",23),a(1,"No corporates assigned (Global Access)"),t())}function St(e,r){if(e&1&&(i(0,"mat-chip"),a(1),t()),e&2){let n=r.$implicit;l(),m(n.name)}}function kt(e,r){if(e&1&&(i(0,"div",22),x(1,St,2,1,"mat-chip",null,Y),t()),e&2){let n=p();l(),h(n.data.sbus)}}function Et(e,r){if(e&1&&(i(0,"p",23),a(1),t()),e&2){let n=p();l(),E("",n.data.sbuIds.length," SBU(s) assigned")}}function Dt(e,r){e&1&&(i(0,"p",23),a(1,"No SBUs assigned"),t())}function Ut(e,r){if(e&1&&(i(0,"mat-chip"),a(1),t()),e&2){let n=r.$implicit;l(),m(n.name)}}function Tt(e,r){if(e&1&&(i(0,"div",22),x(1,Ut,2,1,"mat-chip",null,Y),t()),e&2){let n=p();l(),h(n.data.branches)}}function wt(e,r){if(e&1&&(i(0,"p",23),a(1),t()),e&2){let n=p();l(),E("",n.data.branchIds.length," branch(es) assigned")}}function Pt(e,r){e&1&&(i(0,"p",23),a(1,"No branches assigned"),t())}function yt(e,r){if(e&1){let n=k();i(0,"button",29),_("click",function(){g(n);let o=p();return C(o.unlockUser())}),i(1,"mat-icon"),a(2,"lock_open"),t(),a(3," Unlock "),t()}}function It(e,r){if(e&1){let n=k();i(0,"button",33),_("click",function(){g(n);let o=p();return C(o.lockUser())}),i(1,"mat-icon"),a(2,"lock"),t(),a(3," Lock "),t()}}var Ye=(()=>{class e{data;dialogRef;userService;router;snackBar;constructor(n,s,o,d,T){this.data=n,this.dialogRef=s,this.userService=o,this.router=d,this.snackBar=T}get isLocked(){return this.data.isLocked||this.data.locked||!1}getInitials(){let n=this.data.firstName?.[0]||"",s=this.data.lastName?.[0]||"";return(n+s).toUpperCase()||this.data.username?.[0]?.toUpperCase()||"?"}editUser(){this.dialogRef.close(),this.router.navigate(["/users",this.data.id])}lockUser(){this.userService.lockUser(this.data.id).subscribe({next:n=>{n.success&&(this.snackBar.open("User locked successfully","Close",{duration:3e3}),this.data.isLocked=!0,this.data.locked=!0,this.dialogRef.close("refresh"))},error:n=>{this.snackBar.open(n.error?.message||"Failed to lock user","Close",{duration:3e3})}})}unlockUser(){this.userService.unlockUser(this.data.id).subscribe({next:n=>{n.success&&(this.snackBar.open("User unlocked successfully","Close",{duration:3e3}),this.data.isLocked=!1,this.data.locked=!1,this.dialogRef.close("refresh"))},error:n=>{this.snackBar.open(n.error?.message||"Failed to unlock user","Close",{duration:3e3})}})}resetPassword(){this.userService.adminResetPassword(this.data.id).subscribe({next:n=>{n.success&&this.snackBar.open("Password reset email sent","Close",{duration:3e3})},error:n=>{this.snackBar.open(n.error?.message||"Failed to reset password","Close",{duration:3e3})}})}close(){this.dialogRef.close()}static \u0275fac=function(s){return new(s||e)(f(De),f(Ee),f(z),f(ne),f($))};static \u0275cmp=w({type:e,selectors:[["app-user-detail-dialog"]],decls:154,vars:37,consts:[[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","",3,"click"],[1,"user-header"],[1,"avatar"],[1,"user-title"],[1,"username"],[1,"status-badges"],[1,"badge"],[1,"badge","locked"],[1,"badge","active"],[1,"badge","inactive"],["label","Personal Info"],[1,"tab-content"],[1,"detail-grid"],[1,"detail-item"],[1,"label"],[1,"value"],["label","Account Info"],[1,"detail-item","full-width"],["label","Roles & Permissions"],[1,"section"],[1,"chips-container"],[1,"no-data"],["label","Organization"],[1,"action-buttons"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button",""],["mat-stroked-button","","color","warn"],["mat-stroked-button","",3,"click"],[1,"spacer"],["mat-button","",3,"click"],[1,"privilege-chip"],["mat-stroked-button","","color","warn",3,"click"]],template:function(s,o){s&1&&(i(0,"div",0)(1,"h2",1)(2,"mat-icon"),a(3,"person"),t(),a(4," User Details "),t(),i(5,"button",2),_("click",function(){return o.close()}),i(6,"mat-icon"),a(7,"close"),t()()(),i(8,"mat-dialog-content")(9,"div",3)(10,"div",4),a(11),t(),i(12,"div",5)(13,"h3"),a(14),t(),i(15,"span",6),a(16),t(),i(17,"div",7)(18,"span",8),a(19),t(),c(20,rt,2,0,"span",9)(21,lt,2,0,"span",10)(22,st,2,0,"span",11),t()()(),v(23,"mat-divider"),i(24,"mat-tab-group")(25,"mat-tab",12)(26,"div",13)(27,"div",14)(28,"div",15)(29,"span",16),a(30,"First Name"),t(),i(31,"span",17),a(32),t()(),i(33,"div",15)(34,"span",16),a(35,"Last Name"),t(),i(36,"span",17),a(37),t()(),i(38,"div",15)(39,"span",16),a(40,"Email"),t(),i(41,"span",17),a(42),t()(),i(43,"div",15)(44,"span",16),a(45,"Phone"),t(),i(46,"span",17),a(47),t()(),i(48,"div",15)(49,"span",16),a(50,"Staff ID"),t(),i(51,"span",17),a(52),t()(),i(53,"div",15)(54,"span",16),a(55,"Department"),t(),i(56,"span",17),a(57),t()()()()(),i(58,"mat-tab",18)(59,"div",13)(60,"div",14)(61,"div",15)(62,"span",16),a(63,"Username"),t(),i(64,"span",17),a(65),t()(),i(66,"div",15)(67,"span",16),a(68,"User Type"),t(),i(69,"span",17),a(70),t()(),i(71,"div",15)(72,"span",16),a(73,"Status"),t(),i(74,"span",17),c(75,mt,1,0)(76,dt,1,0)(77,ct,1,0),t()(),c(78,pt,5,1,"div",19),i(79,"div",15)(80,"span",16),a(81,"Must Change Password"),t(),i(82,"span",17),a(83),t()(),i(84,"div",15)(85,"span",16),a(86,"Last Login"),t(),i(87,"span",17),a(88),D(89,"date"),t()(),i(90,"div",15)(91,"span",16),a(92,"Password Changed"),t(),i(93,"span",17),a(94),D(95,"date"),t()(),i(96,"div",15)(97,"span",16),a(98,"Created At"),t(),i(99,"span",17),a(100),D(101,"date"),t()(),i(102,"div",15)(103,"span",16),a(104,"Created By"),t(),i(105,"span",17),a(106),t()()()()(),i(107,"mat-tab",20)(108,"div",13)(109,"div",21)(110,"h4"),a(111,"Roles"),t(),c(112,_t,3,0,"div",22)(113,ft,2,0,"p",23),t(),i(114,"div",21)(115,"h4"),a(116,"Privileges"),t(),c(117,Ct,3,0,"div",22)(118,xt,2,0,"p",23),t()()(),i(119,"mat-tab",24)(120,"div",13)(121,"div",21)(122,"h4"),a(123,"Corporates"),t(),c(124,vt,3,0,"div",22)(125,bt,2,1,"p",23)(126,Mt,2,0,"p",23),t(),i(127,"div",21)(128,"h4"),a(129,"SBUs"),t(),c(130,kt,3,0,"div",22)(131,Et,2,1,"p",23)(132,Dt,2,0,"p",23),t(),i(133,"div",21)(134,"h4"),a(135,"Branches"),t(),c(136,Tt,3,0,"div",22)(137,wt,2,1,"p",23)(138,Pt,2,0,"p",23),t()()()()(),i(139,"mat-dialog-actions")(140,"div",25)(141,"button",26),_("click",function(){return o.editUser()}),i(142,"mat-icon"),a(143,"edit"),t(),a(144," Edit "),t(),c(145,yt,4,0,"button",27)(146,It,4,0,"button",28),i(147,"button",29),_("click",function(){return o.resetPassword()}),i(148,"mat-icon"),a(149,"vpn_key"),t(),a(150," Reset Password "),t()(),v(151,"span",30),i(152,"button",31),_("click",function(){return o.close()}),a(153,"Close"),t()()),s&2&&(l(11),m(o.getInitials()),l(3),m(o.data.fullName||o.data.firstName+" "+o.data.lastName),l(2),m(o.data.username),l(2),P(o.data.userType==null?null:o.data.userType.toLowerCase()),l(),m(o.data.userType),l(),u(o.data.isLocked||o.data.locked?20:o.data.isActive||o.data.enabled?21:22),l(12),m(o.data.firstName||"-"),l(5),m(o.data.lastName||"-"),l(5),m(o.data.email||"-"),l(5),m(o.data.phoneNumber||o.data.phone||"-"),l(5),m(o.data.staffId||"-"),l(5),m(o.data.department||"-"),l(8),m(o.data.username),l(5),m(o.data.userType),l(5),u(o.data.isLocked||o.data.locked?75:o.data.isActive||o.data.enabled?76:77),l(3),u(o.data.lockReason?78:-1),l(5),m(o.data.mustChangePassword?"Yes":"No"),l(5),m(o.data.lastLogin?U(89,28,o.data.lastLogin,"medium"):"Never"),l(6),m(o.data.passwordChangedAt?U(95,31,o.data.passwordChangedAt,"medium"):"-"),l(6),m(U(101,34,o.data.createdAt,"medium")),l(6),m(o.data.createdBy||"-"),l(6),u(o.data.roles&&o.data.roles.length>0?112:113),l(5),u(o.data.privileges&&o.data.privileges.length>0?117:118),l(7),u(o.data.corporates&&o.data.corporates.length>0?124:o.data.corporateIds&&o.data.corporateIds.length>0?125:126),l(6),u(o.data.sbus&&o.data.sbus.length>0?130:o.data.sbuIds&&o.data.sbuIds.length>0?131:132),l(6),u(o.data.branches&&o.data.branches.length>0?136:o.data.branchIds&&o.data.branchIds.length>0?137:138),l(9),u(o.isLocked?145:146))},dependencies:[I,y,F,Te,Pe,we,N,R,B,O,L,ve,he,A,V,qe,Ge,We,j],styles:[".dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 16px}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0}mat-dialog-content[_ngcontent-%COMP%]{min-width:550px;max-height:70vh}.user-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1rem 0}.avatar[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;background:#1976d2;color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:500}.user-title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem}.user-title[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{color:#666;font-size:.875rem}.status-badges[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;border-radius:4px;font-size:.75rem;font-weight:500}.badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.inactive[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.badge.locked[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.badge.system[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.badge.staff[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.manager[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.badge.external[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.tab-content[_ngcontent-%COMP%]{padding:1rem 0}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.detail-item.full-width[_ngcontent-%COMP%]{grid-column:span 2}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#666;text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500}.section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .75rem;color:#1976d2;font-size:.875rem;font-weight:500}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.privilege-chip[_ngcontent-%COMP%]{background:#e3f2fd!important}.no-data[_ngcontent-%COMP%]{color:#666;font-style:italic;margin:0}mat-divider[_ngcontent-%COMP%]{margin:.5rem 0}mat-dialog-actions[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 16px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.spacer[_ngcontent-%COMP%]{flex:1}"]})}return e})();var Lt=()=>[10,25,50,100],Ot=e=>["/users",e],Bt=(e,r)=>r.id;function Rt(e,r){e&1&&(i(0,"th",22),a(1,"Name"),t())}function Nt(e,r){if(e&1&&(i(0,"td",23)(1,"div",24)(2,"div",25),a(3),t(),i(4,"div")(5,"div",26),a(6),t(),i(7,"div",27),a(8),t()()()()),e&2){let n=r.$implicit,s=p();l(3),m(s.getInitials(n)),l(3),m(n.fullName),l(2),m(n.email)}}function Ft(e,r){e&1&&(i(0,"th",22),a(1,"Username"),t())}function Vt(e,r){if(e&1&&(i(0,"td",23),a(1),t()),e&2){let n=r.$implicit;l(),m(n.username)}}function At(e,r){e&1&&(i(0,"th",22),a(1,"Type"),t())}function $t(e,r){if(e&1&&(i(0,"td",23)(1,"span",28),a(2),t()()),e&2){let n=r.$implicit;l(),P(n.userType.toLowerCase()),l(),m(n.userType)}}function jt(e,r){e&1&&(i(0,"th",29),a(1,"Roles"),t())}function zt(e,r){if(e&1&&(i(0,"mat-chip"),a(1),t()),e&2){let n=r.$implicit;l(),m(n.name)}}function Ht(e,r){if(e&1&&(i(0,"span",30),a(1),t()),e&2){let n=p().$implicit;l(),E("+",n.roles.length-2," more")}}function Qt(e,r){if(e&1&&(i(0,"td",23),x(1,zt,2,1,"mat-chip",null,Bt),c(3,Ht,2,1,"span",30),t()),e&2){let n=r.$implicit;l(),h(n.roles==null?null:n.roles.slice(0,2)),l(2),u((n.roles==null?null:n.roles.length)>2?3:-1)}}function Gt(e,r){e&1&&(i(0,"th",22),a(1,"Status"),t())}function Wt(e,r){e&1&&(i(0,"span",31),a(1,"Locked"),t())}function qt(e,r){e&1&&(i(0,"span",32),a(1,"Active"),t())}function Yt(e,r){e&1&&(i(0,"span",33),a(1,"Inactive"),t())}function Jt(e,r){if(e&1&&(i(0,"td",23),c(1,Wt,2,0,"span",31)(2,qt,2,0,"span",32)(3,Yt,2,0,"span",33),t()),e&2){let n=r.$implicit;l(),u(n.locked?1:n.enabled?2:3)}}function Kt(e,r){e&1&&(i(0,"th",22),a(1,"Last Login"),t())}function Xt(e,r){if(e&1&&(i(0,"td",23),a(1),D(2,"date"),t()),e&2){let n=r.$implicit;l(),E(" ",U(2,1,n.lastLogin,"short")," ")}}function Zt(e,r){e&1&&v(0,"th",29)}function ei(e,r){if(e&1){let n=k();i(0,"button",35),_("click",function(){g(n);let o=p().$implicit,d=p();return C(d.unlockUser(o))}),i(1,"mat-icon"),a(2,"lock_open"),t(),i(3,"span"),a(4,"Unlock"),t()()}}function ti(e,r){if(e&1){let n=k();i(0,"button",35),_("click",function(){g(n);let o=p().$implicit,d=p();return C(d.lockUser(o))}),i(1,"mat-icon"),a(2,"lock"),t(),i(3,"span"),a(4,"Lock"),t()()}}function ii(e,r){if(e&1){let n=k();i(0,"td",23)(1,"button",34)(2,"mat-icon"),a(3,"more_vert"),t()(),i(4,"mat-menu",null,0)(6,"button",35),_("click",function(){let o=g(n).$implicit,d=p();return C(d.viewUser(o))}),i(7,"mat-icon"),a(8,"visibility"),t(),i(9,"span"),a(10,"View"),t()(),i(11,"button",36)(12,"mat-icon"),a(13,"edit"),t(),i(14,"span"),a(15,"Edit"),t()(),c(16,ei,5,0,"button",37)(17,ti,5,0,"button",37),i(18,"button",35),_("click",function(){let o=g(n).$implicit,d=p();return C(d.resetPassword(o))}),i(19,"mat-icon"),a(20,"vpn_key"),t(),i(21,"span"),a(22,"Reset Password"),t()(),i(23,"button",38),_("click",function(){let o=g(n).$implicit,d=p();return C(d.deleteUser(o))}),i(24,"mat-icon"),a(25,"delete"),t(),i(26,"span"),a(27,"Delete"),t()()()()}if(e&2){let n=r.$implicit,s=K(5);l(),S("matMenuTriggerFor",s),l(10),S("routerLink",ie(3,Ot,n.id)),l(5),u(n.locked?16:17)}}function ni(e,r){e&1&&v(0,"tr",39)}function ai(e,r){e&1&&v(0,"tr",40)}var Ai=(()=>{class e{userService;snackBar;dialog;displayedColumns=["fullName","username","userType","roles","status","lastLogin","actions"];dataSource=new je([]);searchTerm="";paginator;sort;constructor(n,s,o){this.userService=n,this.snackBar=s,this.dialog=o}ngOnInit(){this.loadUsers()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadUsers(){this.userService.getUsers().subscribe(n=>{n.success&&(this.dataSource.data=n.data)})}applyFilter(){this.dataSource.filter=this.searchTerm.trim().toLowerCase()}getInitials(n){return(n.firstName?.[0]||"")+(n.lastName?.[0]||"")}viewUser(n){this.dialog.open(Ye,{width:"650px",maxHeight:"90vh",data:n}).afterClosed().subscribe(o=>{o==="refresh"&&this.loadUsers()})}lockUser(n){this.userService.lockUser(n.id).subscribe(s=>{s.success&&(this.snackBar.open("User locked successfully","Close",{duration:3e3}),this.loadUsers())})}unlockUser(n){this.userService.unlockUser(n.id).subscribe(s=>{s.success&&(this.snackBar.open("User unlocked successfully","Close",{duration:3e3}),this.loadUsers())})}resetPassword(n){this.userService.adminResetPassword(n.id).subscribe(s=>{s.success&&this.snackBar.open("Password reset email sent","Close",{duration:3e3})})}deleteUser(n){confirm(`Are you sure you want to delete ${n.fullName}?`)&&this.userService.deleteUser(n.id).subscribe(s=>{s.success&&(this.snackBar.open("User deleted successfully","Close",{duration:3e3}),this.loadUsers())})}static \u0275fac=function(s){return new(s||e)(f(z),f($),f(Ue))};static \u0275cmp=w({type:e,selectors:[["app-user-list"]],viewQuery:function(s,o){if(s&1&&(G(H,5),G(Q,5)),s&2){let d;W(d=q())&&(o.paginator=d.first),W(d=q())&&(o.sort=d.first)}},decls:42,vars:6,consts:[["menu","matMenu"],[1,"user-list-container"],[1,"header"],["mat-raised-button","","color","primary","routerLink","/users/new"],[1,"table-toolbar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name, username, or email",3,"ngModelChange","keyup","ngModel"],["matPrefix",""],["mat-table","","matSort","",1,"data-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","username"],["matColumnDef","userType"],["matColumnDef","roles"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","status"],["matColumnDef","lastLogin"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"user-info"],[1,"avatar"],[1,"name"],[1,"email"],[1,"badge"],["mat-header-cell",""],[1,"more"],[1,"badge","locked"],[1,"badge","active"],[1,"badge","inactive"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink"],["mat-menu-item",""],["mat-menu-item","",1,"delete-action",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,o){s&1&&(i(0,"div",1)(1,"div",2)(2,"h1"),a(3,"Users"),t(),i(4,"button",3)(5,"mat-icon"),a(6,"add"),t(),a(7," Add User "),t()(),i(8,"mat-card")(9,"mat-card-content")(10,"div",4)(11,"mat-form-field",5)(12,"mat-label"),a(13,"Search users"),t(),i(14,"input",6),ee("ngModelChange",function(T){return Z(o.searchTerm,T)||(o.searchTerm=T),T}),_("keyup",function(){return o.applyFilter()}),t(),i(15,"mat-icon",7),a(16,"search"),t()()(),i(17,"table",8),b(18,9),c(19,Rt,2,0,"th",10)(20,Nt,9,3,"td",11),M(),b(21,12),c(22,Ft,2,0,"th",10)(23,Vt,2,1,"td",11),M(),b(24,13),c(25,At,2,0,"th",10)(26,$t,3,3,"td",11),M(),b(27,14),c(28,jt,2,0,"th",15)(29,Qt,4,1,"td",11),M(),b(30,16),c(31,Gt,2,0,"th",10)(32,Jt,4,1,"td",11),M(),b(33,17),c(34,Kt,2,0,"th",10)(35,Xt,3,4,"td",11),M(),b(36,18),c(37,Zt,1,0,"th",15)(38,ii,28,5,"td",11),M(),c(39,ni,1,0,"tr",19)(40,ai,1,0,"tr",20),t(),v(41,"mat-paginator",21),t()()()),s&2&&(l(14),X("ngModel",o.searchTerm),l(3),S("dataSource",o.dataSource),l(22),S("matHeaderRowDef",o.displayedColumns),l(),S("matRowDefColumns",o.displayedColumns),l(),S("pageSizeOptions",te(5,Lt)))},dependencies:[I,y,oe,ae,me,re,le,se,pe,de,ce,$e,ye,Le,Ne,Oe,Ie,Fe,Be,Re,Ve,Ae,ze,H,Qe,Q,He,ge,fe,ue,_e,xe,Ce,N,R,B,O,L,ke,Me,be,Se,A,V,j,F],styles:[".user-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.table-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-field[_ngcontent-%COMP%]{width:400px}.data-table[_ngcontent-%COMP%]{width:100%}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.avatar[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background:#1976d2;color:#fff;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:500}.user-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}.user-info[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:500}.badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.inactive[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.badge.locked[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.badge.system[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.badge.staff[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.manager[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.badge.external[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.more[_ngcontent-%COMP%]{font-size:.75rem;color:#666;margin-left:.25rem}.delete-action[_ngcontent-%COMP%]{color:#c62828}"]})}return e})();export{Ai as UserListComponent};
