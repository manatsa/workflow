import{Ba as h,v as d}from"./chunk-37H25STD.js";import{aa as i,fa as c,j as n}from"./chunk-UYCZSUYP.js";var u=(()=>{class o{http;apiUrl=h.apiUrl;themeSettings$=new n({});settingToCssVar={"theme.primary.color":"--primary-color","theme.secondary.color":"--secondary-color","theme.accent.color":"--accent-color","theme.sidebar.bg":"--sidebar-bg","theme.sidebar.text":"--sidebar-text","theme.sidebar.header.bg":"--sidebar-header-bg","theme.sidebar.footer.bg":"--sidebar-footer-bg","theme.header.bg":"--header-bg","theme.header.text":"--header-text","theme.brand.color":"--brand-color","theme.user.profile.bg":"--user-profile-bg","theme.user.profile.text":"--user-profile-text","theme.success.color":"--success-color","theme.warning.color":"--warning-color","theme.error.color":"--error-color","theme.info.color":"--info-color","theme.body.bg":"--body-bg","theme.card.bg":"--card-bg","theme.border.color":"--border-color","theme.table.header.bg":"--table-header-bg","theme.table.stripe.bg":"--table-stripe-bg","theme.button.primary.bg":"--button-primary-bg","theme.button.primary.text":"--button-primary-text","theme.button.secondary.bg":"--button-secondary-bg","theme.button.secondary.text":"--button-secondary-text","theme.link.color":"--link-color","theme.link.hover.color":"--link-hover-color","theme.input.bg":"--input-bg","theme.input.border":"--input-border","theme.input.focus.border":"--input-focus-border","theme.menu.active.bg":"--menu-active-bg","theme.menu.hover.bg":"--menu-hover-bg","theme.badge.pending.bg":"--badge-pending-bg","theme.badge.approved.bg":"--badge-approved-bg","theme.badge.rejected.bg":"--badge-rejected-bg","theme.font.primary":"--font-primary","theme.font.size.base":"--font-size-base","theme.form.field.header.bg":"--form-field-header-bg","theme.form.field.header.color":"--form-field-header-color"};constructor(t){this.http=t}loadTheme(){let t=localStorage.getItem("themeSettings");if(t)try{let e=JSON.parse(t);this.applyTheme(e)}catch{}this.http.get(`${this.apiUrl}/settings/tab/Theme%20Settings`).subscribe({next:e=>{if(e.success&&e.data){let a={};e.data.forEach(r=>{a[r.key]=r.value}),this.themeSettings$.next(a),this.applyTheme(a),localStorage.setItem("themeSettings",JSON.stringify(a))}},error:e=>{console.warn("Failed to load theme settings:",e)}})}applyTheme(t){let e=document.documentElement;if(Object.entries(t).forEach(([r,s])=>{let m=this.settingToCssVar[r];m&&s&&(r==="theme.font.size.base"&&!isNaN(Number(s))?e.style.setProperty(m,`${s}px`):e.style.setProperty(m,s))}),t["theme.dark.mode"]==="true"){document.body.classList.add("dark-mode"),document.documentElement.classList.add("dark-mode");let r=document.querySelector(".cdk-overlay-container");r&&r.classList.add("dark-mode")}else{document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode");let r=document.querySelector(".cdk-overlay-container");r&&r.classList.remove("dark-mode")}}refreshTheme(){localStorage.removeItem("themeSettings"),document.body.classList.remove("dark-mode"),document.documentElement.classList.remove("dark-mode");let t=document.querySelector(".cdk-overlay-container");t&&t.classList.remove("dark-mode"),this.loadTheme()}getThemeSettings(){return this.themeSettings$.asObservable()}static \u0275fac=function(e){return new(e||o)(c(d))};static \u0275prov=i({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();export{u as a};
