import"./chunk-MS4AQ6UA.js";import{a as xt,b as vt}from"./chunk-M4AVZ6G2.js";import{c as Re}from"./chunk-5LBLILVL.js";import"./chunk-LAGNR76Q.js";import{c as Se}from"./chunk-T6FL6ZBG.js";import{a as gt}from"./chunk-YFSTPTS4.js";import{a as ft,b as mt}from"./chunk-AIS23OW2.js";import{a as ct,c as ut,d as ht}from"./chunk-XZVKBWV7.js";import{b as at,c as dt,i as lt}from"./chunk-IGML5J3D.js";import"./chunk-DLMMVLF7.js";import"./chunk-X4PFBHKL.js";import"./chunk-ORAJKTE5.js";import{b as Ue,d as $e,f as ze,g as He,j as Qe,l as je,m as qe,o as We,p as Ge,q as Xe}from"./chunk-DUSDXFBS.js";import{a as nt,b as it,c as st,f as rt,h as ot}from"./chunk-PWNKGTLH.js";import{a as pt,b as _t}from"./chunk-PSOPTTCW.js";import"./chunk-NMO4AZKI.js";import{X as re,Y as Ke,aa as Ve,ca as Ce,m as Le,qa as Ye,ra as Ze,sa as Je,ta as et,va as tt}from"./chunk-A3I6STGM.js";import{$b as L,Ab as I,B as Ne,Bc as K,C as Ie,Ca as me,Cb as ne,Cc as se,F as he,Fb as C,G as pe,Ib as Oe,J as T,Jb as Fe,K as Ae,Kb as a,Lb as d,Mb as z,Pb as O,Qb as H,Rb as xe,U as _e,Ub as g,V as R,Vb as _,W as w,Y as U,Yb as ve,Zb as ie,_b as F,a as G,aa as Z,b as X,bb as u,ca as Be,db as Pe,dc as l,ec as E,fa as f,fc as Q,gb as J,i as Y,ib as ee,j as M,lc as k,m as we,na as v,nb as P,o as m,oa as b,ob as te,pb as y,q as ce,ra as $,rb as N,s as x,t as V,tb as S,w as ue,ya as fe,yc as be,zb as ge,zc as ye}from"./chunk-2HR56SRD.js";var Ee=class{dataNodes;expansionModel=new Se(!0);trackBy;getLevel;isExpandable;getChildren;toggle(r){this.expansionModel.toggle(this._trackByValue(r))}expand(r){this.expansionModel.select(this._trackByValue(r))}collapse(r){this.expansionModel.deselect(this._trackByValue(r))}isExpanded(r){return this.expansionModel.isSelected(this._trackByValue(r))}toggleDescendants(r){this.expansionModel.isSelected(this._trackByValue(r))?this.collapseDescendants(r):this.expandDescendants(r)}collapseAll(){this.expansionModel.clear()}expandDescendants(r){let e=[r];e.push(...this.getDescendants(r)),this.expansionModel.select(...e.map(t=>this._trackByValue(t)))}collapseDescendants(r){let e=[r];e.push(...this.getDescendants(r)),this.expansionModel.deselect(...e.map(t=>this._trackByValue(t)))}_trackByValue(r){return this.trackBy?this.trackBy(r):r}};var oe=class extends Ee{getChildren;options;constructor(r,e){super(),this.getChildren=r,this.options=e,this.options&&(this.trackBy=this.options.trackBy),this.options?.isExpandable&&(this.isExpandable=this.options.isExpandable)}expandAll(){this.expansionModel.clear();let r=this.dataNodes.reduce((e,t)=>[...e,...this.getDescendants(t),t],[]);this.expansionModel.select(...r.map(e=>this._trackByValue(e)))}getDescendants(r){let e=[];return this._getDescendants(e,r),e.splice(1)}_getDescendants(r,e){r.push(e);let t=this.getChildren(e);Array.isArray(t)?t.forEach(n=>this._getDescendants(r,n)):ce(t)&&t.pipe(T(1),Ie(Boolean)).subscribe(n=>{for(let s of n)this._getDescendants(r,s)})}},q=new Be("CDK_TREE_NODE_OUTLET_NODE"),j=(()=>{class i{viewContainer=f(ee);_node=f(q,{optional:!0});constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275dir=y({type:i,selectors:[["","cdkTreeNodeOutlet",""]]})}return i})(),De=class{$implicit;level;index;count;constructor(r){this.$implicit=r}},ae=(()=>{class i{template=f(Pe);when;constructor(){}static \u0275fac=function(t){return new(t||i)};static \u0275dir=y({type:i,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:[0,"cdkTreeNodeDefWhen","when"]}})}return i})();function bt(){return Error("Could not find a tree control, levelAccessor, or childrenAccessor for the tree.")}var W=(()=>{class i{_differs=f(ye);_changeDetectorRef=f(be);_elementRef=f(me);_dir=f(Ve);_onDestroy=new Y;_dataDiffer;_defaultNodeDef;_dataSubscription;_levels=new Map;_parents=new Map;_ariaSets=new Map;get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}_dataSource;treeControl;levelAccessor;childrenAccessor;trackBy;expansionKey;_nodeOutlet;_nodeDefs;viewChange=new M({start:0,end:Number.MAX_VALUE});_expansionModel;_flattenedNodes=new M([]);_nodeType=new M(null);_nodes=new M(new Map);_keyManagerNodes=new M([]);_keyManagerFactory=f(Ke);_keyManager;_viewInit=!1;constructor(){}ngAfterContentInit(){this._initializeKeyManager()}ngAfterContentChecked(){this._updateDefaultNodeDefinition(),this._subscribeToDataChanges()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),this._keyManager?.destroy()}ngOnInit(){this._checkTreeControlUsage(),this._initializeDataDiffer()}ngAfterViewInit(){this._viewInit=!0}_updateDefaultNodeDefinition(){let e=this._nodeDefs.filter(t=>!t.when);e.length>1,this._defaultNodeDef=e[0]}_setNodeTypeIfUnset(e){this._nodeType.value===null&&this._nodeType.next(e)}_switchDataSource(e){this._dataSource&&typeof this._dataSource.disconnect=="function"&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._subscribeToDataChanges()}_getExpansionModel(){return this.treeControl?this.treeControl.expansionModel:(this._expansionModel??=new Se(!0),this._expansionModel)}_subscribeToDataChanges(){if(this._dataSubscription)return;let e;_t(this._dataSource)?e=this._dataSource.connect(this):ce(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=m(this._dataSource)),e&&(this._dataSubscription=this._getRenderData(e).pipe(w(this._onDestroy)).subscribe(t=>{this._renderDataChanges(t)}))}_getRenderData(e){let t=this._getExpansionModel();return V([e,this._nodeType,t.changed.pipe(_e(null),U(n=>{this._emitExpansionChanges(n)}))]).pipe(R(([n,s])=>s===null?m({renderNodes:n,flattenedNodes:null,nodeType:s}):this._computeRenderingData(n,s).pipe(x(o=>X(G({},o),{nodeType:s})))))}_renderDataChanges(e){if(e.nodeType===null){this.renderNodeChanges(e.renderNodes);return}this._updateCachedData(e.flattenedNodes),this.renderNodeChanges(e.renderNodes),this._updateKeyManagerItems(e.flattenedNodes)}_emitExpansionChanges(e){if(!e)return;let t=this._nodes.value;for(let n of e.added)t.get(n)?._emitExpansionState(!0);for(let n of e.removed)t.get(n)?._emitExpansionState(!1)}_initializeKeyManager(){let e=V([this._keyManagerNodes,this._nodes]).pipe(x(([n,s])=>n.reduce((o,c)=>{let h=s.get(this._getExpansionKey(c));return h&&o.push(h),o},[]))),t={trackBy:n=>this._getExpansionKey(n.data),skipPredicate:n=>!!n.isDisabled,typeAheadDebounceInterval:!0,horizontalOrientation:this._dir.value};this._keyManager=this._keyManagerFactory(e,t)}_initializeDataDiffer(){let e=this.trackBy??((t,n)=>this._getExpansionKey(n));this._dataDiffer=this._differs.find([]).create(e)}_checkTreeControlUsage(){}renderNodeChanges(e,t=this._dataDiffer,n=this._nodeOutlet.viewContainer,s){let o=t.diff(e);!o&&!this._viewInit||(o?.forEachOperation((c,h,p)=>{if(c.previousIndex==null)this.insertNode(e[p],p,n,s);else if(p==null)n.remove(h);else{let D=n.get(h);n.move(D,p)}}),o?.forEachIdentityChange(c=>{let h=c.item;if(c.currentIndex!=null){let p=n.get(c.currentIndex);p.context.$implicit=h}}),s?this._changeDetectorRef.markForCheck():this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(this._nodeDefs.length===1)return this._nodeDefs.first;let n=this._nodeDefs.find(s=>s.when&&s.when(t,e))||this._defaultNodeDef;return n}insertNode(e,t,n,s){let o=this._getLevelAccessor(),c=this._getNodeDef(e,t),h=this._getExpansionKey(e),p=new De(e);s??=this._parents.get(h)??void 0,o?p.level=o(e):s!==void 0&&this._levels.has(this._getExpansionKey(s))?p.level=this._levels.get(this._getExpansionKey(s))+1:p.level=0,this._levels.set(h,p.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(c.template,p,t),A.mostRecentTreeNode&&(A.mostRecentTreeNode.data=e)}isExpanded(e){return!!(this.treeControl?.isExpanded(e)||this._expansionModel?.isSelected(this._getExpansionKey(e)))}toggle(e){this.treeControl?this.treeControl.toggle(e):this._expansionModel&&this._expansionModel.toggle(this._getExpansionKey(e))}expand(e){this.treeControl?this.treeControl.expand(e):this._expansionModel&&this._expansionModel.select(this._getExpansionKey(e))}collapse(e){this.treeControl?this.treeControl.collapse(e):this._expansionModel&&this._expansionModel.deselect(this._getExpansionKey(e))}toggleDescendants(e){this.treeControl?this.treeControl.toggleDescendants(e):this._expansionModel&&(this.isExpanded(e)?this.collapseDescendants(e):this.expandDescendants(e))}expandDescendants(e){if(this.treeControl)this.treeControl.expandDescendants(e);else if(this._expansionModel){let t=this._expansionModel;t.select(this._getExpansionKey(e)),this._getDescendants(e).pipe(T(1),w(this._onDestroy)).subscribe(n=>{t.select(...n.map(s=>this._getExpansionKey(s)))})}}collapseDescendants(e){if(this.treeControl)this.treeControl.collapseDescendants(e);else if(this._expansionModel){let t=this._expansionModel;t.deselect(this._getExpansionKey(e)),this._getDescendants(e).pipe(T(1),w(this._onDestroy)).subscribe(n=>{t.deselect(...n.map(s=>this._getExpansionKey(s)))})}}expandAll(){this.treeControl?this.treeControl.expandAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.select(...e))}collapseAll(){this.treeControl?this.treeControl.collapseAll():this._expansionModel&&this._forEachExpansionKey(e=>this._expansionModel?.deselect(...e))}_getLevelAccessor(){return this.treeControl?.getLevel?.bind(this.treeControl)??this.levelAccessor}_getChildrenAccessor(){return this.treeControl?.getChildren?.bind(this.treeControl)??this.childrenAccessor}_getDirectChildren(e){let t=this._getLevelAccessor(),n=this._expansionModel??this.treeControl?.expansionModel;if(!n)return m([]);let s=this._getExpansionKey(e),o=n.changed.pipe(R(h=>h.added.includes(s)?m(!0):h.removed.includes(s)?m(!1):we),_e(this.isExpanded(e)));if(t)return V([o,this._flattenedNodes]).pipe(x(([h,p])=>h?this._findChildrenByLevel(t,p,e,1):[]));let c=this._getChildrenAccessor();if(c)return re(c(e)??[]);throw bt()}_findChildrenByLevel(e,t,n,s){let o=this._getExpansionKey(n),c=t.findIndex(B=>this._getExpansionKey(B)===o),h=e(n),p=h+s,D=[];for(let B=c+1;B<t.length;B++){let ke=e(t[B]);if(ke<=h)break;ke<=p&&D.push(t[B])}return D}_registerNode(e){this._nodes.value.set(this._getExpansionKey(e.data),e),this._nodes.next(this._nodes.value)}_unregisterNode(e){this._nodes.value.delete(this._getExpansionKey(e.data)),this._nodes.next(this._nodes.value)}_getLevel(e){return this._levels.get(this._getExpansionKey(e))}_getSetSize(e){return this._getAriaSet(e).length}_getPositionInSet(e){let t=this._getAriaSet(e),n=this._getExpansionKey(e);return t.findIndex(s=>this._getExpansionKey(s)===n)+1}_getNodeParent(e){let t=this._parents.get(this._getExpansionKey(e.data));return t&&this._nodes.value.get(this._getExpansionKey(t))}_getNodeChildren(e){return this._getDirectChildren(e.data).pipe(x(t=>t.reduce((n,s)=>{let o=this._nodes.value.get(this._getExpansionKey(s));return o&&n.push(o),n},[])))}_sendKeydownToKeyManager(e){if(e.target===this._elementRef.nativeElement)this._keyManager.onKeydown(e);else{let t=this._nodes.getValue();for(let[,n]of t)if(e.target===n._elementRef.nativeElement){this._keyManager.onKeydown(e);break}}}_getDescendants(e){if(this.treeControl)return m(this.treeControl.getDescendants(e));if(this.levelAccessor){let t=this._findChildrenByLevel(this.levelAccessor,this._flattenedNodes.value,e,1/0);return m(t)}if(this.childrenAccessor)return this._getAllChildrenRecursively(e).pipe(he((t,n)=>(t.push(...n),t),[]));throw bt()}_getAllChildrenRecursively(e){return this.childrenAccessor?re(this.childrenAccessor(e)).pipe(T(1),R(t=>{for(let n of t)this._parents.set(this._getExpansionKey(n),e);return m(...t).pipe(pe(n=>ue(m([n]),this._getAllChildrenRecursively(n))))})):m([])}_getExpansionKey(e){return this.expansionKey?.(e)??e}_getAriaSet(e){let t=this._getExpansionKey(e),n=this._parents.get(t),s=n?this._getExpansionKey(n):null;return this._ariaSets.get(s)??[e]}_findParentForNode(e,t,n){if(!n.length)return null;let s=this._levels.get(this._getExpansionKey(e))??0;for(let o=t-1;o>=0;o--){let c=n[o];if((this._levels.get(this._getExpansionKey(c))??0)<s)return c}return null}_flattenNestedNodesWithExpansion(e,t=0){let n=this._getChildrenAccessor();return n?m(...e).pipe(pe(s=>{let o=this._getExpansionKey(s);this._parents.has(o)||this._parents.set(o,null),this._levels.set(o,t);let c=re(n(s));return ue(m([s]),c.pipe(T(1),U(h=>{this._ariaSets.set(o,[...h??[]]);for(let p of h??[]){let D=this._getExpansionKey(p);this._parents.set(D,s),this._levels.set(D,t+1)}}),R(h=>h?this._flattenNestedNodesWithExpansion(h,t+1).pipe(x(p=>this.isExpanded(s)?p:[])):m([]))))}),he((s,o)=>(s.push(...o),s),[])):m([...e])}_computeRenderingData(e,t){if(this.childrenAccessor&&t==="flat")return this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(x(n=>({renderNodes:n,flattenedNodes:n})));if(this.levelAccessor&&t==="nested"){let n=this.levelAccessor;return m(e.filter(s=>n(s)===0)).pipe(x(s=>({renderNodes:s,flattenedNodes:e})),U(({flattenedNodes:s})=>{this._calculateParents(s)}))}else return t==="flat"?m({renderNodes:e,flattenedNodes:e}).pipe(U(({flattenedNodes:n})=>{this._calculateParents(n)})):(this._clearPreviousCache(),this._ariaSets.set(null,[...e]),this._flattenNestedNodesWithExpansion(e).pipe(x(n=>({renderNodes:e,flattenedNodes:n}))))}_updateCachedData(e){this._flattenedNodes.next(e)}_updateKeyManagerItems(e){this._keyManagerNodes.next(e)}_calculateParents(e){let t=this._getLevelAccessor();if(t){this._clearPreviousCache();for(let n=0;n<e.length;n++){let s=e[n],o=this._getExpansionKey(s);this._levels.set(o,t(s));let c=this._findParentForNode(s,n,e);this._parents.set(o,c);let h=c?this._getExpansionKey(c):null,p=this._ariaSets.get(h)??[];p.splice(n,0,s),this._ariaSets.set(h,p)}}}_forEachExpansionKey(e){let t=[],n=[];this._nodes.value.forEach(s=>{t.push(this._getExpansionKey(s.data)),n.push(this._getDescendants(s.data))}),n.length>0?V(n).pipe(T(1),w(this._onDestroy)).subscribe(s=>{s.forEach(o=>o.forEach(c=>t.push(this._getExpansionKey(c)))),e(t)}):e(t)}_clearPreviousCache(){this._parents.clear(),this._levels.clear(),this._ariaSets.clear()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=P({type:i,selectors:[["cdk-tree"]],contentQueries:function(t,n,s){if(t&1&&ve(s,ae,5),t&2){let o;F(o=L())&&(n._nodeDefs=o)}},viewQuery:function(t,n){if(t&1&&ie(j,7),t&2){let s;F(s=L())&&(n._nodeOutlet=s.first)}},hostAttrs:["role","tree",1,"cdk-tree"],hostBindings:function(t,n){t&1&&g("keydown",function(o){return n._sendKeydownToKeyManager(o)})},inputs:{dataSource:"dataSource",treeControl:"treeControl",levelAccessor:"levelAccessor",childrenAccessor:"childrenAccessor",trackBy:"trackBy",expansionKey:"expansionKey"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,n){t&1&&O(0,0)},dependencies:[j],encapsulation:2})}return i})(),A=(()=>{class i{_elementRef=f(me);_tree=f(W);_tabindex=-1;_type="flat";get role(){return"treeitem"}set role(e){}get isExpandable(){return this._isExpandable()}set isExpandable(e){this._inputIsExpandable=e,!(this.data&&!this._isExpandable||!this._inputIsExpandable)&&(this._inputIsExpanded?this.expand():this._inputIsExpanded===!1&&this.collapse())}get isExpanded(){return this._tree.isExpanded(this._data)}set isExpanded(e){this._inputIsExpanded=e,e?this.expand():this.collapse()}isDisabled;typeaheadLabel;getLabel(){return this.typeaheadLabel||this._elementRef.nativeElement.textContent?.trim()||""}activation=new fe;expandedChange=new fe;static mostRecentTreeNode=null;_destroyed=new Y;_dataChanges=new Y;_inputIsExpandable=!1;_inputIsExpanded=void 0;_shouldFocus=!0;_parentNodeAriaLevel;get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._dataChanges.next())}_data;get isLeafNode(){return this._tree.treeControl?.isExpandable!==void 0&&!this._tree.treeControl.isExpandable(this._data)?!0:this._tree.treeControl?.isExpandable===void 0&&this._tree.treeControl?.getDescendants(this._data).length===0}get level(){return this._tree._getLevel(this._data)??this._parentNodeAriaLevel}_isExpandable(){return this._tree.treeControl?!this.isLeafNode:this._inputIsExpandable}_getAriaExpanded(){return this._isExpandable()?String(this.isExpanded):null}_getSetSize(){return this._tree._getSetSize(this._data)}_getPositionInSet(){return this._tree._getPositionInSet(this._data)}_changeDetectorRef=f(be);constructor(){i.mostRecentTreeNode=this}ngOnInit(){this._parentNodeAriaLevel=kt(this._elementRef.nativeElement),this._tree._getExpansionModel().changed.pipe(x(()=>this.isExpanded),Ae()).subscribe(()=>this._changeDetectorRef.markForCheck()),this._tree._setNodeTypeIfUnset(this._type),this._tree._registerNode(this)}ngOnDestroy(){i.mostRecentTreeNode===this&&(i.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}getParent(){return this._tree._getNodeParent(this)??null}getChildren(){return this._tree._getNodeChildren(this)}focus(){this._tabindex=0,this._shouldFocus&&this._elementRef.nativeElement.focus(),this._changeDetectorRef.markForCheck()}unfocus(){this._tabindex=-1,this._changeDetectorRef.markForCheck()}activate(){this.isDisabled||this.activation.next(this._data)}collapse(){this.isExpandable&&this._tree.collapse(this._data)}expand(){this.isExpandable&&this._tree.expand(this._data)}makeFocusable(){this._tabindex=0,this._changeDetectorRef.markForCheck()}_focusItem(){this.isDisabled||this._tree._keyManager.focusItem(this)}_setActiveItem(){this.isDisabled||(this._shouldFocus=!1,this._tree._keyManager.focusItem(this),this._shouldFocus=!0)}_emitExpansionState(e){this.expandedChange.emit(e)}static \u0275fac=function(t){return new(t||i)};static \u0275dir=y({type:i,selectors:[["cdk-tree-node"]],hostAttrs:["role","treeitem",1,"cdk-tree-node"],hostVars:5,hostBindings:function(t,n){t&1&&g("click",function(){return n._setActiveItem()})("focus",function(){return n._focusItem()}),t&2&&(xe("tabindex",n._tabindex),ge("aria-expanded",n._getAriaExpanded())("aria-level",n.level+1)("aria-posinset",n._getPositionInSet())("aria-setsize",n._getSetSize()))},inputs:{role:"role",isExpandable:[2,"isExpandable","isExpandable",K],isExpanded:"isExpanded",isDisabled:[2,"isDisabled","isDisabled",K],typeaheadLabel:[0,"cdkTreeNodeTypeaheadLabel","typeaheadLabel"]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["cdkTreeNode"]})}return i})();function kt(i){let r=i.parentElement;for(;r&&!wt(r);)r=r.parentElement;return r?r.classList.contains("cdk-nested-tree-node")?se(r.getAttribute("aria-level")):0:-1}function wt(i){let r=i.classList;return!!(r?.contains("cdk-nested-tree-node")||r?.contains("cdk-tree"))}var Me=(()=>{class i extends A{_type="nested";_differs=f(ye);_dataDiffer;_children;nodeOutlet;constructor(){super()}ngAfterContentInit(){this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),this._tree._getDirectChildren(this.data).pipe(w(this._destroyed)).subscribe(e=>this.updateChildrenNodes(e)),this.nodeOutlet.changes.pipe(w(this._destroyed)).subscribe(()=>this.updateChildrenNodes())}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){let t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){let n=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,n,this._data)}else this._dataDiffer.diff([])}_clear(){let e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){let e=this.nodeOutlet;return e&&e.find(t=>!t._node||t._node===this)}static \u0275fac=function(t){return new(t||i)};static \u0275dir=y({type:i,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,n,s){if(t&1&&ve(s,j,5),t&2){let o;F(o=L())&&(n.nodeOutlet=o)}},hostAttrs:[1,"cdk-nested-tree-node"],exportAs:["cdkNestedTreeNode"],features:[k([{provide:A,useExisting:i},{provide:q,useExisting:i}]),N]})}return i})();var Te=(()=>{class i{_tree=f(W);_treeNode=f(A);recursive=!1;constructor(){}_toggle(){this.recursive?this._tree.toggleDescendants(this._treeNode.data):this._tree.toggle(this._treeNode.data),this._tree._keyManager.focusItem(this._treeNode)}static \u0275fac=function(t){return new(t||i)};static \u0275dir=y({type:i,selectors:[["","cdkTreeNodeToggle",""]],hostAttrs:["tabindex","-1"],hostBindings:function(t,n){t&1&&g("click",function(o){return n._toggle(),o.stopPropagation()})("keydown.Enter",function(o){return n._toggle(),o.preventDefault()})("keydown.Space",function(o){return n._toggle(),o.preventDefault()})},inputs:{recursive:[2,"cdkTreeNodeToggleRecursive","recursive",K]}})}return i})();var Ct=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=Z({})}return i})();var St=(()=>{class i extends ae{data;static \u0275fac=(()=>{let e;return function(n){return(e||(e=$(i)))(n||i)}})();static \u0275dir=y({type:i,selectors:[["","matTreeNodeDef",""]],inputs:{when:[0,"matTreeNodeDefWhen","when"],data:[0,"matTreeNode","data"]},features:[k([{provide:ae,useExisting:i}]),N]})}return i})(),Et=(()=>{class i extends Me{node;get disabled(){return this.isDisabled}set disabled(e){this.isDisabled=e}get tabIndex(){return this.isDisabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=e}_tabIndex;ngOnInit(){super.ngOnInit()}ngAfterContentInit(){super.ngAfterContentInit()}ngOnDestroy(){super.ngOnDestroy()}static \u0275fac=(()=>{let e;return function(n){return(e||(e=$(i)))(n||i)}})();static \u0275dir=y({type:i,selectors:[["mat-nested-tree-node"]],hostAttrs:[1,"mat-nested-tree-node"],inputs:{node:[0,"matNestedTreeNode","node"],disabled:[2,"disabled","disabled",K],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:se(e)]},outputs:{activation:"activation",expandedChange:"expandedChange"},exportAs:["matNestedTreeNode"],features:[k([{provide:Me,useExisting:i},{provide:A,useExisting:i},{provide:q,useExisting:i}]),N]})}return i})();var de=(()=>{class i{viewContainer=f(ee);_node=f(q,{optional:!0});static \u0275fac=function(t){return new(t||i)};static \u0275dir=y({type:i,selectors:[["","matTreeNodeOutlet",""]],features:[k([{provide:j,useExisting:i}])]})}return i})(),Dt=(()=>{class i extends W{_nodeOutlet=void 0;static \u0275fac=(()=>{let e;return function(n){return(e||(e=$(i)))(n||i)}})();static \u0275cmp=P({type:i,selectors:[["mat-tree"]],viewQuery:function(t,n){if(t&1&&ie(de,7),t&2){let s;F(s=L())&&(n._nodeOutlet=s.first)}},hostAttrs:[1,"mat-tree"],exportAs:["matTree"],features:[k([{provide:W,useExisting:i}]),N],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,n){t&1&&O(0,0)},dependencies:[de],styles:[`.mat-tree{display:block;background-color:var(--mat-tree-container-background-color, var(--mat-sys-surface))}.mat-tree-node,.mat-nested-tree-node{color:var(--mat-tree-node-text-color, var(--mat-sys-on-surface));font-family:var(--mat-tree-node-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-tree-node-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-tree-node-text-weight, var(--mat-sys-body-large-weight))}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word;min-height:var(--mat-tree-node-min-height, 48px)}.mat-nested-tree-node{border-bottom-width:0}
`],encapsulation:2})}return i})(),Mt=(()=>{class i extends Te{static \u0275fac=(()=>{let e;return function(n){return(e||(e=$(i)))(n||i)}})();static \u0275dir=y({type:i,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:[0,"matTreeNodeToggleRecursive","recursive"]},features:[k([{provide:Te,useExisting:i}]),N]})}return i})();var Tt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=te({type:i});static \u0275inj=Z({imports:[Ct,Ce,Ce]})}return i})();var le=class extends pt{get data(){return this._data.value}set data(r){this._data.next(r)}_data=new M([]);connect(r){return Ne(r.viewChange,this._data).pipe(x(()=>this.data))}disconnect(){}};var It=(i,r)=>r.id;function At(i,r){if(i&1&&(a(0,"span",16),l(1),d()),i&2){let e=_().$implicit;u(),Q("(",e.code,")")}}function Bt(i,r){if(i&1){let e=H();a(0,"mat-nested-tree-node")(1,"div",13),z(2,"button",14),a(3,"div",15),g("click",function(){let n=v(e).$implicit,s=_();return b(s.selectSbu(n))}),a(4,"mat-icon"),l(5,"business"),d(),a(6,"span"),l(7),d(),S(8,At,2,1,"span",16),d(),a(9,"button",17),g("click",function(){let n=v(e).$implicit,s=_();return b(s.editSbu(n))}),a(10,"mat-icon"),l(11,"edit"),d()(),a(12,"button",18),g("click",function(){let n=v(e).$implicit,s=_();return b(s.deleteSbu(n))}),a(13,"mat-icon"),l(14,"delete"),d()()()()}if(i&2){let e=r.$implicit,t=_();u(3),ne("selected",(t.selectedSbu==null?null:t.selectedSbu.id)===e.id),u(4),E(e.name),u(),C(e.code?8:-1)}}function Pt(i,r){if(i&1&&(a(0,"span",16),l(1),d()),i&2){let e=_().$implicit;u(),Q("(",e.code,")")}}function Ot(i,r){if(i&1){let e=H();a(0,"mat-nested-tree-node")(1,"div",13)(2,"button",19)(3,"mat-icon"),l(4),d()(),a(5,"div",15),g("click",function(){let n=v(e).$implicit,s=_();return b(s.selectSbu(n))}),a(6,"mat-icon"),l(7,"business"),d(),a(8,"span"),l(9),d(),S(10,Pt,2,1,"span",16),d(),a(11,"button",17),g("click",function(){let n=v(e).$implicit,s=_();return b(s.editSbu(n))}),a(12,"mat-icon"),l(13,"edit"),d()(),a(14,"button",18),g("click",function(){let n=v(e).$implicit,s=_();return b(s.deleteSbu(n))}),a(15,"mat-icon"),l(16,"delete"),d()()(),a(17,"div"),O(18,20),d()()}if(i&2){let e=r.$implicit,t=_();u(4),Q(" ",t.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),u(),ne("selected",(t.selectedSbu==null?null:t.selectedSbu.id)===e.id),u(4),E(e.name),u(),C(e.code?10:-1),u(7),ne("hidden",!t.treeControl.isExpanded(e))}}function Ft(i,r){i&1&&(a(0,"div",8)(1,"mat-icon"),l(2,"business"),d(),a(3,"p"),l(4,"No SBUs configured. Add your first SBU to get started."),d()())}function Lt(i,r){i&1&&(a(0,"mat-error"),l(1,"Name is required"),d())}function Kt(i,r){if(i&1&&(a(0,"mat-option",27),l(1),d()),i&2){let e=_().$implicit;I("value",e.id),u(),E(e.name)}}function Vt(i,r){if(i&1&&S(0,Kt,2,2,"mat-option",27),i&2){let e=r.$implicit,t=_(2);C(!t.editingSbu||e.id!==t.editingSbu.id?0:-1)}}function Rt(i,r){if(i&1){let e=H();a(0,"form",21),g("ngSubmit",function(){v(e);let n=_();return b(n.saveSbu())}),a(1,"mat-form-field",22)(2,"mat-label"),l(3,"Name"),d(),z(4,"input",23),S(5,Lt,2,0,"mat-error"),d(),a(6,"mat-form-field",22)(7,"mat-label"),l(8,"Code"),d(),z(9,"input",24),d(),a(10,"mat-form-field",22)(11,"mat-label"),l(12,"Description"),d(),z(13,"textarea",25),d(),a(14,"mat-form-field",22)(15,"mat-label"),l(16,"Parent SBU"),d(),a(17,"mat-select",26)(18,"mat-option",27),l(19,"None (Root Level)"),d(),Oe(20,Vt,1,1,null,null,It),d()(),a(22,"div",28)(23,"button",29),g("click",function(){v(e);let n=_();return b(n.cancelEdit())}),l(24,"Cancel"),d(),a(25,"button",30),l(26),d()()()}if(i&2){let e,t=_();I("formGroup",t.sbuForm),u(5),C((e=t.sbuForm.get("name"))!=null&&e.hasError("required")?5:-1),u(13),I("value",null),u(2),Fe(t.flatSbus),u(5),I("disabled",t.loading),u(),Q(" ",t.editingSbu?"Update":"Create"," ")}}function Ut(i,r){if(i&1&&(a(0,"div",31)(1,"span",32),l(2,"Code"),d(),a(3,"span",33),l(4),d()()),i&2){let e=_(2);u(4),E(e.selectedSbu.code)}}function $t(i,r){if(i&1&&(a(0,"div",31)(1,"span",32),l(2,"Description"),d(),a(3,"span",33),l(4),d()()),i&2){let e=_(2);u(4),E(e.selectedSbu.description)}}function zt(i,r){if(i&1&&(a(0,"div",31)(1,"span",32),l(2,"Parent"),d(),a(3,"span",33),l(4),d()()),i&2){let e=_(2);u(4),E(e.selectedSbu.parent.name)}}function Ht(i,r){if(i&1){let e=H();a(0,"div",11)(1,"div",31)(2,"span",32),l(3,"Name"),d(),a(4,"span",33),l(5),d()(),S(6,Ut,5,1,"div",31)(7,$t,5,1,"div",31)(8,zt,5,1,"div",31),a(9,"div",34)(10,"button",35),g("click",function(){v(e);let n=_();return b(n.editSbu(n.selectedSbu))}),a(11,"mat-icon"),l(12,"edit"),d(),l(13," Edit "),d(),a(14,"button",2),g("click",function(){v(e);let n=_();return b(n.addChildSbu())}),a(15,"mat-icon"),l(16,"add"),d(),l(17," Add Child "),d()()()}if(i&2){let e=_();u(5),E(e.selectedSbu.name),u(),C(e.selectedSbu.code?6:-1),u(),C(e.selectedSbu.description?7:-1),u(),C(e.selectedSbu.parent?8:-1)}}function Qt(i,r){i&1&&(a(0,"div",12)(1,"mat-icon"),l(2,"touch_app"),d(),a(3,"p"),l(4,'Select an SBU to view details or click "Add SBU" to create a new one.'),d()())}var qn=(()=>{class i{fb;userService;snackBar;treeControl=new oe(e=>e.children);dataSource=new le;flatSbus=[];selectedSbu=null;editingSbu=null;showAddSbu=!1;loading=!1;sbuForm;constructor(e,t,n){this.fb=e,this.userService=t,this.snackBar=n,this.sbuForm=this.fb.group({name:["",$e.required],code:[""],description:[""],parentId:[null]})}ngOnInit(){this.loadSbus()}hasChild=(e,t)=>!!t.children&&t.children.length>0;loadSbus(){this.userService.getSbus().subscribe(e=>{e.success&&(this.flatSbus=e.data,this.dataSource.data=this.buildTree(e.data))})}buildTree(e){let t=new Map,n=[];return e.forEach(s=>{t.set(s.id,X(G({},s),{children:[]}))}),e.forEach(s=>{let o=t.get(s.id);if(s.parent?.id){let c=t.get(s.parent.id);c?(c.children=c.children||[],c.children.push(o)):n.push(o)}else n.push(o)}),n}selectSbu(e){this.selectedSbu=e}editSbu(e){this.editingSbu=e,this.showAddSbu=!1,this.sbuForm.patchValue({name:e.name,code:e.code,description:e.description,parentId:e.parent?.id||null})}addChildSbu(){this.showAddSbu=!0,this.editingSbu=null,this.sbuForm.reset(),this.sbuForm.patchValue({parentId:this.selectedSbu?.id||null})}cancelEdit(){this.showAddSbu=!1,this.editingSbu=null,this.sbuForm.reset()}saveSbu(){if(this.sbuForm.invalid)return;this.loading=!0;let e=this.sbuForm.value;(this.editingSbu?this.userService.updateSbu(this.editingSbu.id,e):this.userService.createSbu(e)).subscribe({next:n=>{this.loading=!1,n.success&&(this.snackBar.open(this.editingSbu?"SBU updated successfully":"SBU created successfully","Close",{duration:3e3}),this.cancelEdit(),this.loadSbus())},error:n=>{this.loading=!1,this.snackBar.open(n.error?.message||"Operation failed","Close",{duration:3e3})}})}deleteSbu(e){confirm(`Are you sure you want to delete "${e.name}"? This will also delete all child SBUs.`)&&this.userService.deleteSbu(e.id).subscribe({next:t=>{t.success&&(this.snackBar.open("SBU deleted successfully","Close",{duration:3e3}),this.selectedSbu?.id===e.id&&(this.selectedSbu=null),this.loadSbus())},error:t=>{this.snackBar.open(t.error?.message||"Failed to delete SBU","Close",{duration:3e3})}})}static \u0275fac=function(t){return new(t||i)(J(We),J(gt),J(ft))};static \u0275cmp=P({type:i,selectors:[["app-sbu-list"]],decls:26,vars:6,consts:[[1,"sbu-list-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],[1,"content-grid"],[1,"tree-card"],[1,"sbu-tree",3,"dataSource","treeControl"],[4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"no-data"],[1,"form-card"],[3,"formGroup"],[1,"sbu-details"],[1,"no-selection"],[1,"mat-tree-node"],["mat-icon-button","","disabled",""],[1,"sbu-node",3,"click"],[1,"code"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","matTreeNodeToggle",""],["matTreeNodeOutlet",""],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","name"],["matInput","","formControlName","code"],["matInput","","formControlName","description","rows","3"],["formControlName","parentId"],[3,"value"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"detail-actions"],["mat-raised-button","",3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h1"),l(3,"SBU Management"),d(),a(4,"button",2),g("click",function(){return n.showAddSbu=!0}),a(5,"mat-icon"),l(6,"add"),d(),l(7," Add SBU "),d()(),a(8,"div",3)(9,"mat-card",4)(10,"mat-card-header")(11,"mat-card-title"),l(12,"Organization Structure"),d()(),a(13,"mat-card-content")(14,"mat-tree",5),S(15,Bt,15,4,"mat-nested-tree-node",6)(16,Ot,19,7,"mat-nested-tree-node",7),d(),S(17,Ft,5,0,"div",8),d()(),a(18,"mat-card",9)(19,"mat-card-header")(20,"mat-card-title"),l(21),d()(),a(22,"mat-card-content"),S(23,Rt,27,5,"form",10)(24,Ht,18,4,"div",11)(25,Qt,5,0,"div",12),d()()()()),t&2&&(u(14),I("dataSource",n.dataSource)("treeControl",n.treeControl),u(2),I("matTreeNodeDefWhen",n.hasChild),u(),C(n.flatSbus.length===0?17:-1),u(4),E(n.editingSbu?"Edit SBU":n.showAddSbu?"Add SBU":"SBU Details"),u(2),C(n.showAddSbu||n.editingSbu?23:n.selectedSbu?24:25))},dependencies:[Le,Ge,Qe,Ue,ze,He,Xe,je,qe,ot,nt,st,rt,it,Tt,Et,St,Mt,Dt,de,ct,lt,at,dt,ht,ut,vt,xt,Re,tt,et,Je,Ze,Ye,mt],styles:[".sbu-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:1rem}.sbu-tree[_ngcontent-%COMP%]{min-height:300px}.mat-tree-node[_ngcontent-%COMP%]{display:flex;align-items:center}.sbu-node[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;flex:1;padding:.5rem;border-radius:4px;cursor:pointer}.sbu-node[_ngcontent-%COMP%]:hover{background:#f5f5f5}.sbu-node.selected[_ngcontent-%COMP%]{background:#e3f2fd}.sbu-node[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.hidden[_ngcontent-%COMP%]{display:none}.no-data[_ngcontent-%COMP%], .no-selection[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#666;text-align:center}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .no-selection[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem}.sbu-details[_ngcontent-%COMP%]{padding:.5rem}.detail-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:500}.detail-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1.5rem}"]})}return i})();export{qn as SbuListComponent};
