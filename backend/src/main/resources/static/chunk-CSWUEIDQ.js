import{a as ie}from"./chunk-Y46M7IGS.js";import{a as Ut,b as Wt,e as Ht}from"./chunk-UKCHRE5Y.js";import{a as Nt,b as jt,c as Vt,d as Qt}from"./chunk-ARJGZQI5.js";import{a as W,b as T}from"./chunk-D7R5IUPR.js";import{a as H,b as qt,c as Gt,d as Zt,e as $t,f as Yt,g as Kt,h as z}from"./chunk-5TLSQL4E.js";import{b as Xt}from"./chunk-LUBHRDD6.js";import{b as wt}from"./chunk-22QFHSXK.js";import{a as Bt,b as Rt}from"./chunk-UYHUY2FW.js";import{a as ee}from"./chunk-AIEGMQYC.js";import"./chunk-KPLEND2O.js";import{a as Jt,b as te}from"./chunk-XQHIDIE5.js";import"./chunk-LETYTNCA.js";import"./chunk-M3GLKEYP.js";import{a as Tt,c as zt,d as Ft}from"./chunk-ZK2UDSKG.js";import{b as Pt,c as At,e as It,f as Ot,i as Lt}from"./chunk-FHBRY4FZ.js";import{d as xt,f as B,h as yt,i as kt,l as Ct,n as Mt,o as St,r as Et,t as Dt}from"./chunk-JITRQZ7S.js";import{h as K}from"./chunk-Q5RCCGFX.js";import"./chunk-W4XF3NOO.js";import{a as U}from"./chunk-4FIQ4TSC.js";import{b as st,c as dt,d as ct,e as lt,g as mt}from"./chunk-PKMLTJ2J.js";import{$ as bt,I as ht,J as pt,N as gt,O as _t,S as ut,T as ft,a as ot,ca as w,j as rt,m as P,oa as vt,qa as A,ra as I,sa as O,ta as Q,va as L}from"./chunk-LBWRLA47.js";import{Ab as f,Bc as V,Ca as et,Cb as h,Db as q,Fb as m,Hb as at,Ib as E,Jb as D,Ka as it,Kb as e,Lb as t,Mb as g,Qb as N,Ub as _,Vb as v,aa as k,bb as r,cc as G,dc as i,ec as d,fa as x,fb as nt,fc as j,gb as u,na as M,nb as b,nc as Z,oa as S,ob as C,pb as R,pc as $,rc as Y,tb as p,za as tt}from"./chunk-5XIHPI6O.js";var de=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=C({type:a});static \u0275inj=k({imports:[w,K,K,w]})}return a})();var ce=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=C({type:a});static \u0275inj=k({imports:[w,w]})}return a})();var le=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=C({type:a});static \u0275inj=k({imports:[gt,w,vt,wt,T]})}return a})();var me="mat-badge-content",Me=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275cmp=b({type:a,selectors:[["ng-component"]],decls:0,vars:0,template:function(s,o){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return a})(),he=(()=>{class a{_ngZone=x(tt);_elementRef=x(et);_ariaDescriber=x(bt);_renderer=x(nt);_animationMode=x(it,{optional:!0});_idGenerator=x(ft);get color(){return this._color}set color(n){this._setColor(n),this._color=n}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(n){this._updateRenderedContent(n)}_content;get description(){return this._description}set description(n){this._updateDescription(n)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=x(_t);_document=x(ot);constructor(){let n=x(ht);n.load(Me),n.load(pt)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let n=this._renderer.createElement("span"),s="mat-badge-active";return n.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),n.setAttribute("aria-hidden","true"),n.classList.add(me),this._animationMode==="NoopAnimations"&&n.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(n),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{n.classList.add(s)})}):n.classList.add(s),n}_updateRenderedContent(n){let s=`${n??""}`.trim();this._isInitialized&&s&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=s),this._content=s}_updateDescription(n){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!n||this._isHostInteractive())&&this._removeInlineDescription(),this._description=n,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,n):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(n){let s=this._elementRef.nativeElement.classList;s.remove(`mat-badge-${this._color}`),n&&s.add(`mat-badge-${n}`)}_clearExistingBadges(){let n=this._elementRef.nativeElement.querySelectorAll(`:scope > .${me}`);for(let s of Array.from(n))s!==this._badgeElement&&s.remove()}static \u0275fac=function(s){return new(s||a)};static \u0275dir=R({type:a,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(s,o){s&2&&h("mat-badge-overlap",o.overlap)("mat-badge-above",o.isAbove())("mat-badge-below",!o.isAbove())("mat-badge-before",!o.isAfter())("mat-badge-after",o.isAfter())("mat-badge-small",o.size==="small")("mat-badge-medium",o.size==="medium")("mat-badge-large",o.size==="large")("mat-badge-hidden",o.hidden||!o.content)("mat-badge-disabled",o.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",V],disabled:[2,"matBadgeDisabled","disabled",V],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",V]}})}return a})(),pe=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=C({type:a});static \u0275inj=k({imports:[ut,w,w]})}return a})();var De=(a,c)=>c.id;function Pe(a,c){if(a&1&&(e(0,"span",18),i(1),t()),a&2){let n=c.$implicit;r(),d(n)}}function Ae(a,c){if(a&1&&E(0,Pe,2,1,"span",18,at),a&2){let n=v();D(n.data.roles)}}function Ie(a,c){a&1&&(e(0,"span",15),i(1,"No roles assigned"),t())}function Oe(a,c){if(a&1&&(e(0,"span",19),i(1),t()),a&2){let n=c.$implicit;r(),d(n.name)}}function Le(a,c){if(a&1&&(g(0,"mat-divider"),e(1,"div",7)(2,"h4")(3,"mat-icon"),i(4,"business"),t(),i(5," Business Units"),t(),e(6,"div",14),E(7,Oe,2,1,"span",19,De),t()()),a&2){let n=v();r(7),D(n.data.sbus)}}var fe=(()=>{class a{dialogRef;data;constructor(n,s){this.dialogRef=n,this.data=s}get userInitials(){return(this.data.fullName||"").split(" ").map(s=>s[0]).join("").substring(0,2).toUpperCase()}static \u0275fac=function(s){return new(s||a)(u(H),u(qt))};static \u0275cmp=b({type:a,selectors:[["app-profile-dialog"]],decls:98,vars:28,consts:[[1,"profile-dialog"],[1,"profile-header"],[1,"avatar"],[1,"header-info"],[1,"user-type"],["mat-icon-button","","mat-dialog-close","",1,"close-btn"],[1,"profile-content"],[1,"info-section"],[1,"info-grid"],[1,"info-item"],[1,"label"],[1,"value"],[1,"info-item","full-width"],[1,"value","badge"],[1,"chips-container"],[1,"no-data"],[1,"dialog-actions"],["mat-button","","mat-dialog-close",""],[1,"role-chip"],[1,"sbu-chip"]],template:function(s,o){s&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),i(3),t(),e(4,"div",3)(5,"h2"),i(6),t(),e(7,"span",4),i(8),t()(),e(9,"button",5)(10,"mat-icon"),i(11,"close"),t()()(),g(12,"mat-divider"),e(13,"div",6)(14,"div",7)(15,"h4")(16,"mat-icon"),i(17,"person"),t(),i(18," Personal Information"),t(),e(19,"div",8)(20,"div",9)(21,"span",10),i(22,"Username"),t(),e(23,"span",11),i(24),t()(),e(25,"div",9)(26,"span",10),i(27,"Email"),t(),e(28,"span",11),i(29),t()(),e(30,"div",9)(31,"span",10),i(32,"First Name"),t(),e(33,"span",11),i(34),t()(),e(35,"div",9)(36,"span",10),i(37,"Last Name"),t(),e(38,"span",11),i(39),t()(),e(40,"div",9)(41,"span",10),i(42,"Phone"),t(),e(43,"span",11),i(44),t()(),e(45,"div",9)(46,"span",10),i(47,"Staff ID"),t(),e(48,"span",11),i(49),t()(),e(50,"div",12)(51,"span",10),i(52,"Department"),t(),e(53,"span",11),i(54),t()()()(),g(55,"mat-divider"),e(56,"div",7)(57,"h4")(58,"mat-icon"),i(59,"security"),t(),i(60," Account Information"),t(),e(61,"div",8)(62,"div",9)(63,"span",10),i(64,"User Type"),t(),e(65,"span",13),i(66),t()(),e(67,"div",9)(68,"span",10),i(69,"Account Status"),t(),e(70,"span",13),i(71),t()(),e(72,"div",9)(73,"span",10),i(74,"Last Login"),t(),e(75,"span",11),i(76),$(77,"date"),t()(),e(78,"div",9)(79,"span",10),i(80,"Account Created"),t(),e(81,"span",11),i(82),$(83,"date"),t()()()(),g(84,"mat-divider"),e(85,"div",7)(86,"h4")(87,"mat-icon"),i(88,"admin_panel_settings"),t(),i(89," Roles"),t(),e(90,"div",14),p(91,Ae,2,0)(92,Ie,2,0,"span",15),t()(),p(93,Le,9,0),t(),g(94,"mat-divider"),e(95,"div",16)(96,"button",17),i(97,"Close"),t()()()),s&2&&(r(3),d(o.userInitials),r(3),d(o.data.fullName),r(2),d(o.data.userType),r(16),d(o.data.username),r(5),d(o.data.email||"-"),r(5),d(o.data.firstName||"-"),r(5),d(o.data.lastName||"-"),r(5),d(o.data.phoneNumber||"-"),r(5),d(o.data.staffId||"-"),r(5),d(o.data.department||"-"),r(11),q(o.data.userType.toLowerCase()),r(),d(o.data.userType),r(4),h("active",o.data.isActive)("inactive",!o.data.isActive),r(),j(" ",o.data.isActive?"Active":"Inactive"," "),r(5),d(o.data.lastLogin?Y(77,22,o.data.lastLogin,"medium"):"Never"),r(6),d(o.data.createdAt?Y(83,25,o.data.createdAt,"medium"):"-"),r(9),m(o.data.roles&&o.data.roles.length>0?91:92),r(2),m(o.data.sbus&&o.data.sbus.length>0?93:-1))},dependencies:[P,rt,z,Zt,L,Q,O,I,A,T,W,Xt],styles:[".profile-dialog[_ngcontent-%COMP%]{min-width:500px;max-width:600px}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;position:relative}.avatar[_ngcontent-%COMP%]{width:64px;height:64px;border-radius:50%;background:linear-gradient(135deg,#1976d2,#1565c0);color:#fff;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:500}.header-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.user-type[_ngcontent-%COMP%]{color:#666;font-size:.875rem}.close-btn[_ngcontent-%COMP%]{position:absolute;top:.5rem;right:.5rem}.profile-content[_ngcontent-%COMP%]{padding:0 1.5rem;max-height:60vh;overflow-y:auto}.info-section[_ngcontent-%COMP%]{padding:1rem 0}.info-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;display:flex;align-items:center;gap:.5rem;color:#1976d2;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.info-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.info-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.75rem;color:#666;text-transform:uppercase;letter-spacing:.5px}.info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:#333}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:4px;font-size:.75rem;width:fit-content}.badge.system[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.badge.staff[_ngcontent-%COMP%]{background:#f5f5f5;color:#666}.badge.manager[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.badge.external[_ngcontent-%COMP%]{background:#fce4ec;color:#c62828}.badge.active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.badge.inactive[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.chips-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.role-chip[_ngcontent-%COMP%], .sbu-chip[_ngcontent-%COMP%]{padding:.375rem .75rem;border-radius:16px;font-size:.8rem;font-weight:500}.role-chip[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.sbu-chip[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.no-data[_ngcontent-%COMP%]{color:#999;font-style:italic}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:1rem 1.5rem}"]})}return a})();function ze(a,c){if(a&1&&(e(0,"div",3),i(1),t()),a&2){let n=v();r(),d(n.errorMessage)}}function Fe(a,c){a&1&&(e(0,"mat-error"),i(1,"Current password is required"),t())}function Be(a,c){a&1&&(e(0,"mat-error"),i(1,"New password is required"),t())}function Re(a,c){a&1&&(e(0,"mat-error"),i(1,"Password must be at least 8 characters"),t())}function Ne(a,c){a&1&&(e(0,"mat-error"),i(1,"Please confirm your new password"),t())}function je(a,c){a&1&&(e(0,"mat-error"),i(1,"Passwords do not match"),t())}function Ve(a,c){a&1&&g(0,"mat-spinner",15)}function Qe(a,c){a&1&&i(0," Change Password ")}var be=(()=>{class a{fb;authService;dialogRef;snackBar;changePasswordForm;loading=!1;hideCurrentPassword=!0;hideNewPassword=!0;hideConfirmPassword=!0;errorMessage="";constructor(n,s,o,l){this.fb=n,this.authService=s,this.dialogRef=o,this.snackBar=l,this.changePasswordForm=this.fb.group({currentPassword:["",B.required],newPassword:["",[B.required,B.minLength(8)]],confirmPassword:["",B.required]},{validators:this.passwordMatchValidator})}passwordMatchValidator(n){let s=n.get("newPassword")?.value,o=n.get("confirmPassword")?.value;return s===o?null:{passwordMismatch:!0}}get newPassword(){return this.changePasswordForm.get("newPassword")?.value||""}get hasMinLength(){return this.newPassword.length>=8}get hasUppercase(){return/[A-Z]/.test(this.newPassword)}get hasLowercase(){return/[a-z]/.test(this.newPassword)}get hasNumber(){return/[0-9]/.test(this.newPassword)}get hasSpecial(){return/[!@#$%^&*(),.?":{}|<>]/.test(this.newPassword)}onSubmit(){if(this.changePasswordForm.invalid)return;this.loading=!0,this.errorMessage="";let{currentPassword:n,newPassword:s,confirmPassword:o}=this.changePasswordForm.value;this.authService.changePassword(n,s,o).subscribe({next:l=>{this.loading=!1,l.success?(this.snackBar.open("Password changed successfully","Close",{duration:3e3}),this.dialogRef.close(!0)):this.errorMessage=l.message||"Failed to change password"},error:l=>{this.loading=!1,this.errorMessage=l.error?.message||"An error occurred. Please try again."}})}close(){this.dialogRef.close()}static \u0275fac=function(s){return new(s||a)(u(Et),u(U),u(H),u(Jt))};static \u0275cmp=b({type:a,selectors:[["app-change-password-dialog"]],decls:63,vars:25,consts:[[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","",3,"click"],[1,"error-message"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","currentPassword","autocomplete","current-password",3,"type"],["matPrefix",""],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","newPassword","autocomplete","new-password",3,"type"],["matInput","","formControlName","confirmPassword","autocomplete","new-password",3,"type"],[1,"password-requirements"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20"]],template:function(s,o){if(s&1&&(e(0,"div",0)(1,"h2",1)(2,"mat-icon"),i(3,"lock"),t(),i(4," Change Password "),t(),e(5,"button",2),_("click",function(){return o.close()}),e(6,"mat-icon"),i(7,"close"),t()()(),e(8,"mat-dialog-content"),p(9,ze,2,1,"div",3),e(10,"form",4),_("ngSubmit",function(){return o.onSubmit()}),e(11,"mat-form-field",5)(12,"mat-label"),i(13,"Current Password"),t(),g(14,"input",6),e(15,"mat-icon",7),i(16,"lock"),t(),e(17,"button",8),_("click",function(){return o.hideCurrentPassword=!o.hideCurrentPassword}),e(18,"mat-icon"),i(19),t()(),p(20,Fe,2,0,"mat-error"),t(),e(21,"mat-form-field",5)(22,"mat-label"),i(23,"New Password"),t(),g(24,"input",9),e(25,"mat-icon",7),i(26,"lock_outline"),t(),e(27,"button",8),_("click",function(){return o.hideNewPassword=!o.hideNewPassword}),e(28,"mat-icon"),i(29),t()(),p(30,Be,2,0,"mat-error")(31,Re,2,0,"mat-error"),t(),e(32,"mat-form-field",5)(33,"mat-label"),i(34,"Confirm New Password"),t(),g(35,"input",10),e(36,"mat-icon",7),i(37,"lock_outline"),t(),e(38,"button",8),_("click",function(){return o.hideConfirmPassword=!o.hideConfirmPassword}),e(39,"mat-icon"),i(40),t()(),p(41,Ne,2,0,"mat-error")(42,je,2,0,"mat-error"),t(),e(43,"div",11)(44,"h4"),i(45,"Password Requirements:"),t(),e(46,"ul")(47,"li"),i(48,"At least 8 characters"),t(),e(49,"li"),i(50,"At least one uppercase letter"),t(),e(51,"li"),i(52,"At least one lowercase letter"),t(),e(53,"li"),i(54,"At least one number"),t(),e(55,"li"),i(56,"At least one special character"),t()()()()(),e(57,"mat-dialog-actions",12)(58,"button",13),_("click",function(){return o.close()}),i(59,"Cancel"),t(),e(60,"button",14),_("click",function(){return o.onSubmit()}),p(61,Ve,1,0,"mat-spinner",15)(62,Qe,1,0),t()()),s&2){let l,y,X,J;r(9),m(o.errorMessage?9:-1),r(),f("formGroup",o.changePasswordForm),r(4),f("type",o.hideCurrentPassword?"password":"text"),r(5),d(o.hideCurrentPassword?"visibility_off":"visibility"),r(),m((l=o.changePasswordForm.get("currentPassword"))!=null&&l.hasError("required")?20:-1),r(4),f("type",o.hideNewPassword?"password":"text"),r(5),d(o.hideNewPassword?"visibility_off":"visibility"),r(),m((y=o.changePasswordForm.get("newPassword"))!=null&&y.hasError("required")?30:-1),r(),m((X=o.changePasswordForm.get("newPassword"))!=null&&X.hasError("minlength")?31:-1),r(4),f("type",o.hideConfirmPassword?"password":"text"),r(5),d(o.hideConfirmPassword?"visibility_off":"visibility"),r(),m((J=o.changePasswordForm.get("confirmPassword"))!=null&&J.hasError("required")?41:-1),r(),m(o.changePasswordForm.hasError("passwordMismatch")?42:-1),r(5),h("met",o.hasMinLength),r(2),h("met",o.hasUppercase),r(2),h("met",o.hasLowercase),r(2),h("met",o.hasNumber),r(2),h("met",o.hasSpecial),r(5),f("disabled",o.loading||o.changePasswordForm.invalid),r(),m(o.loading?61:62)}},dependencies:[P,Dt,Ct,xt,yt,kt,Mt,St,z,$t,Kt,Yt,Tt,Lt,Pt,At,It,Ot,Ft,zt,L,Q,O,I,A,Rt,Bt,te],styles:['@charset "UTF-8";.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 16px}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0}mat-dialog-content[_ngcontent-%COMP%]{min-width:400px;max-width:500px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.error-message[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:.75rem;border-radius:4px;margin-bottom:1rem}.password-requirements[_ngcontent-%COMP%]{background:#f5f5f5;padding:1rem;border-radius:4px;margin-top:.5rem}.password-requirements[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.875rem}.password-requirements[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1.25rem;font-size:.8rem}.password-requirements[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#666;margin-bottom:.25rem}.password-requirements[_ngcontent-%COMP%]   li.met[_ngcontent-%COMP%]{color:#2e7d32}.password-requirements[_ngcontent-%COMP%]   li.met[_ngcontent-%COMP%]::marker{content:"\\2713  "}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block}']})}return a})();var Ue=a=>["/workflows/builder",a],We=a=>["/workflows",a,"instances"],ve=(a,c)=>c.id;function He(a,c){a&1&&(e(0,"mat-expansion-panel",12)(1,"mat-expansion-panel-header")(2,"mat-icon"),i(3,"admin_panel_settings"),t(),e(4,"span"),i(5,"System Admin"),t()(),e(6,"div",14)(7,"a",34)(8,"mat-icon"),i(9,"people"),t(),e(10,"span"),i(11,"Users"),t()(),e(12,"a",35)(13,"mat-icon"),i(14,"security"),t(),e(15,"span"),i(16,"Roles"),t()(),e(17,"a",36)(18,"mat-icon"),i(19,"category"),t(),e(20,"span"),i(21,"Categories"),t()(),e(22,"a",37)(23,"mat-icon"),i(24,"corporate_fare"),t(),e(25,"span"),i(26,"Corporates"),t()(),e(27,"a",38)(28,"mat-icon"),i(29,"business"),t(),e(30,"span"),i(31,"SBU Management"),t()(),e(32,"a",39)(33,"mat-icon"),i(34,"store"),t(),e(35,"span"),i(36,"Branches"),t()(),e(37,"a",40)(38,"mat-icon"),i(39,"account_tree"),t(),e(40,"span"),i(41,"Departments"),t()(),e(42,"a",41)(43,"mat-icon"),i(44,"settings"),t(),e(45,"span"),i(46,"Settings"),t()(),e(47,"a",42)(48,"mat-icon"),i(49,"history"),t(),e(50,"span"),i(51,"Audit Logs"),t()()()())}function qe(a,c){if(a&1&&(e(0,"a",15)(1,"mat-icon"),i(2,"edit"),t(),e(3,"span"),i(4),t()()),a&2){let n=c.$implicit;f("routerLink",Z(2,Ue,n.id)),r(4),d(n.name)}}function Ge(a,c){if(a&1&&(e(0,"mat-expansion-panel",12)(1,"mat-expansion-panel-header")(2,"mat-icon"),i(3,"build"),t(),e(4,"span"),i(5,"Workflow Admin"),t()(),e(6,"div",14)(7,"a",43)(8,"mat-icon"),i(9,"list"),t(),e(10,"span"),i(11,"Manage Workflows"),t()(),E(12,qe,5,4,"a",15,ve),t()()),a&2){let n=v();r(12),D(n.workflows)}}function Ze(a,c){if(a&1&&(e(0,"a",15)(1,"mat-icon"),i(2),t(),e(3,"span"),i(4),t()()),a&2){let n=c.$implicit;f("routerLink",Z(3,We,n.code)),r(2),d(n.icon||"description"),r(2),d(n.name)}}function $e(a,c){if(a&1&&(e(0,"span",18),i(1),t()),a&2){let n=v();r(),d(n.pendingApprovalsCount)}}function Ye(a,c){if(a&1&&(e(0,"span",21),i(1),t()),a&2){let n=v();r(),d(n.mySubmissionsCount)}}var fn=(()=>{class a{authService;workflowService;themeService;router;dialog;workflows=[];activeWorkflows=[];sidebarOpen=!0;pendingApprovalsCount=0;mySubmissionsCount=0;currentYear=new Date().getFullYear();constructor(n,s,o,l,y){this.authService=n,this.workflowService=s,this.themeService=o,this.router=l,this.dialog=y}ngOnInit(){this.themeService.loadTheme(),this.loadWorkflows(),this.loadPendingApprovalsCount(),this.loadMySubmissionsCount()}loadPendingApprovalsCount(){this.workflowService.getPendingApprovalsCount().subscribe({next:n=>{n.success&&(this.pendingApprovalsCount=n.data||0)},error:()=>{this.pendingApprovalsCount=0}})}loadMySubmissionsCount(){this.workflowService.getMySubmissionsCount().subscribe({next:n=>{n.success&&(this.mySubmissionsCount=n.data||0)},error:()=>{this.mySubmissionsCount=0}})}get fullName(){return this.authService.currentUser?.fullName||"User"}get userInitials(){return this.fullName.split(" ").map(s=>s[0]).join("").substring(0,2).toUpperCase()}get userType(){return this.authService.currentUser?.userType||"STAFF"}get isAdmin(){return this.authService.hasRole("ROLE_ADMIN")||this.authService.hasPrivilege("ADMIN")}get canBuildWorkflows(){return this.isAdmin||this.authService.hasPrivilege("WORKFLOW_BUILDER")}loadWorkflows(){this.workflowService.getWorkflows().subscribe(n=>{n.success&&(this.workflows=n.data)}),this.workflowService.getActiveWorkflows().subscribe(n=>{n.success&&(this.activeWorkflows=n.data)})}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}logout(){this.authService.logout()}openProfileDialog(){let n=this.authService.currentUser;n&&this.dialog.open(fe,{width:"600px",data:{username:n.username,email:n.email,firstName:n.firstName,lastName:n.lastName,fullName:n.fullName,phoneNumber:n.phoneNumber,staffId:n.staffId,department:n.department,userType:n.userType,roles:n.roles||[],sbus:[],lastLogin:n.lastLogin,createdAt:n.createdAt,isActive:!0,isLocked:!1}})}openChangePasswordDialog(){this.dialog.open(be,{width:"500px",disableClose:!0})}static \u0275fac=function(s){return new(s||a)(u(U),u(ee),u(ie),u(dt),u(Gt))};static \u0275cmp=b({type:a,selectors:[["app-main-layout"]],decls:81,vars:18,consts:[["userMenu","matMenu"],[1,"layout-container"],[1,"sidebar"],[1,"sidebar-header"],[1,"brand-text"],[1,"user-profile"],[1,"avatar"],[1,"user-info"],[1,"name"],[1,"role"],[1,"sidebar-nav"],["routerLink","/dashboard","routerLinkActive","active",1,"menu-item"],[1,"nav-panel"],[1,"nav-panel",3,"expanded"],[1,"submenu"],[1,"menu-item",3,"routerLink"],["routerLink","/approvals","routerLinkActive","active",1,"menu-item"],["matBadgeColor","warn","matBadgeSize","small",3,"matBadge","matBadgeHidden"],[1,"badge-count"],["routerLink","/my-submissions","routerLinkActive","active",1,"menu-item"],["matBadgeColor","primary","matBadgeSize","small",3,"matBadge","matBadgeHidden"],[1,"badge-count","primary"],[1,"sidebar-footer"],[1,"version"],[1,"developer"],[1,"copyright"],[1,"main-content"],[1,"main-header"],[1,"header-left"],["mat-icon-button","",3,"click"],[1,"header-right"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"page-content"],["routerLink","/users","routerLinkActive","active",1,"menu-item"],["routerLink","/roles","routerLinkActive","active",1,"menu-item"],["routerLink","/categories","routerLinkActive","active",1,"menu-item"],["routerLink","/corporates","routerLinkActive","active",1,"menu-item"],["routerLink","/sbus","routerLinkActive","active",1,"menu-item"],["routerLink","/branches","routerLinkActive","active",1,"menu-item"],["routerLink","/departments","routerLinkActive","active",1,"menu-item"],["routerLink","/settings","routerLinkActive","active",1,"menu-item"],["routerLink","/audit","routerLinkActive","active",1,"menu-item"],["routerLink","/workflows","routerLinkActive","active",1,"menu-item"]],template:function(s,o){if(s&1){let l=N();e(0,"div",1)(1,"aside",2)(2,"div",3)(3,"mat-icon"),i(4,"workflow"),t(),e(5,"span",4),i(6,"Sonarworks"),t()(),e(7,"div",5)(8,"div",6),i(9),t(),e(10,"div",7)(11,"div",8),i(12),t(),e(13,"div",9),i(14),t()()(),e(15,"nav",10)(16,"a",11)(17,"mat-icon"),i(18,"dashboard"),t(),e(19,"span"),i(20,"Dashboard"),t()(),p(21,He,52,0,"mat-expansion-panel",12)(22,Ge,14,0,"mat-expansion-panel",12),e(23,"mat-expansion-panel",13)(24,"mat-expansion-panel-header")(25,"mat-icon"),i(26,"folder"),t(),e(27,"span"),i(28,"Workflows"),t()(),e(29,"div",14),E(30,Ze,5,5,"a",15,ve),t()(),e(32,"a",16)(33,"mat-icon",17),i(34,"thumb_up"),t(),e(35,"span"),i(36,"Pending Approvals"),t(),p(37,$e,2,1,"span",18),t(),e(38,"a",19)(39,"mat-icon",20),i(40,"send"),t(),e(41,"span"),i(42,"My Submissions"),t(),p(43,Ye,2,1,"span",21),t()(),e(44,"div",22)(45,"div",23),i(46,"v1.0.0"),t(),e(47,"div",24),i(48,"Developed By: Sonar Microsystems"),t(),e(49,"div",25),i(50),t()()(),e(51,"main",26)(52,"header",27)(53,"div",28)(54,"button",29),_("click",function(){return M(l),S(o.toggleSidebar())}),e(55,"mat-icon"),i(56,"menu"),t()()(),e(57,"div",30)(58,"button",31)(59,"mat-icon"),i(60,"account_circle"),t()(),e(61,"mat-menu",null,0)(63,"button",32),_("click",function(){return M(l),S(o.openProfileDialog())}),e(64,"mat-icon"),i(65,"person"),t(),e(66,"span"),i(67,"Profile"),t()(),e(68,"button",32),_("click",function(){return M(l),S(o.openChangePasswordDialog())}),e(69,"mat-icon"),i(70,"lock"),t(),e(71,"span"),i(72,"Change Password"),t()(),g(73,"mat-divider"),e(74,"button",32),_("click",function(){return M(l),S(o.logout())}),e(75,"mat-icon"),i(76,"exit_to_app"),t(),e(77,"span"),i(78,"Logout"),t()()()()(),e(79,"div",33),g(80,"router-outlet"),t()()()}if(s&2){let l=G(62);r(),h("collapsed",!o.sidebarOpen),r(8),d(o.userInitials),r(3),d(o.fullName),r(2),d(o.userType),r(7),m(o.isAdmin?21:-1),r(),m(o.canBuildWorkflows?22:-1),r(),f("expanded",!0),r(7),D(o.activeWorkflows),r(3),f("matBadge",o.pendingApprovalsCount>0?o.pendingApprovalsCount:null)("matBadgeHidden",o.pendingApprovalsCount===0),r(4),m(o.pendingApprovalsCount>0?37:-1),r(2),f("matBadge",o.mySubmissionsCount>0?o.mySubmissionsCount:null)("matBadgeHidden",o.mySubmissionsCount===0),r(4),m(o.mySubmissionsCount>0?43:-1),r(7),j("\xA9 ",o.currentYear," All Rights Reserved"),r(),h("expanded",!o.sidebarOpen),r(7),f("matMenuTriggerFor",l)}},dependencies:[P,mt,st,ct,lt,de,ce,le,W,I,A,L,O,Qt,jt,Nt,Vt,Ht,Ut,Wt,pe,he,T,z],styles:[".layout-container[_ngcontent-%COMP%]{display:flex;min-height:100vh}.sidebar[_ngcontent-%COMP%]{width:260px;background:var(--sidebar-bg, #263238);color:var(--sidebar-text, white);display:flex;flex-direction:column;position:fixed;left:0;top:0;height:100vh;z-index:1000}.sidebar-header[_ngcontent-%COMP%]{padding:1rem;background:var(--sidebar-header-bg, #1e272c);display:flex;align-items:center;gap:.5rem;font-size:1.25rem;font-weight:500}.user-profile[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem;background:var(--user-profile-bg, #1e272c);color:var(--user-profile-text, white);border-bottom:1px solid var(--menu-hover-bg, #37474f)}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--primary-color, #1976d2);display:flex;align-items:center;justify-content:center;font-weight:500}.user-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:500}.user-info[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:.75rem;opacity:.7}.sidebar-nav[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:.5rem 0}.menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.75rem 1rem;color:var(--sidebar-text, white);text-decoration:none;cursor:pointer;transition:background .2s}.menu-item[_ngcontent-%COMP%]:hover{background:var(--menu-hover-bg, #37474f)}.menu-item.active[_ngcontent-%COMP%]{background:var(--menu-active-bg, #1976d2)}.nav-panel[_ngcontent-%COMP%]{background:transparent!important;box-shadow:none!important;color:var(--sidebar-text, white)}.nav-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:0 1rem;color:var(--sidebar-text, white)}.nav-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.submenu[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{padding-left:2.5rem;font-size:.875rem}.badge-count[_ngcontent-%COMP%]{margin-left:auto;background:#f44336;color:#fff;border-radius:10px;padding:2px 8px;font-size:.75rem;font-weight:500;min-width:20px;text-align:center}.badge-count.primary[_ngcontent-%COMP%]{background:#1976d2}.sidebar-footer[_ngcontent-%COMP%]{padding:1rem;text-align:center;border-top:1px solid var(--menu-hover-bg, #37474f);font-size:.75rem;opacity:.8}.sidebar-footer[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]{margin-bottom:.25rem}.sidebar-footer[_ngcontent-%COMP%]   .developer[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.25rem}.sidebar-footer[_ngcontent-%COMP%]   .copyright[_ngcontent-%COMP%]{opacity:.7}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:260px;min-height:100vh;display:flex;flex-direction:column;transition:margin-left .3s ease}.main-header[_ngcontent-%COMP%]{background:var(--header-bg, white);color:var(--header-text, #333);padding:.5rem 1rem;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border-color, #e0e0e0);position:sticky;top:0;z-index:100}.page-content[_ngcontent-%COMP%]{flex:1;padding:1.5rem;background:var(--body-bg, #f5f5f5)}.sidebar[_ngcontent-%COMP%]{transition:transform .3s ease,width .3s ease}.sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-260px)}.main-content.expanded[_ngcontent-%COMP%]{margin-left:0}"]})}return a})();export{fn as MainLayoutComponent};
