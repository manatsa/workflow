import"./chunk-MS4AQ6UA.js";import{b as te}from"./chunk-5B5KDLSZ.js";import"./chunk-WNUHNPS4.js";import{a as oe,b as ae,c as re,h as se}from"./chunk-ZLEDUOR5.js";import{b as ne,c as ie}from"./chunk-C5XODKZL.js";import"./chunk-LU6VCXUA.js";import"./chunk-AGZT6V36.js";import{a as N,b as U}from"./chunk-CDWC6WKW.js";import{b as V,i as D,j as W,l as B,m as F}from"./chunk-2AGPTHDJ.js";import{d as P,i as T,m as L,w as k}from"./chunk-QGDZCCER.js";import{a as ee,h as K}from"./chunk-BTSRKJZZ.js";import"./chunk-UF7Y5AYJ.js";import"./chunk-PMYQJTBZ.js";import{a as R}from"./chunk-W7JX3HPD.js";import{a as Y,c as Z}from"./chunk-M6HZK7Y7.js";import{Aa as j,Ba as $,h as Q,i as S,l as J,q as E,v as X,va as O,wa as A,ya as q}from"./chunk-37H25STD.js";import{Eb as l,Ob as i,Pb as n,Qb as I,Ub as x,Yb as u,Zb as d,eb as a,hc as r,ic as p,jb as h,jc as M,lc as C,mc as v,nc as w,oa as f,pa as _,qb as b,tc as G,uc as H,wb as y,za as z}from"./chunk-UYCZSUYP.js";function ce(o,m){if(o&1&&(i(0,"div",15)(1,"mat-icon"),r(2,"warning"),n(),i(3,"span"),r(4),n()()),o&2){let e=d();a(4),p(e.loginError)}}function de(o,m){if(o&1){let e=x();i(0,"mat-form-field",5)(1,"mat-label"),r(2,"Rejection Reason (Required)"),n(),i(3,"textarea",16),w("ngModelChange",function(t){f(e);let c=d();return v(c.comments,t)||(c.comments=t),_(t)}),n()()}if(o&2){let e=d();a(3),C("ngModel",e.comments),l("disabled",e.loading)}}function me(o,m){if(o&1){let e=x();i(0,"mat-form-field",5)(1,"mat-label"),r(2,"Escalation Reason (Optional)"),n(),i(3,"textarea",17),w("ngModelChange",function(t){f(e);let c=d();return v(c.comments,t)||(c.comments=t),_(t)}),n()()}if(o&2){let e=d();a(3),C("ngModel",e.comments),l("disabled",e.loading)}}function pe(o,m){if(o&1&&(i(0,"div",18)(1,"div",19),r(2,"Request Details"),n(),i(3,"div",20)(4,"span",21),r(5,"Workflow:"),n(),i(6,"span",22),r(7),n()(),i(8,"div",20)(9,"span",21),r(10,"Reference:"),n(),i(11,"span",22),r(12),n()(),i(13,"div",20)(14,"span",21),r(15,"Submitted by:"),n(),i(16,"span",22),r(17),n()()()),o&2){let e=d();a(7),p(e.requestInfo.workflowName),a(5),p(e.requestInfo.referenceNumber),a(5),p(e.requestInfo.initiatorName)}}function ge(o,m){o&1&&I(0,"mat-spinner",23)}function ue(o,m){if(o&1&&(i(0,"mat-icon"),r(1),n()),o&2){let e=d();a(),p(e.getActionIcon())}}function fe(o,m){if(o&1&&(i(0,"span"),r(1),G(2,"titlecase"),n()),o&2){let e=d();a(),M("Login & ",H(2,1,e.actionLabel),"")}}function _e(o,m){if(o&1&&(i(0,"div",14)(1,"mat-icon"),r(2,"warning"),n(),i(3,"span"),r(4),n()()),o&2){let e=d();a(4),p(e.loginError)}}function he(o,m){if(o&1){let e=x();i(0,"mat-form-field",5)(1,"mat-label"),r(2,"Rejection Reason (Required)"),n(),i(3,"textarea",15),w("ngModelChange",function(t){f(e);let c=d();return v(c.comments,t)||(c.comments=t),_(t)}),n()()}if(o&2){let e=d();a(3),C("ngModel",e.comments),l("disabled",e.loading)}}function xe(o,m){if(o&1){let e=x();i(0,"mat-form-field",5)(1,"mat-label"),r(2,"Escalation Reason (Optional)"),n(),i(3,"textarea",16),w("ngModelChange",function(t){f(e);let c=d();return v(c.comments,t)||(c.comments=t),_(t)}),n()()}if(o&2){let e=d();a(3),C("ngModel",e.comments),l("disabled",e.loading)}}function Ce(o,m){o&1&&I(0,"mat-spinner",17)}function ve(o,m){if(o&1&&(i(0,"span"),r(1),G(2,"titlecase"),n()),o&2){let e=d();a(),M("Login & ",H(2,1,e.data.actionLabel),"")}}function we(o,m){if(o&1&&(i(0,"div",6),I(1,"mat-spinner",7),i(2,"p"),r(3),n()()),o&2){let e=d();a(3),p(e.loadingMessage)}}function ye(o,m){if(o&1){let e=x();i(0,"div",8)(1,"mat-icon",9),r(2,"error"),n(),i(3,"h2"),r(4,"Unable to Process Request"),n(),i(5,"p"),r(6),n(),i(7,"div",10)(8,"button",11),u("click",function(){f(e);let t=d();return _(t.retry())}),r(9," Try Again "),n(),i(10,"button",12),u("click",function(){f(e);let t=d();return _(t.goToDashboard())}),r(11," Go to Dashboard "),n()()()}if(o&2){let e=d();a(6),p(e.error)}}function Me(o,m){if(o&1){let e=x();i(0,"div")(1,"app-inline-login",13),u("loginSuccess",function(t){f(e);let c=d();return _(c.onInlineLoginSuccess(t))})("cancelled",function(){f(e);let t=d();return _(t.goToDashboard())}),n()()}if(o&2){let e=d();a(),l("actionType",e.actionType)("actionLabel",e.getActionLabel())("requestInfo",e.requestInfo)}}function be(o,m){if(o&1){let e=x();i(0,"mat-form-field",21)(1,"mat-label"),r(2,"Rejection Reason (Required)"),n(),i(3,"textarea",22),w("ngModelChange",function(t){f(e);let c=d(2);return v(c.comments,t)||(c.comments=t),_(t)}),n()()}if(o&2){let e=d(2);a(3),C("ngModel",e.comments)}}function Ie(o,m){if(o&1){let e=x();i(0,"mat-form-field",21)(1,"mat-label"),r(2,"Escalation Reason (Optional)"),n(),i(3,"textarea",23),w("ngModelChange",function(t){f(e);let c=d(2);return v(c.comments,t)||(c.comments=t),_(t)}),n()()}if(o&2){let e=d(2);a(3),C("ngModel",e.comments)}}function Se(o,m){if(o&1){let e=x();i(0,"div",6)(1,"mat-icon",14),r(2),n(),i(3,"h2"),r(4),n(),i(5,"div",15)(6,"div",16)(7,"span",17),r(8,"Workflow:"),n(),i(9,"span",18),r(10),n()(),i(11,"div",16)(12,"span",17),r(13,"Reference:"),n(),i(14,"span",18),r(15),n()(),i(16,"div",16)(17,"span",17),r(18,"Submitted by:"),n(),i(19,"span",18),r(20),n()(),i(21,"div",16)(22,"span",17),r(23,"Approver:"),n(),i(24,"span",18),r(25),n()()(),y(26,be,4,1,"mat-form-field",19)(27,Ie,4,1,"mat-form-field",19),i(28,"div",10)(29,"button",20),u("click",function(){f(e);let t=d();return _(t.processAction())}),i(30,"mat-icon"),r(31),n(),r(32),n(),i(33,"button",12),u("click",function(){f(e);let t=d();return _(t.goToDashboard())}),r(34," Cancel "),n()()()}if(o&2){let e=d();a(),l("ngClass",e.getActionIconClass()),a(),p(e.getActionIcon()),a(2),p(e.getPageTitle()),a(6),p(e.requestInfo.workflowName),a(5),p(e.requestInfo.referenceNumber),a(5),p(e.requestInfo.initiatorName),a(5),p(e.requestInfo.approverName),a(),l("ngIf",e.actionType==="reject"),a(),l("ngIf",e.actionType==="escalate"),a(2),l("color",e.getActionButtonColor())("disabled",e.actionType==="reject"&&!(e.comments!=null&&e.comments.trim())),a(2),p(e.getActionIcon()),a(),M(" ",e.getActionButtonLabel()," ")}}function Ee(o,m){if(o&1){let e=x();i(0,"div",24)(1,"mat-icon",25),r(2,"check_circle"),n(),i(3,"h2"),r(4),n(),i(5,"p"),r(6),n(),i(7,"div",10)(8,"button",11),u("click",function(){f(e);let t=d();return _(t.viewSubmission())}),r(9," View Submission "),n(),i(10,"button",12),u("click",function(){f(e);let t=d();return _(t.goToDashboard())}),r(11," Go to Dashboard "),n()()()}if(o&2){let e=d();a(4),p(e.getSuccessTitle()),a(2),p(e.getSuccessMessage())}}var Pe=(()=>{class o{authService;actionType="approve";actionLabel="approve";requestInfo=null;loginSuccess=new z;cancelled=new z;username="";password="";comments="";loading=!1;loginError=null;constructor(e){this.authService=e}onLogin(){if(!this.username||!this.password){this.loginError="Please enter username and password";return}if(this.actionType==="reject"&&!this.comments?.trim()){this.loginError="Comments are required for rejection";return}this.loading=!0,this.loginError=null,this.authService.login({username:this.username,password:this.password}).subscribe({next:e=>{this.loading=!1,e.success?this.loginSuccess.emit({comments:this.comments}):this.loginError=e.message||"Login failed. Please check your credentials."},error:e=>{this.loading=!1;let s="Login failed. Please check your credentials.";e.error?typeof e.error=="string"?s=e.error:e.error.message?s=e.error.message:e.error.error&&(s=e.error.error):e.message&&(s=e.message),this.loginError=s}})}onCancel(){this.cancelled.emit()}getButtonColor(){switch(this.actionType){case"approve":return"primary";case"reject":return"warn";case"escalate":return"accent";default:return"primary"}}getActionIcon(){switch(this.actionType){case"approve":return"check_circle";case"reject":return"cancel";case"escalate":return"arrow_upward";case"review":return"visibility";default:return"pending"}}static \u0275fac=function(s){return new(s||o)(h(R))};static \u0275cmp=b({type:o,selectors:[["app-inline-login"]],inputs:{actionType:"actionType",actionLabel:"actionLabel",requestInfo:"requestInfo"},outputs:{loginSuccess:"loginSuccess",cancelled:"cancelled"},decls:28,vars:15,consts:[[1,"inline-login"],[1,"login-header"],[1,"lock-icon"],["class","login-error",4,"ngIf"],[1,"login-form"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Enter your username",3,"ngModelChange","keyup.enter","ngModel","disabled"],["matInput","","type","password","placeholder","Enter your password",3,"ngModelChange","keyup.enter","ngModel","disabled"],["appearance","outline","class","full-width",4,"ngIf"],["class","request-summary",4,"ngIf"],[1,"login-actions"],["mat-raised-button","",3,"click","color","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["mat-button","",3,"click","disabled"],[1,"login-error"],["matInput","","rows","3","placeholder","Enter reason for rejection...",3,"ngModelChange","ngModel","disabled"],["matInput","","rows","3","placeholder","Enter reason for escalation...",3,"ngModelChange","ngModel","disabled"],[1,"request-summary"],[1,"summary-title"],[1,"detail-row"],[1,"label"],[1,"value"],["diameter","20"]],template:function(s,t){s&1&&(i(0,"div",0)(1,"div",1)(2,"mat-icon",2),r(3,"lock"),n(),i(4,"h2"),r(5,"Authentication Required"),n(),i(6,"p"),r(7),n()(),y(8,ce,5,1,"div",3),i(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),r(12,"Username"),n(),i(13,"input",6),w("ngModelChange",function(g){return v(t.username,g)||(t.username=g),g}),u("keyup.enter",function(){return t.onLogin()}),n()(),i(14,"mat-form-field",5)(15,"mat-label"),r(16,"Password"),n(),i(17,"input",7),w("ngModelChange",function(g){return v(t.password,g)||(t.password=g),g}),u("keyup.enter",function(){return t.onLogin()}),n()(),y(18,de,4,2,"mat-form-field",8)(19,me,4,2,"mat-form-field",8),n(),y(20,pe,18,3,"div",9),i(21,"div",10)(22,"button",11),u("click",function(){return t.onLogin()}),y(23,ge,1,0,"mat-spinner",12)(24,ue,2,1,"mat-icon",13)(25,fe,3,3,"span",13),n(),i(26,"button",14),u("click",function(){return t.onCancel()}),r(27," Cancel "),n()()()),s&2&&(a(7),M("Please log in to ",t.actionLabel," this request"),a(),l("ngIf",t.loginError),a(5),C("ngModel",t.username),l("disabled",t.loading),a(4),C("ngModel",t.password),l("disabled",t.loading),a(),l("ngIf",t.actionType==="reject"),a(),l("ngIf",t.actionType==="escalate"),a(),l("ngIf",t.requestInfo),a(2),l("color",t.getButtonColor())("disabled",t.loading||!t.username||!t.password||t.actionType==="reject"&&!(t.comments!=null&&t.comments.trim())),a(),l("ngIf",t.loading),a(),l("ngIf",!t.loading),a(),l("ngIf",!t.loading),a(),l("disabled",t.loading))},dependencies:[E,S,J,k,P,T,L,j,q,W,D,V,F,B,A,O,U,N,K],styles:[".inline-login[_ngcontent-%COMP%]{width:100%}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.lock-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#1976d2}.login-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.login-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.login-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ffebee;color:#c62828;padding:12px 16px;border-radius:8px;margin-bottom:16px}.login-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#c62828;font-size:20px;width:20px;height:20px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.full-width[_ngcontent-%COMP%]{width:100%}.request-summary[_ngcontent-%COMP%]{background:#f5f5f5;padding:16px;border-radius:8px;margin:16px 0}.summary-title[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:12px;font-size:14px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;font-size:13px}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:500}.login-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:24px}.login-actions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{width:100%;height:48px}.login-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.login-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}"]})}return o})(),Te=(()=>{class o{dialogRef;data;authService;username="";password="";comments="";loading=!1;loginError=null;constructor(e,s,t){this.dialogRef=e,this.data=s,this.authService=t}onLogin(){if(!this.username||!this.password){this.loginError="Please enter username and password";return}if(this.data.actionType==="reject"&&!this.comments?.trim()){this.loginError="Comments are required for rejection";return}this.loading=!0,this.loginError=null,this.authService.login({username:this.username,password:this.password}).subscribe({next:e=>{this.loading=!1,e.success?this.dialogRef.close({success:!0,comments:this.comments}):this.loginError=e.message||"Login failed. Please check your credentials."},error:e=>{this.loading=!1;let s="Login failed. Please check your credentials.";e.error?typeof e.error=="string"?s=e.error:e.error.message?s=e.error.message:e.error.error&&(s=e.error.error):e.message&&(s=e.message),this.loginError=s}})}onCancel(){this.dialogRef.close({success:!1})}static \u0275fac=function(s){return new(s||o)(h(oe),h(ae),h(R))};static \u0275cmp=b({type:o,selectors:[["app-login-dialog"]],decls:26,vars:12,consts:[[1,"login-dialog"],[1,"dialog-header"],[1,"lock-icon"],["class","login-error",4,"ngIf"],[1,"login-form"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Enter your username",3,"ngModelChange","keyup.enter","ngModel","disabled"],["matInput","","type","password","placeholder","Enter your password",3,"ngModelChange","keyup.enter","ngModel","disabled"],["appearance","outline","class","full-width",4,"ngIf"],[1,"dialog-actions"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],[1,"login-error"],["matInput","","rows","3","placeholder","Enter reason for rejection...",3,"ngModelChange","ngModel","disabled"],["matInput","","rows","3","placeholder","Enter reason for escalation...",3,"ngModelChange","ngModel","disabled"],["diameter","20"]],template:function(s,t){s&1&&(i(0,"div",0)(1,"div",1)(2,"mat-icon",2),r(3,"lock"),n(),i(4,"h2"),r(5,"Authentication Required"),n(),i(6,"p"),r(7),n()(),y(8,_e,5,1,"div",3),i(9,"div",4)(10,"mat-form-field",5)(11,"mat-label"),r(12,"Username"),n(),i(13,"input",6),w("ngModelChange",function(g){return v(t.username,g)||(t.username=g),g}),u("keyup.enter",function(){return t.onLogin()}),n()(),i(14,"mat-form-field",5)(15,"mat-label"),r(16,"Password"),n(),i(17,"input",7),w("ngModelChange",function(g){return v(t.password,g)||(t.password=g),g}),u("keyup.enter",function(){return t.onLogin()}),n()(),y(18,he,4,2,"mat-form-field",8)(19,xe,4,2,"mat-form-field",8),n(),i(20,"div",9)(21,"button",10),u("click",function(){return t.onCancel()}),r(22,"Cancel"),n(),i(23,"button",11),u("click",function(){return t.onLogin()}),y(24,Ce,1,0,"mat-spinner",12)(25,ve,3,3,"span",13),n()()()),s&2&&(a(7),M("Please log in to ",t.data.actionLabel," this request"),a(),l("ngIf",t.loginError),a(5),C("ngModel",t.username),l("disabled",t.loading),a(4),C("ngModel",t.password),l("disabled",t.loading),a(),l("ngIf",t.data.actionType==="reject"),a(),l("ngIf",t.data.actionType==="escalate"),a(2),l("disabled",t.loading),a(2),l("disabled",t.loading||!t.username||!t.password||t.data.actionType==="reject"&&!(t.comments!=null&&t.comments.trim())),a(),l("ngIf",t.loading),a(),l("ngIf",!t.loading))},dependencies:[E,S,J,k,P,T,L,j,q,W,D,V,F,B,A,O,U,N],styles:[".login-dialog[_ngcontent-%COMP%]{padding:24px;min-width:350px}.dialog-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.lock-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#1976d2}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:16px 0 8px;color:#333}.dialog-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.login-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#ffebee;color:#c62828;padding:12px 16px;border-radius:8px;margin-bottom:16px}.login-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#c62828;font-size:20px;width:20px;height:20px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.full-width[_ngcontent-%COMP%]{width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}"]})}return o})(),st=(()=>{class o{route;router;http;authService;snackBar;dialog;loading=!0;loadingMessage="Validating your request...";error=null;token=null;actionType="view";requestInfo=null;success=!1;comments="";showInlineLogin=!1;autoProcessTriggered=!1;showCommentsForm=!1;apiUrl=$.apiUrl;constructor(e,s,t,c,g,le){this.route=e,this.router=s,this.http=t,this.authService=c,this.snackBar=g,this.dialog=le}ngOnInit(){this.route.queryParams.subscribe(e=>{if(this.token=e.token,this.actionType=(e.action||"view").toLowerCase(),!this.token){this.error="No token provided",this.loading=!1;return}this.validateToken()})}validateToken(){this.loading=!0,this.loadingMessage="Validating your request...",this.error=null,this.http.get(`${this.apiUrl}/email-approval/validate?token=${this.token}`).subscribe({next:e=>{e.success?(this.requestInfo=e.data,this.attemptAutoProcess()):(this.loading=!1,this.error=e.message||"Invalid or expired token")},error:e=>{this.loading=!1,this.error=e.error?.message||"Failed to validate token. It may be expired or already used."}})}attemptAutoProcess(){if(!this.autoProcessTriggered){if(this.autoProcessTriggered=!0,this.actionType==="reject"){this.loading=!1,this.authService.isAuthenticated?this.showCommentsForm=!0:this.showInlineLogin=!0;return}if(this.actionType==="escalate"){this.loading=!1,this.authService.isAuthenticated?this.showCommentsForm=!0:this.showInlineLogin=!0;return}this.authService.isAuthenticated?this.processAction():(this.loading=!1,this.showInlineLogin=!0)}}onInlineLoginSuccess(e){this.comments=e.comments||"",this.showInlineLogin=!1,this.loading=!0,this.loadingMessage=`Processing your ${this.getActionLabel()}...`,this.processAction()}handleAction(){this.authService.isAuthenticated?this.processAction():this.openLoginDialog()}openLoginDialog(){this.dialog.open(Te,{width:"400px",disableClose:!0,data:{actionType:this.actionType,actionLabel:this.getActionLabel()}}).afterClosed().subscribe(s=>{s?.success&&(this.comments=s.comments||"",this.processAction())})}processAction(){if(this.actionType==="review"){this.processReview();return}this.loading=!0,this.loadingMessage=`Processing your ${this.getActionLabel()}...`;let e=new URLSearchParams;e.set("token",this.token),e.set("action",this.actionType.toUpperCase()),this.comments&&e.set("comments",this.comments),this.http.post(`${this.apiUrl}/email-approval/process?${e.toString()}`,{}).subscribe({next:s=>{this.loading=!1,s.success?this.success=!0:this.error=s.message||"Failed to process the request"},error:s=>{this.loading=!1,this.error=s.error?.message||"An unexpected error occurred. Please try again."}})}processReview(){this.loading=!0,this.loadingMessage="Opening submission details...";let e=new URLSearchParams;e.set("token",this.token),e.set("action","REVIEW"),this.http.post(`${this.apiUrl}/email-approval/process?${e.toString()}`,{}).subscribe({next:()=>{this.requestInfo?.instanceId?this.router.navigate(["/approvals",this.requestInfo.instanceId]):this.router.navigate(["/approvals"])},error:()=>{this.requestInfo?.instanceId?this.router.navigate(["/approvals",this.requestInfo.instanceId]):(this.loading=!1,this.error="Failed to process review")}})}retry(){this.error=null,this.showInlineLogin=!1,this.showCommentsForm=!1,this.autoProcessTriggered=!1,this.validateToken()}viewSubmission(){this.requestInfo?.instanceId&&this.router.navigate(["/approvals",this.requestInfo.instanceId])}goToDashboard(){this.router.navigate(["/dashboard"])}getActionLabel(){switch(this.actionType){case"approve":return"approve";case"reject":return"reject";case"escalate":return"escalate";case"review":return"review";default:return"process"}}getPageTitle(){switch(this.actionType){case"approve":return"Approve Request";case"reject":return"Reject Request";case"escalate":return"Escalate Request";case"review":return"Review Request";default:return"Process Request"}}getActionIcon(){switch(this.actionType){case"approve":return"check_circle";case"reject":return"cancel";case"escalate":return"arrow_upward";case"review":return"visibility";default:return"pending"}}getActionIconClass(){return this.actionType}getActionButtonLabel(){switch(this.actionType){case"approve":return"Approve";case"reject":return"Reject";case"escalate":return"Escalate";case"review":return"Review";default:return"Process"}}getActionButtonColor(){switch(this.actionType){case"approve":return"primary";case"reject":return"warn";case"escalate":return"accent";default:return"primary"}}getSuccessTitle(){switch(this.actionType){case"approve":return"Request Approved";case"reject":return"Request Rejected";case"escalate":return"Request Escalated";case"review":return"Reviewed";default:return"Processed Successfully"}}getSuccessMessage(){switch(this.actionType){case"approve":return"The request has been approved successfully.";case"reject":return"The request has been rejected.";case"escalate":return"The request has been escalated to the next level.";case"review":return"The request has been marked as reviewed.";default:return"The request has been processed."}}static \u0275fac=function(s){return new(s||o)(h(Y),h(Z),h(X),h(R),h(ne),h(re))};static \u0275cmp=b({type:o,selectors:[["app-email-approval"]],decls:7,vars:5,consts:[[1,"email-approval-container"],[1,"approval-card"],["class","state-container",4,"ngIf"],["class","state-container error-state",4,"ngIf"],[4,"ngIf"],["class","state-container success-state",4,"ngIf"],[1,"state-container"],["diameter","50"],[1,"state-container","error-state"],[1,"status-icon","error"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[3,"loginSuccess","cancelled","actionType","actionLabel","requestInfo"],[1,"status-icon",3,"ngClass"],[1,"request-details"],[1,"detail-row"],[1,"label"],[1,"value"],["appearance","outline","class","full-width comments-field",4,"ngIf"],["mat-raised-button","",3,"click","color","disabled"],["appearance","outline",1,"full-width","comments-field"],["matInput","","rows","3","placeholder","Enter reason for rejection...",3,"ngModelChange","ngModel"],["matInput","","rows","3","placeholder","Enter reason for escalation...",3,"ngModelChange","ngModel"],[1,"state-container","success-state"],[1,"status-icon","success"]],template:function(s,t){s&1&&(i(0,"div",0)(1,"mat-card",1),y(2,we,4,1,"div",2)(3,ye,12,1,"div",3)(4,Me,2,3,"div",4)(5,Se,35,13,"div",2)(6,Ee,12,2,"div",5),n()()),s&2&&(a(2),l("ngIf",t.loading),a(),l("ngIf",t.error&&!t.loading),a(),l("ngIf",t.showInlineLogin&&!t.loading&&!t.error&&!t.success),a(),l("ngIf",t.requestInfo&&!t.loading&&!t.error&&!t.success&&!t.showInlineLogin&&t.showCommentsForm),a(),l("ngIf",t.success&&!t.loading))},dependencies:[E,Q,S,k,P,T,L,K,ee,j,q,A,O,U,N,W,D,V,F,B,te,ie,se,Pe],styles:[".email-approval-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px}.approval-card[_ngcontent-%COMP%]{max-width:500px;width:100%;padding:40px}.state-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:16px}.status-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px}.status-icon.error[_ngcontent-%COMP%]{color:#f44336}.status-icon.success[_ngcontent-%COMP%], .status-icon.approve[_ngcontent-%COMP%]{color:#4caf50}.status-icon.reject[_ngcontent-%COMP%]{color:#f44336}.status-icon.escalate[_ngcontent-%COMP%]{color:#ff9800}.status-icon.review[_ngcontent-%COMP%]{color:#2196f3}h2[_ngcontent-%COMP%]{margin:0;color:#333}p[_ngcontent-%COMP%]{color:#666;margin:0}.request-details[_ngcontent-%COMP%]{background:#f5f5f5;padding:20px;border-radius:8px;width:100%;margin:16px 0}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #e0e0e0}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:500}.detail-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:600}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:16px;justify-content:center;margin-top:16px}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.full-width[_ngcontent-%COMP%]{width:100%}.comments-field[_ngcontent-%COMP%]{margin-top:16px}"]})}return o})();export{st as EmailApprovalComponent,Pe as InlineLoginComponent,Te as LoginDialogComponent};
