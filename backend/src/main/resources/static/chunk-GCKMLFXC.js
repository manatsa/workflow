import{a as g,b as Ce,c as v,d as he,e as ge}from"./chunk-4QX4Z4YV.js";import"./chunk-26MIDNQT.js";import"./chunk-5B5KDLSZ.js";import"./chunk-WNUHNPS4.js";import{a as te,c as ie}from"./chunk-IVI3BL2S.js";import"./chunk-LU6VCXUA.js";import"./chunk-AGZT6V36.js";import{b as G,e as J,i as K,j as X,l as Z,m as ee}from"./chunk-2AGPTHDJ.js";import{d as N,i as H,m as B,w as Q}from"./chunk-QGDZCCER.js";import{a as ae,b as oe,c as re,d as le,e as me,f as pe,g as de,h as ce,i as se,j as fe,k as ue,l as _e}from"./chunk-ZLHYE5PR.js";import{a as q,c as U,h as Y}from"./chunk-BTSRKJZZ.js";import{a as ne}from"./chunk-2UBRB5ZZ.js";import"./chunk-MNRHFUYD.js";import"./chunk-UF7Y5AYJ.js";import"./chunk-PMYQJTBZ.js";import{d as F,g as z}from"./chunk-M6HZK7Y7.js";import{Aa as V,m as I,q as R,va as W,wa as $,ya as j}from"./chunk-37H25STD.js";import{Eb as f,Jb as E,Ob as i,Pb as n,Qb as h,Rb as p,Sb as d,Yb as M,bc as S,cc as w,dc as x,eb as r,hc as o,ic as _,jb as A,jc as C,lc as P,mc as T,nc as b,qb as L,qc as D,rc as y,tc as k,vc as O,wb as m}from"./chunk-UYCZSUYP.js";var Me=()=>[10,25,50,100],ve=e=>["/approvals",e];function Se(e,a){e&1&&(i(0,"th",22),o(1,"Reference"),n())}function we(e,a){if(e&1&&(i(0,"td",23)(1,"a",24),o(2),n()()),e&2){let t=a.$implicit;r(),f("routerLink",y(2,ve,t.id)),r(),C(" ",t.referenceNumber," ")}}function xe(e,a){e&1&&(i(0,"th",22),o(1,"Title"),n())}function ye(e,a){if(e&1&&(i(0,"td",23),o(1),n()),e&2){let t=a.$implicit;r(),_(t.title||"-")}}function Ae(e,a){e&1&&(i(0,"th",22),o(1,"Workflow"),n())}function Le(e,a){if(e&1&&(i(0,"td",23)(1,"div",25)(2,"mat-icon"),o(3),n(),i(4,"span"),o(5),n()()()),e&2){let t=a.$implicit;r(3),_(t.workflowIcon||"description"),r(2),_(t.workflowName)}}function Ee(e,a){e&1&&(i(0,"th",22),o(1,"Submitted By"),n())}function Pe(e,a){if(e&1&&(i(0,"td",23),o(1),n()),e&2){let t=a.$implicit;r(),_(t.initiatorName)}}function Te(e,a){e&1&&(i(0,"th",22),o(1,"Level"),n())}function be(e,a){if(e&1&&(i(0,"td",23),o(1),n()),e&2){let t=a.$implicit;r(),C(" Level ",t.currentApprovalLevel," ")}}function De(e,a){e&1&&(i(0,"th",22),o(1,"Submitted"),n())}function ke(e,a){if(e&1&&(i(0,"td",23),o(1),k(2,"date"),n()),e&2){let t=a.$implicit;r(),C(" ",O(2,1,t.createdAt,"medium")," ")}}function Oe(e,a){e&1&&h(0,"th",26)}function Ie(e,a){if(e&1&&(i(0,"td",23)(1,"button",27),o(2," Review "),n()()),e&2){let t=a.$implicit;r(),f("routerLink",y(1,ve,t.id))}}function Re(e,a){e&1&&h(0,"tr",28)}function Fe(e,a){e&1&&h(0,"tr",29)}function ze(e,a){e&1&&(i(0,"div",20)(1,"mat-icon"),o(2,"thumb_up"),n(),i(3,"h3"),o(4,"All Caught Up!"),n(),i(5,"p"),o(6,"You have no pending approvals at this time."),n()())}var dt=(()=>{class e{workflowService;displayedColumns=["referenceNumber","title","workflowName","initiatorName","currentApprovalLevel","createdAt","actions"];dataSource=new _e([]);searchTerm="";totalElements=0;pageSize=10;currentPage=0;paginator;sort;constructor(t){this.workflowService=t}ngOnInit(){this.loadApprovals()}ngAfterViewInit(){this.dataSource.sort=this.sort}loadApprovals(){this.workflowService.getPendingApprovals(this.currentPage,this.pageSize).subscribe(t=>{t.success&&(this.dataSource.data=t.data.content,this.totalElements=t.data.totalElements)})}applyFilter(){this.dataSource.filter=this.searchTerm.trim().toLowerCase()}onPageChange(t){this.currentPage=t.pageIndex,this.pageSize=t.pageSize,this.loadApprovals()}static \u0275fac=function(c){return new(c||e)(A(ne))};static \u0275cmp=L({type:e,selectors:[["app-approval-list"]],viewQuery:function(c,l){if(c&1&&(S(g,5),S(v,5)),c&2){let s;w(s=x())&&(l.paginator=s.first),w(s=x())&&(l.sort=s.first)}},decls:42,vars:10,consts:[[1,"approval-list-container"],[1,"header"],[1,"header-stats"],[1,"table-toolbar"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by reference or workflow",3,"ngModelChange","keyup","ngModel"],["matPrefix",""],["mat-table","","matSort","",1,"data-table",3,"dataSource"],["matColumnDef","referenceNumber"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","workflowName"],["matColumnDef","initiatorName"],["matColumnDef","currentApprovalLevel"],["matColumnDef","createdAt"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"empty-state"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"reference-link",3,"routerLink"],[1,"workflow-info"],["mat-header-cell",""],["mat-raised-button","","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(c,l){c&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Pending Approvals"),n(),i(4,"div",2)(5,"mat-chip"),o(6),n()()(),i(7,"mat-card")(8,"mat-card-content")(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),o(12,"Search"),n(),i(13,"input",5),b("ngModelChange",function(u){return T(l.searchTerm,u)||(l.searchTerm=u),u}),M("keyup",function(){return l.applyFilter()}),n(),i(14,"mat-icon",6),o(15,"search"),n()()(),i(16,"table",7),p(17,8),m(18,Se,2,0,"th",9)(19,we,3,4,"td",10),d(),p(20,11),m(21,xe,2,0,"th",9)(22,ye,2,1,"td",10),d(),p(23,12),m(24,Ae,2,0,"th",9)(25,Le,6,2,"td",10),d(),p(26,13),m(27,Ee,2,0,"th",9)(28,Pe,2,1,"td",10),d(),p(29,14),m(30,Te,2,0,"th",9)(31,be,2,1,"td",10),d(),p(32,15),m(33,De,2,0,"th",9)(34,ke,3,4,"td",10),d(),p(35,16),m(36,Oe,1,0,"th",17)(37,Ie,3,3,"td",10),d(),m(38,Re,1,0,"tr",18)(39,Fe,1,0,"tr",19),n(),m(40,ze,7,0,"div",20),i(41,"mat-paginator",21),M("page",function(u){return l.onPageChange(u)}),n()()()()),c&2&&(r(6),C("",l.totalElements," pending"),r(7),P("ngModel",l.searchTerm),r(3),f("dataSource",l.dataSource),r(22),f("matHeaderRowDef",l.displayedColumns),r(),f("matRowDefColumns",l.displayedColumns),r(),E(l.dataSource.data.length===0?40:-1),r(),f("length",l.totalElements)("pageSize",l.pageSize)("pageSizeOptions",D(9,Me)))},dependencies:[R,I,z,F,Q,N,H,B,Y,q,U,ue,ae,re,de,le,oe,ce,me,pe,se,fe,Ce,g,ge,v,he,X,K,G,J,ee,Z,V,j,$,W,ie,te],styles:[".approval-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.table-toolbar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-field[_ngcontent-%COMP%]{width:400px}.data-table[_ngcontent-%COMP%]{width:100%}.reference-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-weight:500}.reference-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.workflow-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.workflow-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:20px;width:20px;height:20px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#666;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#4caf50;opacity:.7}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:1rem 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}"]})}return e})();export{dt as ApprovalListComponent};
