import{a as wt,b as Tt,c as Mt,d as kt,e as yt,f as Ot,g as Pt,h as It,i as Rt}from"./chunk-RI24GOE7.js";import{a as Et,b as St,c as bt}from"./chunk-5MKE7Q5K.js";import{a as gt,b as Ft,c as ht,d as vt}from"./chunk-4XBJRWZO.js";import{a as xt,b as ft}from"./chunk-LRT6XV4B.js";import{a as pt,b as ut}from"./chunk-7IWIRI2T.js";import{a as Ct}from"./chunk-KHA6H2VC.js";import{c as ve}from"./chunk-EC7BDYIR.js";import"./chunk-J43BGVIN.js";import"./chunk-MS4AQ6UA.js";import{a as Qe,b as Ze}from"./chunk-5B5KDLSZ.js";import{d as he}from"./chunk-WNUHNPS4.js";import{a as ot,b as at,c as rt,d as lt,e as _t,f as dt}from"./chunk-3QZG32TM.js";import{a as nt,b as it}from"./chunk-I4PAJBBT.js";import{a as ct,c as st}from"./chunk-IVI3BL2S.js";import{b as et,c as tt}from"./chunk-C5XODKZL.js";import"./chunk-LU6VCXUA.js";import"./chunk-AGZT6V36.js";import{a as je,b as Ke}from"./chunk-CDWC6WKW.js";import{b as qe,e as Ge,f as He,i as Ye,j as ze,l as Je,m as Xe}from"./chunk-2AGPTHDJ.js";import{d as Ee,f as se,i as Se,j as be,n as we,o as Te,q as Me,r as ke,v as ye,x as Oe}from"./chunk-QGDZCCER.js";import{a as De,b as Ae,c as Ve,d as Le,f as Ue,h as Be}from"./chunk-BTSRKJZZ.js";import{a as mt}from"./chunk-2UBRB5ZZ.js";import"./chunk-MNRHFUYD.js";import"./chunk-UF7Y5AYJ.js";import"./chunk-PMYQJTBZ.js";import{a as $e}from"./chunk-W7JX3HPD.js";import{a as fe,c as ge,g as Fe}from"./chunk-M6HZK7Y7.js";import{Aa as Ne,q as xe,va as Pe,wa as Ie,xa as Re,ya as We}from"./chunk-37H25STD.js";import{B as Ce,Cc as ue,Db as Z,Eb as F,Fb as J,Gb as w,H as ae,Ib as _e,Jb as p,Kb as de,Lb as oe,Mb as W,Nb as N,Ob as l,Pb as r,Qb as I,Ub as $,Yb as O,Zb as a,a as K,ab as re,b as Q,bb as le,c as ie,eb as i,gc as X,hc as c,ic as x,jb as j,jc as A,kc as ee,oa as M,pa as k,qb as pe,qc as ce,wb as u}from"./chunk-UYCZSUYP.js";var Wt=()=>[],H=(n,d)=>d.id,q=(n,d)=>d.value,ne=(n,d)=>d.name;function Nt(n,d){n&1&&(l(0,"div",13),I(1,"mat-spinner",15),l(2,"p"),c(3,"Loading form..."),r()())}function $t(n,d){n&1&&(l(0,"mat-icon"),c(1,"check"),r())}function Dt(n,d){if(n&1&&c(0),n&2){let e=a().$index;A(" ",e+1," ")}}function At(n,d){if(n&1&&I(0,"div",27),n&2){let e=a().$index,t=a(3);w("completed",e<t.currentScreenIndex)}}function Vt(n,d){if(n&1){let e=$();l(0,"div",23),O("click",function(){let o=M(e).$index,s=a(3);return k(s.goToScreen(o))}),l(1,"div",24),u(2,$t,2,0,"mat-icon")(3,Dt,1,1),r(),l(4,"span",25),c(5),r()(),u(6,At,1,2,"div",26)}if(n&2){let e=d.$implicit,t=d.$index,o=a(3);w("active",t===o.currentScreenIndex)("completed",t<o.currentScreenIndex),i(2),p(t<o.currentScreenIndex?2:3),i(3),x(e.title||"Step "+(t+1)),i(),p(t<o.screens.length-1?6:-1)}}function Lt(n,d){if(n&1&&(l(0,"mat-icon"),c(1),r()),n&2){let e=a(4);i(),x(e.currentScreen.icon)}}function Ut(n,d){if(n&1&&(l(0,"p"),c(1),r()),n&2){let e=a(4);i(),x(e.currentScreen.description)}}function Bt(n,d){if(n&1&&(l(0,"div",22),u(1,Lt,2,1,"mat-icon"),l(2,"div")(3,"h2"),c(4),r(),u(5,Ut,2,1,"p"),r()()),n&2){let e=a(3);i(),p(e.currentScreen.icon?1:-1),i(3),x(e.currentScreen.title),i(),p(e.currentScreen.description?5:-1)}}function qt(n,d){if(n&1&&(l(0,"div",21),W(1,Vt,7,7,null,null,H),r(),u(3,Bt,6,3,"div",22)),n&2){let e=a(2);i(),N(e.screens),i(2),p(e.currentScreen?3:-1)}}function Gt(n,d){if(n&1&&(l(0,"tr")(1,"td",29),c(2),r(),l(3,"td",30),c(4),r(),l(5,"td",31),c(6),r()()),n&2){let e=d.$implicit,t=a(3);i(2),x(t.getFieldScreenName(e)),i(2),x(e.label),i(2),x(t.getFieldDisplayValue(e))}}function Ht(n,d){if(n&1&&(l(0,"mat-card",17)(1,"mat-card-content")(2,"table",28)(3,"thead")(4,"tr")(5,"th",29),c(6,"Screen"),r(),l(7,"th",30),c(8,"Field"),r(),l(9,"th",31),c(10,"Value"),r()()(),l(11,"tbody"),W(12,Gt,7,3,"tr",null,H),r()()()()),n&2){let e=a(2);i(12),N(e.getSummaryFields())}}function Yt(n,d){n&1&&(l(0,"mat-card",17)(1,"mat-card-content")(2,"div",32)(3,"mat-icon"),c(4,"info"),r(),l(5,"p"),c(6,"No fields have been marked for summary display."),r(),l(7,"p",33),c(8,'To include fields in the summary, enable "In Summary" option in the field configuration.'),r()()()())}function zt(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Jt(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Xt(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,zt,2,0,"span",59),r(),I(5,"input",60),r(),u(6,Jt,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function jt(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Kt(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Qt(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,jt,2,0,"span",59),r(),I(5,"textarea",62),r(),u(6,Kt,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Zt(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function en(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function tn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Zt,2,0,"span",59),r(),I(5,"input",63),r(),u(6,en,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function nn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function on(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function an(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,nn,2,0,"span",59),r(),I(5,"input",63),l(6,"span",64),c(7,"$\xA0"),r()(),u(8,on,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(3),p(t.hasFieldError(e)?8:-1)}}function rn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function ln(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function _n(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,rn,2,0,"span",59),r(),I(5,"input",65),r(),u(6,ln,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function dn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function cn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function sn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,dn,2,0,"span",59),r(),I(5,"input",66),r(),u(6,cn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function mn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Cn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function pn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,mn,2,0,"span",59),r(),I(5,"input",67),r(),u(6,Cn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function un(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function xn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function fn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,un,2,0,"span",59),r(),I(5,"input",68)(6,"mat-datepicker-toggle",69)(7,"mat-datepicker",70,0),r(),u(9,xn,2,1,"div",61),r()),n&2){let e=X(8),t=a(2).$implicit,o=a(3);i(),w("field-invalid",o.hasFieldError(t)),i(2),x(t.label),i(),p(o.isFieldRequired(t)?4:-1),i(),F("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),i(),F("for",e)("disabled",o.isFieldReadonly(t)),i(),F("disabled",o.isFieldReadonly(t)),i(2),p(o.hasFieldError(t)?9:-1)}}function gn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Fn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function hn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,gn,2,0,"span",59),r(),I(5,"input",71),r(),u(6,Fn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function vn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function En(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Sn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function bn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,vn,2,0,"span",59),r(),l(5,"mat-select",72),W(6,En,2,2,"mat-option",73,q),r()(),u(8,Sn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function wn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Tn(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Mn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function kn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,wn,2,0,"span",59),r(),l(5,"mat-select",74),W(6,Tn,2,2,"mat-option",73,q),r()(),u(8,Mn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function yn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function On(n,d){if(n&1&&(l(0,"mat-radio-button",78),c(1),r()),n&2){let e=d.$implicit,t=a(3).$implicit,o=a(3);F("value",e.value)("disabled",o.isFieldReadonly(t)),i(),x(e.label)}}function Pn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function In(n,d){if(n&1&&(l(0,"div",75)(1,"label",76),c(2),u(3,yn,2,0,"span",59),r(),l(4,"mat-radio-group",77),W(5,On,2,3,"mat-radio-button",78,q),r(),u(7,Pn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function Rn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Wn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-checkbox",77),c(2),r(),u(3,Rn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),x(e.label),i(),p(t.hasFieldError(e)?3:-1)}}function Nn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function $n(n,d){if(n&1){let e=$();l(0,"mat-checkbox",82),O("change",function(o){let s=M(e).$implicit,C=a(3).$implicit,v=a(3);return k(v.onCheckboxGroupChange(C.name,s.value,o.checked))}),c(1),r()}if(n&2){let e=d.$implicit,t=a(3).$implicit,o=a(3);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),A(" ",e.label||e.value," ")}}function Dn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function An(n,d){if(n&1&&(l(0,"div",79)(1,"label",76),c(2),u(3,Nn,2,0,"span",59),r(),l(4,"div",80),W(5,$n,2,3,"mat-checkbox",81,q),r(),u(7,Dn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),N(e.options||ce(7,Wt)),i(2),p(t.hasFieldError(e)?7:-1)}}function Vn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ln(n,d){if(n&1&&(l(0,"mat-chip"),c(1),r()),n&2){let e=d.$implicit;i(),x(e.name)}}function Un(n,d){if(n&1&&(l(0,"div",85),W(1,Ln,2,1,"mat-chip",null,ne),r()),n&2){let e=a(3).$implicit,t=a(3);i(),N(t.selectedFiles[e.name])}}function Bn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function qn(n,d){if(n&1){let e=$();l(0,"div",83)(1,"label",76),c(2),u(3,Vn,2,0,"span",59),r(),l(4,"input",84),O("change",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onFileSelect(o,s.name))}),r(),u(5,Un,3,0,"div",85)(6,Bn,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("multiple",e.multiple)("disabled",t.isFieldReadonly(e)),i(),p(t.selectedFiles[e.name]&&t.selectedFiles[e.name].length>0?5:-1),i(),p(t.hasFieldError(e)?6:-1)}}function Gn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Hn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Yn(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Gn,2,0,"span",59),r(),I(5,"input",86),r(),u(6,Hn,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function zn(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Jn(n,d){if(n&1&&(l(0,"mat-option",73)(1,"div",90)(2,"mat-icon"),c(3,"person"),r(),l(4,"div",91)(5,"span",92),c(6),r(),l(7,"span",93),c(8),r()()()()),n&2){let e=d.$implicit;F("value",e),i(6),ee("",e.firstName," ",e.lastName,""),i(2),x(e.email)}}function Xn(n,d){n&1&&(l(0,"mat-option",89),c(1,"No users found"),r())}function jn(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Kn(n,d){if(n&1){let e=$();l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,zn,2,0,"span",59),r(),l(5,"mat-icon",64),c(6,"person_search"),r(),l(7,"input",87),O("input",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onUserSearch(o,s.name))}),r(),l(8,"mat-autocomplete",88,1),O("optionSelected",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onUserSelected(o,s.name))}),W(10,Jn,9,4,"mat-option",73,H),u(12,Xn,2,0,"mat-option",89),r()(),u(13,jn,2,1,"div",61),r()}if(n&2){let e=X(9),t=a(2).$implicit,o=a(3);i(),w("field-invalid",o.hasFieldError(t)),i(2),x(t.label),i(),p(o.isFieldRequired(t)?4:-1),i(3),F("formControlName",t.name)("matAutocomplete",e)("placeholder",t.placeholder||"Search for a user...")("readonly",o.isFieldReadonly(t)),i(),F("displayWith",o.displayUserFn),i(2),N(o.getFilteredUsers(t.name)),i(2),p(o.getFilteredUsers(t.name).length===0&&o.userSearchTerms[t.name]?12:-1),i(),p(o.hasFieldError(t)?13:-1)}}function Qn(n,d){if(n&1&&I(0,"input",41),n&2){let e=a(2).$implicit;F("formControlName",e.name)}}function Zn(n,d){if(n&1&&(l(0,"p",95),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.defaultValue)}}function ei(n,d){if(n&1&&(l(0,"div",42)(1,"p",94),c(2),r(),u(3,Zn,2,1,"p",95),r()),n&2){let e=a(2).$implicit;i(2),x(e.label),i(),p(e.defaultValue?3:-1)}}function ti(n,d){if(n&1&&(l(0,"span",96),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.label)}}function ni(n,d){if(n&1&&(l(0,"div",43),I(1,"mat-divider"),u(2,ti,2,1,"span",96),r()),n&2){let e=a(2).$implicit;i(2),p(e.label?2:-1)}}function ii(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function oi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function ai(n,d){if(n&1&&(l(0,"div",44)(1,"mat-slide-toggle",77),c(2),u(3,ii,2,0,"span",59),r(),u(4,oi,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(" ",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),p(t.hasFieldError(e)?4:-1)}}function ri(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function li(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function _i(n,d){if(n&1&&(l(0,"div",97)(1,"label",76),c(2),u(3,ri,2,0,"span",59),r(),l(4,"mat-button-toggle-group",77)(5,"mat-button-toggle",98),c(6,"Yes"),r(),l(7,"mat-button-toggle",99),c(8,"No"),r()(),u(9,li,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(5),p(t.hasFieldError(e)?9:-1)}}function di(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function ci(n,d){if(n&1){let e=$();l(0,"mat-icon",103),O("click",function(){let o=M(e).$implicit,s=a(3).$implicit,C=a(3);return k(C.setRating(s,o))}),c(1),r()}if(n&2){let e=d.$implicit,t=a(3).$implicit,o=a(3);w("filled",o.getRatingValue(t)>=e)("readonly",o.isFieldReadonly(t)),i(),A(" ",o.getRatingValue(t)>=e?"star":"star_border"," ")}}function si(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function mi(n,d){if(n&1&&(l(0,"div",100)(1,"label",76),c(2),u(3,di,2,0,"span",59),r(),l(4,"div",101),W(5,ci,2,5,"mat-icon",102,oe),r(),u(7,si,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(2),N(t.getStarArray(e)),i(2),p(t.hasFieldError(e)?7:-1)}}function Ci(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function pi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function ui(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Ci,2,0,"span",59),r(),I(5,"input",104),r(),u(6,pi,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function xi(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function fi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function gi(n,d){if(n&1&&(l(0,"div",105)(1,"label",76),c(2),u(3,xi,2,0,"span",59),r(),l(4,"mat-slider",106),I(5,"input",107),r(),u(6,fi,2,1,"div",61),r()),n&2){let e,t=a(2).$implicit,o=a(3);w("has-error",o.hasFieldError(t)),i(2),ee("",t.label,": ",((e=o.form.get(t.name))==null?null:e.value)||0," "),i(),p(o.isFieldRequired(t)?3:-1),i(),F("min",t.sliderMin||0)("max",t.sliderMax||100)("step",t.sliderStep||1)("discrete",!0)("disabled",o.isFieldReadonly(t)),i(),F("formControlName",t.name),i(),p(o.hasFieldError(t)?6:-1)}}function Fi(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function hi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function vi(n,d){if(n&1&&(l(0,"div",108)(1,"label",76),c(2),u(3,Fi,2,0,"span",59),r(),I(4,"input",109),u(5,hi,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?5:-1)}}function Ei(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Si(n,d){if(n&1&&I(0,"img",114),n&2){let e=a(3).$implicit,t=a(3);F("src",t.getImagePreview(e),le)}}function bi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function wi(n,d){if(n&1){let e=$();l(0,"div",110)(1,"label",76),c(2),u(3,Ei,2,0,"span",59),r(),l(4,"div",111)(5,"input",112,2),O("change",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onImageSelect(o,s))}),r(),l(7,"button",113),O("click",function(){M(e);let o=X(6);return k(o.click())}),l(8,"mat-icon"),c(9,"add_photo_alternate"),r(),c(10," Select Image "),r(),u(11,Si,1,1,"img",114),r(),u(12,bi,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(4),F("disabled",t.isFieldReadonly(e)),i(4),p(t.getImagePreview(e)?11:-1),i(),p(t.hasFieldError(e)?12:-1)}}function Ti(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Mi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function ki(n,d){if(n&1){let e=$();l(0,"div",115)(1,"label",76),c(2),u(3,Ti,2,0,"span",59),r(),l(4,"div",116)(5,"canvas",117),O("mousedown",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.startSignature(o,s))})("mousemove",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.drawSignature(o,s))})("mouseup",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.endSignature(o))})("mouseleave",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.endSignature(o))})("touchstart",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.startSignatureTouch(o,s))})("touchmove",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.drawSignatureTouch(o,s))})("touchend",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.endSignature(o))}),r(),l(6,"div",118)(7,"button",119),O("click",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.clearSignature(o))}),l(8,"mat-icon"),c(9,"clear"),r()()()(),u(10,Mi,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(2),Z("data-field",e.name),i(2),F("disabled",t.isFieldReadonly(e)),i(3),p(t.hasFieldError(e)?10:-1)}}function yi(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Oi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Pi(n,d){if(n&1){let e=$();l(0,"div",120)(1,"label",76),c(2),u(3,yi,2,0,"span",59),r(),l(4,"div",121)(5,"div",122)(6,"button",123),O("click",function(){M(e);let o=a(5);return k(o.execRichTextCommand("bold"))}),l(7,"mat-icon"),c(8,"format_bold"),r()(),l(9,"button",124),O("click",function(){M(e);let o=a(5);return k(o.execRichTextCommand("italic"))}),l(10,"mat-icon"),c(11,"format_italic"),r()(),l(12,"button",125),O("click",function(){M(e);let o=a(5);return k(o.execRichTextCommand("underline"))}),l(13,"mat-icon"),c(14,"format_underlined"),r()(),I(15,"span",126),l(16,"button",127),O("click",function(){M(e);let o=a(5);return k(o.execRichTextCommand("insertUnorderedList"))}),l(17,"mat-icon"),c(18,"format_list_bulleted"),r()(),l(19,"button",128),O("click",function(){M(e);let o=a(5);return k(o.execRichTextCommand("insertOrderedList"))}),l(20,"mat-icon"),c(21,"format_list_numbered"),r()()(),l(22,"div",129),O("input",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onRichTextInput(o,s))})("blur",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onRichTextBlur(o,s))}),r()(),u(23,Oi,2,1,"div",61),r()}if(n&2){let e,t=a(2).$implicit,o=a(3);w("has-error",o.hasFieldError(t)),i(2),A("",t.label," "),i(),p(o.isFieldRequired(t)?3:-1),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(4),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),w("readonly",o.isFieldReadonly(t)),F("innerHTML",((e=o.form.get(t.name))==null?null:e.value)||"",re),Z("data-field",t.name),i(),p(o.hasFieldError(t)?23:-1)}}function Ii(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ri(n,d){if(n&1&&(l(0,"mat-icon"),c(1),r(),l(2,"span"),c(3),r()),n&2){let e,t,o=a(3).$implicit,s=a(3);i(),x((e=s.form.get(o.name))==null?null:e.value),i(2),x((t=s.form.get(o.name))==null?null:t.value)}}function Wi(n,d){n&1&&(l(0,"mat-icon"),c(1,"emoji_symbols"),r(),l(2,"span"),c(3,"Select an icon..."),r())}function Ni(n,d){if(n&1){let e=$();l(0,"div",138),O("click",function(){let o=M(e).$implicit,s=a(4).$implicit,C=a(3);return k(C.selectIcon(s,o))}),l(1,"mat-icon"),c(2),r()()}if(n&2){let e,t=d.$implicit,o=a(4).$implicit,s=a(3);w("selected",((e=s.form.get(o.name))==null?null:e.value)===t),i(2),x(t)}}function $i(n,d){if(n&1){let e=$();l(0,"div",134)(1,"input",135),O("input",function(o){M(e);let s=a(3).$implicit,C=a(3);return k(C.onIconSearch(o,s))}),r(),l(2,"div",136),W(3,Ni,3,3,"div",137,oe),r()()}if(n&2){let e=a(3).$implicit,t=a(3);i(),F("value",t.iconSearchText[e.name]||""),i(2),N(t.getFilteredIcons(e))}}function Di(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Ai(n,d){if(n&1){let e=$();l(0,"div",130)(1,"label",76),c(2),u(3,Ii,2,0,"span",59),r(),l(4,"div",131)(5,"div",132),O("click",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.toggleIconPicker(o))}),u(6,Ri,4,2)(7,Wi,4,0),l(8,"mat-icon",133),c(9,"arrow_drop_down"),r()(),u(10,$i,5,1,"div",134),r(),u(11,Di,2,1,"div",61),r()}if(n&2){let e,t=a(2).$implicit,o=a(3);w("has-error",o.hasFieldError(t)),i(2),A("",t.label," "),i(),p(o.isFieldRequired(t)?3:-1),i(2),w("disabled",o.isFieldReadonly(t)),i(),p((e=o.form.get(t.name))!=null&&e.value?6:7),i(4),p(o.isIconPickerOpen(t)?10:-1),i(),p(o.hasFieldError(t)?11:-1)}}function Vi(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Li(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Ui(n,d){if(n&1){let e=$();l(0,"div",139)(1,"label",76),c(2),u(3,Vi,2,0,"span",59),r(),l(4,"div",140)(5,"mat-form-field",58)(6,"mat-label"),c(7,"Barcode/QR Code"),r(),I(8,"input",141),l(9,"button",142),O("click",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.scanBarcode(o))}),l(10,"mat-icon"),c(11,"qr_code_scanner"),r()()()(),u(12,Li,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(5),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)),i(3),p(t.hasFieldError(e)?12:-1)}}function Bi(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function qi(n,d){n&1&&(l(0,"mat-icon",149),c(1,"sync"),r())}function Gi(n,d){n&1&&(l(0,"mat-icon"),c(1,"my_location"),r())}function Hi(n,d){if(n&1&&(l(0,"div",150)(1,"mat-icon"),c(2,"place"),r(),l(3,"span"),c(4),r()()),n&2){let e=a(3).$implicit,t=a(3);i(4),x(t.getLocationDisplay(e))}}function Yi(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function zi(n,d){if(n&1){let e=$();l(0,"div",143)(1,"label",76),c(2),u(3,Bi,2,0,"span",59),r(),l(4,"div",144)(5,"div",145)(6,"mat-form-field",146)(7,"mat-label"),c(8,"Latitude"),r(),l(9,"input",147),O("input",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onLocationLatChange(o,s))}),r()(),l(10,"mat-form-field",146)(11,"mat-label"),c(12,"Longitude"),r(),l(13,"input",147),O("input",function(o){M(e);let s=a(2).$implicit,C=a(3);return k(C.onLocationLngChange(o,s))}),r()(),l(14,"button",148),O("click",function(){M(e);let o=a(2).$implicit,s=a(3);return k(s.getCurrentLocation(o))}),u(15,qi,2,0,"mat-icon",149)(16,Gi,2,0,"mat-icon"),r()(),u(17,Hi,5,1,"div",150),r(),u(18,Yi,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(6),F("value",t.getLocationLat(e))("readonly",t.isFieldReadonly(e)),i(4),F("value",t.getLocationLng(e))("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)||t.isGettingLocation(e)),i(),p(t.isGettingLocation(e)?15:16),i(2),p(t.getLocationDisplay(e)?17:-1),i(),p(t.hasFieldError(e)?18:-1)}}function Ji(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Xi(n,d){if(n&1&&(l(0,"th"),c(1),r()),n&2){let e=d.$implicit;J("width",e.width?e.width+"px":"auto"),i(),x(e.label)}}function ji(n,d){n&1&&(l(0,"th",155),c(1,"Actions"),r())}function Ki(n,d){if(n&1){let e=$();l(0,"input",160),O("input",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(3);return k(b.onTableCellChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(3);F("value",t[e.name]||"")("readonly",s.isColumnReadonly(o,e))}}function Qi(n,d){if(n&1){let e=$();l(0,"input",161),O("input",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(3);return k(b.onTableCellChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(3);F("value",t[e.name]||"")("readonly",s.isColumnReadonly(o,e))}}function Zi(n,d){if(n&1){let e=$();l(0,"mat-checkbox",82),O("change",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(3);return k(b.onTableCheckboxChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(3);F("checked",t[e.name]==="true"||t[e.name]===!0)("disabled",s.isColumnReadonly(o,e))}}function eo(n,d){if(n&1){let e=$();l(0,"input",162),O("input",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(3);return k(b.onTableCellChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(3);F("value",t[e.name]||"")("readonly",s.isColumnReadonly(o,e))}}function to(n,d){if(n&1&&(l(0,"td"),u(1,Ki,1,2,"input",157)(2,Qi,1,2,"input",158)(3,Zi,1,2,"mat-checkbox",81)(4,eo,1,2,"input",159),r()),n&2){let e,t=d.$implicit;J("width",t.width?t.width+"px":"auto"),i(),p((e=t.type)==="NUMBER"?1:e==="DATE"?2:e==="CHECKBOX"?3:4)}}function no(n,d){if(n&1){let e=$();l(0,"td",155)(1,"button",163),O("click",function(){M(e);let o=a().$index,s=a(3).$implicit,C=a(3);return k(C.removeTableRow(s,o))}),l(2,"mat-icon"),c(3,"delete"),r()()()}if(n&2){let e=a(4).$implicit,t=a(3);i(),F("disabled",!t.canRemoveTableRow(e))}}function io(n,d){if(n&1&&(l(0,"tr"),W(1,to,5,3,"td",154,ne),u(3,no,4,1,"td",155),r()),n&2){let e=a(3).$implicit,t=a(3);i(),N(t.getTableColumns(e)),i(2),p(t.isTableFullyReadonly(e)?-1:3)}}function oo(n,d){n&1&&c(0," No data available. ")}function ao(n,d){n&1&&c(0,' No rows added. Click "Add Row" to add data. ')}function ro(n,d){if(n&1&&(l(0,"tr")(1,"td",164),u(2,oo,1,0)(3,ao,1,0),r()()),n&2){let e=a(3).$implicit,t=a(3);i(),Z("colspan",t.isTableFullyReadonly(e)?t.getTableColumns(e).length:t.getTableColumns(e).length+1),i(),p(t.isTableFullyReadonly(e)?2:3)}}function lo(n,d){if(n&1&&(l(0,"span",166),c(1),r()),n&2){let e=a(4).$implicit,t=a(3);i(),ee("",t.getTableRows(e).length," / ",e.tableMaxRows," rows")}}function _o(n,d){if(n&1){let e=$();l(0,"div",156)(1,"button",165),O("click",function(){M(e);let o=a(3).$implicit,s=a(3);return k(s.addTableRow(o))}),l(2,"mat-icon"),c(3,"add"),r(),c(4," Add Row "),r(),u(5,lo,2,2,"span",166),r()}if(n&2){let e=a(3).$implicit,t=a(3);i(),F("disabled",!t.canAddTableRow(e)),i(4),p(e.tableMaxRows?5:-1)}}function co(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function so(n,d){if(n&1&&(l(0,"div",151)(1,"label",76),c(2),u(3,Ji,2,0,"span",59),r(),l(4,"div",152)(5,"table",153)(6,"thead")(7,"tr"),W(8,Xi,2,3,"th",154,ne),u(10,ji,2,0,"th",155),r()(),l(11,"tbody"),W(12,io,4,1,"tr",null,de),u(14,ro,4,2,"tr"),r()(),u(15,_o,6,2,"div",156),r(),u(16,co,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(3);w("has-error",t.hasFieldError(e))("readonly-table",t.isFieldReadonly(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(2),w("table-striped",e.tableStriped!==!1)("table-bordered",e.tableBordered!==!1),i(3),N(t.getTableColumns(e)),i(2),p(t.isTableFullyReadonly(e)?-1:10),i(2),N(t.getTableRows(e)),i(2),p(t.getTableRows(e).length===0?14:-1),i(),p(t.isTableFullyReadonly(e)?-1:15),i(),p(t.hasFieldError(e)?16:-1)}}function mo(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Co(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function po(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function uo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,mo,2,0,"span",59),r(),l(5,"mat-select",72),W(6,Co,2,2,"mat-option",73,q),r()(),u(8,po,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function xo(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function fo(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function go(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Fo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,xo,2,0,"span",59),r(),l(5,"mat-select",74),W(6,fo,2,2,"mat-option",73,q),r()(),u(8,go,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function ho(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function vo(n,d){if(n&1&&(l(0,"mat-radio-button",78),c(1),r()),n&2){let e=d.$implicit,t=a(4).$implicit,o=a(3);F("value",e.value)("disabled",o.isFieldReadonly(t)),i(),x(e.label)}}function Eo(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function So(n,d){if(n&1&&(l(0,"div",75)(1,"label",76),c(2),u(3,ho,2,0,"span",59),r(),l(4,"mat-radio-group",77),W(5,vo,2,3,"mat-radio-button",78,q),r(),u(7,Eo,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function bo(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function wo(n,d){if(n&1){let e=$();l(0,"mat-checkbox",82),O("change",function(o){let s=M(e).$implicit,C=a(4).$implicit,v=a(3);return k(v.onCheckboxGroupChange(C.name,s.value,o.checked))}),c(1),r()}if(n&2){let e=d.$implicit,t=a(4).$implicit,o=a(3);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),A(" ",e.label," ")}}function To(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Mo(n,d){if(n&1&&(l(0,"div",168)(1,"label",76),c(2),u(3,bo,2,0,"span",59),r(),l(4,"div",169),W(5,wo,2,3,"mat-checkbox",81,q),r(),u(7,To,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(3);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function ko(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function yo(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Oo(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(3);i(),x(t.getFieldErrorMessage(e))}}function Po(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,ko,2,0,"span",59),r(),l(5,"mat-select",72),W(6,yo,2,2,"mat-option",73,q),r()(),u(8,Oo,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function Io(n,d){if(n&1&&u(0,uo,9,8,"div",37)(1,Fo,9,8,"div",37)(2,So,8,9,"div",38)(3,Mo,8,7,"div",167)(4,Po,9,8,"div",37),n&2){let e,t=a(2).$implicit;p((e=t.viewType)==="SELECT"?0:e==="MULTISELECT"?1:e==="RADIO"?2:e==="CHECKBOX_GROUP"?3:4)}}function Ro(n,d){if(n&1&&(l(0,"label",171),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.label)}}function Wo(n,d){if(n&1&&(l(0,"mat-icon",174),c(1),r()),n&2){let e=a().$implicit;i(),x(e.collapsibleIcon)}}function No(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function $o(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function Do(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,No,2,0,"span",59),r(),I(5,"input",60),r(),u(6,$o,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Ao(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Vo(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function Lo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Ao,2,0,"span",59),r(),I(5,"textarea",176),r(),u(6,Vo,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Uo(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Bo(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function qo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Uo,2,0,"span",59),r(),I(5,"input",177),r(),u(6,Bo,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Go(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ho(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Yo(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function zo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Go,2,0,"span",59),r(),l(5,"mat-select",77),W(6,Ho,2,2,"mat-option",73,q),r()(),u(8,Yo,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function Jo(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Xo(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function jo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Jo,2,0,"span",59),r(),I(5,"input",68)(6,"mat-datepicker-toggle",69)(7,"mat-datepicker",70,3),r(),u(9,Xo,2,1,"div",61),r()),n&2){let e=X(8),t=a(2).$implicit,o=a(7);i(),w("field-invalid",o.hasFieldError(t)),i(2),x(t.label),i(),p(o.isFieldRequired(t)?4:-1),i(),F("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),i(),F("for",e)("disabled",o.isFieldReadonly(t)),i(),F("disabled",o.isFieldReadonly(t)),i(2),p(o.hasFieldError(t)?9:-1)}}function Ko(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function Qo(n,d){if(n&1&&(l(0,"div",37)(1,"mat-checkbox",77),c(2),r(),u(3,Ko,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),x(e.label),i(),p(t.hasFieldError(e)?3:-1)}}function Zo(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function ea(n,d){if(n&1&&(l(0,"mat-radio-button",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function ta(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function na(n,d){if(n&1&&(l(0,"div",75)(1,"label",76),c(2),u(3,Zo,2,0,"span",59),r(),l(4,"mat-radio-group",77),W(5,ea,2,2,"mat-radio-button",73,q),r(),u(7,ta,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function ia(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),r(),I(4,"input",178),r()()),n&2){let e=a(2).$implicit,t=a(7);i(3),x(e.label),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e))}}function oa(n,d){if(n&1&&(l(0,"div",36),u(1,Do,7,8,"div",37)(2,Lo,7,7,"div",37)(3,qo,7,7,"div",37)(4,zo,9,7,"div",37)(5,jo,10,11,"div",37)(6,Qo,4,4,"div",37)(7,na,8,7,"div",38)(8,ia,5,3,"div",37),r()),n&2){let e,t=a().$implicit;J("grid-column","span "+(t.columnSpan||2)),i(),p((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="SELECT"?4:e==="DATE"?5:e==="CHECKBOX"?6:e==="RADIO"?7:8)}}function aa(n,d){if(n&1&&u(0,oa,9,3,"div",35),n&2){let e=d.$implicit,t=a(7);p(t.isFieldVisible(e)?0:-1)}}function ra(n,d){if(n&1){let e=$();c(0),l(1,"mat-expansion-panel",173),O("opened",function(){let o=M(e).$index,s=a(3).$implicit,C=a(3);return k(C.openCollapsible(s,o))})("closed",function(){let o=M(e).$index,s=a(3).$implicit,C=a(3);return k(C.closeCollapsible(s,o))}),l(2,"mat-expansion-panel-header")(3,"mat-panel-title"),u(4,Wo,2,1,"mat-icon",174),c(5),r()(),l(6,"div",175),W(7,aa,1,1,null,null,H),r()()}if(n&2){let e=d.$implicit,t=d.$index,o=a(3).$implicit,s=a(3);A(" ",s.initAccordionState(o)," "),i(),F("expanded",s.isCollapsibleExpanded(o.id,t)),i(3),p(e.collapsibleIcon?4:-1),i(),A(" ",e.collapsibleTitle||e.label," "),i(2),N(s.getFieldsInCollapsible(e.id))}}function la(n,d){if(n&1&&(l(0,"div",170),u(1,Ro,2,1,"label",171),l(2,"mat-accordion",172),W(3,ra,9,4,null,null,H),r()()),n&2){let e,t=a(2).$implicit,o=a(3);w("has-error",o.hasFieldError(t)),i(),p(t.label?1:-1),i(),_e("workflow-accordion ",o.getAccordionAnimationClass(t),""),F("multi",(e=t.accordionAllowMultiple)!==null&&e!==void 0?e:!1),i(),N(o.getCollapsiblesForAccordion(t.id))}}function _a(n,d){if(n&1&&(l(0,"mat-icon",174),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.collapsibleIcon)}}function da(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function ca(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(6);i(),x(t.getFieldErrorMessage(e))}}function sa(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,da,2,0,"span",59),r(),I(5,"input",60),r(),u(6,ca,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(6);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function ma(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ca(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(6);i(),x(t.getFieldErrorMessage(e))}}function pa(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,ma,2,0,"span",59),r(),I(5,"textarea",176),r(),u(6,Ca,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(6);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function ua(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function xa(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(6);i(),x(t.getFieldErrorMessage(e))}}function fa(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,ua,2,0,"span",59),r(),I(5,"input",177),r(),u(6,xa,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(6);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function ga(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Fa(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function ha(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(6);i(),x(t.getFieldErrorMessage(e))}}function va(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,ga,2,0,"span",59),r(),l(5,"mat-select",77),W(6,Fa,2,2,"mat-option",73,q),r()(),u(8,ha,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(6);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function Ea(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),r(),I(4,"input",178),r()()),n&2){let e=a(2).$implicit,t=a(6);i(3),x(e.label),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e))}}function Sa(n,d){if(n&1&&(l(0,"div",36),u(1,sa,7,8,"div",37)(2,pa,7,7,"div",37)(3,fa,7,7,"div",37)(4,va,9,7,"div",37)(5,Ea,5,3,"div",37),r()),n&2){let e,t=a().$implicit;J("grid-column","span "+(t.columnSpan||2)),i(),p((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="SELECT"?4:5)}}function ba(n,d){if(n&1&&u(0,Sa,6,3,"div",35),n&2){let e=d.$implicit,t=a(6);p(t.isFieldVisible(e)?0:-1)}}function wa(n,d){if(n&1&&(l(0,"div",57)(1,"mat-expansion-panel",179)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),u(4,_a,2,1,"mat-icon",174),c(5),r()(),l(6,"div",175),W(7,ba,1,1,null,null,H),r()()()),n&2){let e,t=a(2).$implicit,o=a(3);i(),F("expanded",(e=t.collapsibleDefaultExpanded)!==null&&e!==void 0?e:!1),i(3),p(t.collapsibleIcon?4:-1),i(),A(" ",t.collapsibleTitle||t.label," "),i(2),N(o.getFieldsInCollapsible(t.id))}}function Ta(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),r(),I(4,"input",60),r()()),n&2){let e=a(2).$implicit,t=a(3);i(3),x(e.label),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e))}}function Ma(n,d){if(n&1&&(l(0,"div",36),u(1,Xt,7,8,"div",37)(2,Qt,7,8,"div",37)(3,tn,7,8,"div",37)(4,an,9,8,"div",37)(5,_n,7,8,"div",37)(6,sn,7,8,"div",37)(7,pn,7,8,"div",37)(8,fn,10,11,"div",37)(9,hn,7,7,"div",37)(10,bn,9,8,"div",37)(11,kn,9,8,"div",37)(12,In,8,9,"div",38)(13,Wn,4,4,"div",37)(14,An,8,8,"div",39)(15,qn,7,8,"div",40)(16,Yn,7,8,"div",37)(17,Kn,14,11,"div",37)(18,Qn,1,1,"input",41)(19,ei,4,2,"div",42)(20,ni,3,1,"div",43)(21,ai,5,5,"div",44)(22,_i,10,7,"div",45)(23,mi,8,5,"div",46)(24,ui,7,7,"div",37)(25,gi,7,12,"div",47)(26,vi,6,7,"div",48)(27,wi,13,7,"div",49)(28,ki,11,7,"div",50)(29,Pi,24,14,"div",51)(30,Ai,12,9,"div",52)(31,Ui,13,8,"div",53)(32,zi,19,12,"div",54)(33,so,17,14,"div",55)(34,Io,5,1)(35,la,5,7,"div",56)(36,wa,9,3,"div",57)(37,Ta,5,4,"div",37),r()),n&2){let e,t=a().$implicit;J("grid-column","span "+(t.columnSpan||2)),i(),p((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="CURRENCY"?4:e==="EMAIL"?5:e==="PHONE"?6:e==="PASSWORD"?7:e==="DATE"?8:e==="DATETIME"?9:e==="SELECT"?10:e==="MULTISELECT"?11:e==="RADIO"?12:e==="CHECKBOX"?13:e==="CHECKBOX_GROUP"?14:e==="FILE"?15:e==="URL"?16:e==="USER"?17:e==="HIDDEN"?18:e==="LABEL"?19:e==="DIVIDER"?20:e==="TOGGLE"?21:e==="YES_NO"?22:e==="RATING"?23:e==="TIME"?24:e==="SLIDER"?25:e==="COLOR"?26:e==="IMAGE"?27:e==="SIGNATURE"?28:e==="RICH_TEXT"?29:e==="ICON"?30:e==="BARCODE"?31:e==="LOCATION"?32:e==="TABLE"?33:e==="SQL_OBJECT"?34:e==="ACCORDION"?35:e==="COLLAPSIBLE"?36:37)}}function ka(n,d){if(n&1&&u(0,Ma,38,3,"div",35),n&2){let e=d.$implicit,t=a(3);p(t.isFieldVisible(e)?0:-1)}}function ya(n,d){if(n&1&&(l(0,"mat-card",18)(1,"mat-card-content")(2,"div",34),W(3,ka,1,1,null,null,H),r()()()),n&2){let e=a(2);i(3),N(e.isMultiStep?e.getUngroupedFieldsOnScreen():e.getUngroupedFields())}}function Oa(n,d){if(n&1&&(l(0,"mat-panel-description"),c(1),r()),n&2){let e=a().$implicit;i(),x(e.description)}}function Pa(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ia(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Ra(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Pa,2,0,"span",59),r(),I(5,"input",60),r(),u(6,Ia,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Wa(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Na(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function $a(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Wa,2,0,"span",59),r(),I(5,"textarea",176),r(),u(6,Na,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Da(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Aa(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Va(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Da,2,0,"span",59),r(),I(5,"input",177),r(),u(6,Aa,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function La(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ua(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Ba(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function qa(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,La,2,0,"span",59),r(),l(5,"mat-select",77),W(6,Ua,2,2,"mat-option",73,q),r()(),u(8,Ba,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function Ga(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ha(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Ya(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function za(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Ga,2,0,"span",59),r(),l(5,"mat-select",182),W(6,Ha,2,2,"mat-option",73,q),r()(),u(8,Ya,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function Ja(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Xa(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function ja(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Ja,2,0,"span",59),r(),l(5,"span",183),c(6,"$\xA0"),r(),I(7,"input",184),r(),u(8,Xa,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(3),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?8:-1)}}function Ka(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Qa(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Za(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Ka,2,0,"span",59),r(),I(5,"input",185),r(),u(6,Qa,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function er(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function tr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function nr(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,er,2,0,"span",59),r(),I(5,"input",186),r(),u(6,tr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function ir(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function or(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function ar(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,ir,2,0,"span",59),r(),I(5,"input",187),r(),u(6,or,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function rr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function lr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function _r(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,rr,2,0,"span",59),r(),I(5,"input",68)(6,"mat-datepicker-toggle",69)(7,"mat-datepicker",70,4),r(),u(9,lr,2,1,"div",61),r()),n&2){let e=X(8),t=a(2).$implicit,o=a(4);i(),w("field-invalid",o.hasFieldError(t)),i(2),x(t.label),i(),p(o.isFieldRequired(t)?4:-1),i(),F("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),i(),F("for",e)("disabled",o.isFieldReadonly(t)),i(),F("disabled",o.isFieldReadonly(t)),i(2),p(o.hasFieldError(t)?9:-1)}}function dr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function cr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function sr(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,dr,2,0,"span",59),r(),I(5,"input",71),r(),u(6,cr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function mr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Cr(n,d){if(n&1&&(l(0,"mat-radio-button",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function pr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function ur(n,d){if(n&1&&(l(0,"div",75)(1,"label",76),c(2),u(3,mr,2,0,"span",59),r(),l(4,"mat-radio-group",77),W(5,Cr,2,2,"mat-radio-button",73,q),r(),u(7,pr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function xr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function fr(n,d){if(n&1&&(l(0,"div",37)(1,"mat-checkbox",77),c(2),r(),u(3,xr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),x(e.label),i(),p(t.hasFieldError(e)?3:-1)}}function gr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Fr(n,d){if(n&1){let e=$();l(0,"mat-checkbox",82),O("change",function(o){let s=M(e).$implicit,C=a(3).$implicit,v=a(4);return k(v.onCheckboxGroupChange(C.name,s.value,o.checked))}),c(1),r()}if(n&2){let e=d.$implicit,t=a(3).$implicit,o=a(4);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),A(" ",e.label||e.value," ")}}function hr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function vr(n,d){if(n&1&&(l(0,"div",79)(1,"label",76),c(2),u(3,gr,2,0,"span",59),r(),l(4,"div",80),W(5,Fr,2,3,"mat-checkbox",81,q),r(),u(7,hr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),N(e.options||ce(7,Wt)),i(2),p(t.hasFieldError(e)?7:-1)}}function Er(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Sr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function br(n,d){if(n&1){let e=$();l(0,"div",83)(1,"label",76),c(2),u(3,Er,2,0,"span",59),r(),l(4,"input",84),O("change",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onFileSelect(o,s.name))}),r(),u(5,Sr,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("multiple",e.multiple)("disabled",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?5:-1)}}function wr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Tr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Mr(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,wr,2,0,"span",59),r(),I(5,"input",188),r(),u(6,Tr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function kr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function yr(n,d){if(n&1&&(l(0,"mat-option",73)(1,"div",90)(2,"mat-icon"),c(3,"person"),r(),l(4,"div",91)(5,"span",92),c(6),r(),l(7,"span",93),c(8),r()()()()),n&2){let e=d.$implicit;F("value",e),i(6),ee("",e.firstName," ",e.lastName,""),i(2),x(e.email)}}function Or(n,d){n&1&&(l(0,"mat-option",89),c(1,"No users found"),r())}function Pr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Ir(n,d){if(n&1){let e=$();l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,kr,2,0,"span",59),r(),l(5,"mat-icon",64),c(6,"person_search"),r(),l(7,"input",87),O("input",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onUserSearch(o,s.name))}),r(),l(8,"mat-autocomplete",88,5),O("optionSelected",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onUserSelected(o,s.name))}),W(10,yr,9,4,"mat-option",73,H),u(12,Or,2,0,"mat-option",89),r()(),u(13,Pr,2,1,"div",61),r()}if(n&2){let e=X(9),t=a(2).$implicit,o=a(4);i(),w("field-invalid",o.hasFieldError(t)),i(2),x(t.label),i(),p(o.isFieldRequired(t)?4:-1),i(3),F("formControlName",t.name)("matAutocomplete",e)("placeholder",t.placeholder||"Search for a user...")("readonly",o.isFieldReadonly(t)),i(),F("displayWith",o.displayUserFn),i(2),N(o.getFilteredUsers(t.name)),i(2),p(o.getFilteredUsers(t.name).length===0&&o.userSearchTerms[t.name]?12:-1),i(),p(o.hasFieldError(t)?13:-1)}}function Rr(n,d){if(n&1&&I(0,"input",41),n&2){let e=a(2).$implicit;F("formControlName",e.name)}}function Wr(n,d){if(n&1&&(l(0,"p",95),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.defaultValue)}}function Nr(n,d){if(n&1&&(l(0,"div",42)(1,"p",94),c(2),r(),u(3,Wr,2,1,"p",95),r()),n&2){let e=a(2).$implicit;i(2),x(e.label),i(),p(e.defaultValue?3:-1)}}function $r(n,d){if(n&1&&(l(0,"span",96),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.label)}}function Dr(n,d){if(n&1&&(l(0,"div",43),I(1,"mat-divider"),u(2,$r,2,1,"span",96),r()),n&2){let e=a(2).$implicit;i(2),p(e.label?2:-1)}}function Ar(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Vr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Lr(n,d){if(n&1&&(l(0,"div",44)(1,"mat-slide-toggle",77),c(2),u(3,Ar,2,0,"span",59),r(),u(4,Vr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(" ",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),p(t.hasFieldError(e)?4:-1)}}function Ur(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Br(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function qr(n,d){if(n&1&&(l(0,"div",97)(1,"label",76),c(2),u(3,Ur,2,0,"span",59),r(),l(4,"mat-button-toggle-group",77)(5,"mat-button-toggle",98),c(6,"Yes"),r(),l(7,"mat-button-toggle",99),c(8,"No"),r()(),u(9,Br,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(5),p(t.hasFieldError(e)?9:-1)}}function Gr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Hr(n,d){if(n&1){let e=$();l(0,"mat-icon",103),O("click",function(){let o=M(e).$implicit,s=a(3).$implicit,C=a(4);return k(C.setRating(s,o))}),c(1),r()}if(n&2){let e=d.$implicit,t=a(3).$implicit,o=a(4);w("filled",o.getRatingValue(t)>=e)("readonly",o.isFieldReadonly(t)),i(),A(" ",o.getRatingValue(t)>=e?"star":"star_border"," ")}}function Yr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function zr(n,d){if(n&1&&(l(0,"div",100)(1,"label",76),c(2),u(3,Gr,2,0,"span",59),r(),l(4,"div",101),W(5,Hr,2,5,"mat-icon",102,oe),r(),u(7,Yr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(2),N(t.getStarArray(e)),i(2),p(t.hasFieldError(e)?7:-1)}}function Jr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Xr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function jr(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Jr,2,0,"span",59),r(),I(5,"input",104),r(),u(6,Xr,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function Kr(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Qr(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Zr(n,d){if(n&1&&(l(0,"div",105)(1,"label",76),c(2),u(3,Kr,2,0,"span",59),r(),l(4,"mat-slider",106),I(5,"input",107),r(),u(6,Qr,2,1,"div",61),r()),n&2){let e,t=a(2).$implicit,o=a(4);w("has-error",o.hasFieldError(t)),i(2),ee("",t.label,": ",((e=o.form.get(t.name))==null?null:e.value)||0," "),i(),p(o.isFieldRequired(t)?3:-1),i(),F("min",t.sliderMin||0)("max",t.sliderMax||100)("step",t.sliderStep||1)("discrete",!0)("disabled",o.isFieldReadonly(t)),i(),F("formControlName",t.name),i(),p(o.hasFieldError(t)?6:-1)}}function el(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function tl(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function nl(n,d){if(n&1&&(l(0,"div",108)(1,"label",76),c(2),u(3,el,2,0,"span",59),r(),I(4,"input",109),u(5,tl,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?5:-1)}}function il(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function ol(n,d){if(n&1&&I(0,"img",114),n&2){let e=a(3).$implicit,t=a(4);F("src",t.getImagePreview(e),le)}}function al(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function rl(n,d){if(n&1){let e=$();l(0,"div",110)(1,"label",76),c(2),u(3,il,2,0,"span",59),r(),l(4,"div",111)(5,"input",112,6),O("change",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onImageSelect(o,s))}),r(),l(7,"button",113),O("click",function(){M(e);let o=X(6);return k(o.click())}),l(8,"mat-icon"),c(9,"add_photo_alternate"),r(),c(10," Select Image "),r(),u(11,ol,1,1,"img",114),r(),u(12,al,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(4),F("disabled",t.isFieldReadonly(e)),i(4),p(t.getImagePreview(e)?11:-1),i(),p(t.hasFieldError(e)?12:-1)}}function ll(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function _l(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function dl(n,d){if(n&1){let e=$();l(0,"div",115)(1,"label",76),c(2),u(3,ll,2,0,"span",59),r(),l(4,"div",116)(5,"canvas",117),O("mousedown",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.startSignature(o,s))})("mousemove",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.drawSignature(o,s))})("mouseup",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.endSignature(o))})("mouseleave",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.endSignature(o))})("touchstart",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.startSignatureTouch(o,s))})("touchmove",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.drawSignatureTouch(o,s))})("touchend",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.endSignature(o))}),r(),l(6,"div",118)(7,"button",119),O("click",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.clearSignature(o))}),l(8,"mat-icon"),c(9,"clear"),r()()()(),u(10,_l,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(2),Z("data-field",e.name),i(2),F("disabled",t.isFieldReadonly(e)),i(3),p(t.hasFieldError(e)?10:-1)}}function cl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function sl(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function ml(n,d){if(n&1){let e=$();l(0,"div",120)(1,"label",76),c(2),u(3,cl,2,0,"span",59),r(),l(4,"div",121)(5,"div",122)(6,"button",123),O("click",function(){M(e);let o=a(6);return k(o.execRichTextCommand("bold"))}),l(7,"mat-icon"),c(8,"format_bold"),r()(),l(9,"button",124),O("click",function(){M(e);let o=a(6);return k(o.execRichTextCommand("italic"))}),l(10,"mat-icon"),c(11,"format_italic"),r()(),l(12,"button",125),O("click",function(){M(e);let o=a(6);return k(o.execRichTextCommand("underline"))}),l(13,"mat-icon"),c(14,"format_underlined"),r()(),I(15,"span",126),l(16,"button",127),O("click",function(){M(e);let o=a(6);return k(o.execRichTextCommand("insertUnorderedList"))}),l(17,"mat-icon"),c(18,"format_list_bulleted"),r()(),l(19,"button",128),O("click",function(){M(e);let o=a(6);return k(o.execRichTextCommand("insertOrderedList"))}),l(20,"mat-icon"),c(21,"format_list_numbered"),r()()(),l(22,"div",129),O("input",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onRichTextInput(o,s))})("blur",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onRichTextBlur(o,s))}),r()(),u(23,sl,2,1,"div",61),r()}if(n&2){let e,t=a(2).$implicit,o=a(4);w("has-error",o.hasFieldError(t)),i(2),A("",t.label," "),i(),p(o.isFieldRequired(t)?3:-1),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(4),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),w("readonly",o.isFieldReadonly(t)),F("innerHTML",((e=o.form.get(t.name))==null?null:e.value)||"",re),Z("data-field",t.name),i(),p(o.hasFieldError(t)?23:-1)}}function Cl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function pl(n,d){if(n&1&&(l(0,"mat-icon"),c(1),r(),l(2,"span"),c(3),r()),n&2){let e,t,o=a(3).$implicit,s=a(4);i(),x((e=s.form.get(o.name))==null?null:e.value),i(2),x((t=s.form.get(o.name))==null?null:t.value)}}function ul(n,d){n&1&&(l(0,"mat-icon"),c(1,"emoji_symbols"),r(),l(2,"span"),c(3,"Select an icon..."),r())}function xl(n,d){if(n&1){let e=$();l(0,"div",138),O("click",function(){let o=M(e).$implicit,s=a(4).$implicit,C=a(4);return k(C.selectIcon(s,o))}),l(1,"mat-icon"),c(2),r()()}if(n&2){let e,t=d.$implicit,o=a(4).$implicit,s=a(4);w("selected",((e=s.form.get(o.name))==null?null:e.value)===t),i(2),x(t)}}function fl(n,d){if(n&1){let e=$();l(0,"div",134)(1,"input",135),O("input",function(o){M(e);let s=a(3).$implicit,C=a(4);return k(C.onIconSearch(o,s))}),r(),l(2,"div",136),W(3,xl,3,3,"div",137,oe),r()()}if(n&2){let e=a(3).$implicit,t=a(4);i(),F("value",t.iconSearchText[e.name]||""),i(2),N(t.getFilteredIcons(e))}}function gl(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Fl(n,d){if(n&1){let e=$();l(0,"div",130)(1,"label",76),c(2),u(3,Cl,2,0,"span",59),r(),l(4,"div",131)(5,"div",132),O("click",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.toggleIconPicker(o))}),u(6,pl,4,2)(7,ul,4,0),l(8,"mat-icon",133),c(9,"arrow_drop_down"),r()(),u(10,fl,5,1,"div",134),r(),u(11,gl,2,1,"div",61),r()}if(n&2){let e,t=a(2).$implicit,o=a(4);w("has-error",o.hasFieldError(t)),i(2),A("",t.label," "),i(),p(o.isFieldRequired(t)?3:-1),i(2),w("disabled",o.isFieldReadonly(t)),i(),p((e=o.form.get(t.name))!=null&&e.value?6:7),i(4),p(o.isIconPickerOpen(t)?10:-1),i(),p(o.hasFieldError(t)?11:-1)}}function hl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function vl(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function El(n,d){if(n&1){let e=$();l(0,"div",139)(1,"label",76),c(2),u(3,hl,2,0,"span",59),r(),l(4,"div",140)(5,"mat-form-field",58)(6,"mat-label"),c(7,"Barcode/QR Code"),r(),I(8,"input",141),l(9,"button",142),O("click",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.scanBarcode(o))}),l(10,"mat-icon"),c(11,"qr_code_scanner"),r()()()(),u(12,vl,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(5),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)),i(3),p(t.hasFieldError(e)?12:-1)}}function Sl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function bl(n,d){n&1&&(l(0,"mat-icon",149),c(1,"sync"),r())}function wl(n,d){n&1&&(l(0,"mat-icon"),c(1,"my_location"),r())}function Tl(n,d){if(n&1&&(l(0,"div",150)(1,"mat-icon"),c(2,"place"),r(),l(3,"span"),c(4),r()()),n&2){let e=a(3).$implicit,t=a(4);i(4),x(t.getLocationDisplay(e))}}function Ml(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function kl(n,d){if(n&1){let e=$();l(0,"div",143)(1,"label",76),c(2),u(3,Sl,2,0,"span",59),r(),l(4,"div",144)(5,"div",145)(6,"mat-form-field",146)(7,"mat-label"),c(8,"Latitude"),r(),l(9,"input",147),O("input",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onLocationLatChange(o,s))}),r()(),l(10,"mat-form-field",146)(11,"mat-label"),c(12,"Longitude"),r(),l(13,"input",147),O("input",function(o){M(e);let s=a(2).$implicit,C=a(4);return k(C.onLocationLngChange(o,s))}),r()(),l(14,"button",148),O("click",function(){M(e);let o=a(2).$implicit,s=a(4);return k(s.getCurrentLocation(o))}),u(15,bl,2,0,"mat-icon",149)(16,wl,2,0,"mat-icon"),r()(),u(17,Tl,5,1,"div",150),r(),u(18,Ml,2,1,"div",61),r()}if(n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(6),F("value",t.getLocationLat(e))("readonly",t.isFieldReadonly(e)),i(4),F("value",t.getLocationLng(e))("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)||t.isGettingLocation(e)),i(),p(t.isGettingLocation(e)?15:16),i(2),p(t.getLocationDisplay(e)?17:-1),i(),p(t.hasFieldError(e)?18:-1)}}function yl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Ol(n,d){if(n&1&&(l(0,"th"),c(1),r()),n&2){let e=d.$implicit;J("width",e.width?e.width+"px":"auto"),i(),x(e.label)}}function Pl(n,d){n&1&&(l(0,"th",155),c(1,"Actions"),r())}function Il(n,d){if(n&1){let e=$();l(0,"input",160),O("input",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(4);return k(b.onTableCellChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(4);F("value",t[e.name]||"")("readonly",s.isColumnReadonly(o,e))}}function Rl(n,d){if(n&1){let e=$();l(0,"input",161),O("input",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(4);return k(b.onTableCellChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(4);F("value",t[e.name]||"")("readonly",s.isColumnReadonly(o,e))}}function Wl(n,d){if(n&1){let e=$();l(0,"mat-checkbox",82),O("change",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(4);return k(b.onTableCheckboxChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(4);F("checked",t[e.name]==="true"||t[e.name]===!0)("disabled",s.isColumnReadonly(o,e))}}function Nl(n,d){if(n&1){let e=$();l(0,"input",162),O("input",function(o){M(e);let s=a().$implicit,C=a().$index,v=a(3).$implicit,b=a(4);return k(b.onTableCellChange(o,v,C,s.name))}),r()}if(n&2){let e=a().$implicit,t=a().$implicit,o=a(3).$implicit,s=a(4);F("value",t[e.name]||"")("readonly",s.isColumnReadonly(o,e))}}function $l(n,d){if(n&1&&(l(0,"td"),u(1,Il,1,2,"input",157)(2,Rl,1,2,"input",158)(3,Wl,1,2,"mat-checkbox",81)(4,Nl,1,2,"input",159),r()),n&2){let e,t=d.$implicit;J("width",t.width?t.width+"px":"auto"),i(),p((e=t.type)==="NUMBER"?1:e==="DATE"?2:e==="CHECKBOX"?3:4)}}function Dl(n,d){if(n&1){let e=$();l(0,"td",155)(1,"button",163),O("click",function(){M(e);let o=a().$index,s=a(3).$implicit,C=a(4);return k(C.removeTableRow(s,o))}),l(2,"mat-icon"),c(3,"delete"),r()()()}if(n&2){let e=a(4).$implicit,t=a(4);i(),F("disabled",!t.canRemoveTableRow(e))}}function Al(n,d){if(n&1&&(l(0,"tr"),W(1,$l,5,3,"td",154,ne),u(3,Dl,4,1,"td",155),r()),n&2){let e=a(3).$implicit,t=a(4);i(),N(t.getTableColumns(e)),i(2),p(t.isTableFullyReadonly(e)?-1:3)}}function Vl(n,d){n&1&&c(0," No data available. ")}function Ll(n,d){n&1&&c(0,' No rows added. Click "Add Row" to add data. ')}function Ul(n,d){if(n&1&&(l(0,"tr")(1,"td",164),u(2,Vl,1,0)(3,Ll,1,0),r()()),n&2){let e=a(3).$implicit,t=a(4);i(),Z("colspan",t.isTableFullyReadonly(e)?t.getTableColumns(e).length:t.getTableColumns(e).length+1),i(),p(t.isTableFullyReadonly(e)?2:3)}}function Bl(n,d){if(n&1&&(l(0,"span",166),c(1),r()),n&2){let e=a(4).$implicit,t=a(4);i(),ee("",t.getTableRows(e).length," / ",e.tableMaxRows," rows")}}function ql(n,d){if(n&1){let e=$();l(0,"div",156)(1,"button",165),O("click",function(){M(e);let o=a(3).$implicit,s=a(4);return k(s.addTableRow(o))}),l(2,"mat-icon"),c(3,"add"),r(),c(4," Add Row "),r(),u(5,Bl,2,2,"span",166),r()}if(n&2){let e=a(3).$implicit,t=a(4);i(),F("disabled",!t.canAddTableRow(e)),i(4),p(e.tableMaxRows?5:-1)}}function Gl(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Hl(n,d){if(n&1&&(l(0,"div",151)(1,"label",76),c(2),u(3,yl,2,0,"span",59),r(),l(4,"div",152)(5,"table",153)(6,"thead")(7,"tr"),W(8,Ol,2,3,"th",154,ne),u(10,Pl,2,0,"th",155),r()(),l(11,"tbody"),W(12,Al,4,1,"tr",null,de),u(14,Ul,4,2,"tr"),r()(),u(15,ql,6,2,"div",156),r(),u(16,Gl,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);w("has-error",t.hasFieldError(e))("readonly-table",t.isFieldReadonly(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(2),w("table-striped",e.tableStriped!==!1)("table-bordered",e.tableBordered!==!1),i(3),N(t.getTableColumns(e)),i(2),p(t.isTableFullyReadonly(e)?-1:10),i(2),N(t.getTableRows(e)),i(2),p(t.getTableRows(e).length===0?14:-1),i(),p(t.isTableFullyReadonly(e)?-1:15),i(),p(t.hasFieldError(e)?16:-1)}}function Yl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function zl(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Jl(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Xl(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,Yl,2,0,"span",59),r(),l(5,"mat-select",72),W(6,zl,2,2,"mat-option",73,q),r()(),u(8,Jl,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function jl(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Kl(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function Ql(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function Zl(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,jl,2,0,"span",59),r(),l(5,"mat-select",74),W(6,Kl,2,2,"mat-option",73,q),r()(),u(8,Ql,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function e_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function t_(n,d){if(n&1&&(l(0,"mat-radio-button",78),c(1),r()),n&2){let e=d.$implicit,t=a(4).$implicit,o=a(4);F("value",e.value)("disabled",o.isFieldReadonly(t)),i(),x(e.label)}}function n_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function i_(n,d){if(n&1&&(l(0,"div",75)(1,"label",76),c(2),u(3,e_,2,0,"span",59),r(),l(4,"mat-radio-group",77),W(5,t_,2,3,"mat-radio-button",78,q),r(),u(7,n_,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function o_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function a_(n,d){if(n&1){let e=$();l(0,"mat-checkbox",82),O("change",function(o){let s=M(e).$implicit,C=a(4).$implicit,v=a(4);return k(v.onCheckboxGroupChange(C.name,s.value,o.checked))}),c(1),r()}if(n&2){let e=d.$implicit,t=a(4).$implicit,o=a(4);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),A(" ",e.label," ")}}function r_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function l_(n,d){if(n&1&&(l(0,"div",168)(1,"label",76),c(2),u(3,o_,2,0,"span",59),r(),l(4,"div",169),W(5,a_,2,3,"mat-checkbox",81,q),r(),u(7,r_,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(4);w("has-error",t.hasFieldError(e)),i(2),A("",e.label," "),i(),p(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),N(e.options),i(2),p(t.hasFieldError(e)?7:-1)}}function __(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function d_(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function c_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(4).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function s_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,__,2,0,"span",59),r(),l(5,"mat-select",72),W(6,d_,2,2,"mat-option",73,q),r()(),u(8,c_,2,1,"div",61),r()),n&2){let e=a(3).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function m_(n,d){if(n&1&&u(0,Xl,9,8,"div",37)(1,Zl,9,8,"div",37)(2,i_,8,9,"div",38)(3,l_,8,7,"div",167)(4,s_,9,8,"div",37),n&2){let e,t=a(2).$implicit;p((e=t.viewType)==="SELECT"?0:e==="MULTISELECT"?1:e==="RADIO"?2:e==="CHECKBOX_GROUP"?3:4)}}function C_(n,d){if(n&1&&(l(0,"label",171),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.label)}}function p_(n,d){if(n&1&&(l(0,"mat-icon",174),c(1),r()),n&2){let e=a().$implicit;i(),x(e.collapsibleIcon)}}function u_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function x_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(8);i(),x(t.getFieldErrorMessage(e))}}function f_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,u_,2,0,"span",59),r(),I(5,"input",60),r(),u(6,x_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(8);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function g_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function F_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(8);i(),x(t.getFieldErrorMessage(e))}}function h_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,g_,2,0,"span",59),r(),I(5,"textarea",176),r(),u(6,F_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(8);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function v_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function E_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(8);i(),x(t.getFieldErrorMessage(e))}}function S_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,v_,2,0,"span",59),r(),I(5,"input",177),r(),u(6,E_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(8);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function b_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function w_(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function T_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(8);i(),x(t.getFieldErrorMessage(e))}}function M_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,b_,2,0,"span",59),r(),l(5,"mat-select",77),W(6,w_,2,2,"mat-option",73,q),r()(),u(8,T_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(8);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function k_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function y_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(8);i(),x(t.getFieldErrorMessage(e))}}function O_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,k_,2,0,"span",59),r(),I(5,"input",68)(6,"mat-datepicker-toggle",69)(7,"mat-datepicker",70,7),r(),u(9,y_,2,1,"div",61),r()),n&2){let e=X(8),t=a(2).$implicit,o=a(8);i(),w("field-invalid",o.hasFieldError(t)),i(2),x(t.label),i(),p(o.isFieldRequired(t)?4:-1),i(),F("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),i(),F("for",e)("disabled",o.isFieldReadonly(t)),i(),F("disabled",o.isFieldReadonly(t)),i(2),p(o.hasFieldError(t)?9:-1)}}function P_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(8);i(),x(t.getFieldErrorMessage(e))}}function I_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-checkbox",77),c(2),r(),u(3,P_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(8);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),x(e.label),i(),p(t.hasFieldError(e)?3:-1)}}function R_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),r(),I(4,"input",178),r()()),n&2){let e=a(2).$implicit,t=a(8);i(3),x(e.label),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e))}}function W_(n,d){if(n&1&&(l(0,"div",36),u(1,f_,7,8,"div",37)(2,h_,7,7,"div",37)(3,S_,7,7,"div",37)(4,M_,9,7,"div",37)(5,O_,10,11,"div",37)(6,I_,4,4,"div",37)(7,R_,5,3,"div",37),r()),n&2){let e,t=a().$implicit;J("grid-column","span "+(t.columnSpan||2)),i(),p((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="SELECT"?4:e==="DATE"?5:e==="CHECKBOX"?6:7)}}function N_(n,d){if(n&1&&u(0,W_,8,3,"div",35),n&2){let e=d.$implicit,t=a(8);p(t.isFieldVisible(e)?0:-1)}}function $_(n,d){if(n&1){let e=$();c(0),l(1,"mat-expansion-panel",173),O("opened",function(){let o=M(e).$index,s=a(3).$implicit,C=a(4);return k(C.openCollapsible(s,o))})("closed",function(){let o=M(e).$index,s=a(3).$implicit,C=a(4);return k(C.closeCollapsible(s,o))}),l(2,"mat-expansion-panel-header")(3,"mat-panel-title"),u(4,p_,2,1,"mat-icon",174),c(5),r()(),l(6,"div",175),W(7,N_,1,1,null,null,H),r()()}if(n&2){let e=d.$implicit,t=d.$index,o=a(3).$implicit,s=a(4);A(" ",s.initAccordionState(o)," "),i(),F("expanded",s.isCollapsibleExpanded(o.id,t)),i(3),p(e.collapsibleIcon?4:-1),i(),A(" ",e.collapsibleTitle||e.label," "),i(2),N(s.getFieldsInCollapsible(e.id))}}function D_(n,d){if(n&1&&(l(0,"div",170),u(1,C_,2,1,"label",171),l(2,"mat-accordion",172),W(3,$_,9,4,null,null,H),r()()),n&2){let e,t=a(2).$implicit,o=a(4);w("has-error",o.hasFieldError(t)),i(),p(t.label?1:-1),i(),_e("workflow-accordion ",o.getAccordionAnimationClass(t),""),F("multi",(e=t.accordionAllowMultiple)!==null&&e!==void 0?e:!1),i(),N(o.getCollapsiblesForAccordion(t.id))}}function A_(n,d){if(n&1&&(l(0,"mat-icon",174),c(1),r()),n&2){let e=a(3).$implicit;i(),x(e.collapsibleIcon)}}function V_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function L_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function U_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,V_,2,0,"span",59),r(),I(5,"input",60),r(),u(6,L_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function B_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function q_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function G_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,B_,2,0,"span",59),r(),I(5,"input",177),r(),u(6,q_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?6:-1)}}function H_(n,d){n&1&&(l(0,"span",59),c(1,"*"),r())}function Y_(n,d){if(n&1&&(l(0,"mat-option",73),c(1),r()),n&2){let e=d.$implicit;F("value",e.value),i(),x(e.label)}}function z_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(7);i(),x(t.getFieldErrorMessage(e))}}function J_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),u(4,H_,2,0,"span",59),r(),l(5,"mat-select",77),W(6,Y_,2,2,"mat-option",73,q),r()(),u(8,z_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(7);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),p(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),N(e.options),i(2),p(t.hasFieldError(e)?8:-1)}}function X_(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),r(),I(4,"input",178),r()()),n&2){let e=a(2).$implicit,t=a(7);i(3),x(e.label),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e))}}function j_(n,d){if(n&1&&(l(0,"div",36),u(1,U_,7,8,"div",37)(2,G_,7,7,"div",37)(3,J_,9,7,"div",37)(4,X_,5,3,"div",37),r()),n&2){let e,t=a().$implicit;J("grid-column","span "+(t.columnSpan||2)),i(),p((e=t.type)==="TEXT"?1:e==="NUMBER"?2:e==="SELECT"?3:4)}}function K_(n,d){if(n&1&&u(0,j_,5,3,"div",35),n&2){let e=d.$implicit,t=a(7);p(t.isFieldVisible(e)?0:-1)}}function Q_(n,d){if(n&1&&(l(0,"div",57)(1,"mat-expansion-panel",179)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),u(4,A_,2,1,"mat-icon",174),c(5),r()(),l(6,"div",175),W(7,K_,1,1,null,null,H),r()()()),n&2){let e,t=a(2).$implicit,o=a(4);i(),F("expanded",(e=t.collapsibleDefaultExpanded)!==null&&e!==void 0?e:!1),i(3),p(t.collapsibleIcon?4:-1),i(),A(" ",t.collapsibleTitle||t.label," "),i(2),N(o.getFieldsInCollapsible(t.id))}}function Z_(n,d){if(n&1&&(l(0,"div",61),c(1),r()),n&2){let e=a(3).$implicit,t=a(4);i(),x(t.getFieldErrorMessage(e))}}function ed(n,d){if(n&1&&(l(0,"div",37)(1,"mat-form-field",58)(2,"mat-label"),c(3),r(),I(4,"input",178),r(),u(5,Z_,2,1,"div",61),r()),n&2){let e=a(2).$implicit,t=a(4);i(),w("field-invalid",t.hasFieldError(e)),i(2),x(e.label),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),p(t.hasFieldError(e)?5:-1)}}function td(n,d){if(n&1&&(l(0,"div",36),u(1,Ra,7,8,"div",37)(2,$a,7,7,"div",37)(3,Va,7,7,"div",37)(4,qa,9,7,"div",37)(5,za,9,7,"div",37)(6,ja,9,7,"div",37)(7,Za,7,7,"div",37)(8,nr,7,7,"div",37)(9,ar,7,7,"div",37)(10,_r,10,11,"div",37)(11,sr,7,7,"div",37)(12,ur,8,9,"div",38)(13,fr,4,4,"div",37)(14,vr,8,8,"div",39)(15,br,6,7,"div",40)(16,Mr,7,7,"div",37)(17,Ir,14,11,"div",37)(18,Rr,1,1,"input",41)(19,Nr,4,2,"div",42)(20,Dr,3,1,"div",43)(21,Lr,5,5,"div",44)(22,qr,10,7,"div",45)(23,zr,8,5,"div",46)(24,jr,7,7,"div",37)(25,Zr,7,12,"div",47)(26,nl,6,7,"div",48)(27,rl,13,7,"div",49)(28,dl,11,7,"div",50)(29,ml,24,14,"div",51)(30,Fl,12,9,"div",52)(31,El,13,8,"div",53)(32,kl,19,12,"div",54)(33,Hl,17,14,"div",55)(34,m_,5,1)(35,D_,5,7,"div",56)(36,Q_,9,3,"div",57)(37,ed,6,6,"div",37),r()),n&2){let e,t=a().$implicit;J("grid-column","span "+(t.columnSpan||2)),i(),p((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="SELECT"?4:e==="MULTISELECT"?5:e==="CURRENCY"?6:e==="EMAIL"?7:e==="PHONE"?8:e==="PASSWORD"?9:e==="DATE"?10:e==="DATETIME"?11:e==="RADIO"?12:e==="CHECKBOX"?13:e==="CHECKBOX_GROUP"?14:e==="FILE"?15:e==="URL"?16:e==="USER"?17:e==="HIDDEN"?18:e==="LABEL"?19:e==="DIVIDER"?20:e==="TOGGLE"?21:e==="YES_NO"?22:e==="RATING"?23:e==="TIME"?24:e==="SLIDER"?25:e==="COLOR"?26:e==="IMAGE"?27:e==="SIGNATURE"?28:e==="RICH_TEXT"?29:e==="ICON"?30:e==="BARCODE"?31:e==="LOCATION"?32:e==="TABLE"?33:e==="SQL_OBJECT"?34:e==="ACCORDION"?35:e==="COLLAPSIBLE"?36:37)}}function nd(n,d){if(n&1&&u(0,td,38,3,"div",35),n&2){let e=d.$implicit,t=a(4);p(t.isFieldVisible(e)?0:-1)}}function id(n,d){if(n&1&&(l(0,"mat-card",180)(1,"mat-expansion-panel",181)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),c(4),r(),u(5,Oa,2,1,"mat-panel-description"),r(),l(6,"div",34),W(7,nd,1,1,null,null,H),r()()()),n&2){let e=d.$implicit,t=a(3);i(),F("expanded",!e.collapsed)("hideToggle",!e.collapsible),i(3),x(e.title),i(),p(e.description?5:-1),i(2),N(t.getFieldsInGroup(e.id))}}function od(n,d){if(n&1&&W(0,id,9,4,"mat-card",180,H),n&2){let e=a(2);N(e.isMultiStep?e.getFieldGroupsOnScreen():e.fieldGroups)}}function ad(n,d){if(n&1){let e=$();l(0,"div",193)(1,"mat-icon"),c(2,"description"),r(),l(3,"span"),c(4),r(),l(5,"span",194),c(6),r(),l(7,"button",11),O("click",function(){let o=M(e).$index,s=a(4);return k(s.removeAttachment(o))}),l(8,"mat-icon"),c(9,"close"),r()()()}if(n&2){let e=d.$implicit,t=a(4);i(4),x(e.name),i(2),A("(",t.formatFileSize(e.size),")")}}function rd(n,d){if(n&1&&(l(0,"div",192),W(1,ad,10,2,"div",193,ne),r()),n&2){let e=a(3);i(),N(e.attachments)}}function ld(n,d){if(n&1){let e=$();l(0,"mat-card",18)(1,"mat-card-header")(2,"mat-card-title"),c(3,"Attachments"),r(),l(4,"mat-card-subtitle"),c(5,"Upload supporting documents"),r()(),l(6,"mat-card-content")(7,"div",189)(8,"input",190,8),O("change",function(o){M(e);let s=a(2);return k(s.onAttachmentSelect(o))}),r(),l(10,"button",191),O("click",function(){M(e);let o=X(9);return k(o.click())}),l(11,"mat-icon"),c(12,"attach_file"),r(),c(13," Add Attachments "),r(),u(14,rd,3,0,"div",192),r()()()}if(n&2){let e=a(2);i(14),p(e.attachments.length>0?14:-1)}}function _d(n,d){n&1&&(l(0,"th",29),c(1,"Screen"),r())}function dd(n,d){if(n&1&&(l(0,"td",29),c(1),r()),n&2){let e=a().$implicit,t=a(3);i(),x(t.getFieldScreenName(e))}}function cd(n,d){if(n&1&&(l(0,"tr"),u(1,dd,2,1,"td",29),l(2,"td",30),c(3),r(),l(4,"td",31),c(5),r()()),n&2){let e=d.$implicit,t=a(3);i(),p(t.isMultiStep?1:-1),i(2),x(e.label),i(2),x(t.getFieldDisplayValue(e))}}function sd(n,d){if(n&1&&(l(0,"mat-card",17)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),c(4,"summarize"),r(),c(5," Summary "),r()(),l(6,"mat-card-content")(7,"table",28)(8,"thead")(9,"tr"),u(10,_d,2,0,"th",29),l(11,"th",30),c(12,"Field"),r(),l(13,"th",31),c(14,"Value"),r()()(),l(15,"tbody"),W(16,cd,6,3,"tr",null,H),r()()()()),n&2){let e=a(2);i(10),p(e.isMultiStep?10:-1),i(6),N(e.getSummaryFields())}}function md(n,d){n&1&&I(0,"mat-spinner",197)}function Cd(n,d){n&1&&c(0," Submit for Approval ")}function pd(n,d){if(n&1){let e=$();l(0,"div",19)(1,"button",195),O("click",function(){M(e);let o=a(2);return k(o.goBack())}),c(2,"Cancel"),r(),l(3,"button",113),O("click",function(){M(e);let o=a(2);return k(o.saveDraft())}),c(4," Save Draft "),r(),l(5,"button",196),u(6,md,1,0,"mat-spinner",197)(7,Cd,1,0),r()()}if(n&2){let e=a(2);i(3),F("disabled",e.submitting),i(2),F("disabled",e.submitting),i(),p(e.submitting?6:7)}}function ud(n,d){if(n&1){let e=$();l(0,"button",195),O("click",function(){M(e);let o=a(3);return k(o.goBack())}),c(1,"Cancel"),r(),I(2,"span",198),l(3,"button",199),O("click",function(){M(e);let o=a(3);return k(o.goToNextScreen())}),c(4," Next "),l(5,"mat-icon"),c(6,"arrow_forward"),r()()}}function xd(n,d){n&1&&I(0,"mat-spinner",197)}function fd(n,d){n&1&&c(0," Submit for Approval ")}function gd(n,d){if(n&1){let e=$();l(0,"button",191),O("click",function(){M(e);let o=a(3);return k(o.goToPreviousScreen())}),l(1,"mat-icon"),c(2,"arrow_back"),r(),c(3," Back "),r(),I(4,"span",198),l(5,"button",195),O("click",function(){M(e);let o=a(3);return k(o.goBack())}),c(6,"Cancel"),r(),l(7,"button",113),O("click",function(){M(e);let o=a(3);return k(o.saveDraft())}),c(8," Save Draft "),r(),l(9,"button",196),u(10,xd,1,0,"mat-spinner",197)(11,fd,1,0),r()}if(n&2){let e=a(3);i(7),F("disabled",e.submitting),i(2),F("disabled",e.submitting),i(),p(e.submitting?10:11)}}function Fd(n,d){if(n&1){let e=$();l(0,"button",191),O("click",function(){M(e);let o=a(3);return k(o.goToPreviousScreen())}),l(1,"mat-icon"),c(2,"arrow_back"),r(),c(3," Back "),r(),I(4,"span",198),l(5,"button",199),O("click",function(){M(e);let o=a(3);return k(o.goToNextScreen())}),c(6," Next "),l(7,"mat-icon"),c(8,"arrow_forward"),r()()}}function hd(n,d){if(n&1&&(l(0,"div",20),u(1,ud,7,0)(2,gd,12,3)(3,Fd,9,0),r()),n&2){let e=a(2);i(),p(e.isFirstScreen?1:e.isLastScreen?2:3)}}function vd(n,d){if(n&1){let e=$();l(0,"form",16),O("ngSubmit",function(){M(e);let o=a();return k(o.onSubmit())}),u(1,qt,4,1)(2,Ht,14,0,"mat-card",17)(3,Yt,9,0,"mat-card",17)(4,ya,5,0,"mat-card",18)(5,od,2,0)(6,ld,15,1,"mat-card",18)(7,sd,18,1,"mat-card",17)(8,pd,8,3,"div",19)(9,hd,4,1,"div",20),r()}if(n&2){let e=a();F("formGroup",e.form),i(),p(e.isMultiStep?1:-1),i(),p(e.isSummaryScreen&&e.hasSummaryFields()?2:e.isSummaryScreen&&!e.hasSummaryFields()?3:-1),i(2),p(!e.isSummaryScreen&&(e.isMultiStep?e.getUngroupedFieldsOnScreen().length>0:e.getUngroupedFields().length>0)?4:-1),i(),p(e.isSummaryScreen?-1:5),i(),p(!e.isSummaryScreen&&e.workflow.requireAttachments?6:-1),i(),p(!e.isMultiStep&&(e.workflow!=null&&e.workflow.showSummary)&&e.hasSummaryFields()?7:-1),i(),p(e.isMultiStep?9:8)}}var xc=(()=>{class n{fb;userService;workflowService;authService;router;route;snackBar;cdr;workflow=null;form;loading=!0;submitting=!1;workflowCode="";fields=[];_ungroupedFields=[];_nestedFieldIds=new Set;fieldGroups=[];screens=[];currentScreenIndex=0;selectedFiles={};attachments=[];instanceId=null;isEditMode=!1;existingFieldValues={};checkboxGroupValues={};calculatedFields=new Map;subscriptions=[];timeBasedFields=new Map;validationErrors={};hasAttemptedSubmit=!1;pendingUniqueChecks=new Map;uniqueCheckCache=new Map;allUsers=[];filteredUsersMap={};userSearchTerms={};selectedUsers={};accordionExpandedState={};constructor(e,t,o,s,C,v,b,S){this.fb=e,this.userService=t,this.workflowService=o,this.authService=s,this.router=C,this.route=v,this.snackBar=b,this.cdr=S}ngOnInit(){this.workflowCode=this.route.snapshot.paramMap.get("workflowCode")||"",this.instanceId=this.route.snapshot.paramMap.get("instanceId")||null,this.isEditMode=!!this.instanceId,this.loadWorkflow(),this.loadUsers()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadWorkflow(){this.workflowService.getWorkflowByCode(this.workflowCode).subscribe({next:e=>{e.success?(this.workflow=e.data,this.isEditMode&&this.instanceId?this.loadInstance():(this.loading=!1,this.initializeForm())):this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Failed to load workflow","Close",{duration:3e3})}})}loadInstance(){this.workflowService.getInstance(this.instanceId).subscribe({next:e=>{if(e.success&&e.data&&e.data.fieldValues){let t=e.data.fieldValues;Array.isArray(t)?t.forEach(o=>{this.existingFieldValues[o.fieldName]=o.value}):typeof t=="object"&&Object.keys(t).forEach(o=>{this.existingFieldValues[o]=t[o]})}this.loading=!1,this.initializeForm()},error:()=>{this.loading=!1,this.snackBar.open("Failed to load instance","Close",{duration:3e3})}})}initializeForm(){if(!this.workflow?.forms?.[0]){console.warn("No workflow forms found for initialization");return}this.calculatedFields.clear(),this.timeBasedFields.clear();let e=this.workflow.forms[0],t=e.fieldGroups||[],o=new Map;t.forEach(S=>{S.fields&&Array.isArray(S.fields)&&S.fields.forEach(_=>{let g=_.id?.toString();g&&o.set(g,S.id?.toString())})});let s=new Map;(e.fields||[]).forEach(S=>{let _=S.id?.toString();if(_){let g=S.fieldGroupId?.toString()||o.get(_)||null;s.set(_,Q(K({},S),{fieldGroupId:g,parentFieldId:S.parentFieldId||null}))}}),t.forEach(S=>{S.fields&&Array.isArray(S.fields)&&S.fields.forEach(_=>{let g=_.id?.toString();g&&!s.has(g)&&s.set(g,Q(K({},_),{fieldGroupId:S.id?.toString(),parentFieldId:_.parentFieldId||null}))})}),console.log("=== FIELD MAPPING DEBUG ==="),console.log("Raw fields from allFieldsMap:",Array.from(s.values()).map(S=>({id:S.id,name:S.name,type:S.type,fieldType:S.fieldType,parentFieldId:S.parentFieldId}))),this.fields=Array.from(s.values()).map(S=>{let _=(S.type||S.fieldType||"TEXT").toString().toUpperCase(),g=Q(K({},S),{type:_,fieldType:_,required:S.required??S.isMandatory??!1,hidden:S.hidden??S.isHidden??!1,readOnly:S.readOnly??S.isReadonly??!1,parentFieldId:S.parentFieldId||null});return S.parentFieldId&&console.log(`Field "${S.name}" mapped with parentFieldId: ${g.parentFieldId}`),g}),console.log("Mapped fields:",this.fields.map(S=>({id:S.id,name:S.name,type:S.type,parentFieldId:S.parentFieldId}))),this._nestedFieldIds=new Set,this.fields.forEach(S=>{S.parentFieldId&&(this._nestedFieldIds.add(S.id),console.log(`NESTED FIELD REGISTERED: "${S.name}" (id=${S.id}) -> parent=${S.parentFieldId}`))}),this._ungroupedFields=this.fields.filter(S=>{let _=this._nestedFieldIds.has(S.id),g=!!S.fieldGroupId,y=S.hidden||S.isHidden;return _&&console.log(`EXCLUDING FROM UNGROUPED: "${S.name}" - is nested field`),!_&&!g&&!y}),console.log("PRE-COMPUTED UNGROUPED FIELDS:",this._ungroupedFields.map(S=>S.name)),this.fieldGroups=t;let C=(e.screens||[]).sort((S,_)=>(S.displayOrder||0)-(_.displayOrder||0));this.screens=C.filter(S=>this.hasScreenAccess(S)),this.currentScreenIndex=0;let v=new Set(this.fields.map(S=>S.name)),b={};this.fields.forEach(S=>{let _=[];S.required&&_.push(se.required),S.type==="EMAIL"&&_.push(se.email);let g="";if(this.isEditMode&&this.existingFieldValues[S.name]!==void 0){if(g=this.existingFieldValues[S.name],S.type==="CHECKBOX")g=g==="true"||g===!0;else if(S.type==="NUMBER"||S.type==="CURRENCY")g=Number(g)||null;else if(S.type==="DATE"||S.type==="DATETIME")if(g){let y=g instanceof Date?g:new Date(g);isNaN(y.getTime())?g=null:g=S.type==="DATETIME"?this.formatDateTime(y):this.formatDate(y)}else g=null}else if(S.defaultValue){let y=this.extractFieldDependencies(S.defaultValue,v);if(y.length>0)this.calculatedFields.set(S.name,{expression:S.defaultValue,fieldType:S.type,dependencies:y}),g="";else if(this.isTimeBasedFunction(S.defaultValue)&&!this.isEditMode){if(this.timeBasedFields.set(S.name,{expression:S.defaultValue,fieldType:S.type}),g=this.evaluateDefaultValue(S.defaultValue,S.type),g instanceof Date)S.type==="DATETIME"?g=this.formatDateTime(g):S.type==="DATE"&&(g=this.formatDate(g));else if((S.type==="DATE"||S.type==="DATETIME")&&g){let U=new Date(g);isNaN(U.getTime())||(g=S.type==="DATETIME"?this.formatDateTime(U):this.formatDate(U))}}else if(g=this.evaluateDefaultValue(S.defaultValue,S.type),S.type==="CHECKBOX")g=g==="true"||g===!0||!1;else if(S.type==="NUMBER"||S.type==="CURRENCY")g=g?Number(g):null;else if(S.type==="DATE"||S.type==="DATETIME"){if(g instanceof Date)g=S.type==="DATETIME"?this.formatDateTime(g):this.formatDate(g);else if(g){let U=new Date(g);isNaN(U.getTime())||(g=S.type==="DATETIME"?this.formatDateTime(U):this.formatDate(U))}}}b[S.name]=[g,_]}),this.form=this.fb.group(b),this.setupCalculatedFieldSubscriptions(),this.calculatedFields.forEach((S,_)=>{this.recalculateField(_,S)}),this.setupValidationSubscriptions()}extractFieldDependencies(e,t){let o=[],s=e.match(/^([A-Z_]+)\((.*)\)$/i);if(!s)return o;let C=s[2];return C&&this.parseArgsRaw(C).forEach(b=>{let S=b.trim().replace(/^["']|["']$/g,"");!b.startsWith('"')&&!b.startsWith("'")&&t.has(S)&&o.push(S)}),o}parseArgsRaw(e){let t=[],o="",s=!1,C="";for(let v of e)(v==='"'||v==="'")&&!s?(s=!0,C=v,o+=v):v===C&&s?(s=!1,o+=v,C=""):v===","&&!s?(t.push(o.trim()),o=""):o+=v;return o&&t.push(o.trim()),t}setupCalculatedFieldSubscriptions(){this.calculatedFields.forEach((e,t)=>{let o=e.dependencies.map(s=>this.form.get(s)).filter(s=>s!==null);if(o.length>0){let C=Ce(...o.map(v=>v.valueChanges)).pipe(ae(100)).subscribe(()=>{this.recalculateField(t,e)});this.subscriptions.push(C)}})}setupValidationSubscriptions(){let e=this.form.valueChanges.pipe(ae(300)).subscribe(t=>{this.fields.forEach(o=>{if(o.validation&&/Unique\(/i.test(o.validation)){let s=t[o.name],C=[];this.uniqueCheckCache.forEach((v,b)=>{b.startsWith(`${o.name}:`)&&b!==`${o.name}:${s}`&&C.push(b)}),C.forEach(v=>this.uniqueCheckCache.delete(v))}}),this.clearValidationErrors()});this.subscriptions.push(e)}clearValidationErrors(){this.hasAttemptedSubmit=!1,this.fields.forEach(e=>{if(this.validationErrors[e.name]){this.validationErrors[e.name]=null;let o=this.form.get(e.name);if(o&&o.errors){let t=o.errors,{customValidation:s}=t,C=ie(t,["customValidation"]);o.setErrors(Object.keys(C).length>0?C:null)}}})}validateAllFields(){this.fields.forEach(e=>{if(e.validation){let o=this.evaluateValidation(e);this.validationErrors[e.name]=o;let s=this.form.get(e.name);if(s){if(o)s.setErrors(Q(K({},s.errors),{customValidation:o})),s.markAsTouched();else if(s.errors){let t=s.errors,{customValidation:C}=t,v=ie(t,["customValidation"]);s.setErrors(Object.keys(v).length>0?v:null)}}}}),this.cdr.detectChanges()}evaluateValidation(e){let t=e.validation;if(!t)return null;try{let o=t.split(/\s+AND\s+/i);for(let s of o){let C=s.trim(),v=this.evaluateSingleValidation(C,e);if(v)return v}return null}catch{return null}}evaluateSingleValidation(e,t){let o=this.form.get(t.name)?.value,s=t.label||t.name,C=e.match(/^Required\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(C){let V=C[1]||C[2];return o==null||o===""||typeof o=="string"&&o.trim()===""?V||`${s} is required`:null}let v=e.match(/^Unique\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(v){let V=v[1]||v[2];if(o==null||o===""||typeof o=="string"&&o.trim()==="")return null;let D=`${t.name}:${o}`;return this.uniqueCheckCache.has(D)?this.uniqueCheckCache.get(D)?null:V||`${s} value already exists`:(this.pendingUniqueChecks.get(D)||(this.pendingUniqueChecks.set(D,!0),this.checkUniqueField(t.name,String(o),V||`${s} value already exists`)),null)}let b=e.match(/^ValidWhen\(\s*(.+?)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(b){let V=b[1].trim(),D=b[2]||b[3],L=this.evaluateCondition(V);return L===!0||L==="true"||L===0||L==="0"?null:D||`${s} validation failed`}let S=e.match(/^InvalidWhen\(\s*(.+?)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(S){let V=S[1].trim(),D=S[2]||S[3],L=this.evaluateCondition(V);return L===!0||L==="true"||typeof L=="number"&&L!==0||typeof L=="string"&&L!=="0"&&L!=="false"&&L!==""?D||`${s} validation failed`:null}let _=e.match(/^MinLength\(\s*(\d+)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(_){let V=parseInt(_[1],10),D=_[2]||_[3];return(o?String(o):"").length<V?D||`${s} must be at least ${V} characters`:null}let g=e.match(/^MaxLength\(\s*(\d+)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(g){let V=parseInt(g[1],10),D=g[2]||g[3];return(o?String(o):"").length>V?D||`${s} must be at most ${V} characters`:null}let y=e.match(/^Min\(\s*(-?[\d.]+)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(y){let V=parseFloat(y[1]),D=y[2]||y[3],L=parseFloat(o);return!isNaN(L)&&L<V?D||`${s} must be at least ${V}`:null}let h=e.match(/^Max\(\s*(-?[\d.]+)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(h){let V=parseFloat(h[1]),D=h[2]||h[3],L=parseFloat(o);return!isNaN(L)&&L>V?D||`${s} must be at most ${V}`:null}let U=e.match(/^Pattern\(\s*\/(.+)\/([gimsuy]*)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(U){let V=U[1],D=U[2]||"",L=U[3]||U[4];try{let z=new RegExp(V,D),me=o?String(o):"";if(me&&!z.test(me))return L||`${s} format is invalid`}catch{}return null}let P=e.match(/^Email\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(P){let V=P[1]||P[2],D=o?String(o):"";return D&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)?V||`${s} must be a valid email address`:null}let G=e.match(/^Phone\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(G){let V=G[1]||G[2],D=o?String(o):"";return D&&!/^[\+]?[(]?[0-9]{1,4}[)]?[-\s\.]?[(]?[0-9]{1,4}[)]?[-\s\.]?[0-9]{1,9}$/.test(D.replace(/\s/g,""))?V||`${s} must be a valid phone number`:null}let te=e.match(/^URL\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(te){let V=te[1]||te[2],D=o?String(o):"";try{D&&new URL(D)}catch{return V||`${s} must be a valid URL`}return null}let m=e.match(/^Range\(\s*(-?[\d.]+)\s*,\s*(-?[\d.]+)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(m){let V=parseFloat(m[1]),D=parseFloat(m[2]),L=m[3]||m[4],z=parseFloat(o);return!isNaN(z)&&(z<V||z>D)?L||`${s} must be between ${V} and ${D}`:null}let f=e.match(/^LengthRange\(\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(f){let V=parseInt(f[1],10),D=parseInt(f[2],10),L=f[3]||f[4],z=o?String(o):"";return z.length<V||z.length>D?L||`${s} must be between ${V} and ${D} characters`:null}let E=e.match(/^Digits\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(E){let V=E[1]||E[2],D=o?String(o):"";return D&&!/^\d+$/.test(D)?V||`${s} must contain only digits`:null}let T=e.match(/^Alpha\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(T){let V=T[1]||T[2],D=o?String(o):"";return D&&!/^[a-zA-Z]+$/.test(D)?V||`${s} must contain only letters`:null}let R=e.match(/^AlphaNumeric\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(R){let V=R[1]||R[2],D=o?String(o):"";return D&&!/^[a-zA-Z0-9]+$/.test(D)?V||`${s} must contain only letters and numbers`:null}let B=e.match(/^Date\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(B){let V=B[1]||B[2],D=o?String(o):"";return D&&isNaN(Date.parse(D))?V||`${s} must be a valid date`:null}let Y=e.match(/^CreditCard\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(Y){let V=Y[1]||Y[2],D=o?String(o).replace(/[\s-]/g,""):"";return D&&!this.isValidCreditCard(D)?V||`${s} must be a valid credit card number`:null}return null}isValidCreditCard(e){if(!/^\d{13,19}$/.test(e))return!1;let t=0,o=!1;for(let s=e.length-1;s>=0;s--){let C=parseInt(e[s],10);o&&(C*=2,C>9&&(C-=9)),t+=C,o=!o}return t%10===0}evaluateCondition(e){if(/\s+OR\s+/i.test(e)){let s=e.split(/\s+OR\s+/i);for(let C of s)if(this.evaluateCondition(C.trim()))return!0;return!1}if(/\s+AND\s+/i.test(e)){let s=e.split(/\s+AND\s+/i);for(let C of s)if(!this.evaluateCondition(C.trim()))return!1;return!0}let t=e.match(/^(.+?)\s*(>=|<=|!=|=|>|<)\s*(.+)$/);if(t){let s=t[1].trim(),C=t[2],v=t[3].trim(),b=this.resolveValue(s),S=this.resolveValue(v);switch(C){case"=":return b==S;case"!=":return b!=S;case">":return Number(b)>Number(S);case"<":return Number(b)<Number(S);case">=":return Number(b)>=Number(S);case"<=":return Number(b)<=Number(S)}}return this.resolveValue(e)}resolveValue(e){let t=e.trim();if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(!isNaN(Number(t)))return Number(t);if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1;if(this.isFunctionExpression(t))return this.evaluateFunction(t,"TEXT");let o=this.form.get(t);return o?o.value:this.containsOperatorsOrFunctions(t)?this.evaluateArithmeticExpression(t):t}containsOperatorsOrFunctions(e){return!!(/[+\-*\/]/.test(e)||/[A-Z_]+\(/i.test(e))}evaluateArithmeticExpression(e){let t=e,o=/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g,s,C=[];for(;(s=o.exec(e))!==null;){let b=s[1];if(this.isFunctionExpression(b)||["AND","OR","TRUE","FALSE"].includes(b.toUpperCase()))continue;let S=this.form.get(b);S&&C.push({field:b,value:S.value??0})}for(let b of C){let S=typeof b.value=="number"?b.value:parseFloat(b.value)||0;t=t.replace(new RegExp(`\\b${b.field}\\b`,"g"),S.toString())}let v=/([A-Z_]+)\(([^()]*)\)/gi;for(;v.test(t);)t=t.replace(v,b=>this.evaluateFunction(b,"NUMBER").toString());try{return Function('"use strict"; return ('+t+")")()}catch{return t}}checkUniqueField(e,t,o){let s=`${e}:${t}`;this.workflowService.validateUniqueField(this.workflowCode,e,t,this.instanceId||void 0).subscribe({next:C=>{this.pendingUniqueChecks.delete(s);let v=C.data;this.uniqueCheckCache.set(s,v);let b=this.form.get(e);if(!v)this.validationErrors[e]=o,b&&(b.setErrors(Q(K({},b.errors),{customValidation:o})),b.markAsTouched());else{let g=this.fields.find(y=>y.name===e);if(g?.validation){let y=this.evaluateNonUniqueValidations(g);if(this.validationErrors[e]=y,b){if(y)b.setErrors(Q(K({},b.errors),{customValidation:y})),b.markAsTouched();else if(b.errors){let S=b.errors,{customValidation:h}=S,U=ie(S,["customValidation"]);b.setErrors(Object.keys(U).length>0?U:null)}}}else if(this.validationErrors[e]=null,b&&b.errors){let _=b.errors,{customValidation:y}=_,h=ie(_,["customValidation"]);b.setErrors(Object.keys(h).length>0?h:null)}}this.cdr.detectChanges()},error:()=>{this.pendingUniqueChecks.delete(s),this.uniqueCheckCache.set(s,!0)}})}evaluateNonUniqueValidations(e){let t=e.validation;if(!t)return null;try{let o=t.split(/\s+AND\s+/i);for(let s of o){let C=s.trim();if(/^Unique\(/i.test(C))continue;let v=this.evaluateSingleValidation(C,e);if(v)return v}return null}catch{return null}}recalculateField(e,t){let o=this.evaluateFunction(t.expression,t.fieldType);if(t.fieldType==="CHECKBOX")o=o==="true"||o===!0||!1;else if(t.fieldType==="NUMBER"||t.fieldType==="CURRENCY")o=o?Number(o):null;else if(t.fieldType==="DATE"||t.fieldType==="DATETIME"){if(o instanceof Date)o=t.fieldType==="DATETIME"?this.formatDateTime(o):this.formatDate(o);else if(o){let C=new Date(o);isNaN(C.getTime())||(o=t.fieldType==="DATETIME"?this.formatDateTime(C):this.formatDate(C))}}let s=this.form.get(e);s&&s.value!==o&&s.setValue(o,{emitEvent:!1})}getUngroupedFields(){return this._ungroupedFields}isNestedField(e){return this._nestedFieldIds.has(e)}getFieldsInGroup(e){let t=e?.toString();if(this.isMultiStep){let o=this.currentScreen?.id?.toString(),s=this.currentScreenIndex===0;return this.fields.filter(C=>{if(C.fieldGroupId?.toString()!==t||this._nestedFieldIds.has(C.id)||C.hidden||C.isHidden)return!1;let v=C.screenId?.toString();return v===o||s&&!v})}return this.fields.filter(o=>o.fieldGroupId?.toString()===t&&!this._nestedFieldIds.has(o.id)&&!(o.hidden||o.isHidden))}hasScreenAccess(e){let t=e.roleNames&&e.roleNames.length>0,o=e.privilegeNames&&e.privilegeNames.length>0;if(!t&&!o)return!0;let s=this.authService.currentUser;return s?s.roles?.includes("ADMIN")||s.roles?.includes("ROLE_ADMIN")?!0:o?e.privilegeNames.some(v=>s.privileges?.includes(v)):t?e.roleNames.some(v=>s.roles?.includes(v)):!1:!1}get isMultiStep(){return this.screens.length>1}get isFirstScreen(){return this.currentScreenIndex===0}get isLastScreen(){return this.currentScreenIndex===this.screens.length-1}get currentScreen(){return this.screens[this.currentScreenIndex]||null}get isSummaryScreen(){return this.currentScreen?.isSummaryScreen===!0}getUngroupedFieldsOnScreen(){if(!this.isMultiStep)return this._ungroupedFields;let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this._ungroupedFields.filter(o=>{let s=o.screenId?.toString();return s===e||t&&!s})}getFieldGroupsOnScreen(){if(!this.isMultiStep)return this.fieldGroups;let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this.fieldGroups.filter(o=>{let s=o.screenId?.toString();return s===e||t&&!s})}getSummaryFields(){return this.fields.filter(e=>e.inSummary===!0&&!(e.hidden||e.isHidden))}hasSummaryFields(){return this.getSummaryFields().length>0}getFieldDisplayValue(e){let t=this.form.get(e.name)?.value;if(t==null||t==="")return"-";switch(e.type||e.fieldType){case"SELECT":case"RADIO":return e.options?.find(b=>b.value===t)?.label||t;case"MULTISELECT":case"CHECKBOX_GROUP":return Array.isArray(t)?t.map(S=>e.options?.find(g=>g.value===S)?.label||S).join(", ")||"-":typeof t=="string"&&t.includes(",")?t.split(",").map(_=>_.trim()).map(_=>e.options?.find(y=>y.value===_)?.label||_).join(", ")||"-":t;case"CHECKBOX":case"TOGGLE":return t===!0||t==="true"?"Yes":"No";case"YES_NO":return t===!0||t==="true"||t==="yes"?"Yes":"No";case"DATE":if(t instanceof Date)return t.toLocaleDateString();try{let b=new Date(t);if(!isNaN(b.getTime()))return b.toLocaleDateString()}catch{}return t;case"DATETIME":if(t instanceof Date)return t.toLocaleString();try{let b=new Date(t);if(!isNaN(b.getTime()))return b.toLocaleString()}catch{}return t;case"TIME":return t;case"CURRENCY":let s=parseFloat(t);return isNaN(s)?t:"$"+s.toFixed(2);case"FILE":case"IMAGE":return this.selectedFiles[e.name]?.length>0?this.selectedFiles[e.name].map(b=>b.name).join(", "):"-";case"USER":if(this.selectedUsers[e.name]){let b=this.selectedUsers[e.name];return`${b.firstName} ${b.lastName}`}return t;case"RATING":return`${t} / ${e.ratingMax||5}`;case"SLIDER":return String(t);case"TABLE":let C=this.getTableRows(e);return`${C.length} row${C.length!==1?"s":""}`;case"SQL_OBJECT":return e.options?Array.isArray(t)?t.map(_=>e.options?.find(y=>y.value===_)?.label||_).join(", ")||"-":e.options.find(S=>S.value===t)?.label||t:t;case"COLOR":return t;case"LOCATION":return t;case"BARCODE":return t;case"RICH_TEXT":let v=String(t).replace(/<[^>]*>/g,"");return v.length>100?v.substring(0,100)+"...":v;case"HIDDEN":case"DIVIDER":case"LABEL":return"-";default:return String(t)}}getFieldScreenName(e){return!this.isMultiStep||!e.screenId?"":this.screens.find(o=>o.id?.toString()===e.screenId?.toString())?.title||""}goToNextScreen(){this.validateCurrentScreen()&&this.currentScreenIndex<this.screens.length-1&&(this.currentScreenIndex++,window.scrollTo({top:0,behavior:"smooth"}))}goToPreviousScreen(){this.currentScreenIndex>0&&(this.currentScreenIndex--,window.scrollTo({top:0,behavior:"smooth"}))}goToScreen(e){e<=this.currentScreenIndex&&(this.currentScreenIndex=e,window.scrollTo({top:0,behavior:"smooth"}))}validateCurrentScreen(){if(!this.isMultiStep||!this.currentScreen)return!0;let e=this.currentScreen.id?.toString(),t=this.currentScreenIndex===0,o=this.fields.filter(C=>{let v=C.screenId?.toString();return v===e||t&&!v}),s=!0;return o.forEach(C=>{let v=this.form.get(C.name);v&&(v.markAsTouched(),v.invalid&&(s=!1))}),s||this.snackBar.open("Please fill in all required fields on this screen","Close",{duration:3e3}),s}isFieldReadonly(e){return e.readOnly||e.isReadonly||!1}isColumnReadonly(e,t){return this.isFieldReadonly(e)?!0:t.readOnly===!0}isTableFullyReadonly(e){if(this.isFieldReadonly(e))return!0;let t=this.getTableColumns(e);return t.length===0?!1:t.every(o=>o.readOnly===!0)}isFieldRequired(e){return e.required?!0:e.validation?/Required\s*\(/i.test(e.validation):!1}isFieldVisible(e){let t=e.visibilityExpression;if(!t||t.trim()===""||t.trim().toLowerCase()==="true")return!0;if(t.trim().toLowerCase()==="false")return!1;try{return this.evaluateVisibilityExpression(t)}catch(o){return console.warn("Error evaluating visibility expression for field",e.name,o),!0}}evaluateVisibilityExpression(e){let t=e.replace(/@\{([^}]+)\}/g,(o,s)=>{let C=this.form.get(s.trim())?.value;return C==null||C===""?"null":typeof C=="string"?`'${C.replace(/'/g,"\\'")}'`:typeof C=="boolean"||typeof C=="number"?C.toString():`'${String(C)}'`});try{let o=t.match(/^['"]?([^'"=!<>]+)['"]?\s*(==|!=|===|!==)\s*['"]?([^'"]+)['"]?$/);if(o){let C=o[1].trim(),v=o[2],b=o[3].trim();return v==="=="||v==="==="?C===b:C!==b}let s=t.match(/^['"]?([^'"<>=!]+)['"]?\s*(>=|<=|>|<)\s*['"]?([^'"]+)['"]?$/);if(s){let C=parseFloat(s[1].trim()),v=s[2],b=parseFloat(s[3].trim());if(!isNaN(C)&&!isNaN(b))switch(v){case">":return C>b;case"<":return C<b;case">=":return C>=b;case"<=":return C<=b}}if(t.includes("&&")||t.includes("||")){let C=t.split(/\s*(&&|\|\|)\s*/),v=this.evaluateSimpleCondition(C[0]);for(let b=1;b<C.length;b+=2){let S=C[b],_=this.evaluateSimpleCondition(C[b+1]);S==="&&"?v=v&&_:S==="||"&&(v=v||_)}return v}if(t.trim().startsWith("!")){let C=t.trim().substring(1).trim();return!this.evaluateSimpleCondition(C)}return this.evaluateSimpleCondition(t)}catch(o){return console.warn("Error in visibility expression evaluation:",o),!0}}evaluateSimpleCondition(e){if(e=e.trim(),e.startsWith("(")&&e.endsWith(")")&&(e=e.slice(1,-1).trim()),e==="null"||e==="''"||e==='""')return!1;if(e.toLowerCase()==="true")return!0;if(e.toLowerCase()==="false")return!1;let t=e.match(/^['"]?([^'"=!<>]+)['"]?\s*(==|!=|===|!==)\s*['"]?([^'"]+)['"]?$/);if(t){let s=t[1].trim().replace(/^['"]|['"]$/g,""),C=t[2],v=t[3].trim().replace(/^['"]|['"]$/g,"");return C==="=="||C==="==="?s===v:s!==v}let o=e.match(/^['"]?([^'"<>=!]+)['"]?\s*(>=|<=|>|<)\s*['"]?([^'"]+)['"]?$/);if(o){let s=parseFloat(o[1].trim()),C=o[2],v=parseFloat(o[3].trim());if(!isNaN(s)&&!isNaN(v))switch(C){case">":return s>v;case"<":return s<v;case">=":return s>=v;case"<=":return s<=v}}return e!=="null"&&e!==""&&e!=="0"}hasFieldError(e){if(!this.hasAttemptedSubmit)return!1;let t=this.form.get(e.name),o=t?.invalid,s=!!this.validationErrors[e.name],C=t?.hasError("customValidation");return o||s||!!C}getFieldErrorMessage(e){let t=this.form.get(e.name);return this.validationErrors[e.name]?this.validationErrors[e.name]:t?.hasError("customValidation")?t.getError("customValidation"):t?.hasError("required")?`${e.label} is required`:t?.hasError("email")?"Please enter a valid email":null}getErrorStateMatcher(e){let t=this.validationErrors;return{isErrorState:o=>{if(!o)return!1;let s=!!t[e.name],C=o.invalid&&(o.touched||o.dirty);return s||C}}}evaluateDefaultValue(e,t){if(!e)return"";let o=e.trim();return this.isFunctionExpression(o)?this.evaluateFunction(o,t):e}isFunctionExpression(e){let t=/^[A-Z_]+\(.*\)$/i,o=["TODAY","NOW","CURRENT_USER","CURRENT_USER_EMAIL","CURRENT_USER_ID","CURRENT_USERNAME","CURRENT_USER_PHONE","CURRENT_USER_DEPARTMENT","CURRENT_USER_STAFFID","CURRENT_USER_ROLE","CURRENT_USER_SBU","CURRENT_USER_BRANCH","CURRENT_USER_ROLES","CURRENT_USER_PRIVILEGES","CURRENT_DATE","CURRENT_TIME","CURRENT_DATETIME","CURRENT_YEAR","CURRENT_MONTH","UUID","SHORT_UUID","TIMESTAMP","PI","E","RANDOM","ROW","WORKFLOW_ID","WORKFLOW_NAME","INSTANCE_ID","INSTANCE_STATUS","SUBMISSION_DATE","SUBMITTER_NAME","SUBMITTER_EMAIL","APPROVAL_LEVEL","APPROVER_NAME","ENVIRONMENT","VERSION","LOCALE","TIMEZONE","BROWSER","PLATFORM","IS_MOBILE","SCREEN_WIDTH","SCREEN_HEIGHT"];return t.test(e)||o.includes(e.toUpperCase())}isTimeBasedFunction(e){if(!e)return!1;let t=e.toUpperCase().trim();return["NOW","NOW()","TODAY","TODAY()","CURRENT_DATE","CURRENT_DATE()","CURRENT_TIME","CURRENT_TIME()","CURRENT_DATETIME","CURRENT_DATETIME()","TIMESTAMP","TIMESTAMP()","SUBMISSION_DATE","SUBMISSION_DATE()"].includes(t)}evaluateFunction(e,t){let o=this.authService.currentUser,s=e.toUpperCase().trim(),C=(t||"").toUpperCase(),v=e.match(/^([A-Z_]+)\((.*)\)$/i),b=v?v[1].toUpperCase():s,S=v?v[2]:"",_=S?this.parseArgs(S):[],g=G=>parseFloat(G)||0,y=G=>parseInt(G)||0,h=G=>String(G??""),U=G=>G===!0||G==="true"||G==="1"||G===1,P=G=>G instanceof Date?G:new Date(G);switch(b){case"UPPER":return h(_[0]).toUpperCase();case"LOWER":return h(_[0]).toLowerCase();case"TRIM":return h(_[0]).trim();case"TRIM_LEFT":return h(_[0]).trimStart();case"TRIM_RIGHT":return h(_[0]).trimEnd();case"CONCAT":return _.join("");case"LEFT":return h(_[0]).substring(0,y(_[1]));case"RIGHT":{let m=h(_[0]);return m.substring(m.length-y(_[1]))}case"SUBSTRING":return h(_[0]).substring(y(_[1]),y(_[1])+y(_[2]));case"LENGTH":return h(_[0]).length.toString();case"REPLACE":return h(_[0]).split(h(_[1])).join(h(_[2]));case"REPLACE_FIRST":return h(_[0]).replace(h(_[1]),h(_[2]));case"CONTAINS":return h(_[0]).includes(h(_[1])).toString();case"CONTAINS_IGNORE_CASE":return h(_[0]).toLowerCase().includes(h(_[1]).toLowerCase()).toString();case"STARTS_WITH":return h(_[0]).startsWith(h(_[1])).toString();case"ENDS_WITH":return h(_[0]).endsWith(h(_[1])).toString();case"CAPITALIZE":return h(_[0]).charAt(0).toUpperCase()+h(_[0]).slice(1).toLowerCase();case"TITLE_CASE":return h(_[0]).replace(/\b\w/g,m=>m.toUpperCase());case"SENTENCE_CASE":return h(_[0]).replace(/(^\s*\w|[.!?]\s*\w)/g,m=>m.toUpperCase());case"REVERSE":return h(_[0]).split("").reverse().join("");case"REPEAT":return h(_[0]).repeat(y(_[1]));case"PAD_LEFT":return h(_[0]).padStart(y(_[1]),h(_[2])||" ");case"PAD_RIGHT":return h(_[0]).padEnd(y(_[1]),h(_[2])||" ");case"WORD_COUNT":return h(_[0]).trim().split(/\s+/).filter(m=>m).length.toString();case"CHAR_AT":return h(_[0]).charAt(y(_[1]));case"INDEX_OF":return h(_[0]).indexOf(h(_[1])).toString();case"LAST_INDEX_OF":return h(_[0]).lastIndexOf(h(_[1])).toString();case"SPLIT":return JSON.stringify(h(_[0]).split(h(_[1])));case"JOIN":try{return JSON.parse(h(_[0])).join(h(_[1]))}catch{return _[0]}case"INITIALS":return h(_[0]).split(/\s+/).map(m=>m.charAt(0).toUpperCase()).join("");case"SLUG":return h(_[0]).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");case"CLEAN":return h(_[0]).replace(/[^\x20-\x7E]/g,"");case"REMOVE_SPACES":return h(_[0]).replace(/\s/g,"");case"COLLAPSE_SPACES":return h(_[0]).replace(/\s+/g," ");case"EXTRACT_NUMBERS":return h(_[0]).replace(/[^0-9]/g,"");case"EXTRACT_LETTERS":return h(_[0]).replace(/[^a-zA-Z]/g,"");case"EXTRACT_ALPHANUMERIC":return h(_[0]).replace(/[^a-zA-Z0-9]/g,"");case"MASK":{let m=h(_[0]),f=y(_[1]),E=y(_[2]),T=h(_[3])||"*",R=E<0?m.length+E:E;return m.substring(0,f)+T.repeat(R-f)+m.substring(R)}case"MASK_EMAIL":{let m=h(_[0]),[f,E]=m.split("@");return E?f.charAt(0)+"***@"+E:m}case"MASK_PHONE":{let m=h(_[0]).replace(/\D/g,"");return m.length>4?"*".repeat(m.length-4)+m.slice(-4):m}case"FORMAT_PHONE":{let m=h(_[0]).replace(/\D/g,""),f=h(_[1]).toUpperCase();return f==="US"&&m.length===10?`(${m.slice(0,3)}) ${m.slice(3,6)}-${m.slice(6)}`:f==="INTL"&&m.length>=10?`+${m.slice(0,-10)} ${m.slice(-10,-7)} ${m.slice(-7,-4)} ${m.slice(-4)}`:m}case"ENCODE_HTML":return h(_[0]).replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[m]||m);case"DECODE_HTML":return h(_[0]).replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,m=>({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"})[m]||m);case"WRAP":return h(_[1])+h(_[0])+h(_[2]);case"TRUNCATE":{let m=h(_[0]),f=y(_[1]),E=h(_[2])||"...";return m.length>f?m.substring(0,f-E.length)+E:m}case"REGEX_MATCH":try{return new RegExp(h(_[1])).test(h(_[0])).toString()}catch{return"false"}case"REGEX_EXTRACT":try{let m=h(_[0]).match(new RegExp(h(_[1])));return m?m[0]:""}catch{return""}case"REGEX_REPLACE":try{return h(_[0]).replace(new RegExp(h(_[1]),"g"),h(_[2]))}catch{return _[0]}case"SUM":return _.reduce((m,f)=>m+g(f),0).toString();case"SUBTRACT":return(g(_[0])-g(_[1])).toString();case"MULTIPLY":return(g(_[0])*g(_[1])).toString();case"DIVIDE":return g(_[1])===0?"0":(g(_[0])/g(_[1])).toString();case"ROUND":return g(_[0]).toFixed(y(_[1]));case"ROUND_UP":let G=Math.pow(10,y(_[1]));return(Math.ceil(g(_[0])*G)/G).toString();case"ROUND_DOWN":let te=Math.pow(10,y(_[1]));return(Math.floor(g(_[0])*te)/te).toString();case"FLOOR":return Math.floor(g(_[0])).toString();case"CEIL":return Math.ceil(g(_[0])).toString();case"TRUNC":return Math.trunc(g(_[0])).toString();case"ABS":return Math.abs(g(_[0])).toString();case"SIGN":return Math.sign(g(_[0])).toString();case"NEGATE":return(-g(_[0])).toString();case"MIN":return Math.min(..._.map(g)).toString();case"MAX":return Math.max(..._.map(g)).toString();case"AVERAGE":{let m=_.map(g);return(m.reduce((f,E)=>f+E,0)/m.length).toString()}case"MEDIAN":{let m=_.map(g).sort((E,T)=>E-T),f=Math.floor(m.length/2);return(m.length%2?m[f]:(m[f-1]+m[f])/2).toString()}case"MODE":{let m={};return _.forEach(f=>{m[f]=(m[f]||0)+1}),Object.entries(m).sort((f,E)=>E[1]-f[1])[0]?.[0]||""}case"COUNT":return _.filter(m=>m!==""&&m!==null&&m!==void 0).length.toString();case"PRODUCT":return _.reduce((m,f)=>m*g(f),1).toString();case"PERCENTAGE":return g(_[1])===0?"0":(g(_[0])/g(_[1])*100).toString();case"PERCENT_OF":return(g(_[0])*g(_[1])/100).toString();case"PERCENT_CHANGE":return g(_[0])===0?"0":((g(_[1])-g(_[0]))/g(_[0])*100).toString();case"MOD":return(g(_[0])%g(_[1])).toString();case"POWER":return Math.pow(g(_[0]),g(_[1])).toString();case"SQRT":return Math.sqrt(g(_[0])).toString();case"CBRT":return Math.cbrt(g(_[0])).toString();case"LOG":return Math.log(g(_[0])).toString();case"LOG10":return Math.log10(g(_[0])).toString();case"LOG2":return Math.log2(g(_[0])).toString();case"EXP":return Math.exp(g(_[0])).toString();case"FACTORIAL":{let m=y(_[0]),f=1;for(let E=2;E<=m;E++)f*=E;return f.toString()}case"GCD":{let m=Math.abs(y(_[0])),f=Math.abs(y(_[1]));for(;f;)[m,f]=[f,m%f];return m.toString()}case"LCM":{let m=Math.abs(y(_[0])),f=Math.abs(y(_[1])),E=m,T=f;for(;T;)[E,T]=[T,E%T];return(m*f/E).toString()}case"RANDOM":return Math.random().toString();case"RANDOM_INT":return(Math.floor(Math.random()*(y(_[1])-y(_[0])+1))+y(_[0])).toString();case"CLAMP":return Math.min(Math.max(g(_[0]),g(_[1])),g(_[2])).toString();case"INTERPOLATE":return(g(_[0])+(g(_[1])-g(_[0]))*g(_[2])).toString();case"MAP_RANGE":{let m=g(_[0]),f=g(_[1]),E=g(_[2]),T=g(_[3]),R=g(_[4]);return((m-f)/(E-f)*(R-T)+T).toString()}case"SIN":return Math.sin(g(_[0])).toString();case"COS":return Math.cos(g(_[0])).toString();case"TAN":return Math.tan(g(_[0])).toString();case"DEGREES":return(g(_[0])*180/Math.PI).toString();case"RADIANS":return(g(_[0])*Math.PI/180).toString();case"PI":return Math.PI.toString();case"E":return Math.E.toString();case"VARIANCE":{let m=_.map(g),f=m.reduce((E,T)=>E+T,0)/m.length;return(m.reduce((E,T)=>E+Math.pow(T-f,2),0)/m.length).toString()}case"STDEV":{let m=_.map(g),f=m.reduce((E,T)=>E+T,0)/m.length;return Math.sqrt(m.reduce((E,T)=>E+Math.pow(T-f,2),0)/m.length).toString()}case"RANGE":{let m=_.map(g);return(Math.max(...m)-Math.min(...m)).toString()}case"COMPOUND_INTEREST":return(g(_[0])*Math.pow(1+g(_[1]),g(_[2]))).toString();case"SIMPLE_INTEREST":return(g(_[0])*(1+g(_[1])*g(_[2]))).toString();case"PMT":{let m=g(_[0]),f=g(_[1]),E=g(_[2]);return m===0?(E/f).toString():(E*m/(1-Math.pow(1+m,-f))).toString()}case"FV":return(g(_[2])*((Math.pow(1+g(_[0]),g(_[1]))-1)/g(_[0]))).toString();case"PV":return(g(_[2])*((1-Math.pow(1+g(_[0]),-g(_[1])))/g(_[0]))).toString();case"FORMAT_NUMBER":{let m=g(_[0]),f=y(_[1]);return m.toLocaleString("en-US",{minimumFractionDigits:f,maximumFractionDigits:f})}case"FORMAT_PERCENTAGE":return g(_[0]).toFixed(y(_[1]))+"%";case"FORMAT_BYTES":{let m=g(_[0]);if(m===0)return"0 Bytes";let f=1024,E=["Bytes","KB","MB","GB","TB"],T=Math.floor(Math.log(m)/Math.log(f));return(m/Math.pow(f,T)).toFixed(2)+" "+E[T]}case"FORMAT_ORDINAL":{let m=y(_[0]),f=["th","st","nd","rd"],E=m%100;return m+(f[(E-20)%10]||f[E]||f[0])}case"ROMAN":{let m=y(_[0]),f="",E=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];for(let[T,R]of E)for(;m>=T;)f+=R,m-=T;return f}case"HEX":return y(_[0]).toString(16).toUpperCase();case"BIN":return y(_[0]).toString(2);case"OCT":return y(_[0]).toString(8);case"PARSE_INT":return parseInt(h(_[0]),y(_[1])||10).toString();case"TODAY":return this.formatDateForField(new Date,C||"DATE");case"NOW":return this.formatDateForField(new Date,C||"DATETIME");case"TIMESTAMP":return Date.now().toString();case"DATE":{let m=new Date(y(_[0]),y(_[1])-1,y(_[2]));return this.formatDateForField(m,C||"DATE")}case"DATETIME":{let m=new Date(y(_[0]),y(_[1])-1,y(_[2]),y(_[3]),y(_[4]),y(_[5]));return this.formatDateForField(m,C||"DATETIME")}case"DATE_FORMAT":{let m=P(_[0]),f=h(_[1]);return this.formatDateWithPattern(m,f)}case"DATE_PARSE":return new Date(h(_[0])).toISOString();case"DATE_ADD":{let m=P(_[0]),f=y(_[1]),E=h(_[2]).toLowerCase();return this.addToDate(m,f,E,C)}case"DATE_SUBTRACT":{let m=P(_[0]),f=y(_[1]),E=h(_[2]).toLowerCase();return this.addToDate(m,-f,E,C)}case"DATE_DIFF":{let m=P(_[0]),f=P(_[1]),E=h(_[2]).toLowerCase();return this.dateDiff(m,f,E)}case"AGE":{let m=P(_[0]),f=new Date,E=f.getFullYear()-m.getFullYear();return(f.getMonth()<m.getMonth()||f.getMonth()===m.getMonth()&&f.getDate()<m.getDate())&&E--,E.toString()}case"AGE_DETAILED":{let m=P(_[0]),f=new Date,E=f.getFullYear()-m.getFullYear(),T=f.getMonth()-m.getMonth(),R=f.getDate()-m.getDate();return R<0&&(T--,R+=new Date(f.getFullYear(),f.getMonth(),0).getDate()),T<0&&(E--,T+=12),`${E} years, ${T} months, ${R} days`}case"YEAR":return _[0]?P(_[0]).getFullYear().toString():new Date().getFullYear().toString();case"MONTH":return _[0]?(P(_[0]).getMonth()+1).toString():(new Date().getMonth()+1).toString();case"DAY":return _[0]?P(_[0]).getDate().toString():new Date().getDate().toString();case"HOUR":return _[0]?P(_[0]).getHours().toString():new Date().getHours().toString();case"MINUTE":return _[0]?P(_[0]).getMinutes().toString():new Date().getMinutes().toString();case"SECOND":return _[0]?P(_[0]).getSeconds().toString():new Date().getSeconds().toString();case"MILLISECOND":return _[0]?P(_[0]).getMilliseconds().toString():new Date().getMilliseconds().toString();case"WEEKDAY":return((_[0]?P(_[0]):new Date).getDay()||7).toString();case"WEEKDAY_NAME":{let m=_[0]?P(_[0]):new Date;return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][m.getDay()]}case"WEEKDAY_SHORT":{let m=_[0]?P(_[0]):new Date;return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][m.getDay()]}case"WEEK_NUMBER":{let m=_[0]?P(_[0]):new Date,f=new Date(m.getFullYear(),0,1);return Math.ceil(((m.getTime()-f.getTime())/864e5+f.getDay()+1)/7).toString()}case"QUARTER":{let m=_[0]?P(_[0]):new Date;return(Math.floor(m.getMonth()/3)+1).toString()}case"MONTH_NAME":{let m=_[0]?P(_[0]):new Date;return["January","February","March","April","May","June","July","August","September","October","November","December"][m.getMonth()]}case"MONTH_SHORT":{let m=_[0]?P(_[0]):new Date;return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m.getMonth()]}case"DAY_OF_YEAR":{let m=_[0]?P(_[0]):new Date,f=new Date(m.getFullYear(),0,0);return Math.floor((m.getTime()-f.getTime())/864e5).toString()}case"DAYS_IN_MONTH":{let m=_[0]?P(_[0]):new Date;return new Date(m.getFullYear(),m.getMonth()+1,0).getDate().toString()}case"DAYS_IN_YEAR":{let f=(_[0]?P(_[0]):new Date).getFullYear();return(f%4===0&&f%100!==0||f%400===0?366:365).toString()}case"IS_LEAP_YEAR":{let m=_[0]?P(_[0]).getFullYear():new Date().getFullYear();return(m%4===0&&m%100!==0||m%400===0).toString()}case"START_OF_DAY":{let m=new Date(_[0]?P(_[0]):new Date);return m.setHours(0,0,0,0),this.formatDateForField(m,C||"DATETIME")}case"END_OF_DAY":{let m=new Date(_[0]?P(_[0]):new Date);return m.setHours(23,59,59,999),this.formatDateForField(m,C||"DATETIME")}case"START_OF_WEEK":{let m=new Date(_[0]?P(_[0]):new Date),f=m.getDay()||7;return m.setDate(m.getDate()-f+1),this.formatDateForField(m,C||"DATE")}case"END_OF_WEEK":{let m=new Date(_[0]?P(_[0]):new Date),f=m.getDay()||7;return m.setDate(m.getDate()+(7-f)),this.formatDateForField(m,C||"DATE")}case"START_OF_MONTH":{let m=new Date(_[0]?P(_[0]):new Date);return m.setDate(1),this.formatDateForField(m,C||"DATE")}case"END_OF_MONTH":{let m=new Date(_[0]?P(_[0]):new Date);return m.setMonth(m.getMonth()+1,0),this.formatDateForField(m,C||"DATE")}case"START_OF_QUARTER":{let m=new Date(_[0]?P(_[0]):new Date);return m.setMonth(Math.floor(m.getMonth()/3)*3,1),this.formatDateForField(m,C||"DATE")}case"END_OF_QUARTER":{let m=new Date(_[0]?P(_[0]):new Date);return m.setMonth(Math.floor(m.getMonth()/3)*3+3,0),this.formatDateForField(m,C||"DATE")}case"START_OF_YEAR":{let m=new Date(_[0]?P(_[0]):new Date);return m.setMonth(0,1),this.formatDateForField(m,C||"DATE")}case"END_OF_YEAR":{let m=new Date(_[0]?P(_[0]):new Date);return m.setMonth(11,31),this.formatDateForField(m,C||"DATE")}case"IS_WEEKEND":{let m=(_[0]?P(_[0]):new Date).getDay();return(m===0||m===6).toString()}case"IS_WEEKDAY":{let m=(_[0]?P(_[0]):new Date).getDay();return(m!==0&&m!==6).toString()}case"IS_TODAY":{let m=_[0]?P(_[0]):new Date,f=new Date;return(m.toDateString()===f.toDateString()).toString()}case"IS_YESTERDAY":{let m=_[0]?P(_[0]):new Date,f=new Date;return f.setDate(f.getDate()-1),(m.toDateString()===f.toDateString()).toString()}case"IS_TOMORROW":{let m=_[0]?P(_[0]):new Date,f=new Date;return f.setDate(f.getDate()+1),(m.toDateString()===f.toDateString()).toString()}case"IS_PAST":return((_[0]?P(_[0]):new Date)<new Date).toString();case"IS_FUTURE":return((_[0]?P(_[0]):new Date)>new Date).toString();case"IS_THIS_WEEK":{let m=_[0]?P(_[0]):new Date,f=new Date,E=new Date(f);E.setDate(f.getDate()-(f.getDay()||7)+1);let T=new Date(E);return T.setDate(E.getDate()+6),(m>=E&&m<=T).toString()}case"IS_THIS_MONTH":{let m=_[0]?P(_[0]):new Date,f=new Date;return(m.getMonth()===f.getMonth()&&m.getFullYear()===f.getFullYear()).toString()}case"IS_THIS_YEAR":return((_[0]?P(_[0]):new Date).getFullYear()===new Date().getFullYear()).toString();case"IS_SAME_DAY":return(P(_[0]).toDateString()===P(_[1]).toDateString()).toString();case"IS_BEFORE":return(P(_[0])<P(_[1])).toString();case"IS_AFTER":return(P(_[0])>P(_[1])).toString();case"IS_BETWEEN_DATES":{let m=P(_[0]),f=P(_[1]),E=P(_[2]);return(m>=f&&m<=E).toString()}case"BUSINESS_DAYS":{let m=P(_[0]),f=P(_[1]),E=0,T=new Date(m);for(;T<=f;){let R=T.getDay();R!==0&&R!==6&&E++,T.setDate(T.getDate()+1)}return E.toString()}case"ADD_BUSINESS_DAYS":{let m=new Date(_[0]?P(_[0]):new Date),f=y(_[1]);for(;f>0;)m.setDate(m.getDate()+1),m.getDay()!==0&&m.getDay()!==6&&f--;return this.formatDateForField(m,C||"DATE")}case"RELATIVE_TIME":{let m=_[0]?P(_[0]):new Date,f=Date.now()-m.getTime(),E=Math.abs(f),T=f<0;return E<6e4?T?"in a few seconds":"just now":E<36e5?`${T?"in ":""}${Math.floor(E/6e4)} minutes${T?"":" ago"}`:E<864e5?`${T?"in ":""}${Math.floor(E/36e5)} hours${T?"":" ago"}`:`${T?"in ":""}${Math.floor(E/864e5)} days${T?"":" ago"}`}case"ISO_STRING":return(_[0]?P(_[0]):new Date).toISOString();case"CURRENT_DATE":return this.formatDate(new Date);case"CURRENT_TIME":return new Date().toTimeString().split(" ")[0];case"CURRENT_DATETIME":return this.formatDateTime(new Date);case"CURRENT_YEAR":return new Date().getFullYear().toString();case"CURRENT_MONTH":return(new Date().getMonth()+1).toString();case"IF":return this.evaluateCondition(_[0])?_[1]:_[2];case"IFS":{for(let m=0;m<_.length-1;m+=2)if(this.evaluateCondition(_[m]))return _[m+1];return _.length%2===1?_[_.length-1]:""}case"SWITCH":{let m=_[0];for(let f=1;f<_.length-1;f+=2)if(m===_[f])return _[f+1];return _.length%2===0?_[_.length-1]:""}case"AND":return _.every(m=>U(m)||this.evaluateCondition(m)).toString();case"OR":return _.some(m=>U(m)||this.evaluateCondition(m)).toString();case"NOT":return(!U(_[0])).toString();case"XOR":return(U(_[0])!==U(_[1])).toString();case"NAND":return(!(U(_[0])&&U(_[1]))).toString();case"NOR":return(!(U(_[0])||U(_[1]))).toString();case"IS_EMPTY":return(!_[0]||h(_[0]).trim()==="").toString();case"IS_NOT_EMPTY":return(_[0]&&h(_[0]).trim()!=="").toString();case"IS_NULL":return(_[0]===null||_[0]===void 0||_[0]==="").toString();case"IS_NOT_NULL":return(_[0]!==null&&_[0]!==void 0&&_[0]!=="").toString();case"IS_BLANK":return(!_[0]||h(_[0]).trim()==="").toString();case"IS_TRUE":return U(_[0]).toString();case"IS_FALSE":return(!U(_[0])).toString();case"EQUALS":return(_[0]===_[1]).toString();case"EQUALS_IGNORE_CASE":return(h(_[0]).toLowerCase()===h(_[1]).toLowerCase()).toString();case"NOT_EQUALS":return(_[0]!==_[1]).toString();case"GREATER_THAN":return(g(_[0])>g(_[1])).toString();case"GREATER_THAN_OR_EQUAL":return(g(_[0])>=g(_[1])).toString();case"LESS_THAN":return(g(_[0])<g(_[1])).toString();case"LESS_THAN_OR_EQUAL":return(g(_[0])<=g(_[1])).toString();case"BETWEEN":return(g(_[0])>=g(_[1])&&g(_[0])<=g(_[2])).toString();case"NOT_BETWEEN":return(g(_[0])<g(_[1])||g(_[0])>g(_[2])).toString();case"IN":try{return JSON.parse(_[1]).includes(_[0]).toString()}catch{return"false"}case"NOT_IN":try{return(!JSON.parse(_[1]).includes(_[0])).toString()}catch{return"true"}case"IS_NUMBER":return(!isNaN(parseFloat(_[0]))&&isFinite(g(_[0]))).toString();case"IS_INTEGER":return Number.isInteger(g(_[0])).toString();case"IS_DECIMAL":return(g(_[0])%1!==0).toString();case"IS_POSITIVE":return(g(_[0])>0).toString();case"IS_NEGATIVE":return(g(_[0])<0).toString();case"IS_ZERO":return(g(_[0])===0).toString();case"IS_EVEN":return(y(_[0])%2===0).toString();case"IS_ODD":return(y(_[0])%2!==0).toString();case"IS_TEXT":return(typeof _[0]=="string").toString();case"IS_DATE":return(!isNaN(new Date(_[0]).getTime())).toString();case"IS_BOOLEAN":return(_[0]==="true"||_[0]==="false"||typeof _[0]=="boolean").toString();case"IS_EMAIL":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h(_[0])).toString();case"IS_URL":try{return new URL(h(_[0])),"true"}catch{return"false"}case"IS_PHONE":return/^[\d\s\-\+\(\)]{7,20}$/.test(h(_[0])).toString();case"IS_UUID":return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(h(_[0])).toString();case"IS_ALPHANUMERIC":return/^[a-zA-Z0-9]+$/.test(h(_[0])).toString();case"IS_ALPHA":return/^[a-zA-Z]+$/.test(h(_[0])).toString();case"IS_NUMERIC":return/^[0-9]+$/.test(h(_[0])).toString();case"IS_UPPERCASE":return(h(_[0])===h(_[0]).toUpperCase()).toString();case"IS_LOWERCASE":return(h(_[0])===h(_[0]).toLowerCase()).toString();case"MATCHES_PATTERN":try{return new RegExp(h(_[1])).test(h(_[0])).toString()}catch{return"false"}case"HAS_LENGTH":return(h(_[0]).length===y(_[1])).toString();case"HAS_MIN_LENGTH":return(h(_[0]).length>=y(_[1])).toString();case"HAS_MAX_LENGTH":return(h(_[0]).length<=y(_[1])).toString();case"CURRENT_USER":return o?.fullName||"";case"CURRENT_USER_EMAIL":return o?.email||"";case"CURRENT_USER_ID":return o?.userId||"";case"CURRENT_USERNAME":return o?.username||"";case"CURRENT_USER_PHONE":return o?.phoneNumber||"";case"CURRENT_USER_DEPARTMENT":return o?.department||"";case"CURRENT_USER_STAFFID":return o?.staffId||"";case"CURRENT_USER_ROLE":return o?.userType||"";case"CURRENT_USER_SBU":return o?.sbuIds?.[0]||"";case"CURRENT_USER_BRANCH":return o?.branchIds?.[0]||"";case"CURRENT_USER_ROLES":return o?.roles||[];case"CURRENT_USER_PRIVILEGES":return o?.privileges||[];case"UUID":return this.generateUUID();case"SHORT_UUID":return this.generateUUID().substring(0,8);case"NANO_ID":{let m=y(_[0])||21,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",E="";for(let T=0;T<m;T++)E+=f.charAt(Math.floor(Math.random()*f.length));return E}case"SEQUENCE":return h(_[0])+Date.now().toString().slice(-8);case"SEQUENCE_PADDED":{let m=h(_[0]),f=y(_[1])||6;return m+Date.now().toString().slice(-f).padStart(f,"0")}case"RANDOM_STRING":{let m=y(_[0])||10,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",E="";for(let T=0;T<m;T++)E+=f.charAt(Math.floor(Math.random()*f.length));return E}case"RANDOM_CODE":{let m=y(_[0])||6,f=h(_[1]).toUpperCase(),E="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";f==="ALPHA"?E="ABCDEFGHIJKLMNOPQRSTUVWXYZ":f==="NUMERIC"&&(E="0123456789");let T="";for(let R=0;R<m;R++)T+=E.charAt(Math.floor(Math.random()*E.length));return T}case"ROW":return(this.currentTableRowIndex+1).toString();case"ROW_COUNT":{let m=this.resolveTableName(_[0]),f=this.tableData[m];return f?f.length.toString():"0"}case"COLUMN_COUNT":{let m=this.resolveTableName(_[0]),f=this.fields.find(E=>E.name===m&&E.fieldType==="TABLE");return f?this.getTableColumns(f).length.toString():"0"}case"GET_CELL":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=h(_[2]),T=this.tableData[m];return T&&f>=0&&f<T.length&&T[f][E]||""}case"SET_CELL":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=h(_[2]),T=h(_[3]),R=this.tableData[m];return R&&f>=0&&f<R.length?(R[f][E]=T,T):""}case"GET_ROW":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=this.tableData[m];return E&&f>=0&&f<E.length?JSON.stringify(E[f]):"{}"}case"SET_ROW":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=h(_[2]),T=this.tableData[m];if(T&&f>=0&&f<T.length)try{let R=JSON.parse(E);return Object.keys(R).forEach(B=>{T[f][B]=R[B]}),"true"}catch{return"false"}return"false"}case"GET_COLUMN":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=this.tableData[m];if(E){let T=E.map(R=>R[f]||"");return JSON.stringify(T)}return"[]"}case"SUM_COLUMN":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=this.tableData[m];return E?E.reduce((R,B)=>{let Y=parseFloat(B[f]);return R+(isNaN(Y)?0:Y)},0).toString():"0"}case"AVG_COLUMN":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=this.tableData[m];if(E&&E.length>0){let T=E.map(R=>parseFloat(R[f])).filter(R=>!isNaN(R));if(T.length>0)return(T.reduce((B,Y)=>B+Y,0)/T.length).toString()}return"0"}case"MIN_COLUMN":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=this.tableData[m];if(E&&E.length>0){let T=E.map(R=>parseFloat(R[f])).filter(R=>!isNaN(R));if(T.length>0)return Math.min(...T).toString()}return""}case"MAX_COLUMN":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=this.tableData[m];if(E&&E.length>0){let T=E.map(R=>parseFloat(R[f])).filter(R=>!isNaN(R));if(T.length>0)return Math.max(...T).toString()}return""}case"COUNT_COLUMN":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=this.tableData[m];return E?E.filter(R=>{let B=R[f];return B!=null&&B!==""}).length.toString():"0"}case"FIND_ROW":{let m=this.resolveTableName(_[0]),f=h(_[1]),E=h(_[2]),T=this.tableData[m];return T?(T.findIndex(B=>B[f]===E)+1).toString():"0"}case"CLEAR_ROW":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=this.tableData[m];return E&&f>=0&&f<E.length?(Object.keys(E[f]).forEach(T=>{E[f][T]=""}),"true"):"false"}case"DELETE_ROW":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=this.tableData[m];return E&&f>=0&&f<E.length?(E.splice(f,1),"true"):"false"}case"ADD_ROW":{let m=this.resolveTableName(_[0]),f=_[1]?h(_[1]):null,E=this.fields.find(T=>T.name===m&&T.fieldType==="TABLE");if(E){this.tableData[m]||(this.tableData[m]=[]);let T=this.getTableColumns(E),R={};if(T.forEach(B=>{R[B.name]=B.defaultValue||(B.type==="CHECKBOX"?"false":"")}),f)try{let B=JSON.parse(f);Object.keys(B).forEach(Y=>{R[Y]=B[Y]})}catch{}return this.tableData[m].push(R),this.tableData[m].length.toString()}return"0"}case"COPY_ROW":{let m=this.resolveTableName(_[0]),f=g(_[1])-1,E=_[2]?g(_[2])-1:-1,T=this.tableData[m];if(T&&f>=0&&f<T.length){let R=K({},T[f]);return E>=0&&E<T.length?Object.keys(R).forEach(B=>{T[E][B]=R[B]}):T.push(R),"true"}return"false"}case"TABLE_JSON":{let m=this.resolveTableName(_[0]),f=this.tableData[m];return f?JSON.stringify(f):"[]"}case"COALESCE":case"DEFAULT":return _.find(m=>m&&h(m).trim()!=="")||"";case"NULLIF":return _[0]===_[1]?"":_[0];case"NVL":case"IFNULL":return _[0]===null||_[0]===void 0||_[0]===""?_[1]:_[0];case"FORMAT_CURRENCY":{let m=g(_[0]),f=h(_[1])||"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:f}).format(m)}catch{return m.toFixed(2)}}case"TO_NUMBER":return g(_[0]).toString();case"TO_TEXT":return h(_[0]);case"TO_BOOLEAN":return U(_[0]).toString();case"TO_DATE":return this.formatDate(P(_[0]));case"TO_ARRAY":return JSON.stringify(h(_[0]).split(",").map(m=>m.trim()));case"TO_JSON":try{return JSON.stringify(_[0])}catch{return""}case"FROM_JSON":try{return JSON.parse(h(_[0]))}catch{return _[0]}case"FIELD_VALUE":{let m=h(_[0]);return this.getFieldValue(m)||""}case"FIELD_LABEL":{let m=h(_[0]);return this.fields.find(E=>E.name===m)?.label||m}case"GET":try{let m=h(_[1]).split("."),f=JSON.parse(h(_[0]));for(let E of m)f=f?.[E];return f??_[2]??""}catch{return _[2]??""}case"KEYS":try{return JSON.stringify(Object.keys(JSON.parse(h(_[0]))))}catch{return"[]"}case"VALUES":try{return JSON.stringify(Object.values(JSON.parse(h(_[0]))))}catch{return"[]"}case"ARRAY_LENGTH":try{return JSON.parse(h(_[0])).length.toString()}catch{return"0"}case"ARRAY_FIRST":try{return JSON.parse(h(_[0]))[0]??""}catch{return""}case"ARRAY_LAST":try{let m=JSON.parse(h(_[0]));return m[m.length-1]??""}catch{return""}case"ARRAY_JOIN":try{return JSON.parse(h(_[0])).join(h(_[1]))}catch{return""}case"ARRAY_SUM":try{return JSON.parse(h(_[0])).reduce((m,f)=>m+g(f),0).toString()}catch{return"0"}case"ARRAY_AVERAGE":try{let m=JSON.parse(h(_[0]));return(m.reduce((f,E)=>f+g(E),0)/m.length).toString()}catch{return"0"}case"ARRAY_MIN":try{return Math.min(...JSON.parse(h(_[0])).map(g)).toString()}catch{return"0"}case"ARRAY_MAX":try{return Math.max(...JSON.parse(h(_[0])).map(g)).toString()}catch{return"0"}case"ARRAY_UNIQUE":try{return JSON.stringify([...new Set(JSON.parse(h(_[0])))])}catch{return"[]"}case"ARRAY_REVERSE":try{return JSON.stringify(JSON.parse(h(_[0])).reverse())}catch{return"[]"}case"ARRAY_SORT":try{let m=JSON.parse(h(_[0])),f=h(_[1]).toUpperCase();return JSON.stringify(m.sort((E,T)=>f==="DESC"?T>E?1:-1:E>T?1:-1))}catch{return"[]"}case"ARRAY_INCLUDES":try{return JSON.parse(h(_[0])).includes(_[1]).toString()}catch{return"false"}case"ARRAY_INDEX_OF":try{return JSON.parse(h(_[0])).indexOf(_[1]).toString()}catch{return"-1"}case"TEMPLATE":{let m=h(_[0]);try{let f=typeof _[1]=="object"?_[1]:JSON.parse(h(_[1]));return m.replace(/\{\{(\w+)\}\}/g,(E,T)=>f[T]??"")}catch{return m}}case"BASE64_ENCODE":try{return btoa(h(_[0]))}catch{return""}case"BASE64_DECODE":try{return atob(h(_[0]))}catch{return""}case"URL_ENCODE":return encodeURIComponent(h(_[0]));case"URL_DECODE":return decodeURIComponent(h(_[0]));case"TRY":try{return this.evaluateFunction(h(_[0]),t)}catch{return _[1]||""}case"TYPEOF":return typeof _[0];case"CLONE":try{return JSON.stringify(JSON.parse(JSON.stringify(_[0])))}catch{return _[0]}case"COMPARE":return _[0]>_[1]?"1":_[0]<_[1]?"-1":"0";case"EQUALS_DEEP":try{return(JSON.stringify(_[0])===JSON.stringify(_[1])).toString()}catch{return"false"}case"WORKFLOW_ID":return this.workflow?.id||"";case"WORKFLOW_NAME":return this.workflow?.name||"";case"INSTANCE_ID":return this.instanceId||"";case"ENVIRONMENT":return"PROD";case"VERSION":return"1.0.0";case"LOCALE":return navigator.language||"en-US";case"TIMEZONE":return Intl.DateTimeFormat().resolvedOptions().timeZone;case"BROWSER":return navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Unknown";case"PLATFORM":return navigator.platform||"Unknown";case"IS_MOBILE":return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent).toString();case"SCREEN_WIDTH":return window.screen.width.toString();case"SCREEN_HEIGHT":return window.screen.height.toString();default:return e}}formatDateWithPattern(e,t){if(!e||isNaN(e.getTime()))return"";let o=v=>v.toString().padStart(2,"0"),s={YYYY:e.getFullYear().toString(),YY:e.getFullYear().toString().slice(-2),MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],MM:o(e.getMonth()+1),DD:o(e.getDate()),ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],HH:o(e.getHours()),mm:o(e.getMinutes()),ss:o(e.getSeconds())},C=t;for(let[v,b]of Object.entries(s))C=C.replace(new RegExp(v,"g"),b);return C}addToDate(e,t,o,s){let C=new Date(e);switch(o){case"years":C.setFullYear(C.getFullYear()+t);break;case"months":C.setMonth(C.getMonth()+t);break;case"weeks":C.setDate(C.getDate()+t*7);break;case"days":C.setDate(C.getDate()+t);break;case"hours":C.setHours(C.getHours()+t);break;case"minutes":C.setMinutes(C.getMinutes()+t);break;case"seconds":C.setSeconds(C.getSeconds()+t);break}return this.formatDateForField(C,s||"DATE")}dateDiff(e,t,o){let s=Math.abs(t.getTime()-e.getTime());switch(o){case"years":return Math.floor(s/(365.25*24*60*60*1e3)).toString();case"months":return Math.floor(s/(30.44*24*60*60*1e3)).toString();case"weeks":return Math.floor(s/(7*24*60*60*1e3)).toString();case"days":return Math.floor(s/(24*60*60*1e3)).toString();case"hours":return Math.floor(s/(60*60*1e3)).toString();case"minutes":return Math.floor(s/(60*1e3)).toString();case"seconds":return Math.floor(s/1e3).toString();default:return Math.floor(s/(24*60*60*1e3)).toString()}}parseStringArg(e,t=!0){let o=e.replace(/^["']|["']$/g,"").trim();if(t&&!e.startsWith('"')&&!e.startsWith("'")){let s=this.getFieldValue(o);if(s!==null)return String(s)}return o}parseArgs(e,t=!0){let o=[],s="",C=!1,v="";for(let b of e)(b==='"'||b==="'")&&!C?(C=!0,v=b,s+=b):b===v&&C?(C=!1,s+=b,v=""):b===","&&!C?(o.push(this.resolveArgValue(s.trim(),t)),s=""):s+=b;return s&&o.push(this.resolveArgValue(s.trim(),t)),o}resolveArgValue(e,t){if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(t){let o=this.getFieldValue(e);if(o!==null)return String(o)}return e}getFieldValue(e){if(!this.form)return null;let t=this.form.get(e);return t?t.value:null}resolveTableName(e){let t=String(e||""),o=t.match(/@\{([^}]+)\}/);return o?o[1]:t}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}formatDate(e){return e.toISOString().split("T")[0]}formatDateTime(e){let t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),C=String(e.getHours()).padStart(2,"0"),v=String(e.getMinutes()).padStart(2,"0");return`${t}-${o}-${s}T${C}:${v}`}formatDateForField(e,t){let o=(t||"").toUpperCase();return o==="DATETIME"?this.formatDateTime(e):o==="DATE"?this.formatDate(e):e.toISOString()}onFileSelect(e,t){let o=e.target;o.files&&(this.selectedFiles[t]=Array.from(o.files))}isCheckboxOptionSelected(e,t){if(!this.checkboxGroupValues[e]){let o=this.form.get(e)?.value;o?this.checkboxGroupValues[e]=Array.isArray(o)?o:o.split(",").filter(s=>s):this.checkboxGroupValues[e]=[]}return this.checkboxGroupValues[e].includes(t)}onCheckboxGroupChange(e,t,o){this.checkboxGroupValues[e]||(this.checkboxGroupValues[e]=[]),o?this.checkboxGroupValues[e].includes(t)||this.checkboxGroupValues[e].push(t):this.checkboxGroupValues[e]=this.checkboxGroupValues[e].filter(s=>s!==t),this.form.get(e)?.setValue(this.checkboxGroupValues[e].join(",")),this.form.get(e)?.markAsTouched()}imagePreviews={};getStarArray(e){let t=e.ratingMax||5;return Array.from({length:t},(o,s)=>s+1)}getRatingValue(e){let t=this.form.get(e.name)?.value;return t?parseInt(t,10):0}setRating(e,t){this.isFieldReadonly(e)||(this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched())}getImagePreview(e){return this.imagePreviews[e.name]||null}onImageSelect(e,t){let o=e.target;if(o.files&&o.files[0]){let s=o.files[0],C=new FileReader;C.onload=v=>{this.imagePreviews[t.name]=v.target.result,this.form.get(t.name)?.setValue(v.target.result),this.form.get(t.name)?.markAsTouched()},C.readAsDataURL(s)}}onAttachmentSelect(e){let t=e.target;t.files&&this.attachments.push(...Array.from(t.files))}removeAttachment(e){this.attachments.splice(e,1)}formatFileSize(e){if(e===0)return"0 Bytes";let t=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+o[s]}goBack(){this.router.navigate(["/workflows",this.workflowCode,"instances"])}saveDraft(){this.submitForm(!0)}onSubmit(){if(this.hasAttemptedSubmit=!0,this.validateAllFields(),this.form.invalid){this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});return}if(this.pendingUniqueChecks.size>0){this.snackBar.open("Please wait for validation checks to complete","Close",{duration:3e3});return}if(Object.values(this.validationErrors).some(t=>t!==null)){this.snackBar.open("Please fix validation errors before submitting","Close",{duration:3e3});return}this.submitForm(!1)}submitForm(e){this.submitting=!0;let t=new FormData;t.append("workflowCode",this.workflowCode),t.append("isDraft",e.toString());let o={};this.fields.forEach(C=>{let v=this.form.value[C.name];if(!this.isEditMode&&this.timeBasedFields.has(C.name)){let b=this.timeBasedFields.get(C.name);v=this.evaluateDefaultValue(b.expression,b.fieldType),(C.type==="DATE"||C.type==="DATETIME")&&v instanceof Date&&(v=v.toISOString())}C.type==="USER"&&v&&typeof v=="object"&&v.id&&(v=v.id),o[C.name]=v}),t.append("fieldValues",JSON.stringify(o)),this.attachments.forEach((C,v)=>{t.append("attachments",C)}),Object.keys(this.selectedFiles).forEach(C=>{this.selectedFiles[C].forEach(v=>{t.append(`files_${C}`,v)})}),(this.isEditMode&&this.instanceId?this.workflowService.updateInstance(this.instanceId,t):this.workflowService.submitInstance(t)).subscribe({next:C=>{if(this.submitting=!1,C.success){let v=this.isEditMode?e?"Draft updated successfully":"Submission updated successfully":e?"Draft saved successfully":"Submission created successfully";this.snackBar.open(v,"Close",{duration:3e3}),this.router.navigate(["/workflows",this.workflowCode,"instances"])}},error:C=>{this.submitting=!1,this.snackBar.open(C.error?.message||"Submission failed","Close",{duration:3e3})}})}loadUsers(){this.userService.getUsers().subscribe({next:e=>{e.success&&e.data&&(this.allUsers=e.data,console.log("Loaded",this.allUsers.length,"users for USER field"))},error:e=>{console.error("Failed to load users:",e?.status,e?.message||e),setTimeout(()=>{this.userService.getUsers().subscribe({next:t=>{t.success&&t.data&&(this.allUsers=t.data,console.log("Loaded",this.allUsers.length,"users on retry"))},error:t=>{console.error("Retry failed to load users:",t?.status)}})},1e3)}})}onUserSearch(e,t){let s=e.target.value?.toLowerCase()||"";if(this.userSearchTerms[t]=s,!s){this.filteredUsersMap[t]=[];return}this.filteredUsersMap[t]=this.allUsers.filter(C=>{let v=`${C.firstName} ${C.lastName}`.toLowerCase(),b=(C.email||"").toLowerCase(),S=(C.username||"").toLowerCase();return v.includes(s)||b.includes(s)||S.includes(s)}).slice(0,10)}getFilteredUsers(e){return this.filteredUsersMap[e]||[]}displayUserFn=e=>e?typeof e=="string"?e:`${e.firstName} ${e.lastName}`:"";onUserSelected(e,t){let o=e.option.value;this.selectedUsers[t]=o,this.form.get(t)?.setValue(o),this.filteredUsersMap[t]=[],this.userSearchTerms[t]=""}getUserFieldValue(e){let t=this.form.get(e)?.value;return t?typeof t=="object"&&t.id?t.id:t:""}signatureDrawing={};signatureContexts={};startSignature(e,t){if(this.isFieldReadonly(t))return;let o=e.target,s=o.getContext("2d");if(!s)return;this.signatureDrawing[t.name]=!0,this.signatureContexts[t.name]=s,o.width!==o.offsetWidth&&(o.width=o.offsetWidth,o.height=o.offsetHeight),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round";let C=o.getBoundingClientRect();s.beginPath(),s.moveTo(e.clientX-C.left,e.clientY-C.top)}drawSignature(e,t){if(!this.signatureDrawing[t.name]||this.isFieldReadonly(t))return;let o=this.signatureContexts[t.name];if(!o)return;let C=e.target.getBoundingClientRect();o.lineTo(e.clientX-C.left,e.clientY-C.top),o.stroke()}endSignature(e){if(this.signatureDrawing[e.name]){this.signatureDrawing[e.name]=!1;let t=document.querySelector(`canvas[data-field="${e.name}"]`);if(t){let o=t.toDataURL("image/png");this.form.get(e.name)?.setValue(o),this.form.get(e.name)?.markAsTouched()}}}startSignatureTouch(e,t){if(this.isFieldReadonly(t))return;e.preventDefault();let o=e.target,s=o.getContext("2d");if(!s)return;this.signatureDrawing[t.name]=!0,this.signatureContexts[t.name]=s,o.width!==o.offsetWidth&&(o.width=o.offsetWidth,o.height=o.offsetHeight),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round";let C=o.getBoundingClientRect(),v=e.touches[0];s.beginPath(),s.moveTo(v.clientX-C.left,v.clientY-C.top)}drawSignatureTouch(e,t){if(!this.signatureDrawing[t.name]||this.isFieldReadonly(t))return;e.preventDefault();let o=this.signatureContexts[t.name];if(!o)return;let C=e.target.getBoundingClientRect(),v=e.touches[0];o.lineTo(v.clientX-C.left,v.clientY-C.top),o.stroke()}clearSignature(e){let t=document.querySelector(`canvas[data-field="${e.name}"]`);if(t){let o=t.getContext("2d");o&&o.clearRect(0,0,t.width,t.height),this.form.get(e.name)?.setValue(""),this.form.get(e.name)?.markAsTouched()}}execRichTextCommand(e){document.execCommand(e,!1)}onRichTextInput(e,t){let o=e.target;this.form.get(t.name)?.setValue(o.innerHTML)}onRichTextBlur(e,t){let o=e.target;this.form.get(t.name)?.setValue(o.innerHTML),this.form.get(t.name)?.markAsTouched()}getRichTextValue(e){return this.form.get(e.name)?.value||""}iconPickerOpen={};iconSearchText={};availableIcons=["home","search","settings","favorite","star","check_circle","delete","edit","add","remove","close","menu","more_vert","more_horiz","refresh","sync","visibility","visibility_off","lock","lock_open","person","people","group","email","phone","chat","message","notifications","alarm","schedule","event","calendar_today","date_range","access_time","timer","hourglass_empty","folder","folder_open","file_copy","attach_file","cloud","cloud_upload","cloud_download","image","photo","camera","videocam","mic","volume_up","music_note","play_arrow","pause","stop","skip_next","skip_previous","replay","location_on","map","directions","navigation","explore","public","language","shopping_cart","store","payment","credit_card","account_balance","receipt","work","business","business_center","apartment","domain","corporate_fare","school","science","biotech","psychology","engineering","build","construction","handyman","plumbing","electrical_services","computer","laptop","smartphone","tablet","desktop_windows","devices","wifi","bluetooth","signal_wifi_4_bar","network_check","router","code","terminal","bug_report","memory","storage","dns","security","verified_user","shield","admin_panel_settings","policy","analytics","bar_chart","pie_chart","show_chart","trending_up","trending_down","assessment","leaderboard","insights","query_stats","local_shipping","flight","train","directions_car","directions_bus","two_wheeler","restaurant","local_cafe","local_bar","fastfood","lunch_dining","health_and_safety","medical_services","vaccines","medication","healing","pets","park","nature","eco","grass","forest","water_drop","sports_soccer","sports_basketball","sports_tennis","fitness_center","pool","thumb_up","thumb_down","sentiment_satisfied","sentiment_dissatisfied","mood","lightbulb","tips_and_updates","help","info","warning","error","report"];toggleIconPicker(e){this.isFieldReadonly(e)||(this.iconPickerOpen[e.name]=!this.iconPickerOpen[e.name],this.iconPickerOpen[e.name]&&(this.iconSearchText[e.name]=""))}isIconPickerOpen(e){return this.iconPickerOpen[e.name]||!1}selectIcon(e,t){this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched(),this.iconPickerOpen[e.name]=!1}getSelectedIcon(e){return this.form.get(e.name)?.value||"help_outline"}getFilteredIcons(e){let t=(this.iconSearchText[e.name]||"").toLowerCase();return t?this.availableIcons.filter(o=>o.includes(t)):this.availableIcons}onIconSearch(e,t){let o=e.target;this.iconSearchText[t.name]=o.value}scanBarcode(e){this.snackBar.open("Barcode scanning requires camera access. Please enter the code manually.","OK",{duration:5e3})}gettingLocation={};locationData={};getLocationLat(e){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string"){let o=t.split(",");if(o.length>=2)return parseFloat(o[0])||null}return this.locationData[e.name]?.lat||null}getLocationLng(e){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string"){let o=t.split(",");if(o.length>=2)return parseFloat(o[1])||null}return this.locationData[e.name]?.lng||null}onLocationLatChange(e,t){let o=e.target,s=parseFloat(o.value)||null;this.locationData[t.name]||(this.locationData[t.name]={lat:null,lng:null}),this.locationData[t.name].lat=s,this.updateLocationValue(t)}onLocationLngChange(e,t){let o=e.target,s=parseFloat(o.value)||null;this.locationData[t.name]||(this.locationData[t.name]={lat:null,lng:null}),this.locationData[t.name].lng=s,this.updateLocationValue(t)}updateLocationValue(e){let t=this.locationData[e.name];t&&t.lat!==null&&t.lng!==null?this.form.get(e.name)?.setValue(`${t.lat},${t.lng}`):this.form.get(e.name)?.setValue(""),this.form.get(e.name)?.markAsTouched()}getCurrentLocation(e){if(!this.isFieldReadonly(e)){if(!navigator.geolocation){this.snackBar.open("Geolocation is not supported by your browser","OK",{duration:3e3});return}this.gettingLocation[e.name]=!0,navigator.geolocation.getCurrentPosition(t=>{let o=t.coords.latitude,s=t.coords.longitude;this.locationData[e.name]={lat:o,lng:s},this.form.get(e.name)?.setValue(`${o},${s}`),this.form.get(e.name)?.markAsTouched(),this.gettingLocation[e.name]=!1,this.cdr.detectChanges()},t=>{this.gettingLocation[e.name]=!1;let o="Could not get location";switch(t.code){case t.PERMISSION_DENIED:o="Location permission denied";break;case t.POSITION_UNAVAILABLE:o="Location information unavailable";break;case t.TIMEOUT:o="Location request timed out";break}this.snackBar.open(o,"OK",{duration:3e3}),this.cdr.detectChanges()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}}isGettingLocation(e){return this.gettingLocation[e.name]||!1}getLocationDisplay(e){let t=this.getLocationLat(e),o=this.getLocationLng(e);return t!==null&&o!==null?`${t.toFixed(6)}, ${o.toFixed(6)}`:"No location set"}tableData={};currentTableRowIndex=0;getTableColumns(e){if(e.tableColumns&&Array.isArray(e.tableColumns)&&e.tableColumns.length>0)return e.tableColumns.map(t=>({name:t.name||"column",label:t.label||t.name||"Column",type:t.type||"TEXT",width:t.width,defaultValue:t.defaultValue,readOnly:t.readOnly||!1}));if(e.tableColumns&&typeof e.tableColumns=="string")try{let t=JSON.parse(e.tableColumns);if(Array.isArray(t))return t.map(o=>({name:o.name||"column",label:o.label||o.name||"Column",type:o.type||"TEXT",width:o.width,defaultValue:o.defaultValue,readOnly:o.readOnly||!1}))}catch{}if(e.options&&typeof e.options=="string")try{let t=JSON.parse(e.options);if(Array.isArray(t))return t.map(o=>({name:o.name||o.value||"column",label:o.label||o.name||"Column",type:o.type||"TEXT",width:o.width,defaultValue:o.defaultValue}))}catch{}return[{name:"col1",label:"Column 1",type:"TEXT"},{name:"col2",label:"Column 2",type:"TEXT"},{name:"col3",label:"Column 3",type:"TEXT"}]}getTableRows(e){if(!this.tableData[e.name]){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string")try{this.tableData[e.name]=JSON.parse(t)}catch{this.tableData[e.name]=[]}else Array.isArray(t)?this.tableData[e.name]=t:this.tableData[e.name]=[];if(this.tableData[e.name].length===0&&!this.isEditMode){let o=e.tableMinRows||1,s=this.getTableColumns(e);for(let C=0;C<o;C++){this.currentTableRowIndex=C;let v={};s.forEach(b=>{b.defaultValue!==void 0&&b.defaultValue!==null&&b.defaultValue!==""?this.isFunctionExpression(b.defaultValue)?v[b.name]=String(this.evaluateFunction(b.defaultValue,b.type)):v[b.name]=b.defaultValue:v[b.name]=b.type==="CHECKBOX"?"false":""}),this.tableData[e.name].push(v)}this.tableData[e.name].length>0&&this.updateTableValue(e)}}return this.tableData[e.name]}addTableRow(e){if(this.isFieldReadonly(e)||(this.tableData[e.name]||(this.tableData[e.name]=[]),e.tableMaxRows&&this.tableData[e.name].length>=e.tableMaxRows))return;this.currentTableRowIndex=this.tableData[e.name].length;let t=this.getTableColumns(e),o={};t.forEach(s=>{s.defaultValue!==void 0&&s.defaultValue!==null&&s.defaultValue!==""?this.isFunctionExpression(s.defaultValue)?o[s.name]=String(this.evaluateFunction(s.defaultValue,s.type)):o[s.name]=s.defaultValue:o[s.name]=s.type==="CHECKBOX"?"false":""}),this.tableData[e.name].push(o),this.updateTableValue(e)}canAddTableRow(e){return e.tableMaxRows?this.getTableRows(e).length<e.tableMaxRows:!0}canRemoveTableRow(e){let t=this.getTableRows(e),o=e.tableMinRows||0;return t.length>o}removeTableRow(e,t){this.isFieldReadonly(e)||this.tableData[e.name]&&(this.tableData[e.name].splice(t,1),this.updateTableValue(e))}onTableCellChange(e,t,o,s){if(this.isFieldReadonly(t))return;let C=e.target;this.tableData[t.name]&&this.tableData[t.name][o]&&(this.tableData[t.name][o][s]=C.value,this.updateTableValue(t))}onTableCheckboxChange(e,t,o,s){this.isFieldReadonly(t)||this.tableData[t.name]&&this.tableData[t.name][o]&&(this.tableData[t.name][o][s]=e.checked?"true":"false",this.updateTableValue(t))}updateTableValue(e){let t=JSON.stringify(this.tableData[e.name]||[]);this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched()}getAccordionFields(){if(this.isMultiStep){let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this.fields.filter(o=>{if(o.type!=="ACCORDION"||o.fieldGroupId||o.hidden||o.isHidden)return!1;let s=o.screenId?.toString();return s===e||t&&!s})}return this.fields.filter(e=>e.type==="ACCORDION"&&!e.fieldGroupId&&!(e.hidden||e.isHidden))}getAccordionFieldsInGroup(e){let t=e?.toString();if(this.isMultiStep){let o=this.currentScreen?.id?.toString(),s=this.currentScreenIndex===0;return this.fields.filter(C=>{if(C.type!=="ACCORDION"||C.fieldGroupId?.toString()!==t||C.hidden||C.isHidden)return!1;let v=C.screenId?.toString();return v===o||s&&!v})}return this.fields.filter(o=>o.type==="ACCORDION"&&o.fieldGroupId?.toString()===t&&!(o.hidden||o.isHidden))}getCollapsiblesForAccordion(e){let t=e?.toString();return t?this.fields.filter(o=>o.type==="COLLAPSIBLE"&&o.parentFieldId?.toString()===t&&!(o.hidden||o.isHidden)).sort((o,s)=>(o.displayOrder||0)-(s.displayOrder||0)):[]}getFieldsInCollapsible(e){let t=e?.toString();return t?this.fields.filter(o=>o.type==="ACCORDION"||o.type==="COLLAPSIBLE"||o.hidden||o.isHidden?!1:o.parentFieldId?.toString()===t).sort((o,s)=>(o.displayOrder||0)-(s.displayOrder||0)):[]}initAccordionState(e){let t=e.id?.toString();if(!t||this.accordionExpandedState[t])return;let o=this.getCollapsiblesForAccordion(t),s=new Set,C=e.accordionDefaultOpenIndex??0;C>=0&&C<o.length&&s.add(C),o.forEach((v,b)=>{v.collapsibleDefaultExpanded&&s.add(b)}),this.accordionExpandedState[t]=s}isCollapsibleExpanded(e,t){let o=e?.toString();return this.accordionExpandedState[o]?.has(t)??!1}openCollapsible(e,t){let o=e.id?.toString();if(!o)return;this.accordionExpandedState[o]||(this.accordionExpandedState[o]=new Set);let s=e.accordionAllowMultiple??!1,C=this.accordionExpandedState[o];s||C.clear(),C.add(t)}closeCollapsible(e,t){let o=e.id?.toString();o&&this.accordionExpandedState[o]&&this.accordionExpandedState[o].delete(t)}getAccordionAnimationDuration(e){return`${e.accordionAnimationDuration??300}ms`}getAccordionAnimationClass(e){switch(e.accordionAnimationType??"smooth"){case"none":return"no-animation";case"bounce":return"bounce-animation";default:return"smooth-animation"}}static \u0275fac=function(t){return new(t||n)(j(ye),j(Ct),j(mt),j($e),j(ge),j(fe),j(et),j(ue))};static \u0275cmp=pe({type:n,selectors:[["app-workflow-form"]],decls:12,vars:3,consts:[["picker",""],["auto","matAutocomplete"],["imageInput",""],["nestedPicker",""],["groupPicker",""],["autoGroup","matAutocomplete"],["imageInputGroup",""],["groupNestedPicker",""],["fileInput",""],[1,"workflow-form-container"],[1,"header"],["mat-icon-button","",3,"click"],[1,"subtitle"],[1,"loading"],[3,"formGroup"],["diameter","40"],[3,"ngSubmit","formGroup"],[1,"form-card","summary-card"],[1,"form-card"],[1,"form-actions"],[1,"form-actions","multi-step"],[1,"step-indicator"],[1,"screen-header"],[1,"step",3,"click"],[1,"step-circle"],[1,"step-label"],[1,"step-connector",3,"completed"],[1,"step-connector"],[1,"summary-table"],[1,"screen-col"],[1,"label-col"],[1,"value-col"],[1,"no-summary-fields"],[1,"hint"],[1,"fields-grid"],[1,"field-wrapper",3,"grid-column"],[1,"field-wrapper"],[1,"field-container"],[1,"radio-field",3,"has-error"],[1,"field-container","checkbox-group-field",3,"has-error"],[1,"file-field",3,"has-error"],["type","hidden",3,"formControlName"],[1,"label-field"],[1,"divider-field"],[1,"toggle-field"],[1,"yes-no-field",3,"has-error"],[1,"rating-field",3,"has-error"],[1,"slider-field",3,"has-error"],[1,"color-field",3,"has-error"],[1,"image-field",3,"has-error"],[1,"signature-field",3,"has-error"],[1,"rich-text-field",3,"has-error"],[1,"icon-field",3,"has-error"],[1,"barcode-field",3,"has-error"],[1,"location-field",3,"has-error"],[1,"table-field",3,"has-error","readonly-table"],[1,"accordion-field",3,"has-error"],[1,"standalone-collapsible"],["appearance","outline",1,"full-width"],[1,"required-asterisk"],["matInput","",3,"formControlName","placeholder","readonly"],[1,"validation-error"],["matInput","","rows","4",3,"formControlName","placeholder","readonly"],["matInput","","type","number",3,"formControlName","placeholder","readonly"],["matPrefix",""],["matInput","","type","email",3,"formControlName","placeholder","readonly"],["matInput","","type","tel",3,"formControlName","placeholder","readonly"],["matInput","","type","password",3,"formControlName","placeholder","readonly"],["matInput","",3,"matDatepicker","formControlName","readonly"],["matIconSuffix","",3,"for","disabled"],[3,"disabled"],["matInput","","type","datetime-local",3,"formControlName","readonly"],[3,"formControlName","placeholder","disabled"],[3,"value"],["multiple","",3,"formControlName","placeholder","disabled"],[1,"radio-field"],[1,"field-label"],[3,"formControlName","disabled"],[3,"value","disabled"],[1,"field-container","checkbox-group-field"],[1,"checkbox-options"],[3,"checked","disabled"],[3,"change","checked","disabled"],[1,"file-field"],["type","file",3,"change","multiple","disabled"],[1,"file-list"],["matInput","","type","url",3,"formControlName","placeholder","readonly"],["matInput","",3,"input","formControlName","matAutocomplete","placeholder","readonly"],[3,"optionSelected","displayWith"],["disabled",""],[1,"user-option"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"label-text"],[1,"label-description"],[1,"divider-label"],[1,"yes-no-field"],["value","yes"],["value","no"],[1,"rating-field"],[1,"star-rating"],[3,"filled","readonly"],[3,"click"],["matInput","","type","time",3,"formControlName","readonly"],[1,"slider-field"],[3,"min","max","step","discrete","disabled"],["matSliderThumb","",3,"formControlName"],[1,"color-field"],["type","color",1,"color-input",3,"formControlName","disabled"],[1,"image-field"],[1,"image-upload-area"],["type","file","accept","image/*","hidden","",3,"change"],["mat-stroked-button","","type","button",3,"click","disabled"],[1,"image-preview",3,"src"],[1,"signature-field"],[1,"signature-pad-container"],[1,"signature-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"signature-actions"],["mat-icon-button","","type","button","matTooltip","Clear signature",3,"click","disabled"],[1,"rich-text-field"],[1,"rich-text-editor"],[1,"rich-text-toolbar"],["mat-icon-button","","type","button","matTooltip","Bold",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Italic",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Underline",3,"click","disabled"],[1,"toolbar-divider"],["mat-icon-button","","type","button","matTooltip","Bullet list",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Numbered list",3,"click","disabled"],["contenteditable","true",1,"rich-text-content",3,"input","blur","innerHTML"],[1,"icon-field"],[1,"icon-picker"],[1,"selected-icon",3,"click"],[1,"dropdown-arrow"],[1,"icon-picker-dropdown"],["type","text","placeholder","Search icons...",1,"icon-search",3,"input","value"],[1,"icon-grid"],[1,"icon-option",3,"selected"],[1,"icon-option",3,"click"],[1,"barcode-field"],[1,"barcode-input"],["matInput","","placeholder","Enter or scan barcode...",3,"formControlName","readonly"],["mat-icon-button","","matSuffix","","type","button","matTooltip","Scan barcode",3,"click","disabled"],[1,"location-field"],[1,"location-input"],[1,"location-coords"],["appearance","outline",1,"coord-field"],["matInput","","type","number","step","any",3,"input","value","readonly"],["mat-icon-button","","type","button","matTooltip","Get current location",3,"click","disabled"],[1,"spinning"],[1,"location-preview"],[1,"table-field"],[1,"table-input"],[1,"data-table"],[3,"width"],[1,"actions-col"],[1,"table-actions"],["type","number",1,"table-cell-input",3,"value","readonly"],["type","date",1,"table-cell-input",3,"value","readonly"],["type","text",1,"table-cell-input",3,"value","readonly"],["type","number",1,"table-cell-input",3,"input","value","readonly"],["type","date",1,"table-cell-input",3,"input","value","readonly"],["type","text",1,"table-cell-input",3,"input","value","readonly"],["mat-icon-button","","type","button","matTooltip","Remove row",3,"click","disabled"],[1,"empty-table"],["mat-stroked-button","","type","button",1,"add-row-btn",3,"click","disabled"],[1,"row-count"],[1,"checkbox-group-field",3,"has-error"],[1,"checkbox-group-field"],[1,"checkbox-group"],[1,"accordion-field"],[1,"field-label","accordion-label"],[3,"multi"],[3,"opened","closed","expanded"],[1,"collapsible-icon"],[1,"collapsible-content","fields-grid"],["matInput","","rows","4",3,"formControlName","readonly"],["matInput","","type","number",3,"formControlName","readonly"],["matInput","",3,"formControlName","readonly"],[3,"expanded"],[1,"form-card","group-card"],[3,"expanded","hideToggle"],["multiple","",3,"formControlName","disabled"],["matTextPrefix",""],["matInput","","type","number","step","0.01",3,"formControlName","readonly"],["matInput","","type","email",3,"formControlName","readonly"],["matInput","","type","tel",3,"formControlName","readonly"],["matInput","","type","password",3,"formControlName","readonly"],["matInput","","type","url",3,"formControlName","readonly"],[1,"attachment-area"],["type","file","multiple","","hidden","",3,"change"],["mat-stroked-button","","type","button",3,"click"],[1,"attachment-list"],[1,"attachment-item"],[1,"size"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20"],[1,"spacer"],["mat-raised-button","","color","primary","type","button",3,"click"]],template:function(t,o){t&1&&(l(0,"div",9)(1,"div",10)(2,"button",11),O("click",function(){return o.goBack()}),l(3,"mat-icon"),c(4,"arrow_back"),r()(),l(5,"div")(6,"h1"),c(7),r(),l(8,"p",12),c(9),r()()(),u(10,Nt,4,0,"div",13)(11,vd,10,8,"form",14),r()),t&2&&(i(7),x(o.workflow==null?null:o.workflow.name),i(2),x(o.isEditMode?"Edit Submission":"New Submission"),i(),p(o.loading?10:o.workflow?11:-1))},dependencies:[xe,Oe,we,Ee,Te,Se,be,Me,ke,Fe,Be,De,Ve,Ue,Le,Ae,ze,Ye,qe,Ge,He,Xe,Je,Ze,Qe,he,vt,gt,Ft,ht,ve,ut,pt,Mt,wt,Tt,Ne,We,Re,Ie,Pe,dt,_t,ot,at,lt,rt,tt,Ke,je,st,ct,bt,Et,St,it,nt,ft,xt,Ot,kt,yt,Rt,Pt,It],styles:[".workflow-form-container[_ngcontent-%COMP%]{padding:1rem;max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#666}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666}.form-card[_ngcontent-%COMP%]{margin-bottom:1rem}.group-card[_ngcontent-%COMP%]{padding:0}.group-card[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header{background:var(--form-field-header-bg, #1976d2)!important;color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header:hover{background:var(--form-field-header-bg, #1976d2)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-content{color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header-title, .group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header-description{color:var(--form-field-header-color, #ffffff)!important}.fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;padding:1rem 0}.field-wrapper[_ngcontent-%COMP%]{min-width:0}.full-width[_ngcontent-%COMP%]{width:100%}.field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;color:#0009}.required[_ngcontent-%COMP%]{color:#f44336}.required-asterisk[_ngcontent-%COMP%]{color:#f44336;font-weight:700;margin-left:2px}.has-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .3s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-2px)}75%{transform:translate(2px)}}.field-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem;margin-top:4px}.field-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.validation-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem;margin-top:-16px;padding-left:14px;line-height:1.2}.field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border-color:#f44336!important}.field-invalid[_ngcontent-%COMP%]     .mat-mdc-floating-label{color:#f44336!important}.radio-field[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.radio-field[_ngcontent-%COMP%]   mat-radio-group.horizontal-layout[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:1rem}.file-field[_ngcontent-%COMP%], .checkbox-group-field[_ngcontent-%COMP%]{padding:.5rem 0}.checkbox-group-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:#000000de}.checkbox-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkbox-options.horizontal-layout[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:1rem}.label-field[_ngcontent-%COMP%]{padding:1rem 0}.label-field[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0;color:#000000de}.label-field[_ngcontent-%COMP%]   .label-description[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:.25rem 0 0}.divider-field[_ngcontent-%COMP%]{padding:1rem 0;position:relative}.divider-field[_ngcontent-%COMP%]   .divider-label[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:0 1rem;color:#666;font-size:.875rem}.toggle-field[_ngcontent-%COMP%], .yes-no-field[_ngcontent-%COMP%]{padding:.5rem 0}.yes-no-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.rating-field[_ngcontent-%COMP%]{padding:.5rem 0}.star-rating[_ngcontent-%COMP%]{display:flex;gap:.25rem}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#ffc107;font-size:28px;width:28px;height:28px;transition:transform .1s ease}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover:not(.readonly){transform:scale(1.1)}.star-rating[_ngcontent-%COMP%]   mat-icon.readonly[_ngcontent-%COMP%]{cursor:default}.star-rating[_ngcontent-%COMP%]   mat-icon.filled[_ngcontent-%COMP%]{color:#ffc107}.slider-field[_ngcontent-%COMP%]{padding:.5rem 0}.slider-field[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.color-field[_ngcontent-%COMP%]{padding:.5rem 0}.color-field[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #ccc;border-radius:4px;cursor:pointer;padding:4px}.image-field[_ngcontent-%COMP%]{padding:.5rem 0}.image-upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.5rem}.image-preview[_ngcontent-%COMP%]{max-width:200px;max-height:150px;margin-top:.5rem;border-radius:4px;border:1px solid #ddd}.signature-field[_ngcontent-%COMP%], .rich-text-field[_ngcontent-%COMP%], .icon-field[_ngcontent-%COMP%], .barcode-field[_ngcontent-%COMP%], .location-field[_ngcontent-%COMP%], .table-field[_ngcontent-%COMP%]{padding:.5rem 0}.signature-pad-container[_ngcontent-%COMP%]{position:relative;border:1px solid #ddd;border-radius:4px;background:#fff}.signature-canvas[_ngcontent-%COMP%]{width:100%;height:150px;cursor:crosshair;display:block;touch-action:none}.signature-actions[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px}.signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffffe6}.rich-text-editor[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;overflow:hidden}.rich-text-toolbar[_ngcontent-%COMP%]{display:flex;gap:.25rem;padding:.5rem;background:#f5f5f5;border-bottom:1px solid #ddd;flex-wrap:wrap}.rich-text-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;width:36px;height:36px}.toolbar-divider[_ngcontent-%COMP%]{width:1px;background:#ddd;margin:0 .25rem}.rich-text-content[_ngcontent-%COMP%]{min-height:120px;padding:.75rem;outline:none;font-size:.875rem;line-height:1.5}.rich-text-content[_ngcontent-%COMP%]:focus{background:#fafafa}.rich-text-content[contenteditable=false][_ngcontent-%COMP%]{background:#f5f5f5;cursor:not-allowed}.icon-selector[_ngcontent-%COMP%]{position:relative}.selected-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;border:2px solid #ddd;border-radius:8px;cursor:pointer;transition:all .2s;background:#fff}.selected-icon[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#1976d2;background:#e3f2fd}.selected-icon.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.selected-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#333}.icon-picker-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:.75rem;width:320px;max-height:350px;overflow:hidden;display:flex;flex-direction:column}.icon-search[_ngcontent-%COMP%]{margin-bottom:.5rem}.icon-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.icon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:.25rem;overflow-y:auto;max-height:250px;padding:.25rem}.icon-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:4px;cursor:pointer;transition:all .15s}.icon-option[_ngcontent-%COMP%]:hover{background:#e3f2fd}.icon-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.icon-option[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.barcode-input[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.barcode-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.location-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.location-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.location-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}.location-display[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.75rem;color:#666}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #ddd;border-radius:4px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;padding:.5rem;text-align:left;font-weight:500;font-size:.875rem;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid transparent;border-radius:4px;font-size:.875rem}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1976d2;outline:none}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.data-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:50px;text-align:center}.data-table[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#999}.data-table.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#fafafa}.data-table.table-bordered[_ngcontent-%COMP%], .data-table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .data-table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd}.table-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-top:.5rem}.row-count[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-style:italic}.table-actions[_ngcontent-%COMP%]{margin-top:.5rem}.file-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.attachment-area[_ngcontent-%COMP%]{padding:1rem;border:2px dashed #ddd;border-radius:4px;text-align:center}.attachment-list[_ngcontent-%COMP%]{margin-top:1rem;text-align:left}.attachment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:#f5f5f5;border-radius:4px;margin-bottom:.5rem}.attachment-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.attachment-item[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{flex:0;color:#666;font-size:.75rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}.form-actions.multi-step[_ngcontent-%COMP%]{justify-content:flex-start}.form-actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}.summary-card[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:.5rem;border-bottom:1px solid #e0e0e0;margin-bottom:1rem}.summary-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.1rem;color:#333}.summary-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.summary-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .summary-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;border-bottom:1px solid #e0e0e0}.summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;font-weight:500;color:#666;font-size:.8rem;text-transform:uppercase;letter-spacing:.5px}.summary-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f9f9f9}.summary-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.summary-table[_ngcontent-%COMP%]   .screen-col[_ngcontent-%COMP%]{width:20%;color:#666;font-size:.85rem}.summary-table[_ngcontent-%COMP%]   .label-col[_ngcontent-%COMP%]{width:35%;font-weight:500;color:#333}.summary-table[_ngcontent-%COMP%]   .value-col[_ngcontent-%COMP%]{width:45%;color:#666}.dark-mode[_nghost-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{border-bottom-color:#424242}.dark-mode[_nghost-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{color:#fff}.dark-mode[_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#333;color:#bbb}.dark-mode[_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-color:#424242}.dark-mode[_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover, .dark-mode   [_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#2a2a2a}.dark-mode[_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   .label-col[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   .label-col[_ngcontent-%COMP%]{color:#fff}.dark-mode[_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   .value-col[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   .value-col[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   .screen-col[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .summary-table[_ngcontent-%COMP%]   .screen-col[_ngcontent-%COMP%]{color:#bbb}.no-summary-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;text-align:center;color:#666}.no-summary-fields[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999;margin-bottom:1rem}.no-summary-fields[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0}.no-summary-fields[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.85rem;color:#999}.dark-mode[_nghost-%COMP%]   .no-summary-fields[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .no-summary-fields[_ngcontent-%COMP%]{color:#bbb}.dark-mode[_nghost-%COMP%]   .no-summary-fields[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .no-summary-fields[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.dark-mode[_nghost-%COMP%]   .no-summary-fields[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .no-summary-fields[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#666}.step-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.75rem .5rem;margin-bottom:.5rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;cursor:pointer;min-width:60px}.step-circle[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e0e0e0;color:#666;font-size:.875rem;font-weight:500;font-size:1rem;transition:all .3s ease}.step.active[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;box-shadow:0 2px 8px #1976d266}.step.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.step.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.step-label[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.7rem;color:#666;text-align:center;max-width:80px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#1976d2;font-weight:500}.step.completed[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#4caf50}.step-connector[_ngcontent-%COMP%]{flex:1;height:2px;background:#e0e0e0;margin:0 .25rem .75rem;max-width:80px;transition:background .3s ease}.step-connector.completed[_ngcontent-%COMP%]{background:#4caf50}.screen-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:.5rem .75rem;margin-bottom:.5rem;background:#f5f5f5;border-radius:6px;border-left:3px solid #1976d2}.screen-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:1.25rem;width:1.25rem;height:1.25rem;margin-top:.125rem}.screen-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:#333}.screen-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.125rem 0 0;font-size:.8rem;color:#666}.user-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.25rem 0}.user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem}.user-email[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.dark-mode[_nghost-%COMP%]   .workflow-form-container[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .workflow-form-container[_ngcontent-%COMP%]{background:#1e1e1e;color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .form-card[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#2d2d2d!important}.dark-mode[_nghost-%COMP%]   .form-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565c0,#0d47a1)}.dark-mode[_nghost-%COMP%]   .workflow-title[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .workflow-title[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   h3[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   h3[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .field-label[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .field-label[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .group-title[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]   .workflow-description[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .workflow-description[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .field-hint[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .field-hint[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .group-description[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .group-description[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .screen-description[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-description[_ngcontent-%COMP%]{color:#aaa!important}.dark-mode[_nghost-%COMP%]   .required-indicator[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .required-indicator[_ngcontent-%COMP%]{color:#ff6b6b}.dark-mode[_nghost-%COMP%]   .field-group[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .field-group[_ngcontent-%COMP%]{background:#333;border-color:#444}.dark-mode[_nghost-%COMP%]   .group-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .group-header[_ngcontent-%COMP%]{background:#3d3d3d;border-color:#444}.dark-mode[_nghost-%COMP%]   .divider-field[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .divider-field[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .label-field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .label-field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .file-list[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-list[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .file-item[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-item[_ngcontent-%COMP%]{background:#333;border-color:#444;color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffc107}.dark-mode[_nghost-%COMP%]   .slider-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .slider-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .color-preview[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .color-preview[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888}.dark-mode[_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888}.dark-mode[_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#333;border-color:#444;color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .data-table.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd), .dark-mode   [_nghost-%COMP%]   .data-table.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .data-table.table-bordered[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .data-table.table-bordered[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .data-table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .data-table.table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .data-table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .data-table.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .row-count[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .row-count[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .icon-display[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .icon-display[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .icon-name[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .icon-name[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .screen-tabs[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tabs[_ngcontent-%COMP%]{background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .screen-tab[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tab[_ngcontent-%COMP%]{background:#333;border-color:#444;color:#aaa}.dark-mode[_nghost-%COMP%]   .screen-tab.active[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tab.active[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border-color:#1976d2}.dark-mode[_nghost-%COMP%]   .screen-tab.completed[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tab.completed[_ngcontent-%COMP%]{background:#2e7d32;color:#fff}.dark-mode[_nghost-%COMP%]   .screen-navigation[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-navigation[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .screen-counter[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-counter[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .attachments-section[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .attachments-section[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .attachments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .attachments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .comments-section[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .comments-section[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .user-email[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .user-email[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]     .mat-mdc-form-field, .dark-mode   [_nghost-%COMP%]     .mat-mdc-form-field{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-mdc-floating-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-floating-label{color:#aaa!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-input-element, .dark-mode   [_nghost-%COMP%]     .mat-mdc-input-element{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-select-value, .dark-mode   [_nghost-%COMP%]     .mat-mdc-select-value{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__leading, .dark-mode   [_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__leading, .dark-mode[_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__notch, .dark-mode   [_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__notch, .dark-mode[_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__trailing, .dark-mode   [_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__trailing{border-color:#555!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-form-field-hint, .dark-mode   [_nghost-%COMP%]     .mat-mdc-form-field-hint{color:#888!important}.dark-mode[_nghost-%COMP%]     .mat-expansion-panel, .dark-mode   [_nghost-%COMP%]     .mat-expansion-panel{background:#2d2d2d!important}.dark-mode[_nghost-%COMP%]     .mat-expansion-panel-header-title, .dark-mode   [_nghost-%COMP%]     .mat-expansion-panel-header-title{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-radio-button .mdc-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-radio-button .mdc-label{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-mdc-checkbox .mdc-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-checkbox .mdc-label{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-label{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-button-toggle-group, .dark-mode   [_nghost-%COMP%]     .mat-button-toggle-group{border-color:#444}.dark-mode[_nghost-%COMP%]     .mat-button-toggle, .dark-mode   [_nghost-%COMP%]     .mat-button-toggle{color:#e0e0e0;background:#2d2d2d}.dark-mode[_nghost-%COMP%]     .mat-button-toggle-checked, .dark-mode   [_nghost-%COMP%]     .mat-button-toggle-checked{background:#1976d2;color:#fff}.dark-mode[_nghost-%COMP%]     .mat-mdc-card, .dark-mode   [_nghost-%COMP%]     .mat-mdc-card{background:#2d2d2d!important;color:#e0e0e0}.accordion-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.accordion-label[_ngcontent-%COMP%]{display:block;margin-bottom:12px;font-weight:500;font-size:14px;color:#333}.workflow-accordion[_ngcontent-%COMP%]{width:100%}.workflow-accordion[_ngcontent-%COMP%]   .collapsible-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;width:20px;height:20px}.workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel{margin-bottom:8px;border-radius:8px!important;box-shadow:0 2px 4px #0000001a!important}.workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-header{font-weight:500}.workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-header-title{display:flex;align-items:center}.collapsible-content[_ngcontent-%COMP%]{padding:16px 0}.collapsible-content.fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.standalone-collapsible[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.standalone-collapsible[_ngcontent-%COMP%]     .mat-expansion-panel{border-radius:8px!important;box-shadow:0 2px 4px #0000001a!important}.standalone-collapsible[_ngcontent-%COMP%]   .collapsible-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;width:20px;height:20px}.workflow-accordion.smooth-animation[_ngcontent-%COMP%]     .mat-expansion-panel-body{transition:all .3s ease-in-out}.workflow-accordion.bounce-animation[_ngcontent-%COMP%]     .mat-expansion-panel-body{transition:all .3s cubic-bezier(.68,-.55,.265,1.55)}.workflow-accordion.no-animation[_ngcontent-%COMP%]     .mat-expansion-panel-body{transition:none}.dark-mode[_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .accordion-label[_ngcontent-%COMP%]{color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel, .dark-mode   [_nghost-%COMP%]   .workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel{background:#333!important;box-shadow:0 2px 4px #0000004d!important}.dark-mode[_nghost-%COMP%]   .workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-header, .dark-mode   [_nghost-%COMP%]   .workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-header{background:#333!important}.dark-mode[_nghost-%COMP%]   .workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-header-title, .dark-mode   [_nghost-%COMP%]   .workflow-accordion[_ngcontent-%COMP%]     .mat-expansion-panel-header-title{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]   .standalone-collapsible[_ngcontent-%COMP%]     .mat-expansion-panel, .dark-mode   [_nghost-%COMP%]   .standalone-collapsible[_ngcontent-%COMP%]     .mat-expansion-panel{background:#333!important;box-shadow:0 2px 4px #0000004d!important}.dark-mode[_nghost-%COMP%]   .collapsible-icon[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .collapsible-icon[_ngcontent-%COMP%]{color:#aaa}"]})}return n})();export{xc as WorkflowFormComponent};
