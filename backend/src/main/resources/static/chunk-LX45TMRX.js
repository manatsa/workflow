import{a as ie,b as re}from"./chunk-UYHUY2FW.js";import{a as $,c as ee,d as te}from"./chunk-ZK2UDSKG.js";import{b as K,c as Q,e as X,f as Y,i as Z}from"./chunk-FHBRY4FZ.js";import{d as P,f as h,h as y,i as E,l as F,n as I,o as L,r as k,t as T}from"./chunk-JITRQZ7S.js";import{a as G,b as R,c as V,d as U,e as z,f as H,g as W,h as J}from"./chunk-LB6LFADN.js";import{a as D}from"./chunk-4FIQ4TSC.js";import{c as v,d as w,g as x}from"./chunk-PKMLTJ2J.js";import{m as S,qa as N,ra as q,sa as A,ta as O,ua as j,va as B}from"./chunk-LBWRLA47.js";import{Ab as p,Fb as d,Kb as e,Lb as t,Mb as g,Ub as f,Vb as _,bb as a,dc as r,ec as M,gb as c,nb as b,tb as l}from"./chunk-5XIHPI6O.js";function oe(i,s){if(i&1&&(e(0,"div",3),r(1),t()),i&2){let n=_();a(),M(n.errorMessage)}}function ne(i,s){i&1&&(e(0,"mat-error"),r(1,"Username is required"),t())}function ae(i,s){i&1&&(e(0,"mat-error"),r(1,"Password is required"),t())}function me(i,s){i&1&&g(0,"mat-spinner",11)}function le(i,s){i&1&&r(0," Sign In ")}var Fe=(()=>{class i{fb;authService;router;loginForm;loading=!1;hidePassword=!0;errorMessage="";constructor(n,m,o){this.fb=n,this.authService=m,this.router=o,this.loginForm=this.fb.group({username:["",h.required],password:["",h.required]})}onSubmit(){this.loginForm.invalid||(this.loading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:n=>{this.loading=!1,n.success?n.data.mustChangePassword?this.router.navigate(["/change-password"]):this.router.navigate(["/dashboard"]):this.errorMessage=n.message||"Login failed"},error:n=>{this.loading=!1,this.errorMessage=n.error?.message||"An error occurred. Please try again."}}))}static \u0275fac=function(m){return new(m||i)(c(k),c(D),c(v))};static \u0275cmp=b({type:i,selectors:[["app-login"]],decls:35,vars:8,consts:[[1,"login-container"],[1,"login-card"],["mat-card-avatar",""],[1,"error-message"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","username","autocomplete","username"],["matPrefix",""],["matInput","","formControlName","password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"login-button",3,"disabled"],["diameter","20"],["align","end"],["mat-button","","routerLink","/forgot-password"]],template:function(m,o){if(m&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-icon",2),r(4,"workflow"),t(),e(5,"mat-card-title"),r(6,"Sonarworks Workflow"),t(),e(7,"mat-card-subtitle"),r(8,"Sign in to your account"),t()(),e(9,"mat-card-content"),l(10,oe,2,1,"div",3),e(11,"form",4),f("ngSubmit",function(){return o.onSubmit()}),e(12,"mat-form-field",5)(13,"mat-label"),r(14,"Username"),t(),g(15,"input",6),e(16,"mat-icon",7),r(17,"person"),t(),l(18,ne,2,0,"mat-error"),t(),e(19,"mat-form-field",5)(20,"mat-label"),r(21,"Password"),t(),g(22,"input",8),e(23,"mat-icon",7),r(24,"lock"),t(),e(25,"button",9),f("click",function(){return o.hidePassword=!o.hidePassword}),e(26,"mat-icon"),r(27),t()(),l(28,ae,2,0,"mat-error"),t(),e(29,"button",10),l(30,me,1,0,"mat-spinner",11)(31,le,1,0),t()()(),e(32,"mat-card-actions",12)(33,"a",13),r(34,"Forgot Password?"),t()()()()),m&2){let u,C;a(10),d(o.errorMessage?10:-1),a(),p("formGroup",o.loginForm),a(7),d((u=o.loginForm.get("username"))!=null&&u.hasError("required")?18:-1),a(4),p("type",o.hidePassword?"password":"text"),a(5),M(o.hidePassword?"visibility_off":"visibility"),a(),d((C=o.loginForm.get("password"))!=null&&C.hasError("required")?28:-1),a(),p("disabled",o.loading),a(),d(o.loading?30:31)}},dependencies:[S,T,F,P,y,E,I,L,x,w,J,G,z,W,V,H,U,R,$,Z,K,Q,X,Y,te,ee,B,j,O,A,q,N,re,ie],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1976d2,#1565c0)}.login-card[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:1rem}mat-card-header[_ngcontent-%COMP%]{margin-bottom:1rem}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.login-button[_ngcontent-%COMP%]{width:100%;height:48px;font-size:1rem}.error-message[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:.75rem;border-radius:4px;margin-bottom:1rem}"]})}return i})();export{Fe as LoginComponent};
