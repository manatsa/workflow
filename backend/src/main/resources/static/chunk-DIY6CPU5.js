import{a as ft,b as xt,c as Ft,d as gt,e as ht,f as Et,g as vt,h as St,i as wt}from"./chunk-QFPR6THL.js";import{a as pt,b as Ct,c as ut}from"./chunk-ZMVFBH4E.js";import{a as dt,b as ct,c as st,d as mt}from"./chunk-MSROSKVG.js";import{a as lt,b as _t}from"./chunk-6OSA477V.js";import{a as at,b as rt}from"./chunk-67L4UISH.js";import{a as ot}from"./chunk-KHA6H2VC.js";import{c as pe}from"./chunk-EC7BDYIR.js";import"./chunk-J43BGVIN.js";import"./chunk-MS4AQ6UA.js";import{a as Ge,b as He}from"./chunk-DCGWK6OW.js";import{d as me}from"./chunk-WNUHNPS4.js";import{a as je,b as Ke,c as Qe,d as Ze,f as et}from"./chunk-3QZG32TM.js";import{a as Je,b as Xe}from"./chunk-I4PAJBBT.js";import{a as tt,c as it}from"./chunk-INV3KQYA.js";import{b as Ye,c as ze}from"./chunk-C5XODKZL.js";import"./chunk-LU6VCXUA.js";import"./chunk-AGZT6V36.js";import{a as qe,b as Be}from"./chunk-CDWC6WKW.js";import{b as Ae,e as Ne,f as Pe,i as $e,j as Ve,l as Ue,m as Le}from"./chunk-ZS434AQM.js";import{d as Ce,f as ne,i as ue,j as fe,n as xe,o as Fe,q as ge,r as he,u as Ee,w as ve}from"./chunk-M3VCE5SG.js";import{a as Me,b as Ie,c as Re,d as Oe,f as We,h as De}from"./chunk-BTSRKJZZ.js";import{a as nt}from"./chunk-2UBRB5ZZ.js";import"./chunk-MNRHFUYD.js";import"./chunk-UF7Y5AYJ.js";import"./chunk-PMYQJTBZ.js";import{a as ye}from"./chunk-W7JX3HPD.js";import{a as de,c as ce,g as se}from"./chunk-M6HZK7Y7.js";import{Aa as ke,q as _e,va as Se,wa as we,xa as Te,ya as be}from"./chunk-37H25STD.js";import{B as ae,Cc as le,Db as H,Eb as h,Fb as ee,Gb as w,H as K,Jb as C,Kb as te,Lb as X,Mb as A,Nb as N,Ob as _,Pb as r,Qb as O,Ub as W,Yb as y,Zb as l,a as B,ab as Q,b as G,bb as Z,c as J,eb as n,gc as q,hc as d,ic as f,jb as L,jc as D,kc as j,oa as T,pa as b,qb as re,qc as ie,wb as u}from"./chunk-UYCZSUYP.js";var Tt=()=>[],Y=(i,c)=>c.id,P=(i,c)=>c.value,z=(i,c)=>c.name;function bt(i,c){i&1&&(_(0,"div",11),O(1,"mat-spinner",13),_(2,"p"),d(3,"Loading form..."),r()())}function kt(i,c){i&1&&(_(0,"mat-icon"),d(1,"check"),r())}function yt(i,c){if(i&1&&d(0),i&2){let e=l().$index;D(" ",e+1," ")}}function Mt(i,c){if(i&1&&O(0,"div",25),i&2){let e=l().$index,t=l(3);w("completed",e<t.currentScreenIndex)}}function It(i,c){if(i&1){let e=W();_(0,"div",21),y("click",function(){let o=T(e).$index,s=l(3);return b(s.goToScreen(o))}),_(1,"div",22),u(2,kt,2,0,"mat-icon")(3,yt,1,1),r(),_(4,"span",23),d(5),r()(),u(6,Mt,1,2,"div",24)}if(i&2){let e=c.$implicit,t=c.$index,o=l(3);w("active",t===o.currentScreenIndex)("completed",t<o.currentScreenIndex),n(2),C(t<o.currentScreenIndex?2:3),n(3),f(e.title||"Step "+(t+1)),n(),C(t<o.screens.length-1?6:-1)}}function Rt(i,c){if(i&1&&(_(0,"mat-icon"),d(1),r()),i&2){let e=l(4);n(),f(e.currentScreen.icon)}}function Ot(i,c){if(i&1&&(_(0,"p"),d(1),r()),i&2){let e=l(4);n(),f(e.currentScreen.description)}}function Wt(i,c){if(i&1&&(_(0,"div",20),u(1,Rt,2,1,"mat-icon"),_(2,"div")(3,"h2"),d(4),r(),u(5,Ot,2,1,"p"),r()()),i&2){let e=l(3);n(),C(e.currentScreen.icon?1:-1),n(3),f(e.currentScreen.title),n(),C(e.currentScreen.description?5:-1)}}function Dt(i,c){if(i&1&&(_(0,"div",19),A(1,It,7,7,null,null,Y),r(),u(3,Wt,6,3,"div",20)),i&2){let e=l(2);n(),N(e.screens),n(2),C(e.currentScreen?3:-1)}}function At(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Nt(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Pt(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,At,2,0,"span",49),r(),O(5,"input",50),r(),u(6,Nt,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function $t(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Vt(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ut(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,$t,2,0,"span",49),r(),O(5,"textarea",52),r(),u(6,Vt,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Lt(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function qt(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Bt(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Lt,2,0,"span",49),r(),O(5,"input",53),r(),u(6,qt,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Gt(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ht(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Yt(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Gt,2,0,"span",49),r(),O(5,"input",53),_(6,"span",54),d(7,"$\xA0"),r()(),u(8,Ht,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(3),C(t.hasFieldError(e)?8:-1)}}function zt(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Jt(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Xt(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,zt,2,0,"span",49),r(),O(5,"input",55),r(),u(6,Jt,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function jt(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Kt(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Qt(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,jt,2,0,"span",49),r(),O(5,"input",56),r(),u(6,Kt,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Zt(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ei(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ti(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Zt,2,0,"span",49),r(),O(5,"input",57),r(),u(6,ei,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function ii(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ni(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function oi(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ii,2,0,"span",49),r(),O(5,"input",58)(6,"mat-datepicker-toggle",59)(7,"mat-datepicker",60,0),r(),u(9,ni,2,1,"div",51),r()),i&2){let e=q(8),t=l(2).$implicit,o=l(3);n(),w("field-invalid",o.hasFieldError(t)),n(2),f(t.label),n(),C(o.isFieldRequired(t)?4:-1),n(),h("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),n(),h("for",e)("disabled",o.isFieldReadonly(t)),n(),h("disabled",o.isFieldReadonly(t)),n(2),C(o.hasFieldError(t)?9:-1)}}function ai(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ri(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function li(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ai,2,0,"span",49),r(),O(5,"input",61),r(),u(6,ri,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function _i(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function di(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function ci(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function si(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,_i,2,0,"span",49),r(),_(5,"mat-select",62),A(6,di,2,2,"mat-option",63,P),r()(),u(8,ci,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function mi(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function pi(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Ci(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ui(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,mi,2,0,"span",49),r(),_(5,"mat-select",64),A(6,pi,2,2,"mat-option",63,P),r()(),u(8,Ci,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function fi(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function xi(i,c){if(i&1&&(_(0,"mat-radio-button",68),d(1),r()),i&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);h("value",e.value)("disabled",o.isFieldReadonly(t)),n(),f(e.label)}}function Fi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function gi(i,c){if(i&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,fi,2,0,"span",49),r(),_(4,"mat-radio-group",67),A(5,xi,2,3,"mat-radio-button",68,P),r(),u(7,Fi,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?7:-1)}}function hi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ei(i,c){if(i&1&&(_(0,"div",29)(1,"mat-checkbox",67),d(2),r(),u(3,hi,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),f(e.label),n(),C(t.hasFieldError(e)?3:-1)}}function vi(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Si(i,c){if(i&1){let e=W();_(0,"mat-checkbox",72),y("change",function(o){let s=T(e).$implicit,p=l(3).$implicit,v=l(3);return b(v.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(i&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);h("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),n(),D(" ",e.label||e.value," ")}}function wi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ti(i,c){if(i&1&&(_(0,"div",69)(1,"label",66),d(2),u(3,vi,2,0,"span",49),r(),_(4,"div",70),A(5,Si,2,3,"mat-checkbox",71,P),r(),u(7,wi,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),n(),N(e.options||ie(7,Tt)),n(2),C(t.hasFieldError(e)?7:-1)}}function bi(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ki(i,c){if(i&1&&(_(0,"mat-chip"),d(1),r()),i&2){let e=c.$implicit;n(),f(e.name)}}function yi(i,c){if(i&1&&(_(0,"div",75),A(1,ki,2,1,"mat-chip",null,z),r()),i&2){let e=l(3).$implicit,t=l(3);n(),N(t.selectedFiles[e.name])}}function Mi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ii(i,c){if(i&1){let e=W();_(0,"div",73)(1,"label",66),d(2),u(3,bi,2,0,"span",49),r(),_(4,"input",74),y("change",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onFileSelect(o,s.name))}),r(),u(5,yi,3,0,"div",75)(6,Mi,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),h("multiple",e.multiple)("disabled",t.isFieldReadonly(e)),n(),C(t.selectedFiles[e.name]&&t.selectedFiles[e.name].length>0?5:-1),n(),C(t.hasFieldError(e)?6:-1)}}function Ri(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Oi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Wi(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Ri,2,0,"span",49),r(),O(5,"input",76),r(),u(6,Oi,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Di(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ai(i,c){if(i&1&&(_(0,"mat-option",63)(1,"div",80)(2,"mat-icon"),d(3,"person"),r(),_(4,"div",81)(5,"span",82),d(6),r(),_(7,"span",83),d(8),r()()()()),i&2){let e=c.$implicit;h("value",e),n(6),j("",e.firstName," ",e.lastName,""),n(2),f(e.email)}}function Ni(i,c){i&1&&(_(0,"mat-option",79),d(1,"No users found"),r())}function Pi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function $i(i,c){if(i&1){let e=W();_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Di,2,0,"span",49),r(),_(5,"mat-icon",54),d(6,"person_search"),r(),_(7,"input",77),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onUserSearch(o,s.name))}),r(),_(8,"mat-autocomplete",78,1),y("optionSelected",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onUserSelected(o,s.name))}),A(10,Ai,9,4,"mat-option",63,Y),u(12,Ni,2,0,"mat-option",79),r()(),u(13,Pi,2,1,"div",51),r()}if(i&2){let e=q(9),t=l(2).$implicit,o=l(3);n(),w("field-invalid",o.hasFieldError(t)),n(2),f(t.label),n(),C(o.isFieldRequired(t)?4:-1),n(3),h("formControlName",t.name)("matAutocomplete",e)("placeholder",t.placeholder||"Search for a user...")("readonly",o.isFieldReadonly(t)),n(),h("displayWith",o.displayUserFn),n(2),N(o.getFilteredUsers(t.name)),n(2),C(o.getFilteredUsers(t.name).length===0&&o.userSearchTerms[t.name]?12:-1),n(),C(o.hasFieldError(t)?13:-1)}}function Vi(i,c){if(i&1&&O(0,"input",33),i&2){let e=l(2).$implicit;h("formControlName",e.name)}}function Ui(i,c){if(i&1&&(_(0,"p",85),d(1),r()),i&2){let e=l(3).$implicit;n(),f(e.defaultValue)}}function Li(i,c){if(i&1&&(_(0,"div",34)(1,"p",84),d(2),r(),u(3,Ui,2,1,"p",85),r()),i&2){let e=l(2).$implicit;n(2),f(e.label),n(),C(e.defaultValue?3:-1)}}function qi(i,c){if(i&1&&(_(0,"span",86),d(1),r()),i&2){let e=l(3).$implicit;n(),f(e.label)}}function Bi(i,c){if(i&1&&(_(0,"div",35),O(1,"mat-divider"),u(2,qi,2,1,"span",86),r()),i&2){let e=l(2).$implicit;n(2),C(e.label?2:-1)}}function Gi(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Hi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Yi(i,c){if(i&1&&(_(0,"div",36)(1,"mat-slide-toggle",67),d(2),u(3,Gi,2,0,"span",49),r(),u(4,Hi,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),D(" ",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),C(t.hasFieldError(e)?4:-1)}}function zi(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ji(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Xi(i,c){if(i&1&&(_(0,"div",87)(1,"label",66),d(2),u(3,zi,2,0,"span",49),r(),_(4,"mat-button-toggle-group",67)(5,"mat-button-toggle",88),d(6,"Yes"),r(),_(7,"mat-button-toggle",89),d(8,"No"),r()(),u(9,Ji,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(5),C(t.hasFieldError(e)?9:-1)}}function ji(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ki(i,c){if(i&1){let e=W();_(0,"mat-icon",93),y("click",function(){let o=T(e).$implicit,s=l(3).$implicit,p=l(3);return b(p.setRating(s,o))}),d(1),r()}if(i&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);w("filled",o.getRatingValue(t)>=e)("readonly",o.isFieldReadonly(t)),n(),D(" ",o.getRatingValue(t)>=e?"star":"star_border"," ")}}function Qi(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Zi(i,c){if(i&1&&(_(0,"div",90)(1,"label",66),d(2),u(3,ji,2,0,"span",49),r(),_(4,"div",91),A(5,Ki,2,5,"mat-icon",92,X),r(),u(7,Qi,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(2),N(t.getStarArray(e)),n(2),C(t.hasFieldError(e)?7:-1)}}function en(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function tn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function nn(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,en,2,0,"span",49),r(),O(5,"input",94),r(),u(6,tn,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function on(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function an(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function rn(i,c){if(i&1&&(_(0,"div",95)(1,"label",66),d(2),u(3,on,2,0,"span",49),r(),_(4,"mat-slider",96),O(5,"input",97),r(),u(6,an,2,1,"div",51),r()),i&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),n(2),j("",t.label,": ",((e=o.form.get(t.name))==null?null:e.value)||0," "),n(),C(o.isFieldRequired(t)?3:-1),n(),h("min",t.sliderMin||0)("max",t.sliderMax||100)("step",t.sliderStep||1)("discrete",!0)("disabled",o.isFieldReadonly(t)),n(),h("formControlName",t.name),n(),C(o.hasFieldError(t)?6:-1)}}function ln(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function _n(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function dn(i,c){if(i&1&&(_(0,"div",98)(1,"label",66),d(2),u(3,ln,2,0,"span",49),r(),O(4,"input",99),u(5,_n,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?5:-1)}}function cn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function sn(i,c){if(i&1&&O(0,"img",104),i&2){let e=l(3).$implicit,t=l(3);h("src",t.getImagePreview(e),Z)}}function mn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function pn(i,c){if(i&1){let e=W();_(0,"div",100)(1,"label",66),d(2),u(3,cn,2,0,"span",49),r(),_(4,"div",101)(5,"input",102,2),y("change",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onImageSelect(o,s))}),r(),_(7,"button",103),y("click",function(){T(e);let o=q(6);return b(o.click())}),_(8,"mat-icon"),d(9,"add_photo_alternate"),r(),d(10," Select Image "),r(),u(11,sn,1,1,"img",104),r(),u(12,mn,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(4),h("disabled",t.isFieldReadonly(e)),n(4),C(t.getImagePreview(e)?11:-1),n(),C(t.hasFieldError(e)?12:-1)}}function Cn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function un(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function fn(i,c){if(i&1){let e=W();_(0,"div",105)(1,"label",66),d(2),u(3,Cn,2,0,"span",49),r(),_(4,"div",106)(5,"canvas",107),y("mousedown",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.startSignature(o,s))})("mousemove",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.drawSignature(o,s))})("mouseup",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.endSignature(o))})("mouseleave",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.endSignature(o))})("touchstart",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.startSignatureTouch(o,s))})("touchmove",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.drawSignatureTouch(o,s))})("touchend",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.endSignature(o))}),r(),_(6,"div",108)(7,"button",109),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.clearSignature(o))}),_(8,"mat-icon"),d(9,"clear"),r()()()(),u(10,un,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(2),H("data-field",e.name),n(2),h("disabled",t.isFieldReadonly(e)),n(3),C(t.hasFieldError(e)?10:-1)}}function xn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Fn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function gn(i,c){if(i&1){let e=W();_(0,"div",110)(1,"label",66),d(2),u(3,xn,2,0,"span",49),r(),_(4,"div",111)(5,"div",112)(6,"button",113),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("bold"))}),_(7,"mat-icon"),d(8,"format_bold"),r()(),_(9,"button",114),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("italic"))}),_(10,"mat-icon"),d(11,"format_italic"),r()(),_(12,"button",115),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("underline"))}),_(13,"mat-icon"),d(14,"format_underlined"),r()(),O(15,"span",116),_(16,"button",117),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("insertUnorderedList"))}),_(17,"mat-icon"),d(18,"format_list_bulleted"),r()(),_(19,"button",118),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("insertOrderedList"))}),_(20,"mat-icon"),d(21,"format_list_numbered"),r()()(),_(22,"div",119),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onRichTextInput(o,s))})("blur",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onRichTextBlur(o,s))}),r()(),u(23,Fn,2,1,"div",51),r()}if(i&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),n(2),D("",t.label," "),n(),C(o.isFieldRequired(t)?3:-1),n(3),h("disabled",o.isFieldReadonly(t)),n(3),h("disabled",o.isFieldReadonly(t)),n(3),h("disabled",o.isFieldReadonly(t)),n(4),h("disabled",o.isFieldReadonly(t)),n(3),h("disabled",o.isFieldReadonly(t)),n(3),w("readonly",o.isFieldReadonly(t)),h("innerHTML",((e=o.form.get(t.name))==null?null:e.value)||"",Q),H("data-field",t.name),n(),C(o.hasFieldError(t)?23:-1)}}function hn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function En(i,c){if(i&1&&(_(0,"mat-icon"),d(1),r(),_(2,"span"),d(3),r()),i&2){let e,t,o=l(3).$implicit,s=l(3);n(),f((e=s.form.get(o.name))==null?null:e.value),n(2),f((t=s.form.get(o.name))==null?null:t.value)}}function vn(i,c){i&1&&(_(0,"mat-icon"),d(1,"emoji_symbols"),r(),_(2,"span"),d(3,"Select an icon..."),r())}function Sn(i,c){if(i&1){let e=W();_(0,"div",128),y("click",function(){let o=T(e).$implicit,s=l(4).$implicit,p=l(3);return b(p.selectIcon(s,o))}),_(1,"mat-icon"),d(2),r()()}if(i&2){let e,t=c.$implicit,o=l(4).$implicit,s=l(3);w("selected",((e=s.form.get(o.name))==null?null:e.value)===t),n(2),f(t)}}function wn(i,c){if(i&1){let e=W();_(0,"div",124)(1,"input",125),y("input",function(o){T(e);let s=l(3).$implicit,p=l(3);return b(p.onIconSearch(o,s))}),r(),_(2,"div",126),A(3,Sn,3,3,"div",127,X),r()()}if(i&2){let e=l(3).$implicit,t=l(3);n(),h("value",t.iconSearchText[e.name]||""),n(2),N(t.getFilteredIcons(e))}}function Tn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function bn(i,c){if(i&1){let e=W();_(0,"div",120)(1,"label",66),d(2),u(3,hn,2,0,"span",49),r(),_(4,"div",121)(5,"div",122),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.toggleIconPicker(o))}),u(6,En,4,2)(7,vn,4,0),_(8,"mat-icon",123),d(9,"arrow_drop_down"),r()(),u(10,wn,5,1,"div",124),r(),u(11,Tn,2,1,"div",51),r()}if(i&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),n(2),D("",t.label," "),n(),C(o.isFieldRequired(t)?3:-1),n(2),w("disabled",o.isFieldReadonly(t)),n(),C((e=o.form.get(t.name))!=null&&e.value?6:7),n(4),C(o.isIconPickerOpen(t)?10:-1),n(),C(o.hasFieldError(t)?11:-1)}}function kn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function yn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Mn(i,c){if(i&1){let e=W();_(0,"div",129)(1,"label",66),d(2),u(3,kn,2,0,"span",49),r(),_(4,"div",130)(5,"mat-form-field",48)(6,"mat-label"),d(7,"Barcode/QR Code"),r(),O(8,"input",131),_(9,"button",132),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.scanBarcode(o))}),_(10,"mat-icon"),d(11,"qr_code_scanner"),r()()()(),u(12,yn,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(5),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),h("disabled",t.isFieldReadonly(e)),n(3),C(t.hasFieldError(e)?12:-1)}}function In(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Rn(i,c){i&1&&(_(0,"mat-icon",139),d(1,"sync"),r())}function On(i,c){i&1&&(_(0,"mat-icon"),d(1,"my_location"),r())}function Wn(i,c){if(i&1&&(_(0,"div",140)(1,"mat-icon"),d(2,"place"),r(),_(3,"span"),d(4),r()()),i&2){let e=l(3).$implicit,t=l(3);n(4),f(t.getLocationDisplay(e))}}function Dn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function An(i,c){if(i&1){let e=W();_(0,"div",133)(1,"label",66),d(2),u(3,In,2,0,"span",49),r(),_(4,"div",134)(5,"div",135)(6,"mat-form-field",136)(7,"mat-label"),d(8,"Latitude"),r(),_(9,"input",137),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onLocationLatChange(o,s))}),r()(),_(10,"mat-form-field",136)(11,"mat-label"),d(12,"Longitude"),r(),_(13,"input",137),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onLocationLngChange(o,s))}),r()(),_(14,"button",138),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.getCurrentLocation(o))}),u(15,Rn,2,0,"mat-icon",139)(16,On,2,0,"mat-icon"),r()(),u(17,Wn,5,1,"div",140),r(),u(18,Dn,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(6),h("value",t.getLocationLat(e))("readonly",t.isFieldReadonly(e)),n(4),h("value",t.getLocationLng(e))("readonly",t.isFieldReadonly(e)),n(),h("disabled",t.isFieldReadonly(e)||t.isGettingLocation(e)),n(),C(t.isGettingLocation(e)?15:16),n(2),C(t.getLocationDisplay(e)?17:-1),n(),C(t.hasFieldError(e)?18:-1)}}function Nn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Pn(i,c){if(i&1&&(_(0,"th"),d(1),r()),i&2){let e=c.$implicit;n(),f(e.label)}}function $n(i,c){if(i&1){let e=W();_(0,"td")(1,"input",147),y("input",function(o){let s=T(e).$implicit,p=l().$index,v=l(3).$implicit,g=l(3);return b(g.onTableCellChange(o,v,p,s.name))}),r()()}if(i&2){let e=c.$implicit,t=l().$implicit,o=l(3).$implicit,s=l(3);n(),h("value",t[e.name]||"")("readonly",s.isFieldReadonly(o))}}function Vn(i,c){if(i&1){let e=W();_(0,"tr"),A(1,$n,2,2,"td",null,z),_(3,"td",144)(4,"button",146),y("click",function(){let o=T(e).$index,s=l(3).$implicit,p=l(3);return b(p.removeTableRow(s,o))}),_(5,"mat-icon"),d(6,"delete"),r()()()()}if(i&2){let e=l(3).$implicit,t=l(3);n(),N(t.getTableColumns(e)),n(3),h("disabled",t.isFieldReadonly(e))}}function Un(i,c){if(i&1&&(_(0,"tr")(1,"td",148),d(2,' No rows added. Click "Add Row" to add data. '),r()()),i&2){let e=l(3).$implicit,t=l(3);n(),H("colspan",t.getTableColumns(e).length+1)}}function Ln(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function qn(i,c){if(i&1){let e=W();_(0,"div",141)(1,"label",66),d(2),u(3,Nn,2,0,"span",49),r(),_(4,"div",142)(5,"table",143)(6,"thead")(7,"tr"),A(8,Pn,2,1,"th",null,z),_(10,"th",144),d(11,"Actions"),r()()(),_(12,"tbody"),A(13,Vn,7,1,"tr",null,te),u(15,Un,3,1,"tr"),r()(),_(16,"button",145),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.addTableRow(o))}),_(17,"mat-icon"),d(18,"add"),r(),d(19," Add Row "),r()(),u(20,Ln,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(5),N(t.getTableColumns(e)),n(5),N(t.getTableRows(e)),n(2),C(t.getTableRows(e).length===0?15:-1),n(),h("disabled",t.isFieldReadonly(e)),n(4),C(t.hasFieldError(e)?20:-1)}}function Bn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Gn(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Hn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Yn(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Bn,2,0,"span",49),r(),_(5,"mat-select",62),A(6,Gn,2,2,"mat-option",63,P),r()(),u(8,Hn,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function zn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Jn(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Xn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function jn(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,zn,2,0,"span",49),r(),_(5,"mat-select",64),A(6,Jn,2,2,"mat-option",63,P),r()(),u(8,Xn,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function Kn(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Qn(i,c){if(i&1&&(_(0,"mat-radio-button",68),d(1),r()),i&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);h("value",e.value)("disabled",o.isFieldReadonly(t)),n(),f(e.label)}}function Zn(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function eo(i,c){if(i&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,Kn,2,0,"span",49),r(),_(4,"mat-radio-group",67),A(5,Qn,2,3,"mat-radio-button",68,P),r(),u(7,Zn,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?7:-1)}}function to(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function io(i,c){if(i&1){let e=W();_(0,"mat-checkbox",72),y("change",function(o){let s=T(e).$implicit,p=l(4).$implicit,v=l(3);return b(v.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(i&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);h("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),n(),D(" ",e.label," ")}}function no(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function oo(i,c){if(i&1&&(_(0,"div",150)(1,"label",66),d(2),u(3,to,2,0,"span",49),r(),_(4,"div",151),A(5,io,2,3,"mat-checkbox",71,P),r(),u(7,no,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),n(),N(e.options),n(2),C(t.hasFieldError(e)?7:-1)}}function ao(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ro(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function lo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function _o(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ao,2,0,"span",49),r(),_(5,"mat-select",62),A(6,ro,2,2,"mat-option",63,P),r()(),u(8,lo,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function co(i,c){if(i&1&&u(0,Yn,9,8,"div",29)(1,jn,9,8,"div",29)(2,eo,8,9,"div",30)(3,oo,8,7,"div",149)(4,_o,9,8,"div",29),i&2){let e,t=l(2).$implicit;C((e=t.viewType)==="SELECT"?0:e==="MULTISELECT"?1:e==="RADIO"?2:e==="CHECKBOX_GROUP"?3:4)}}function so(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),r(),O(4,"input",50),r()()),i&2){let e=l(2).$implicit,t=l(3);n(3),f(e.label),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e))}}function mo(i,c){if(i&1&&(_(0,"div",28),u(1,Pt,7,8,"div",29)(2,Ut,7,8,"div",29)(3,Bt,7,8,"div",29)(4,Yt,9,8,"div",29)(5,Xt,7,8,"div",29)(6,Qt,7,8,"div",29)(7,ti,7,8,"div",29)(8,oi,10,11,"div",29)(9,li,7,7,"div",29)(10,si,9,8,"div",29)(11,ui,9,8,"div",29)(12,gi,8,9,"div",30)(13,Ei,4,4,"div",29)(14,Ti,8,8,"div",31)(15,Ii,7,8,"div",32)(16,Wi,7,8,"div",29)(17,$i,14,11,"div",29)(18,Vi,1,1,"input",33)(19,Li,4,2,"div",34)(20,Bi,3,1,"div",35)(21,Yi,5,5,"div",36)(22,Xi,10,7,"div",37)(23,Zi,8,5,"div",38)(24,nn,7,7,"div",29)(25,rn,7,12,"div",39)(26,dn,6,7,"div",40)(27,pn,13,7,"div",41)(28,fn,11,7,"div",42)(29,gn,24,14,"div",43)(30,bn,12,9,"div",44)(31,Mn,13,8,"div",45)(32,An,19,12,"div",46)(33,qn,21,7,"div",47)(34,co,5,1)(35,so,5,4,"div",29),r()),i&2){let e,t=l().$implicit;ee("grid-column","span "+(t.columnSpan||2)),n(),C((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="CURRENCY"?4:e==="EMAIL"?5:e==="PHONE"?6:e==="PASSWORD"?7:e==="DATE"?8:e==="DATETIME"?9:e==="SELECT"?10:e==="MULTISELECT"?11:e==="RADIO"?12:e==="CHECKBOX"?13:e==="CHECKBOX_GROUP"?14:e==="FILE"?15:e==="URL"?16:e==="USER"?17:e==="HIDDEN"?18:e==="LABEL"?19:e==="DIVIDER"?20:e==="TOGGLE"?21:e==="YES_NO"?22:e==="RATING"?23:e==="TIME"?24:e==="SLIDER"?25:e==="COLOR"?26:e==="IMAGE"?27:e==="SIGNATURE"?28:e==="RICH_TEXT"?29:e==="ICON"?30:e==="BARCODE"?31:e==="LOCATION"?32:e==="TABLE"?33:e==="SQL_OBJECT"?34:35)}}function po(i,c){if(i&1&&u(0,mo,36,3,"div",27),i&2){let e=c.$implicit,t=l(3);C(t.isFieldVisible(e)?0:-1)}}function Co(i,c){if(i&1&&(_(0,"mat-card",15)(1,"mat-card-content")(2,"div",26),A(3,po,1,1,null,null,Y),r()()()),i&2){let e=l(2);n(3),N(e.isMultiStep?e.getUngroupedFieldsOnScreen():e.getUngroupedFields())}}function uo(i,c){if(i&1&&(_(0,"mat-panel-description"),d(1),r()),i&2){let e=l().$implicit;n(),f(e.description)}}function fo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function xo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Fo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,fo,2,0,"span",49),r(),O(5,"input",50),r(),u(6,xo,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function go(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ho(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Eo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,go,2,0,"span",49),r(),O(5,"textarea",153),r(),u(6,ho,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function vo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function So(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function wo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,vo,2,0,"span",49),r(),O(5,"input",154),r(),u(6,So,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function To(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function bo(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function ko(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function yo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,To,2,0,"span",49),r(),_(5,"mat-select",67),A(6,bo,2,2,"mat-option",63,P),r()(),u(8,ko,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function Mo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Io(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Ro(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Oo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Mo,2,0,"span",49),r(),_(5,"mat-select",155),A(6,Io,2,2,"mat-option",63,P),r()(),u(8,Ro,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function Wo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Do(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ao(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Wo,2,0,"span",49),r(),_(5,"span",156),d(6,"$\xA0"),r(),O(7,"input",157),r(),u(8,Do,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(3),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?8:-1)}}function No(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Po(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function $o(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,No,2,0,"span",49),r(),O(5,"input",158),r(),u(6,Po,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Vo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Uo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Lo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Vo,2,0,"span",49),r(),O(5,"input",159),r(),u(6,Uo,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function qo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Bo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Go(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,qo,2,0,"span",49),r(),O(5,"input",160),r(),u(6,Bo,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Ho(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Yo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function zo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Ho,2,0,"span",49),r(),O(5,"input",58)(6,"mat-datepicker-toggle",59)(7,"mat-datepicker",60,3),r(),u(9,Yo,2,1,"div",51),r()),i&2){let e=q(8),t=l(2).$implicit,o=l(3);n(),w("field-invalid",o.hasFieldError(t)),n(2),f(t.label),n(),C(o.isFieldRequired(t)?4:-1),n(),h("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),n(),h("for",e)("disabled",o.isFieldReadonly(t)),n(),h("disabled",o.isFieldReadonly(t)),n(2),C(o.hasFieldError(t)?9:-1)}}function Jo(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Xo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function jo(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Jo,2,0,"span",49),r(),O(5,"input",61),r(),u(6,Xo,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Ko(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Qo(i,c){if(i&1&&(_(0,"mat-radio-button",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Zo(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ea(i,c){if(i&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,Ko,2,0,"span",49),r(),_(4,"mat-radio-group",67),A(5,Qo,2,2,"mat-radio-button",63,P),r(),u(7,Zo,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?7:-1)}}function ta(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ia(i,c){if(i&1&&(_(0,"div",29)(1,"mat-checkbox",67),d(2),r(),u(3,ta,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),f(e.label),n(),C(t.hasFieldError(e)?3:-1)}}function na(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function oa(i,c){if(i&1){let e=W();_(0,"mat-checkbox",72),y("change",function(o){let s=T(e).$implicit,p=l(3).$implicit,v=l(3);return b(v.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(i&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);h("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),n(),D(" ",e.label||e.value," ")}}function aa(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ra(i,c){if(i&1&&(_(0,"div",69)(1,"label",66),d(2),u(3,na,2,0,"span",49),r(),_(4,"div",70),A(5,oa,2,3,"mat-checkbox",71,P),r(),u(7,aa,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),n(),N(e.options||ie(7,Tt)),n(2),C(t.hasFieldError(e)?7:-1)}}function la(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function _a(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function da(i,c){if(i&1){let e=W();_(0,"div",73)(1,"label",66),d(2),u(3,la,2,0,"span",49),r(),_(4,"input",74),y("change",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onFileSelect(o,s.name))}),r(),u(5,_a,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),h("multiple",e.multiple)("disabled",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?5:-1)}}function ca(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function sa(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ma(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ca,2,0,"span",49),r(),O(5,"input",161),r(),u(6,sa,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function pa(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ca(i,c){if(i&1&&(_(0,"mat-option",63)(1,"div",80)(2,"mat-icon"),d(3,"person"),r(),_(4,"div",81)(5,"span",82),d(6),r(),_(7,"span",83),d(8),r()()()()),i&2){let e=c.$implicit;h("value",e),n(6),j("",e.firstName," ",e.lastName,""),n(2),f(e.email)}}function ua(i,c){i&1&&(_(0,"mat-option",79),d(1,"No users found"),r())}function fa(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function xa(i,c){if(i&1){let e=W();_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,pa,2,0,"span",49),r(),_(5,"mat-icon",54),d(6,"person_search"),r(),_(7,"input",77),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onUserSearch(o,s.name))}),r(),_(8,"mat-autocomplete",78,4),y("optionSelected",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onUserSelected(o,s.name))}),A(10,Ca,9,4,"mat-option",63,Y),u(12,ua,2,0,"mat-option",79),r()(),u(13,fa,2,1,"div",51),r()}if(i&2){let e=q(9),t=l(2).$implicit,o=l(3);n(),w("field-invalid",o.hasFieldError(t)),n(2),f(t.label),n(),C(o.isFieldRequired(t)?4:-1),n(3),h("formControlName",t.name)("matAutocomplete",e)("placeholder",t.placeholder||"Search for a user...")("readonly",o.isFieldReadonly(t)),n(),h("displayWith",o.displayUserFn),n(2),N(o.getFilteredUsers(t.name)),n(2),C(o.getFilteredUsers(t.name).length===0&&o.userSearchTerms[t.name]?12:-1),n(),C(o.hasFieldError(t)?13:-1)}}function Fa(i,c){if(i&1&&O(0,"input",33),i&2){let e=l(2).$implicit;h("formControlName",e.name)}}function ga(i,c){if(i&1&&(_(0,"p",85),d(1),r()),i&2){let e=l(3).$implicit;n(),f(e.defaultValue)}}function ha(i,c){if(i&1&&(_(0,"div",34)(1,"p",84),d(2),r(),u(3,ga,2,1,"p",85),r()),i&2){let e=l(2).$implicit;n(2),f(e.label),n(),C(e.defaultValue?3:-1)}}function Ea(i,c){if(i&1&&(_(0,"span",86),d(1),r()),i&2){let e=l(3).$implicit;n(),f(e.label)}}function va(i,c){if(i&1&&(_(0,"div",35),O(1,"mat-divider"),u(2,Ea,2,1,"span",86),r()),i&2){let e=l(2).$implicit;n(2),C(e.label?2:-1)}}function Sa(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function wa(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ta(i,c){if(i&1&&(_(0,"div",36)(1,"mat-slide-toggle",67),d(2),u(3,Sa,2,0,"span",49),r(),u(4,wa,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),D(" ",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),C(t.hasFieldError(e)?4:-1)}}function ba(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ka(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function ya(i,c){if(i&1&&(_(0,"div",87)(1,"label",66),d(2),u(3,ba,2,0,"span",49),r(),_(4,"mat-button-toggle-group",67)(5,"mat-button-toggle",88),d(6,"Yes"),r(),_(7,"mat-button-toggle",89),d(8,"No"),r()(),u(9,ka,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(5),C(t.hasFieldError(e)?9:-1)}}function Ma(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ia(i,c){if(i&1){let e=W();_(0,"mat-icon",93),y("click",function(){let o=T(e).$implicit,s=l(3).$implicit,p=l(3);return b(p.setRating(s,o))}),d(1),r()}if(i&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);w("filled",o.getRatingValue(t)>=e)("readonly",o.isFieldReadonly(t)),n(),D(" ",o.getRatingValue(t)>=e?"star":"star_border"," ")}}function Ra(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Oa(i,c){if(i&1&&(_(0,"div",90)(1,"label",66),d(2),u(3,Ma,2,0,"span",49),r(),_(4,"div",91),A(5,Ia,2,5,"mat-icon",92,X),r(),u(7,Ra,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(2),N(t.getStarArray(e)),n(2),C(t.hasFieldError(e)?7:-1)}}function Wa(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Da(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Aa(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Wa,2,0,"span",49),r(),O(5,"input",94),r(),u(6,Da,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?6:-1)}}function Na(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Pa(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function $a(i,c){if(i&1&&(_(0,"div",95)(1,"label",66),d(2),u(3,Na,2,0,"span",49),r(),_(4,"mat-slider",96),O(5,"input",97),r(),u(6,Pa,2,1,"div",51),r()),i&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),n(2),j("",t.label,": ",((e=o.form.get(t.name))==null?null:e.value)||0," "),n(),C(o.isFieldRequired(t)?3:-1),n(),h("min",t.sliderMin||0)("max",t.sliderMax||100)("step",t.sliderStep||1)("discrete",!0)("disabled",o.isFieldReadonly(t)),n(),h("formControlName",t.name),n(),C(o.hasFieldError(t)?6:-1)}}function Va(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ua(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function La(i,c){if(i&1&&(_(0,"div",98)(1,"label",66),d(2),u(3,Va,2,0,"span",49),r(),O(4,"input",99),u(5,Ua,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?5:-1)}}function qa(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ba(i,c){if(i&1&&O(0,"img",104),i&2){let e=l(3).$implicit,t=l(3);h("src",t.getImagePreview(e),Z)}}function Ga(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ha(i,c){if(i&1){let e=W();_(0,"div",100)(1,"label",66),d(2),u(3,qa,2,0,"span",49),r(),_(4,"div",101)(5,"input",102,5),y("change",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onImageSelect(o,s))}),r(),_(7,"button",103),y("click",function(){T(e);let o=q(6);return b(o.click())}),_(8,"mat-icon"),d(9,"add_photo_alternate"),r(),d(10," Select Image "),r(),u(11,Ba,1,1,"img",104),r(),u(12,Ga,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(4),h("disabled",t.isFieldReadonly(e)),n(4),C(t.getImagePreview(e)?11:-1),n(),C(t.hasFieldError(e)?12:-1)}}function Ya(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function za(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ja(i,c){if(i&1){let e=W();_(0,"div",105)(1,"label",66),d(2),u(3,Ya,2,0,"span",49),r(),_(4,"div",106)(5,"canvas",107),y("mousedown",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.startSignature(o,s))})("mousemove",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.drawSignature(o,s))})("mouseup",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.endSignature(o))})("mouseleave",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.endSignature(o))})("touchstart",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.startSignatureTouch(o,s))})("touchmove",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.drawSignatureTouch(o,s))})("touchend",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.endSignature(o))}),r(),_(6,"div",108)(7,"button",109),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.clearSignature(o))}),_(8,"mat-icon"),d(9,"clear"),r()()()(),u(10,za,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(2),H("data-field",e.name),n(2),h("disabled",t.isFieldReadonly(e)),n(3),C(t.hasFieldError(e)?10:-1)}}function Xa(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ja(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ka(i,c){if(i&1){let e=W();_(0,"div",110)(1,"label",66),d(2),u(3,Xa,2,0,"span",49),r(),_(4,"div",111)(5,"div",112)(6,"button",113),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("bold"))}),_(7,"mat-icon"),d(8,"format_bold"),r()(),_(9,"button",114),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("italic"))}),_(10,"mat-icon"),d(11,"format_italic"),r()(),_(12,"button",115),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("underline"))}),_(13,"mat-icon"),d(14,"format_underlined"),r()(),O(15,"span",116),_(16,"button",117),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("insertUnorderedList"))}),_(17,"mat-icon"),d(18,"format_list_bulleted"),r()(),_(19,"button",118),y("click",function(){T(e);let o=l(5);return b(o.execRichTextCommand("insertOrderedList"))}),_(20,"mat-icon"),d(21,"format_list_numbered"),r()()(),_(22,"div",119),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onRichTextInput(o,s))})("blur",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onRichTextBlur(o,s))}),r()(),u(23,ja,2,1,"div",51),r()}if(i&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),n(2),D("",t.label," "),n(),C(o.isFieldRequired(t)?3:-1),n(3),h("disabled",o.isFieldReadonly(t)),n(3),h("disabled",o.isFieldReadonly(t)),n(3),h("disabled",o.isFieldReadonly(t)),n(4),h("disabled",o.isFieldReadonly(t)),n(3),h("disabled",o.isFieldReadonly(t)),n(3),w("readonly",o.isFieldReadonly(t)),h("innerHTML",((e=o.form.get(t.name))==null?null:e.value)||"",Q),H("data-field",t.name),n(),C(o.hasFieldError(t)?23:-1)}}function Qa(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Za(i,c){if(i&1&&(_(0,"mat-icon"),d(1),r(),_(2,"span"),d(3),r()),i&2){let e,t,o=l(3).$implicit,s=l(3);n(),f((e=s.form.get(o.name))==null?null:e.value),n(2),f((t=s.form.get(o.name))==null?null:t.value)}}function er(i,c){i&1&&(_(0,"mat-icon"),d(1,"emoji_symbols"),r(),_(2,"span"),d(3,"Select an icon..."),r())}function tr(i,c){if(i&1){let e=W();_(0,"div",128),y("click",function(){let o=T(e).$implicit,s=l(4).$implicit,p=l(3);return b(p.selectIcon(s,o))}),_(1,"mat-icon"),d(2),r()()}if(i&2){let e,t=c.$implicit,o=l(4).$implicit,s=l(3);w("selected",((e=s.form.get(o.name))==null?null:e.value)===t),n(2),f(t)}}function ir(i,c){if(i&1){let e=W();_(0,"div",124)(1,"input",125),y("input",function(o){T(e);let s=l(3).$implicit,p=l(3);return b(p.onIconSearch(o,s))}),r(),_(2,"div",126),A(3,tr,3,3,"div",127,X),r()()}if(i&2){let e=l(3).$implicit,t=l(3);n(),h("value",t.iconSearchText[e.name]||""),n(2),N(t.getFilteredIcons(e))}}function nr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function or(i,c){if(i&1){let e=W();_(0,"div",120)(1,"label",66),d(2),u(3,Qa,2,0,"span",49),r(),_(4,"div",121)(5,"div",122),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.toggleIconPicker(o))}),u(6,Za,4,2)(7,er,4,0),_(8,"mat-icon",123),d(9,"arrow_drop_down"),r()(),u(10,ir,5,1,"div",124),r(),u(11,nr,2,1,"div",51),r()}if(i&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),n(2),D("",t.label," "),n(),C(o.isFieldRequired(t)?3:-1),n(2),w("disabled",o.isFieldReadonly(t)),n(),C((e=o.form.get(t.name))!=null&&e.value?6:7),n(4),C(o.isIconPickerOpen(t)?10:-1),n(),C(o.hasFieldError(t)?11:-1)}}function ar(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function rr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function lr(i,c){if(i&1){let e=W();_(0,"div",129)(1,"label",66),d(2),u(3,ar,2,0,"span",49),r(),_(4,"div",130)(5,"mat-form-field",48)(6,"mat-label"),d(7,"Barcode/QR Code"),r(),O(8,"input",131),_(9,"button",132),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.scanBarcode(o))}),_(10,"mat-icon"),d(11,"qr_code_scanner"),r()()()(),u(12,rr,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(5),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),h("disabled",t.isFieldReadonly(e)),n(3),C(t.hasFieldError(e)?12:-1)}}function _r(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function dr(i,c){i&1&&(_(0,"mat-icon",139),d(1,"sync"),r())}function cr(i,c){i&1&&(_(0,"mat-icon"),d(1,"my_location"),r())}function sr(i,c){if(i&1&&(_(0,"div",140)(1,"mat-icon"),d(2,"place"),r(),_(3,"span"),d(4),r()()),i&2){let e=l(3).$implicit,t=l(3);n(4),f(t.getLocationDisplay(e))}}function mr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function pr(i,c){if(i&1){let e=W();_(0,"div",133)(1,"label",66),d(2),u(3,_r,2,0,"span",49),r(),_(4,"div",134)(5,"div",135)(6,"mat-form-field",136)(7,"mat-label"),d(8,"Latitude"),r(),_(9,"input",137),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onLocationLatChange(o,s))}),r()(),_(10,"mat-form-field",136)(11,"mat-label"),d(12,"Longitude"),r(),_(13,"input",137),y("input",function(o){T(e);let s=l(2).$implicit,p=l(3);return b(p.onLocationLngChange(o,s))}),r()(),_(14,"button",138),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.getCurrentLocation(o))}),u(15,dr,2,0,"mat-icon",139)(16,cr,2,0,"mat-icon"),r()(),u(17,sr,5,1,"div",140),r(),u(18,mr,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(6),h("value",t.getLocationLat(e))("readonly",t.isFieldReadonly(e)),n(4),h("value",t.getLocationLng(e))("readonly",t.isFieldReadonly(e)),n(),h("disabled",t.isFieldReadonly(e)||t.isGettingLocation(e)),n(),C(t.isGettingLocation(e)?15:16),n(2),C(t.getLocationDisplay(e)?17:-1),n(),C(t.hasFieldError(e)?18:-1)}}function Cr(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function ur(i,c){if(i&1&&(_(0,"th"),d(1),r()),i&2){let e=c.$implicit;n(),f(e.label)}}function fr(i,c){if(i&1){let e=W();_(0,"td")(1,"input",147),y("input",function(o){let s=T(e).$implicit,p=l().$index,v=l(3).$implicit,g=l(3);return b(g.onTableCellChange(o,v,p,s.name))}),r()()}if(i&2){let e=c.$implicit,t=l().$implicit,o=l(3).$implicit,s=l(3);n(),h("value",t[e.name]||"")("readonly",s.isFieldReadonly(o))}}function xr(i,c){if(i&1){let e=W();_(0,"tr"),A(1,fr,2,2,"td",null,z),_(3,"td",144)(4,"button",146),y("click",function(){let o=T(e).$index,s=l(3).$implicit,p=l(3);return b(p.removeTableRow(s,o))}),_(5,"mat-icon"),d(6,"delete"),r()()()()}if(i&2){let e=l(3).$implicit,t=l(3);n(),N(t.getTableColumns(e)),n(3),h("disabled",t.isFieldReadonly(e))}}function Fr(i,c){if(i&1&&(_(0,"tr")(1,"td",148),d(2,' No rows added. Click "Add Row" to add data. '),r()()),i&2){let e=l(3).$implicit,t=l(3);n(),H("colspan",t.getTableColumns(e).length+1)}}function gr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function hr(i,c){if(i&1){let e=W();_(0,"div",141)(1,"label",66),d(2),u(3,Cr,2,0,"span",49),r(),_(4,"div",142)(5,"table",143)(6,"thead")(7,"tr"),A(8,ur,2,1,"th",null,z),_(10,"th",144),d(11,"Actions"),r()()(),_(12,"tbody"),A(13,xr,7,1,"tr",null,te),u(15,Fr,3,1,"tr"),r()(),_(16,"button",145),y("click",function(){T(e);let o=l(2).$implicit,s=l(3);return b(s.addTableRow(o))}),_(17,"mat-icon"),d(18,"add"),r(),d(19," Add Row "),r()(),u(20,gr,2,1,"div",51),r()}if(i&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(5),N(t.getTableColumns(e)),n(5),N(t.getTableRows(e)),n(2),C(t.getTableRows(e).length===0?15:-1),n(),h("disabled",t.isFieldReadonly(e)),n(4),C(t.hasFieldError(e)?20:-1)}}function Er(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function vr(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Sr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function wr(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Er,2,0,"span",49),r(),_(5,"mat-select",62),A(6,vr,2,2,"mat-option",63,P),r()(),u(8,Sr,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function Tr(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function br(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function kr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function yr(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Tr,2,0,"span",49),r(),_(5,"mat-select",64),A(6,br,2,2,"mat-option",63,P),r()(),u(8,kr,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function Mr(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Ir(i,c){if(i&1&&(_(0,"mat-radio-button",68),d(1),r()),i&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);h("value",e.value)("disabled",o.isFieldReadonly(t)),n(),f(e.label)}}function Rr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Or(i,c){if(i&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,Mr,2,0,"span",49),r(),_(4,"mat-radio-group",67),A(5,Ir,2,3,"mat-radio-button",68,P),r(),u(7,Rr,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),h("formControlName",e.name)("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?7:-1)}}function Wr(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function Dr(i,c){if(i&1){let e=W();_(0,"mat-checkbox",72),y("change",function(o){let s=T(e).$implicit,p=l(4).$implicit,v=l(3);return b(v.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(i&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);h("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),n(),D(" ",e.label," ")}}function Ar(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Nr(i,c){if(i&1&&(_(0,"div",150)(1,"label",66),d(2),u(3,Wr,2,0,"span",49),r(),_(4,"div",151),A(5,Dr,2,3,"mat-checkbox",71,P),r(),u(7,Ar,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),n(2),D("",e.label," "),n(),C(t.isFieldRequired(e)?3:-1),n(),w("horizontal-layout",e.optionsLayout==="horizontal"),n(),N(e.options),n(2),C(t.hasFieldError(e)?7:-1)}}function Pr(i,c){i&1&&(_(0,"span",49),d(1,"*"),r())}function $r(i,c){if(i&1&&(_(0,"mat-option",63),d(1),r()),i&2){let e=c.$implicit;h("value",e.value),n(),f(e.label)}}function Vr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(4).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Ur(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Pr,2,0,"span",49),r(),_(5,"mat-select",62),A(6,$r,2,2,"mat-option",63,P),r()(),u(8,Vr,2,1,"div",51),r()),i&2){let e=l(3).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),C(t.isFieldRequired(e)?4:-1),n(),h("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),n(),N(e.options),n(2),C(t.hasFieldError(e)?8:-1)}}function Lr(i,c){if(i&1&&u(0,wr,9,8,"div",29)(1,yr,9,8,"div",29)(2,Or,8,9,"div",30)(3,Nr,8,7,"div",149)(4,Ur,9,8,"div",29),i&2){let e,t=l(2).$implicit;C((e=t.viewType)==="SELECT"?0:e==="MULTISELECT"?1:e==="RADIO"?2:e==="CHECKBOX_GROUP"?3:4)}}function qr(i,c){if(i&1&&(_(0,"div",51),d(1),r()),i&2){let e=l(3).$implicit,t=l(3);n(),f(t.getFieldErrorMessage(e))}}function Br(i,c){if(i&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),r(),O(4,"input",162),r(),u(5,qr,2,1,"div",51),r()),i&2){let e=l(2).$implicit,t=l(3);n(),w("field-invalid",t.hasFieldError(e)),n(2),f(e.label),n(),h("formControlName",e.name)("readonly",t.isFieldReadonly(e)),n(),C(t.hasFieldError(e)?5:-1)}}function Gr(i,c){if(i&1&&(_(0,"div",28),u(1,Fo,7,8,"div",29)(2,Eo,7,7,"div",29)(3,wo,7,7,"div",29)(4,yo,9,7,"div",29)(5,Oo,9,7,"div",29)(6,Ao,9,7,"div",29)(7,$o,7,7,"div",29)(8,Lo,7,7,"div",29)(9,Go,7,7,"div",29)(10,zo,10,11,"div",29)(11,jo,7,7,"div",29)(12,ea,8,9,"div",30)(13,ia,4,4,"div",29)(14,ra,8,8,"div",31)(15,da,6,7,"div",32)(16,ma,7,7,"div",29)(17,xa,14,11,"div",29)(18,Fa,1,1,"input",33)(19,ha,4,2,"div",34)(20,va,3,1,"div",35)(21,Ta,5,5,"div",36)(22,ya,10,7,"div",37)(23,Oa,8,5,"div",38)(24,Aa,7,7,"div",29)(25,$a,7,12,"div",39)(26,La,6,7,"div",40)(27,Ha,13,7,"div",41)(28,Ja,11,7,"div",42)(29,Ka,24,14,"div",43)(30,or,12,9,"div",44)(31,lr,13,8,"div",45)(32,pr,19,12,"div",46)(33,hr,21,7,"div",47)(34,Lr,5,1)(35,Br,6,6,"div",29),r()),i&2){let e,t=l().$implicit;ee("grid-column","span "+(t.columnSpan||2)),n(),C((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="SELECT"?4:e==="MULTISELECT"?5:e==="CURRENCY"?6:e==="EMAIL"?7:e==="PHONE"?8:e==="PASSWORD"?9:e==="DATE"?10:e==="DATETIME"?11:e==="RADIO"?12:e==="CHECKBOX"?13:e==="CHECKBOX_GROUP"?14:e==="FILE"?15:e==="URL"?16:e==="USER"?17:e==="HIDDEN"?18:e==="LABEL"?19:e==="DIVIDER"?20:e==="TOGGLE"?21:e==="YES_NO"?22:e==="RATING"?23:e==="TIME"?24:e==="SLIDER"?25:e==="COLOR"?26:e==="IMAGE"?27:e==="SIGNATURE"?28:e==="RICH_TEXT"?29:e==="ICON"?30:e==="BARCODE"?31:e==="LOCATION"?32:e==="TABLE"?33:e==="SQL_OBJECT"?34:35)}}function Hr(i,c){if(i&1&&u(0,Gr,36,3,"div",27),i&2){let e=c.$implicit,t=l(3);C(t.isFieldVisible(e)?0:-1)}}function Yr(i,c){if(i&1&&(_(0,"mat-card",16)(1,"mat-expansion-panel",152)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),d(4),r(),u(5,uo,2,1,"mat-panel-description"),r(),_(6,"div",26),A(7,Hr,1,1,null,null,Y),r()()()),i&2){let e=c.$implicit,t=l(2);n(),h("expanded",!e.collapsed)("hideToggle",!e.collapsible),n(3),f(e.title),n(),C(e.description?5:-1),n(2),N(t.getFieldsInGroup(e.id))}}function zr(i,c){if(i&1){let e=W();_(0,"div",167)(1,"mat-icon"),d(2,"description"),r(),_(3,"span"),d(4),r(),_(5,"span",168),d(6),r(),_(7,"button",9),y("click",function(){let o=T(e).$index,s=l(4);return b(s.removeAttachment(o))}),_(8,"mat-icon"),d(9,"close"),r()()()}if(i&2){let e=c.$implicit,t=l(4);n(4),f(e.name),n(2),D("(",t.formatFileSize(e.size),")")}}function Jr(i,c){if(i&1&&(_(0,"div",166),A(1,zr,10,2,"div",167,z),r()),i&2){let e=l(3);n(),N(e.attachments)}}function Xr(i,c){if(i&1){let e=W();_(0,"mat-card",15)(1,"mat-card-header")(2,"mat-card-title"),d(3,"Attachments"),r(),_(4,"mat-card-subtitle"),d(5,"Upload supporting documents"),r()(),_(6,"mat-card-content")(7,"div",163)(8,"input",164,6),y("change",function(o){T(e);let s=l(2);return b(s.onAttachmentSelect(o))}),r(),_(10,"button",165),y("click",function(){T(e);let o=q(9);return b(o.click())}),_(11,"mat-icon"),d(12,"attach_file"),r(),d(13," Add Attachments "),r(),u(14,Jr,3,0,"div",166),r()()()}if(i&2){let e=l(2);n(14),C(e.attachments.length>0?14:-1)}}function jr(i,c){i&1&&O(0,"mat-spinner",171)}function Kr(i,c){i&1&&d(0," Submit for Approval ")}function Qr(i,c){if(i&1){let e=W();_(0,"div",17)(1,"button",169),y("click",function(){T(e);let o=l(2);return b(o.goBack())}),d(2,"Cancel"),r(),_(3,"button",103),y("click",function(){T(e);let o=l(2);return b(o.saveDraft())}),d(4," Save Draft "),r(),_(5,"button",170),u(6,jr,1,0,"mat-spinner",171)(7,Kr,1,0),r()()}if(i&2){let e=l(2);n(3),h("disabled",e.submitting),n(2),h("disabled",e.submitting),n(),C(e.submitting?6:7)}}function Zr(i,c){if(i&1){let e=W();_(0,"button",169),y("click",function(){T(e);let o=l(3);return b(o.goBack())}),d(1,"Cancel"),r(),O(2,"span",172),_(3,"button",173),y("click",function(){T(e);let o=l(3);return b(o.goToNextScreen())}),d(4," Next "),_(5,"mat-icon"),d(6,"arrow_forward"),r()()}}function el(i,c){i&1&&O(0,"mat-spinner",171)}function tl(i,c){i&1&&d(0," Submit for Approval ")}function il(i,c){if(i&1){let e=W();_(0,"button",165),y("click",function(){T(e);let o=l(3);return b(o.goToPreviousScreen())}),_(1,"mat-icon"),d(2,"arrow_back"),r(),d(3," Back "),r(),O(4,"span",172),_(5,"button",169),y("click",function(){T(e);let o=l(3);return b(o.goBack())}),d(6,"Cancel"),r(),_(7,"button",103),y("click",function(){T(e);let o=l(3);return b(o.saveDraft())}),d(8," Save Draft "),r(),_(9,"button",170),u(10,el,1,0,"mat-spinner",171)(11,tl,1,0),r()}if(i&2){let e=l(3);n(7),h("disabled",e.submitting),n(2),h("disabled",e.submitting),n(),C(e.submitting?10:11)}}function nl(i,c){if(i&1){let e=W();_(0,"button",165),y("click",function(){T(e);let o=l(3);return b(o.goToPreviousScreen())}),_(1,"mat-icon"),d(2,"arrow_back"),r(),d(3," Back "),r(),O(4,"span",172),_(5,"button",173),y("click",function(){T(e);let o=l(3);return b(o.goToNextScreen())}),d(6," Next "),_(7,"mat-icon"),d(8,"arrow_forward"),r()()}}function ol(i,c){if(i&1&&(_(0,"div",18),u(1,Zr,7,0)(2,il,12,3)(3,nl,9,0),r()),i&2){let e=l(2);n(),C(e.isFirstScreen?1:e.isLastScreen?2:3)}}function al(i,c){if(i&1){let e=W();_(0,"form",14),y("ngSubmit",function(){T(e);let o=l();return b(o.onSubmit())}),u(1,Dt,4,1)(2,Co,5,0,"mat-card",15),A(3,Yr,9,4,"mat-card",16,Y),u(5,Xr,15,1,"mat-card",15)(6,Qr,8,3,"div",17)(7,ol,4,1,"div",18),r()}if(i&2){let e=l();h("formGroup",e.form),n(),C(e.isMultiStep?1:-1),n(),C((e.isMultiStep?e.getUngroupedFieldsOnScreen().length>0:e.getUngroupedFields().length>0)?2:-1),n(),N(e.isMultiStep?e.getFieldGroupsOnScreen():e.fieldGroups),n(2),C(e.workflow.requireAttachments?5:-1),n(),C(e.isMultiStep?7:6)}}var e_=(()=>{class i{fb;userService;workflowService;authService;router;route;snackBar;cdr;workflow=null;form;loading=!0;submitting=!1;workflowCode="";fields=[];fieldGroups=[];screens=[];currentScreenIndex=0;selectedFiles={};attachments=[];instanceId=null;isEditMode=!1;existingFieldValues={};checkboxGroupValues={};calculatedFields=new Map;subscriptions=[];validationErrors={};hasAttemptedSubmit=!1;pendingUniqueChecks=new Map;uniqueCheckCache=new Map;allUsers=[];filteredUsersMap={};userSearchTerms={};selectedUsers={};constructor(e,t,o,s,p,v,g,R){this.fb=e,this.userService=t,this.workflowService=o,this.authService=s,this.router=p,this.route=v,this.snackBar=g,this.cdr=R}ngOnInit(){this.workflowCode=this.route.snapshot.paramMap.get("workflowCode")||"",this.instanceId=this.route.snapshot.paramMap.get("instanceId")||null,this.isEditMode=!!this.instanceId,this.loadWorkflow(),this.loadUsers()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadWorkflow(){this.workflowService.getWorkflowByCode(this.workflowCode).subscribe({next:e=>{e.success?(this.workflow=e.data,this.isEditMode&&this.instanceId?this.loadInstance():(this.loading=!1,this.initializeForm())):this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Failed to load workflow","Close",{duration:3e3})}})}loadInstance(){this.workflowService.getInstance(this.instanceId).subscribe({next:e=>{if(e.success&&e.data&&e.data.fieldValues){let t=e.data.fieldValues;Array.isArray(t)?t.forEach(o=>{this.existingFieldValues[o.fieldName]=o.value}):typeof t=="object"&&Object.keys(t).forEach(o=>{this.existingFieldValues[o]=t[o]})}this.loading=!1,this.initializeForm()},error:()=>{this.loading=!1,this.snackBar.open("Failed to load instance","Close",{duration:3e3})}})}initializeForm(){if(!this.workflow?.forms?.[0]){console.warn("No workflow forms found for initialization");return}let e=this.workflow.forms[0],t=e.fieldGroups||[],o=new Map;t.forEach(g=>{g.fields&&Array.isArray(g.fields)&&g.fields.forEach(R=>{let a=R.id?.toString();a&&o.set(a,g.id?.toString())})});let s=new Map;(e.fields||[]).forEach(g=>{let R=g.id?.toString();if(R){let a=g.fieldGroupId?.toString()||o.get(R)||null;s.set(R,G(B({},g),{fieldGroupId:a}))}}),t.forEach(g=>{g.fields&&Array.isArray(g.fields)&&g.fields.forEach(R=>{let a=R.id?.toString();a&&!s.has(a)&&s.set(a,G(B({},R),{fieldGroupId:g.id?.toString()}))})}),this.fields=Array.from(s.values()).map(g=>{let R=(g.type||g.fieldType||"TEXT").toString().toUpperCase();return G(B({},g),{type:R,fieldType:R,required:g.required??g.isMandatory??!1,hidden:g.hidden??g.isHidden??!1,readOnly:g.readOnly??g.isReadonly??!1})}),this.fieldGroups=t,this.screens=(e.screens||[]).sort((g,R)=>(g.displayOrder||0)-(R.displayOrder||0)),this.currentScreenIndex=0;let p=new Set(this.fields.map(g=>g.name)),v={};this.fields.forEach(g=>{let R=[];g.required&&R.push(ne.required),g.type==="EMAIL"&&R.push(ne.email);let a="";if(this.isEditMode&&this.existingFieldValues[g.name]!==void 0)a=this.existingFieldValues[g.name],g.type==="CHECKBOX"?a=a==="true"||a===!0:g.type==="NUMBER"||g.type==="CURRENCY"?a=Number(a)||null:(g.type==="DATE"||g.type==="DATETIME")&&(a=a?new Date(a):null);else if(g.defaultValue){let E=this.extractFieldDependencies(g.defaultValue,p);E.length>0?(this.calculatedFields.set(g.name,{expression:g.defaultValue,fieldType:g.type,dependencies:E}),a=""):(a=this.evaluateDefaultValue(g.defaultValue,g.type),g.type==="CHECKBOX"?a=a==="true"||a===!0||!1:g.type==="NUMBER"||g.type==="CURRENCY"?a=a?Number(a):null:(g.type==="DATE"||g.type==="DATETIME")&&!(a instanceof Date)&&(a=a?new Date(a):null))}v[g.name]=[a,R]}),this.form=this.fb.group(v),this.setupCalculatedFieldSubscriptions(),this.calculatedFields.forEach((g,R)=>{this.recalculateField(R,g)}),this.setupValidationSubscriptions()}extractFieldDependencies(e,t){let o=[],s=e.match(/^([A-Z_]+)\((.*)\)$/i);if(!s)return o;let p=s[2];return p&&this.parseArgsRaw(p).forEach(g=>{let R=g.trim().replace(/^["']|["']$/g,"");!g.startsWith('"')&&!g.startsWith("'")&&t.has(R)&&o.push(R)}),o}parseArgsRaw(e){let t=[],o="",s=!1,p="";for(let v of e)(v==='"'||v==="'")&&!s?(s=!0,p=v,o+=v):v===p&&s?(s=!1,o+=v,p=""):v===","&&!s?(t.push(o.trim()),o=""):o+=v;return o&&t.push(o.trim()),t}setupCalculatedFieldSubscriptions(){this.calculatedFields.forEach((e,t)=>{let o=e.dependencies.map(s=>this.form.get(s)).filter(s=>s!==null);if(o.length>0){let p=ae(...o.map(v=>v.valueChanges)).pipe(K(100)).subscribe(()=>{this.recalculateField(t,e)});this.subscriptions.push(p)}})}setupValidationSubscriptions(){let e=this.form.valueChanges.pipe(K(300)).subscribe(t=>{this.fields.forEach(o=>{if(o.validation&&/Unique\(/i.test(o.validation)){let s=t[o.name],p=[];this.uniqueCheckCache.forEach((v,g)=>{g.startsWith(`${o.name}:`)&&g!==`${o.name}:${s}`&&p.push(g)}),p.forEach(v=>this.uniqueCheckCache.delete(v))}}),this.clearValidationErrors()});this.subscriptions.push(e)}clearValidationErrors(){this.hasAttemptedSubmit=!1,this.fields.forEach(e=>{if(this.validationErrors[e.name]){this.validationErrors[e.name]=null;let o=this.form.get(e.name);if(o&&o.errors){let t=o.errors,{customValidation:s}=t,p=J(t,["customValidation"]);o.setErrors(Object.keys(p).length>0?p:null)}}})}validateAllFields(){this.fields.forEach(e=>{if(e.validation){let o=this.evaluateValidation(e);this.validationErrors[e.name]=o;let s=this.form.get(e.name);if(s){if(o)s.setErrors(G(B({},s.errors),{customValidation:o})),s.markAsTouched();else if(s.errors){let t=s.errors,{customValidation:p}=t,v=J(t,["customValidation"]);s.setErrors(Object.keys(v).length>0?v:null)}}}}),this.cdr.detectChanges()}evaluateValidation(e){let t=e.validation;if(!t)return null;try{let o=t.split(/\s+AND\s+/i);for(let s of o){let p=s.trim(),v=this.evaluateSingleValidation(p,e);if(v)return v}return null}catch{return null}}evaluateSingleValidation(e,t){let o=this.form.get(t.name)?.value,s=t.label||t.name,p=e.match(/^Required\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(p){let a=p[1]||p[2];return o==null||o===""||typeof o=="string"&&o.trim()===""?a||`${s} is required`:null}let v=e.match(/^Unique\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(v){let a=v[1]||v[2];if(o==null||o===""||typeof o=="string"&&o.trim()==="")return null;let E=`${t.name}:${o}`;return this.uniqueCheckCache.has(E)?this.uniqueCheckCache.get(E)?null:a||`${s} value already exists`:(this.pendingUniqueChecks.get(E)||(this.pendingUniqueChecks.set(E,!0),this.checkUniqueField(t.name,String(o),a||`${s} value already exists`)),null)}let g=e.match(/^ValidWhen\(\s*(.+?)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(g){let a=g[1].trim(),E=g[2]||g[3],k=this.evaluateCondition(a);return k===!0||k==="true"||k===0||k==="0"?null:E||`${s} validation failed`}let R=e.match(/^InvalidWhen\(\s*(.+?)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(R){let a=R[1].trim(),E=R[2]||R[3],k=this.evaluateCondition(a);return k===!0||k==="true"||typeof k=="number"&&k!==0||typeof k=="string"&&k!=="0"&&k!=="false"&&k!==""?E||`${s} validation failed`:null}return null}evaluateCondition(e){if(/\s+OR\s+/i.test(e)){let s=e.split(/\s+OR\s+/i);for(let p of s)if(this.evaluateCondition(p.trim()))return!0;return!1}if(/\s+AND\s+/i.test(e)){let s=e.split(/\s+AND\s+/i);for(let p of s)if(!this.evaluateCondition(p.trim()))return!1;return!0}let t=e.match(/^(.+?)\s*(>=|<=|!=|=|>|<)\s*(.+)$/);if(t){let s=t[1].trim(),p=t[2],v=t[3].trim(),g=this.resolveValue(s),R=this.resolveValue(v);switch(p){case"=":return g==R;case"!=":return g!=R;case">":return Number(g)>Number(R);case"<":return Number(g)<Number(R);case">=":return Number(g)>=Number(R);case"<=":return Number(g)<=Number(R)}}return this.resolveValue(e)}resolveValue(e){let t=e.trim();if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(!isNaN(Number(t)))return Number(t);if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1;if(this.isFunctionExpression(t))return this.evaluateFunction(t,"TEXT");let o=this.form.get(t);return o?o.value:this.containsOperatorsOrFunctions(t)?this.evaluateArithmeticExpression(t):t}containsOperatorsOrFunctions(e){return!!(/[+\-*\/]/.test(e)||/[A-Z_]+\(/i.test(e))}evaluateArithmeticExpression(e){let t=e,o=/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g,s,p=[];for(;(s=o.exec(e))!==null;){let g=s[1];if(this.isFunctionExpression(g)||["AND","OR","TRUE","FALSE"].includes(g.toUpperCase()))continue;let R=this.form.get(g);R&&p.push({field:g,value:R.value??0})}for(let g of p){let R=typeof g.value=="number"?g.value:parseFloat(g.value)||0;t=t.replace(new RegExp(`\\b${g.field}\\b`,"g"),R.toString())}let v=/([A-Z_]+)\(([^()]*)\)/gi;for(;v.test(t);)t=t.replace(v,g=>this.evaluateFunction(g,"NUMBER").toString());try{return Function('"use strict"; return ('+t+")")()}catch{return t}}checkUniqueField(e,t,o){let s=`${e}:${t}`;this.workflowService.validateUniqueField(this.workflowCode,e,t,this.instanceId||void 0).subscribe({next:p=>{this.pendingUniqueChecks.delete(s);let v=p.data;this.uniqueCheckCache.set(s,v);let g=this.form.get(e);if(!v)this.validationErrors[e]=o,g&&(g.setErrors(G(B({},g.errors),{customValidation:o})),g.markAsTouched());else{let E=this.fields.find(k=>k.name===e);if(E?.validation){let k=this.evaluateNonUniqueValidations(E);if(this.validationErrors[e]=k,g){if(k)g.setErrors(G(B({},g.errors),{customValidation:k})),g.markAsTouched();else if(g.errors){let R=g.errors,{customValidation:F}=R,U=J(R,["customValidation"]);g.setErrors(Object.keys(U).length>0?U:null)}}}else if(this.validationErrors[e]=null,g&&g.errors){let a=g.errors,{customValidation:k}=a,F=J(a,["customValidation"]);g.setErrors(Object.keys(F).length>0?F:null)}}this.cdr.detectChanges()},error:()=>{this.pendingUniqueChecks.delete(s),this.uniqueCheckCache.set(s,!0)}})}evaluateNonUniqueValidations(e){let t=e.validation;if(!t)return null;try{let o=t.split(/\s+AND\s+/i);for(let s of o){let p=s.trim();if(/^Unique\(/i.test(p))continue;let v=this.evaluateSingleValidation(p,e);if(v)return v}return null}catch{return null}}recalculateField(e,t){let o=this.evaluateFunction(t.expression,t.fieldType);t.fieldType==="CHECKBOX"?o=o==="true"||o===!0||!1:t.fieldType==="NUMBER"||t.fieldType==="CURRENCY"?o=o?Number(o):null:(t.fieldType==="DATE"||t.fieldType==="DATETIME")&&!(o instanceof Date)&&(o=o?new Date(o):null);let s=this.form.get(e);s&&s.value!==o&&s.setValue(o,{emitEvent:!1})}getUngroupedFields(){return this.fields.filter(e=>!e.fieldGroupId&&!(e.hidden||e.isHidden))}getFieldsInGroup(e){let t=e?.toString();if(this.isMultiStep){let o=this.currentScreen?.id?.toString(),s=this.currentScreenIndex===0;return this.fields.filter(p=>{if(p.fieldGroupId?.toString()!==t||p.hidden||p.isHidden)return!1;let v=p.screenId?.toString();return v===o||s&&!v})}return this.fields.filter(o=>o.fieldGroupId?.toString()===t&&!(o.hidden||o.isHidden))}get isMultiStep(){return this.screens.length>1}get isFirstScreen(){return this.currentScreenIndex===0}get isLastScreen(){return this.currentScreenIndex===this.screens.length-1}get currentScreen(){return this.screens[this.currentScreenIndex]||null}getUngroupedFieldsOnScreen(){if(!this.isMultiStep)return this.getUngroupedFields();let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this.fields.filter(o=>{if(o.fieldGroupId||o.hidden||o.isHidden)return!1;let s=o.screenId?.toString();return s===e||t&&!s})}getFieldGroupsOnScreen(){if(!this.isMultiStep)return this.fieldGroups;let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this.fieldGroups.filter(o=>{let s=o.screenId?.toString();return s===e||t&&!s})}goToNextScreen(){this.validateCurrentScreen()&&this.currentScreenIndex<this.screens.length-1&&(this.currentScreenIndex++,window.scrollTo({top:0,behavior:"smooth"}))}goToPreviousScreen(){this.currentScreenIndex>0&&(this.currentScreenIndex--,window.scrollTo({top:0,behavior:"smooth"}))}goToScreen(e){e<=this.currentScreenIndex&&(this.currentScreenIndex=e,window.scrollTo({top:0,behavior:"smooth"}))}validateCurrentScreen(){if(!this.isMultiStep||!this.currentScreen)return!0;let e=this.currentScreen.id?.toString(),t=this.currentScreenIndex===0,o=this.fields.filter(p=>{let v=p.screenId?.toString();return v===e||t&&!v}),s=!0;return o.forEach(p=>{let v=this.form.get(p.name);v&&(v.markAsTouched(),v.invalid&&(s=!1))}),s||this.snackBar.open("Please fill in all required fields on this screen","Close",{duration:3e3}),s}isFieldReadonly(e){return e.readOnly||e.isReadonly||!1}isFieldRequired(e){return e.required?!0:e.validation?/Required\s*\(/i.test(e.validation):!1}isFieldVisible(e){let t=e.visibilityExpression;if(!t||t.trim()===""||t.trim().toLowerCase()==="true")return!0;if(t.trim().toLowerCase()==="false")return!1;try{return this.evaluateVisibilityExpression(t)}catch(o){return console.warn("Error evaluating visibility expression for field",e.name,o),!0}}evaluateVisibilityExpression(e){let t=e.replace(/@\{([^}]+)\}/g,(o,s)=>{let p=this.form.get(s.trim())?.value;return p==null||p===""?"null":typeof p=="string"?`'${p.replace(/'/g,"\\'")}'`:typeof p=="boolean"||typeof p=="number"?p.toString():`'${String(p)}'`});try{let o=t.match(/^['"]?([^'"=!<>]+)['"]?\s*(==|!=|===|!==)\s*['"]?([^'"]+)['"]?$/);if(o){let p=o[1].trim(),v=o[2],g=o[3].trim();return v==="=="||v==="==="?p===g:p!==g}let s=t.match(/^['"]?([^'"<>=!]+)['"]?\s*(>=|<=|>|<)\s*['"]?([^'"]+)['"]?$/);if(s){let p=parseFloat(s[1].trim()),v=s[2],g=parseFloat(s[3].trim());if(!isNaN(p)&&!isNaN(g))switch(v){case">":return p>g;case"<":return p<g;case">=":return p>=g;case"<=":return p<=g}}if(t.includes("&&")||t.includes("||")){let p=t.split(/\s*(&&|\|\|)\s*/),v=this.evaluateSimpleCondition(p[0]);for(let g=1;g<p.length;g+=2){let R=p[g],a=this.evaluateSimpleCondition(p[g+1]);R==="&&"?v=v&&a:R==="||"&&(v=v||a)}return v}if(t.trim().startsWith("!")){let p=t.trim().substring(1).trim();return!this.evaluateSimpleCondition(p)}return this.evaluateSimpleCondition(t)}catch(o){return console.warn("Error in visibility expression evaluation:",o),!0}}evaluateSimpleCondition(e){if(e=e.trim(),e.startsWith("(")&&e.endsWith(")")&&(e=e.slice(1,-1).trim()),e==="null"||e==="''"||e==='""')return!1;if(e.toLowerCase()==="true")return!0;if(e.toLowerCase()==="false")return!1;let t=e.match(/^['"]?([^'"=!<>]+)['"]?\s*(==|!=|===|!==)\s*['"]?([^'"]+)['"]?$/);if(t){let s=t[1].trim().replace(/^['"]|['"]$/g,""),p=t[2],v=t[3].trim().replace(/^['"]|['"]$/g,"");return p==="=="||p==="==="?s===v:s!==v}let o=e.match(/^['"]?([^'"<>=!]+)['"]?\s*(>=|<=|>|<)\s*['"]?([^'"]+)['"]?$/);if(o){let s=parseFloat(o[1].trim()),p=o[2],v=parseFloat(o[3].trim());if(!isNaN(s)&&!isNaN(v))switch(p){case">":return s>v;case"<":return s<v;case">=":return s>=v;case"<=":return s<=v}}return e!=="null"&&e!==""&&e!=="0"}hasFieldError(e){if(!this.hasAttemptedSubmit)return!1;let t=this.form.get(e.name),o=t?.invalid,s=!!this.validationErrors[e.name],p=t?.hasError("customValidation");return o||s||!!p}getFieldErrorMessage(e){let t=this.form.get(e.name);return this.validationErrors[e.name]?this.validationErrors[e.name]:t?.hasError("customValidation")?t.getError("customValidation"):t?.hasError("required")?`${e.label} is required`:t?.hasError("email")?"Please enter a valid email":null}getErrorStateMatcher(e){let t=this.validationErrors;return{isErrorState:o=>{if(!o)return!1;let s=!!t[e.name],p=o.invalid&&(o.touched||o.dirty);return s||p}}}evaluateDefaultValue(e,t){if(!e)return"";let o=e.trim();return this.isFunctionExpression(o)?this.evaluateFunction(o,t):e}isFunctionExpression(e){let t=/^[A-Z_]+\(.*\)$/i,o=["TODAY","NOW","CURRENT_USER","CURRENT_USER_EMAIL","CURRENT_USER_ID","CURRENT_USERNAME","CURRENT_USER_PHONE","CURRENT_USER_DEPARTMENT","CURRENT_USER_STAFFID","CURRENT_USER_ROLE","CURRENT_USER_SBU","CURRENT_USER_BRANCH","CURRENT_DATE","CURRENT_TIME","CURRENT_DATETIME","CURRENT_YEAR","CURRENT_MONTH","UUID","SHORT_UUID","TIMESTAMP","PI","E","RANDOM","WORKFLOW_ID","WORKFLOW_NAME","INSTANCE_ID","INSTANCE_STATUS","SUBMISSION_DATE","SUBMITTER_NAME","SUBMITTER_EMAIL","APPROVAL_LEVEL","APPROVER_NAME","ENVIRONMENT","VERSION","LOCALE","TIMEZONE","BROWSER","PLATFORM","IS_MOBILE","SCREEN_WIDTH","SCREEN_HEIGHT"];return t.test(e)||o.includes(e.toUpperCase())}evaluateFunction(e,t){let o=this.authService.currentUser,s=e.toUpperCase().trim(),p=(t||"").toUpperCase(),v=e.match(/^([A-Z_]+)\((.*)\)$/i),g=v?v[1].toUpperCase():s,R=v?v[2]:"",a=R?this.parseArgs(R):[],E=$=>parseFloat($)||0,k=$=>parseInt($)||0,F=$=>String($??""),U=$=>$===!0||$==="true"||$==="1"||$===1,M=$=>$ instanceof Date?$:new Date($);switch(g){case"UPPER":return F(a[0]).toUpperCase();case"LOWER":return F(a[0]).toLowerCase();case"TRIM":return F(a[0]).trim();case"TRIM_LEFT":return F(a[0]).trimStart();case"TRIM_RIGHT":return F(a[0]).trimEnd();case"CONCAT":return a.join("");case"LEFT":return F(a[0]).substring(0,k(a[1]));case"RIGHT":{let m=F(a[0]);return m.substring(m.length-k(a[1]))}case"SUBSTRING":return F(a[0]).substring(k(a[1]),k(a[1])+k(a[2]));case"LENGTH":return F(a[0]).length.toString();case"REPLACE":return F(a[0]).split(F(a[1])).join(F(a[2]));case"REPLACE_FIRST":return F(a[0]).replace(F(a[1]),F(a[2]));case"CONTAINS":return F(a[0]).includes(F(a[1])).toString();case"CONTAINS_IGNORE_CASE":return F(a[0]).toLowerCase().includes(F(a[1]).toLowerCase()).toString();case"STARTS_WITH":return F(a[0]).startsWith(F(a[1])).toString();case"ENDS_WITH":return F(a[0]).endsWith(F(a[1])).toString();case"CAPITALIZE":return F(a[0]).charAt(0).toUpperCase()+F(a[0]).slice(1).toLowerCase();case"TITLE_CASE":return F(a[0]).replace(/\b\w/g,m=>m.toUpperCase());case"SENTENCE_CASE":return F(a[0]).replace(/(^\s*\w|[.!?]\s*\w)/g,m=>m.toUpperCase());case"REVERSE":return F(a[0]).split("").reverse().join("");case"REPEAT":return F(a[0]).repeat(k(a[1]));case"PAD_LEFT":return F(a[0]).padStart(k(a[1]),F(a[2])||" ");case"PAD_RIGHT":return F(a[0]).padEnd(k(a[1]),F(a[2])||" ");case"WORD_COUNT":return F(a[0]).trim().split(/\s+/).filter(m=>m).length.toString();case"CHAR_AT":return F(a[0]).charAt(k(a[1]));case"INDEX_OF":return F(a[0]).indexOf(F(a[1])).toString();case"LAST_INDEX_OF":return F(a[0]).lastIndexOf(F(a[1])).toString();case"SPLIT":return JSON.stringify(F(a[0]).split(F(a[1])));case"JOIN":try{return JSON.parse(F(a[0])).join(F(a[1]))}catch{return a[0]}case"INITIALS":return F(a[0]).split(/\s+/).map(m=>m.charAt(0).toUpperCase()).join("");case"SLUG":return F(a[0]).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");case"CLEAN":return F(a[0]).replace(/[^\x20-\x7E]/g,"");case"REMOVE_SPACES":return F(a[0]).replace(/\s/g,"");case"COLLAPSE_SPACES":return F(a[0]).replace(/\s+/g," ");case"EXTRACT_NUMBERS":return F(a[0]).replace(/[^0-9]/g,"");case"EXTRACT_LETTERS":return F(a[0]).replace(/[^a-zA-Z]/g,"");case"EXTRACT_ALPHANUMERIC":return F(a[0]).replace(/[^a-zA-Z0-9]/g,"");case"MASK":{let m=F(a[0]),x=k(a[1]),S=k(a[2]),I=F(a[3])||"*",V=S<0?m.length+S:S;return m.substring(0,x)+I.repeat(V-x)+m.substring(V)}case"MASK_EMAIL":{let m=F(a[0]),[x,S]=m.split("@");return S?x.charAt(0)+"***@"+S:m}case"MASK_PHONE":{let m=F(a[0]).replace(/\D/g,"");return m.length>4?"*".repeat(m.length-4)+m.slice(-4):m}case"FORMAT_PHONE":{let m=F(a[0]).replace(/\D/g,""),x=F(a[1]).toUpperCase();return x==="US"&&m.length===10?`(${m.slice(0,3)}) ${m.slice(3,6)}-${m.slice(6)}`:x==="INTL"&&m.length>=10?`+${m.slice(0,-10)} ${m.slice(-10,-7)} ${m.slice(-7,-4)} ${m.slice(-4)}`:m}case"ENCODE_HTML":return F(a[0]).replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[m]||m);case"DECODE_HTML":return F(a[0]).replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,m=>({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"})[m]||m);case"WRAP":return F(a[1])+F(a[0])+F(a[2]);case"TRUNCATE":{let m=F(a[0]),x=k(a[1]),S=F(a[2])||"...";return m.length>x?m.substring(0,x-S.length)+S:m}case"REGEX_MATCH":try{return new RegExp(F(a[1])).test(F(a[0])).toString()}catch{return"false"}case"REGEX_EXTRACT":try{let m=F(a[0]).match(new RegExp(F(a[1])));return m?m[0]:""}catch{return""}case"REGEX_REPLACE":try{return F(a[0]).replace(new RegExp(F(a[1]),"g"),F(a[2]))}catch{return a[0]}case"SUM":return a.reduce((m,x)=>m+E(x),0).toString();case"SUBTRACT":return(E(a[0])-E(a[1])).toString();case"MULTIPLY":return(E(a[0])*E(a[1])).toString();case"DIVIDE":return E(a[1])===0?"0":(E(a[0])/E(a[1])).toString();case"ROUND":return E(a[0]).toFixed(k(a[1]));case"ROUND_UP":let $=Math.pow(10,k(a[1]));return(Math.ceil(E(a[0])*$)/$).toString();case"ROUND_DOWN":let oe=Math.pow(10,k(a[1]));return(Math.floor(E(a[0])*oe)/oe).toString();case"FLOOR":return Math.floor(E(a[0])).toString();case"CEIL":return Math.ceil(E(a[0])).toString();case"TRUNC":return Math.trunc(E(a[0])).toString();case"ABS":return Math.abs(E(a[0])).toString();case"SIGN":return Math.sign(E(a[0])).toString();case"NEGATE":return(-E(a[0])).toString();case"MIN":return Math.min(...a.map(E)).toString();case"MAX":return Math.max(...a.map(E)).toString();case"AVERAGE":{let m=a.map(E);return(m.reduce((x,S)=>x+S,0)/m.length).toString()}case"MEDIAN":{let m=a.map(E).sort((S,I)=>S-I),x=Math.floor(m.length/2);return(m.length%2?m[x]:(m[x-1]+m[x])/2).toString()}case"MODE":{let m={};return a.forEach(x=>{m[x]=(m[x]||0)+1}),Object.entries(m).sort((x,S)=>S[1]-x[1])[0]?.[0]||""}case"COUNT":return a.filter(m=>m!==""&&m!==null&&m!==void 0).length.toString();case"PRODUCT":return a.reduce((m,x)=>m*E(x),1).toString();case"PERCENTAGE":return E(a[1])===0?"0":(E(a[0])/E(a[1])*100).toString();case"PERCENT_OF":return(E(a[0])*E(a[1])/100).toString();case"PERCENT_CHANGE":return E(a[0])===0?"0":((E(a[1])-E(a[0]))/E(a[0])*100).toString();case"MOD":return(E(a[0])%E(a[1])).toString();case"POWER":return Math.pow(E(a[0]),E(a[1])).toString();case"SQRT":return Math.sqrt(E(a[0])).toString();case"CBRT":return Math.cbrt(E(a[0])).toString();case"LOG":return Math.log(E(a[0])).toString();case"LOG10":return Math.log10(E(a[0])).toString();case"LOG2":return Math.log2(E(a[0])).toString();case"EXP":return Math.exp(E(a[0])).toString();case"FACTORIAL":{let m=k(a[0]),x=1;for(let S=2;S<=m;S++)x*=S;return x.toString()}case"GCD":{let m=Math.abs(k(a[0])),x=Math.abs(k(a[1]));for(;x;)[m,x]=[x,m%x];return m.toString()}case"LCM":{let m=Math.abs(k(a[0])),x=Math.abs(k(a[1])),S=m,I=x;for(;I;)[S,I]=[I,S%I];return(m*x/S).toString()}case"RANDOM":return Math.random().toString();case"RANDOM_INT":return(Math.floor(Math.random()*(k(a[1])-k(a[0])+1))+k(a[0])).toString();case"CLAMP":return Math.min(Math.max(E(a[0]),E(a[1])),E(a[2])).toString();case"INTERPOLATE":return(E(a[0])+(E(a[1])-E(a[0]))*E(a[2])).toString();case"MAP_RANGE":{let m=E(a[0]),x=E(a[1]),S=E(a[2]),I=E(a[3]),V=E(a[4]);return((m-x)/(S-x)*(V-I)+I).toString()}case"SIN":return Math.sin(E(a[0])).toString();case"COS":return Math.cos(E(a[0])).toString();case"TAN":return Math.tan(E(a[0])).toString();case"DEGREES":return(E(a[0])*180/Math.PI).toString();case"RADIANS":return(E(a[0])*Math.PI/180).toString();case"PI":return Math.PI.toString();case"E":return Math.E.toString();case"VARIANCE":{let m=a.map(E),x=m.reduce((S,I)=>S+I,0)/m.length;return(m.reduce((S,I)=>S+Math.pow(I-x,2),0)/m.length).toString()}case"STDEV":{let m=a.map(E),x=m.reduce((S,I)=>S+I,0)/m.length;return Math.sqrt(m.reduce((S,I)=>S+Math.pow(I-x,2),0)/m.length).toString()}case"RANGE":{let m=a.map(E);return(Math.max(...m)-Math.min(...m)).toString()}case"COMPOUND_INTEREST":return(E(a[0])*Math.pow(1+E(a[1]),E(a[2]))).toString();case"SIMPLE_INTEREST":return(E(a[0])*(1+E(a[1])*E(a[2]))).toString();case"PMT":{let m=E(a[0]),x=E(a[1]),S=E(a[2]);return m===0?(S/x).toString():(S*m/(1-Math.pow(1+m,-x))).toString()}case"FV":return(E(a[2])*((Math.pow(1+E(a[0]),E(a[1]))-1)/E(a[0]))).toString();case"PV":return(E(a[2])*((1-Math.pow(1+E(a[0]),-E(a[1])))/E(a[0]))).toString();case"FORMAT_NUMBER":{let m=E(a[0]),x=k(a[1]);return m.toLocaleString("en-US",{minimumFractionDigits:x,maximumFractionDigits:x})}case"FORMAT_PERCENTAGE":return E(a[0]).toFixed(k(a[1]))+"%";case"FORMAT_BYTES":{let m=E(a[0]);if(m===0)return"0 Bytes";let x=1024,S=["Bytes","KB","MB","GB","TB"],I=Math.floor(Math.log(m)/Math.log(x));return(m/Math.pow(x,I)).toFixed(2)+" "+S[I]}case"FORMAT_ORDINAL":{let m=k(a[0]),x=["th","st","nd","rd"],S=m%100;return m+(x[(S-20)%10]||x[S]||x[0])}case"ROMAN":{let m=k(a[0]),x="",S=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];for(let[I,V]of S)for(;m>=I;)x+=V,m-=I;return x}case"HEX":return k(a[0]).toString(16).toUpperCase();case"BIN":return k(a[0]).toString(2);case"OCT":return k(a[0]).toString(8);case"PARSE_INT":return parseInt(F(a[0]),k(a[1])||10).toString();case"TODAY":return p==="DATE"||p==="DATETIME"?new Date:this.formatDate(new Date);case"NOW":return p==="DATETIME"?new Date:this.formatDateTime(new Date);case"TIMESTAMP":return Date.now().toString();case"DATE":{let m=new Date(k(a[0]),k(a[1])-1,k(a[2]));return p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"DATETIME":{let m=new Date(k(a[0]),k(a[1])-1,k(a[2]),k(a[3]),k(a[4]),k(a[5]));return p==="DATETIME"?m:this.formatDateTime(m)}case"DATE_FORMAT":{let m=M(a[0]),x=F(a[1]);return this.formatDateWithPattern(m,x)}case"DATE_PARSE":return new Date(F(a[0])).toISOString();case"DATE_ADD":{let m=M(a[0]),x=k(a[1]),S=F(a[2]).toLowerCase();return this.addToDate(m,x,S)}case"DATE_SUBTRACT":{let m=M(a[0]),x=k(a[1]),S=F(a[2]).toLowerCase();return this.addToDate(m,-x,S)}case"DATE_DIFF":{let m=M(a[0]),x=M(a[1]),S=F(a[2]).toLowerCase();return this.dateDiff(m,x,S)}case"AGE":{let m=M(a[0]),x=new Date,S=x.getFullYear()-m.getFullYear();return(x.getMonth()<m.getMonth()||x.getMonth()===m.getMonth()&&x.getDate()<m.getDate())&&S--,S.toString()}case"AGE_DETAILED":{let m=M(a[0]),x=new Date,S=x.getFullYear()-m.getFullYear(),I=x.getMonth()-m.getMonth(),V=x.getDate()-m.getDate();return V<0&&(I--,V+=new Date(x.getFullYear(),x.getMonth(),0).getDate()),I<0&&(S--,I+=12),`${S} years, ${I} months, ${V} days`}case"YEAR":return a[0]?M(a[0]).getFullYear().toString():new Date().getFullYear().toString();case"MONTH":return a[0]?(M(a[0]).getMonth()+1).toString():(new Date().getMonth()+1).toString();case"DAY":return a[0]?M(a[0]).getDate().toString():new Date().getDate().toString();case"HOUR":return a[0]?M(a[0]).getHours().toString():new Date().getHours().toString();case"MINUTE":return a[0]?M(a[0]).getMinutes().toString():new Date().getMinutes().toString();case"SECOND":return a[0]?M(a[0]).getSeconds().toString():new Date().getSeconds().toString();case"MILLISECOND":return a[0]?M(a[0]).getMilliseconds().toString():new Date().getMilliseconds().toString();case"WEEKDAY":return((a[0]?M(a[0]):new Date).getDay()||7).toString();case"WEEKDAY_NAME":{let m=a[0]?M(a[0]):new Date;return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][m.getDay()]}case"WEEKDAY_SHORT":{let m=a[0]?M(a[0]):new Date;return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][m.getDay()]}case"WEEK_NUMBER":{let m=a[0]?M(a[0]):new Date,x=new Date(m.getFullYear(),0,1);return Math.ceil(((m.getTime()-x.getTime())/864e5+x.getDay()+1)/7).toString()}case"QUARTER":{let m=a[0]?M(a[0]):new Date;return(Math.floor(m.getMonth()/3)+1).toString()}case"MONTH_NAME":{let m=a[0]?M(a[0]):new Date;return["January","February","March","April","May","June","July","August","September","October","November","December"][m.getMonth()]}case"MONTH_SHORT":{let m=a[0]?M(a[0]):new Date;return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m.getMonth()]}case"DAY_OF_YEAR":{let m=a[0]?M(a[0]):new Date,x=new Date(m.getFullYear(),0,0);return Math.floor((m.getTime()-x.getTime())/864e5).toString()}case"DAYS_IN_MONTH":{let m=a[0]?M(a[0]):new Date;return new Date(m.getFullYear(),m.getMonth()+1,0).getDate().toString()}case"DAYS_IN_YEAR":{let x=(a[0]?M(a[0]):new Date).getFullYear();return(x%4===0&&x%100!==0||x%400===0?366:365).toString()}case"IS_LEAP_YEAR":{let m=a[0]?M(a[0]).getFullYear():new Date().getFullYear();return(m%4===0&&m%100!==0||m%400===0).toString()}case"START_OF_DAY":{let m=new Date(a[0]?M(a[0]):new Date);return m.setHours(0,0,0,0),p==="DATETIME"?m:this.formatDateTime(m)}case"END_OF_DAY":{let m=new Date(a[0]?M(a[0]):new Date);return m.setHours(23,59,59,999),p==="DATETIME"?m:this.formatDateTime(m)}case"START_OF_WEEK":{let m=new Date(a[0]?M(a[0]):new Date),x=m.getDay()||7;return m.setDate(m.getDate()-x+1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_WEEK":{let m=new Date(a[0]?M(a[0]):new Date),x=m.getDay()||7;return m.setDate(m.getDate()+(7-x)),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"START_OF_MONTH":{let m=new Date(a[0]?M(a[0]):new Date);return m.setDate(1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_MONTH":{let m=new Date(a[0]?M(a[0]):new Date);return m.setMonth(m.getMonth()+1,0),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"START_OF_QUARTER":{let m=new Date(a[0]?M(a[0]):new Date);return m.setMonth(Math.floor(m.getMonth()/3)*3,1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_QUARTER":{let m=new Date(a[0]?M(a[0]):new Date);return m.setMonth(Math.floor(m.getMonth()/3)*3+3,0),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"START_OF_YEAR":{let m=new Date(a[0]?M(a[0]):new Date);return m.setMonth(0,1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_YEAR":{let m=new Date(a[0]?M(a[0]):new Date);return m.setMonth(11,31),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"IS_WEEKEND":{let m=(a[0]?M(a[0]):new Date).getDay();return(m===0||m===6).toString()}case"IS_WEEKDAY":{let m=(a[0]?M(a[0]):new Date).getDay();return(m!==0&&m!==6).toString()}case"IS_TODAY":{let m=a[0]?M(a[0]):new Date,x=new Date;return(m.toDateString()===x.toDateString()).toString()}case"IS_YESTERDAY":{let m=a[0]?M(a[0]):new Date,x=new Date;return x.setDate(x.getDate()-1),(m.toDateString()===x.toDateString()).toString()}case"IS_TOMORROW":{let m=a[0]?M(a[0]):new Date,x=new Date;return x.setDate(x.getDate()+1),(m.toDateString()===x.toDateString()).toString()}case"IS_PAST":return((a[0]?M(a[0]):new Date)<new Date).toString();case"IS_FUTURE":return((a[0]?M(a[0]):new Date)>new Date).toString();case"IS_THIS_WEEK":{let m=a[0]?M(a[0]):new Date,x=new Date,S=new Date(x);S.setDate(x.getDate()-(x.getDay()||7)+1);let I=new Date(S);return I.setDate(S.getDate()+6),(m>=S&&m<=I).toString()}case"IS_THIS_MONTH":{let m=a[0]?M(a[0]):new Date,x=new Date;return(m.getMonth()===x.getMonth()&&m.getFullYear()===x.getFullYear()).toString()}case"IS_THIS_YEAR":return((a[0]?M(a[0]):new Date).getFullYear()===new Date().getFullYear()).toString();case"IS_SAME_DAY":return(M(a[0]).toDateString()===M(a[1]).toDateString()).toString();case"IS_BEFORE":return(M(a[0])<M(a[1])).toString();case"IS_AFTER":return(M(a[0])>M(a[1])).toString();case"IS_BETWEEN_DATES":{let m=M(a[0]),x=M(a[1]),S=M(a[2]);return(m>=x&&m<=S).toString()}case"BUSINESS_DAYS":{let m=M(a[0]),x=M(a[1]),S=0,I=new Date(m);for(;I<=x;){let V=I.getDay();V!==0&&V!==6&&S++,I.setDate(I.getDate()+1)}return S.toString()}case"ADD_BUSINESS_DAYS":{let m=new Date(a[0]?M(a[0]):new Date),x=k(a[1]);for(;x>0;)m.setDate(m.getDate()+1),m.getDay()!==0&&m.getDay()!==6&&x--;return p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"RELATIVE_TIME":{let m=a[0]?M(a[0]):new Date,x=Date.now()-m.getTime(),S=Math.abs(x),I=x<0;return S<6e4?I?"in a few seconds":"just now":S<36e5?`${I?"in ":""}${Math.floor(S/6e4)} minutes${I?"":" ago"}`:S<864e5?`${I?"in ":""}${Math.floor(S/36e5)} hours${I?"":" ago"}`:`${I?"in ":""}${Math.floor(S/864e5)} days${I?"":" ago"}`}case"ISO_STRING":return(a[0]?M(a[0]):new Date).toISOString();case"CURRENT_DATE":return this.formatDate(new Date);case"CURRENT_TIME":return new Date().toTimeString().split(" ")[0];case"CURRENT_DATETIME":return this.formatDateTime(new Date);case"CURRENT_YEAR":return new Date().getFullYear().toString();case"CURRENT_MONTH":return(new Date().getMonth()+1).toString();case"IF":return this.evaluateCondition(a[0])?a[1]:a[2];case"IFS":{for(let m=0;m<a.length-1;m+=2)if(this.evaluateCondition(a[m]))return a[m+1];return a.length%2===1?a[a.length-1]:""}case"SWITCH":{let m=a[0];for(let x=1;x<a.length-1;x+=2)if(m===a[x])return a[x+1];return a.length%2===0?a[a.length-1]:""}case"AND":return a.every(m=>U(m)||this.evaluateCondition(m)).toString();case"OR":return a.some(m=>U(m)||this.evaluateCondition(m)).toString();case"NOT":return(!U(a[0])).toString();case"XOR":return(U(a[0])!==U(a[1])).toString();case"NAND":return(!(U(a[0])&&U(a[1]))).toString();case"NOR":return(!(U(a[0])||U(a[1]))).toString();case"IS_EMPTY":return(!a[0]||F(a[0]).trim()==="").toString();case"IS_NOT_EMPTY":return(a[0]&&F(a[0]).trim()!=="").toString();case"IS_NULL":return(a[0]===null||a[0]===void 0||a[0]==="").toString();case"IS_NOT_NULL":return(a[0]!==null&&a[0]!==void 0&&a[0]!=="").toString();case"IS_BLANK":return(!a[0]||F(a[0]).trim()==="").toString();case"IS_TRUE":return U(a[0]).toString();case"IS_FALSE":return(!U(a[0])).toString();case"EQUALS":return(a[0]===a[1]).toString();case"EQUALS_IGNORE_CASE":return(F(a[0]).toLowerCase()===F(a[1]).toLowerCase()).toString();case"NOT_EQUALS":return(a[0]!==a[1]).toString();case"GREATER_THAN":return(E(a[0])>E(a[1])).toString();case"GREATER_THAN_OR_EQUAL":return(E(a[0])>=E(a[1])).toString();case"LESS_THAN":return(E(a[0])<E(a[1])).toString();case"LESS_THAN_OR_EQUAL":return(E(a[0])<=E(a[1])).toString();case"BETWEEN":return(E(a[0])>=E(a[1])&&E(a[0])<=E(a[2])).toString();case"NOT_BETWEEN":return(E(a[0])<E(a[1])||E(a[0])>E(a[2])).toString();case"IN":try{return JSON.parse(a[1]).includes(a[0]).toString()}catch{return"false"}case"NOT_IN":try{return(!JSON.parse(a[1]).includes(a[0])).toString()}catch{return"true"}case"IS_NUMBER":return(!isNaN(parseFloat(a[0]))&&isFinite(E(a[0]))).toString();case"IS_INTEGER":return Number.isInteger(E(a[0])).toString();case"IS_DECIMAL":return(E(a[0])%1!==0).toString();case"IS_POSITIVE":return(E(a[0])>0).toString();case"IS_NEGATIVE":return(E(a[0])<0).toString();case"IS_ZERO":return(E(a[0])===0).toString();case"IS_EVEN":return(k(a[0])%2===0).toString();case"IS_ODD":return(k(a[0])%2!==0).toString();case"IS_TEXT":return(typeof a[0]=="string").toString();case"IS_DATE":return(!isNaN(new Date(a[0]).getTime())).toString();case"IS_BOOLEAN":return(a[0]==="true"||a[0]==="false"||typeof a[0]=="boolean").toString();case"IS_EMAIL":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F(a[0])).toString();case"IS_URL":try{return new URL(F(a[0])),"true"}catch{return"false"}case"IS_PHONE":return/^[\d\s\-\+\(\)]{7,20}$/.test(F(a[0])).toString();case"IS_UUID":return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(F(a[0])).toString();case"IS_ALPHANUMERIC":return/^[a-zA-Z0-9]+$/.test(F(a[0])).toString();case"IS_ALPHA":return/^[a-zA-Z]+$/.test(F(a[0])).toString();case"IS_NUMERIC":return/^[0-9]+$/.test(F(a[0])).toString();case"IS_UPPERCASE":return(F(a[0])===F(a[0]).toUpperCase()).toString();case"IS_LOWERCASE":return(F(a[0])===F(a[0]).toLowerCase()).toString();case"MATCHES_PATTERN":try{return new RegExp(F(a[1])).test(F(a[0])).toString()}catch{return"false"}case"HAS_LENGTH":return(F(a[0]).length===k(a[1])).toString();case"HAS_MIN_LENGTH":return(F(a[0]).length>=k(a[1])).toString();case"HAS_MAX_LENGTH":return(F(a[0]).length<=k(a[1])).toString();case"CURRENT_USER":return o?.fullName||"";case"CURRENT_USER_EMAIL":return o?.email||"";case"CURRENT_USER_ID":return o?.userId||"";case"CURRENT_USERNAME":return o?.username||"";case"CURRENT_USER_PHONE":return o?.phoneNumber||"";case"CURRENT_USER_DEPARTMENT":return o?.department||"";case"CURRENT_USER_STAFFID":return o?.staffId||"";case"CURRENT_USER_ROLE":return o?.userType||"";case"CURRENT_USER_SBU":return o?.sbuIds?.[0]||"";case"CURRENT_USER_BRANCH":return o?.branchIds?.[0]||"";case"UUID":return this.generateUUID();case"SHORT_UUID":return this.generateUUID().substring(0,8);case"NANO_ID":{let m=k(a[0])||21,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",S="";for(let I=0;I<m;I++)S+=x.charAt(Math.floor(Math.random()*x.length));return S}case"SEQUENCE":return F(a[0])+Date.now().toString().slice(-8);case"SEQUENCE_PADDED":{let m=F(a[0]),x=k(a[1])||6;return m+Date.now().toString().slice(-x).padStart(x,"0")}case"RANDOM_STRING":{let m=k(a[0])||10,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",S="";for(let I=0;I<m;I++)S+=x.charAt(Math.floor(Math.random()*x.length));return S}case"RANDOM_CODE":{let m=k(a[0])||6,x=F(a[1]).toUpperCase(),S="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";x==="ALPHA"?S="ABCDEFGHIJKLMNOPQRSTUVWXYZ":x==="NUMERIC"&&(S="0123456789");let I="";for(let V=0;V<m;V++)I+=S.charAt(Math.floor(Math.random()*S.length));return I}case"COALESCE":case"DEFAULT":return a.find(m=>m&&F(m).trim()!=="")||"";case"NULLIF":return a[0]===a[1]?"":a[0];case"NVL":case"IFNULL":return a[0]===null||a[0]===void 0||a[0]===""?a[1]:a[0];case"FORMAT_CURRENCY":{let m=E(a[0]),x=F(a[1])||"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(m)}catch{return m.toFixed(2)}}case"TO_NUMBER":return E(a[0]).toString();case"TO_TEXT":return F(a[0]);case"TO_BOOLEAN":return U(a[0]).toString();case"TO_DATE":return this.formatDate(M(a[0]));case"TO_ARRAY":return JSON.stringify(F(a[0]).split(",").map(m=>m.trim()));case"TO_JSON":try{return JSON.stringify(a[0])}catch{return""}case"FROM_JSON":try{return JSON.parse(F(a[0]))}catch{return a[0]}case"FIELD_VALUE":{let m=F(a[0]);return this.getFieldValue(m)||""}case"FIELD_LABEL":{let m=F(a[0]);return this.fields.find(S=>S.name===m)?.label||m}case"GET":try{let m=F(a[1]).split("."),x=JSON.parse(F(a[0]));for(let S of m)x=x?.[S];return x??a[2]??""}catch{return a[2]??""}case"KEYS":try{return JSON.stringify(Object.keys(JSON.parse(F(a[0]))))}catch{return"[]"}case"VALUES":try{return JSON.stringify(Object.values(JSON.parse(F(a[0]))))}catch{return"[]"}case"ARRAY_LENGTH":try{return JSON.parse(F(a[0])).length.toString()}catch{return"0"}case"ARRAY_FIRST":try{return JSON.parse(F(a[0]))[0]??""}catch{return""}case"ARRAY_LAST":try{let m=JSON.parse(F(a[0]));return m[m.length-1]??""}catch{return""}case"ARRAY_JOIN":try{return JSON.parse(F(a[0])).join(F(a[1]))}catch{return""}case"ARRAY_SUM":try{return JSON.parse(F(a[0])).reduce((m,x)=>m+E(x),0).toString()}catch{return"0"}case"ARRAY_AVERAGE":try{let m=JSON.parse(F(a[0]));return(m.reduce((x,S)=>x+E(S),0)/m.length).toString()}catch{return"0"}case"ARRAY_MIN":try{return Math.min(...JSON.parse(F(a[0])).map(E)).toString()}catch{return"0"}case"ARRAY_MAX":try{return Math.max(...JSON.parse(F(a[0])).map(E)).toString()}catch{return"0"}case"ARRAY_UNIQUE":try{return JSON.stringify([...new Set(JSON.parse(F(a[0])))])}catch{return"[]"}case"ARRAY_REVERSE":try{return JSON.stringify(JSON.parse(F(a[0])).reverse())}catch{return"[]"}case"ARRAY_SORT":try{let m=JSON.parse(F(a[0])),x=F(a[1]).toUpperCase();return JSON.stringify(m.sort((S,I)=>x==="DESC"?I>S?1:-1:S>I?1:-1))}catch{return"[]"}case"ARRAY_INCLUDES":try{return JSON.parse(F(a[0])).includes(a[1]).toString()}catch{return"false"}case"ARRAY_INDEX_OF":try{return JSON.parse(F(a[0])).indexOf(a[1]).toString()}catch{return"-1"}case"TEMPLATE":{let m=F(a[0]);try{let x=typeof a[1]=="object"?a[1]:JSON.parse(F(a[1]));return m.replace(/\{\{(\w+)\}\}/g,(S,I)=>x[I]??"")}catch{return m}}case"BASE64_ENCODE":try{return btoa(F(a[0]))}catch{return""}case"BASE64_DECODE":try{return atob(F(a[0]))}catch{return""}case"URL_ENCODE":return encodeURIComponent(F(a[0]));case"URL_DECODE":return decodeURIComponent(F(a[0]));case"TRY":try{return this.evaluateFunction(F(a[0]),t)}catch{return a[1]||""}case"TYPEOF":return typeof a[0];case"CLONE":try{return JSON.stringify(JSON.parse(JSON.stringify(a[0])))}catch{return a[0]}case"COMPARE":return a[0]>a[1]?"1":a[0]<a[1]?"-1":"0";case"EQUALS_DEEP":try{return(JSON.stringify(a[0])===JSON.stringify(a[1])).toString()}catch{return"false"}case"WORKFLOW_ID":return this.workflow?.id||"";case"WORKFLOW_NAME":return this.workflow?.name||"";case"INSTANCE_ID":return this.instanceId||"";case"ENVIRONMENT":return"PROD";case"VERSION":return"1.0.0";case"LOCALE":return navigator.language||"en-US";case"TIMEZONE":return Intl.DateTimeFormat().resolvedOptions().timeZone;case"BROWSER":return navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Unknown";case"PLATFORM":return navigator.platform||"Unknown";case"IS_MOBILE":return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent).toString();case"SCREEN_WIDTH":return window.screen.width.toString();case"SCREEN_HEIGHT":return window.screen.height.toString();default:return e}}formatDateWithPattern(e,t){if(!e||isNaN(e.getTime()))return"";let o=v=>v.toString().padStart(2,"0"),s={YYYY:e.getFullYear().toString(),YY:e.getFullYear().toString().slice(-2),MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],MM:o(e.getMonth()+1),DD:o(e.getDate()),ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],HH:o(e.getHours()),mm:o(e.getMinutes()),ss:o(e.getSeconds())},p=t;for(let[v,g]of Object.entries(s))p=p.replace(new RegExp(v,"g"),g);return p}addToDate(e,t,o){let s=new Date(e);switch(o){case"years":s.setFullYear(s.getFullYear()+t);break;case"months":s.setMonth(s.getMonth()+t);break;case"weeks":s.setDate(s.getDate()+t*7);break;case"days":s.setDate(s.getDate()+t);break;case"hours":s.setHours(s.getHours()+t);break;case"minutes":s.setMinutes(s.getMinutes()+t);break;case"seconds":s.setSeconds(s.getSeconds()+t);break}return this.formatDate(s)}dateDiff(e,t,o){let s=Math.abs(t.getTime()-e.getTime());switch(o){case"years":return Math.floor(s/(365.25*24*60*60*1e3)).toString();case"months":return Math.floor(s/(30.44*24*60*60*1e3)).toString();case"weeks":return Math.floor(s/(7*24*60*60*1e3)).toString();case"days":return Math.floor(s/(24*60*60*1e3)).toString();case"hours":return Math.floor(s/(60*60*1e3)).toString();case"minutes":return Math.floor(s/(60*1e3)).toString();case"seconds":return Math.floor(s/1e3).toString();default:return Math.floor(s/(24*60*60*1e3)).toString()}}parseStringArg(e,t=!0){let o=e.replace(/^["']|["']$/g,"").trim();if(t&&!e.startsWith('"')&&!e.startsWith("'")){let s=this.getFieldValue(o);if(s!==null)return String(s)}return o}parseArgs(e,t=!0){let o=[],s="",p=!1,v="";for(let g of e)(g==='"'||g==="'")&&!p?(p=!0,v=g,s+=g):g===v&&p?(p=!1,s+=g,v=""):g===","&&!p?(o.push(this.resolveArgValue(s.trim(),t)),s=""):s+=g;return s&&o.push(this.resolveArgValue(s.trim(),t)),o}resolveArgValue(e,t){if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(t){let o=this.getFieldValue(e);if(o!==null)return String(o)}return e}getFieldValue(e){if(!this.form)return null;let t=this.form.get(e);return t?t.value:null}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}formatDate(e){return e.toISOString().split("T")[0]}formatDateTime(e){return e.toISOString().slice(0,16)}onFileSelect(e,t){let o=e.target;o.files&&(this.selectedFiles[t]=Array.from(o.files))}isCheckboxOptionSelected(e,t){if(!this.checkboxGroupValues[e]){let o=this.form.get(e)?.value;o?this.checkboxGroupValues[e]=Array.isArray(o)?o:o.split(",").filter(s=>s):this.checkboxGroupValues[e]=[]}return this.checkboxGroupValues[e].includes(t)}onCheckboxGroupChange(e,t,o){this.checkboxGroupValues[e]||(this.checkboxGroupValues[e]=[]),o?this.checkboxGroupValues[e].includes(t)||this.checkboxGroupValues[e].push(t):this.checkboxGroupValues[e]=this.checkboxGroupValues[e].filter(s=>s!==t),this.form.get(e)?.setValue(this.checkboxGroupValues[e].join(",")),this.form.get(e)?.markAsTouched()}imagePreviews={};getStarArray(e){let t=e.ratingMax||5;return Array.from({length:t},(o,s)=>s+1)}getRatingValue(e){let t=this.form.get(e.name)?.value;return t?parseInt(t,10):0}setRating(e,t){this.isFieldReadonly(e)||(this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched())}getImagePreview(e){return this.imagePreviews[e.name]||null}onImageSelect(e,t){let o=e.target;if(o.files&&o.files[0]){let s=o.files[0],p=new FileReader;p.onload=v=>{this.imagePreviews[t.name]=v.target.result,this.form.get(t.name)?.setValue(v.target.result),this.form.get(t.name)?.markAsTouched()},p.readAsDataURL(s)}}onAttachmentSelect(e){let t=e.target;t.files&&this.attachments.push(...Array.from(t.files))}removeAttachment(e){this.attachments.splice(e,1)}formatFileSize(e){if(e===0)return"0 Bytes";let t=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+o[s]}goBack(){this.router.navigate(["/workflows",this.workflowCode,"instances"])}saveDraft(){this.submitForm(!0)}onSubmit(){if(this.hasAttemptedSubmit=!0,this.validateAllFields(),this.form.invalid){this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});return}if(this.pendingUniqueChecks.size>0){this.snackBar.open("Please wait for validation checks to complete","Close",{duration:3e3});return}if(Object.values(this.validationErrors).some(t=>t!==null)){this.snackBar.open("Please fix validation errors before submitting","Close",{duration:3e3});return}this.submitForm(!1)}submitForm(e){this.submitting=!0;let t=new FormData;t.append("workflowCode",this.workflowCode),t.append("isDraft",e.toString());let o={};this.fields.forEach(p=>{let v=this.form.value[p.name];p.type==="USER"&&v&&typeof v=="object"&&v.id&&(v=v.id),o[p.name]=v}),t.append("fieldValues",JSON.stringify(o)),this.attachments.forEach((p,v)=>{t.append("attachments",p)}),Object.keys(this.selectedFiles).forEach(p=>{this.selectedFiles[p].forEach(v=>{t.append(`files_${p}`,v)})}),(this.isEditMode&&this.instanceId?this.workflowService.updateInstance(this.instanceId,t):this.workflowService.submitInstance(t)).subscribe({next:p=>{if(this.submitting=!1,p.success){let v=this.isEditMode?e?"Draft updated successfully":"Submission updated successfully":e?"Draft saved successfully":"Submission created successfully";this.snackBar.open(v,"Close",{duration:3e3}),this.router.navigate(["/workflows",this.workflowCode,"instances"])}},error:p=>{this.submitting=!1,this.snackBar.open(p.error?.message||"Submission failed","Close",{duration:3e3})}})}loadUsers(){this.userService.getUsers().subscribe({next:e=>{e.success&&e.data&&(this.allUsers=e.data)},error:()=>{console.error("Failed to load users")}})}onUserSearch(e,t){let s=e.target.value?.toLowerCase()||"";if(this.userSearchTerms[t]=s,!s){this.filteredUsersMap[t]=[];return}this.filteredUsersMap[t]=this.allUsers.filter(p=>{let v=`${p.firstName} ${p.lastName}`.toLowerCase(),g=(p.email||"").toLowerCase(),R=(p.username||"").toLowerCase();return v.includes(s)||g.includes(s)||R.includes(s)}).slice(0,10)}getFilteredUsers(e){return this.filteredUsersMap[e]||[]}displayUserFn=e=>e?typeof e=="string"?e:`${e.firstName} ${e.lastName}`:"";onUserSelected(e,t){let o=e.option.value;this.selectedUsers[t]=o,this.form.get(t)?.setValue(o),this.filteredUsersMap[t]=[],this.userSearchTerms[t]=""}getUserFieldValue(e){let t=this.form.get(e)?.value;return t?typeof t=="object"&&t.id?t.id:t:""}signatureDrawing={};signatureContexts={};startSignature(e,t){if(this.isFieldReadonly(t))return;let o=e.target,s=o.getContext("2d");if(!s)return;this.signatureDrawing[t.name]=!0,this.signatureContexts[t.name]=s,o.width!==o.offsetWidth&&(o.width=o.offsetWidth,o.height=o.offsetHeight),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round";let p=o.getBoundingClientRect();s.beginPath(),s.moveTo(e.clientX-p.left,e.clientY-p.top)}drawSignature(e,t){if(!this.signatureDrawing[t.name]||this.isFieldReadonly(t))return;let o=this.signatureContexts[t.name];if(!o)return;let p=e.target.getBoundingClientRect();o.lineTo(e.clientX-p.left,e.clientY-p.top),o.stroke()}endSignature(e){if(this.signatureDrawing[e.name]){this.signatureDrawing[e.name]=!1;let t=document.querySelector(`canvas[data-field="${e.name}"]`);if(t){let o=t.toDataURL("image/png");this.form.get(e.name)?.setValue(o),this.form.get(e.name)?.markAsTouched()}}}startSignatureTouch(e,t){if(this.isFieldReadonly(t))return;e.preventDefault();let o=e.target,s=o.getContext("2d");if(!s)return;this.signatureDrawing[t.name]=!0,this.signatureContexts[t.name]=s,o.width!==o.offsetWidth&&(o.width=o.offsetWidth,o.height=o.offsetHeight),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round";let p=o.getBoundingClientRect(),v=e.touches[0];s.beginPath(),s.moveTo(v.clientX-p.left,v.clientY-p.top)}drawSignatureTouch(e,t){if(!this.signatureDrawing[t.name]||this.isFieldReadonly(t))return;e.preventDefault();let o=this.signatureContexts[t.name];if(!o)return;let p=e.target.getBoundingClientRect(),v=e.touches[0];o.lineTo(v.clientX-p.left,v.clientY-p.top),o.stroke()}clearSignature(e){let t=document.querySelector(`canvas[data-field="${e.name}"]`);if(t){let o=t.getContext("2d");o&&o.clearRect(0,0,t.width,t.height),this.form.get(e.name)?.setValue(""),this.form.get(e.name)?.markAsTouched()}}execRichTextCommand(e){document.execCommand(e,!1)}onRichTextInput(e,t){let o=e.target;this.form.get(t.name)?.setValue(o.innerHTML)}onRichTextBlur(e,t){let o=e.target;this.form.get(t.name)?.setValue(o.innerHTML),this.form.get(t.name)?.markAsTouched()}getRichTextValue(e){return this.form.get(e.name)?.value||""}iconPickerOpen={};iconSearchText={};availableIcons=["home","search","settings","favorite","star","check_circle","delete","edit","add","remove","close","menu","more_vert","more_horiz","refresh","sync","visibility","visibility_off","lock","lock_open","person","people","group","email","phone","chat","message","notifications","alarm","schedule","event","calendar_today","date_range","access_time","timer","hourglass_empty","folder","folder_open","file_copy","attach_file","cloud","cloud_upload","cloud_download","image","photo","camera","videocam","mic","volume_up","music_note","play_arrow","pause","stop","skip_next","skip_previous","replay","location_on","map","directions","navigation","explore","public","language","shopping_cart","store","payment","credit_card","account_balance","receipt","work","business","business_center","apartment","domain","corporate_fare","school","science","biotech","psychology","engineering","build","construction","handyman","plumbing","electrical_services","computer","laptop","smartphone","tablet","desktop_windows","devices","wifi","bluetooth","signal_wifi_4_bar","network_check","router","code","terminal","bug_report","memory","storage","dns","security","verified_user","shield","admin_panel_settings","policy","analytics","bar_chart","pie_chart","show_chart","trending_up","trending_down","assessment","leaderboard","insights","query_stats","local_shipping","flight","train","directions_car","directions_bus","two_wheeler","restaurant","local_cafe","local_bar","fastfood","lunch_dining","health_and_safety","medical_services","vaccines","medication","healing","pets","park","nature","eco","grass","forest","water_drop","sports_soccer","sports_basketball","sports_tennis","fitness_center","pool","thumb_up","thumb_down","sentiment_satisfied","sentiment_dissatisfied","mood","lightbulb","tips_and_updates","help","info","warning","error","report"];toggleIconPicker(e){this.isFieldReadonly(e)||(this.iconPickerOpen[e.name]=!this.iconPickerOpen[e.name],this.iconPickerOpen[e.name]&&(this.iconSearchText[e.name]=""))}isIconPickerOpen(e){return this.iconPickerOpen[e.name]||!1}selectIcon(e,t){this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched(),this.iconPickerOpen[e.name]=!1}getSelectedIcon(e){return this.form.get(e.name)?.value||"help_outline"}getFilteredIcons(e){let t=(this.iconSearchText[e.name]||"").toLowerCase();return t?this.availableIcons.filter(o=>o.includes(t)):this.availableIcons}onIconSearch(e,t){let o=e.target;this.iconSearchText[t.name]=o.value}scanBarcode(e){this.snackBar.open("Barcode scanning requires camera access. Please enter the code manually.","OK",{duration:5e3})}gettingLocation={};locationData={};getLocationLat(e){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string"){let o=t.split(",");if(o.length>=2)return parseFloat(o[0])||null}return this.locationData[e.name]?.lat||null}getLocationLng(e){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string"){let o=t.split(",");if(o.length>=2)return parseFloat(o[1])||null}return this.locationData[e.name]?.lng||null}onLocationLatChange(e,t){let o=e.target,s=parseFloat(o.value)||null;this.locationData[t.name]||(this.locationData[t.name]={lat:null,lng:null}),this.locationData[t.name].lat=s,this.updateLocationValue(t)}onLocationLngChange(e,t){let o=e.target,s=parseFloat(o.value)||null;this.locationData[t.name]||(this.locationData[t.name]={lat:null,lng:null}),this.locationData[t.name].lng=s,this.updateLocationValue(t)}updateLocationValue(e){let t=this.locationData[e.name];t&&t.lat!==null&&t.lng!==null?this.form.get(e.name)?.setValue(`${t.lat},${t.lng}`):this.form.get(e.name)?.setValue(""),this.form.get(e.name)?.markAsTouched()}getCurrentLocation(e){if(!this.isFieldReadonly(e)){if(!navigator.geolocation){this.snackBar.open("Geolocation is not supported by your browser","OK",{duration:3e3});return}this.gettingLocation[e.name]=!0,navigator.geolocation.getCurrentPosition(t=>{let o=t.coords.latitude,s=t.coords.longitude;this.locationData[e.name]={lat:o,lng:s},this.form.get(e.name)?.setValue(`${o},${s}`),this.form.get(e.name)?.markAsTouched(),this.gettingLocation[e.name]=!1,this.cdr.detectChanges()},t=>{this.gettingLocation[e.name]=!1;let o="Could not get location";switch(t.code){case t.PERMISSION_DENIED:o="Location permission denied";break;case t.POSITION_UNAVAILABLE:o="Location information unavailable";break;case t.TIMEOUT:o="Location request timed out";break}this.snackBar.open(o,"OK",{duration:3e3}),this.cdr.detectChanges()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}}isGettingLocation(e){return this.gettingLocation[e.name]||!1}getLocationDisplay(e){let t=this.getLocationLat(e),o=this.getLocationLng(e);return t!==null&&o!==null?`${t.toFixed(6)}, ${o.toFixed(6)}`:"No location set"}tableData={};getTableColumns(e){if(e.options&&typeof e.options=="string")try{let t=JSON.parse(e.options);if(Array.isArray(t))return t.map(o=>({name:o.name||o.value||"column",label:o.label||o.name||"Column",type:o.type||"text"}))}catch{}return[{name:"col1",label:"Column 1",type:"text"},{name:"col2",label:"Column 2",type:"text"},{name:"col3",label:"Column 3",type:"text"}]}getTableRows(e){if(!this.tableData[e.name]){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string")try{this.tableData[e.name]=JSON.parse(t)}catch{this.tableData[e.name]=[]}else Array.isArray(t)?this.tableData[e.name]=t:this.tableData[e.name]=[]}return this.tableData[e.name]}addTableRow(e){if(this.isFieldReadonly(e))return;this.tableData[e.name]||(this.tableData[e.name]=[]);let t=this.getTableColumns(e),o={};t.forEach(s=>{o[s.name]=""}),this.tableData[e.name].push(o),this.updateTableValue(e)}removeTableRow(e,t){this.isFieldReadonly(e)||this.tableData[e.name]&&(this.tableData[e.name].splice(t,1),this.updateTableValue(e))}onTableCellChange(e,t,o,s){if(this.isFieldReadonly(t))return;let p=e.target;this.tableData[t.name]&&this.tableData[t.name][o]&&(this.tableData[t.name][o][s]=p.value,this.updateTableValue(t))}updateTableValue(e){let t=JSON.stringify(this.tableData[e.name]||[]);this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched()}static \u0275fac=function(t){return new(t||i)(L(Ee),L(ot),L(nt),L(ye),L(ce),L(de),L(Ye),L(le))};static \u0275cmp=re({type:i,selectors:[["app-workflow-form"]],decls:12,vars:3,consts:[["picker",""],["auto","matAutocomplete"],["imageInput",""],["groupPicker",""],["autoGroup","matAutocomplete"],["imageInputGroup",""],["fileInput",""],[1,"workflow-form-container"],[1,"header"],["mat-icon-button","",3,"click"],[1,"subtitle"],[1,"loading"],[3,"formGroup"],["diameter","40"],[3,"ngSubmit","formGroup"],[1,"form-card"],[1,"form-card","group-card"],[1,"form-actions"],[1,"form-actions","multi-step"],[1,"step-indicator"],[1,"screen-header"],[1,"step",3,"click"],[1,"step-circle"],[1,"step-label"],[1,"step-connector",3,"completed"],[1,"step-connector"],[1,"fields-grid"],[1,"field-wrapper",3,"grid-column"],[1,"field-wrapper"],[1,"field-container"],[1,"radio-field",3,"has-error"],[1,"field-container","checkbox-group-field",3,"has-error"],[1,"file-field",3,"has-error"],["type","hidden",3,"formControlName"],[1,"label-field"],[1,"divider-field"],[1,"toggle-field"],[1,"yes-no-field",3,"has-error"],[1,"rating-field",3,"has-error"],[1,"slider-field",3,"has-error"],[1,"color-field",3,"has-error"],[1,"image-field",3,"has-error"],[1,"signature-field",3,"has-error"],[1,"rich-text-field",3,"has-error"],[1,"icon-field",3,"has-error"],[1,"barcode-field",3,"has-error"],[1,"location-field",3,"has-error"],[1,"table-field",3,"has-error"],["appearance","outline",1,"full-width"],[1,"required-asterisk"],["matInput","",3,"formControlName","placeholder","readonly"],[1,"validation-error"],["matInput","","rows","4",3,"formControlName","placeholder","readonly"],["matInput","","type","number",3,"formControlName","placeholder","readonly"],["matPrefix",""],["matInput","","type","email",3,"formControlName","placeholder","readonly"],["matInput","","type","tel",3,"formControlName","placeholder","readonly"],["matInput","","type","password",3,"formControlName","placeholder","readonly"],["matInput","",3,"matDatepicker","formControlName","readonly"],["matIconSuffix","",3,"for","disabled"],[3,"disabled"],["matInput","","type","datetime-local",3,"formControlName","readonly"],[3,"formControlName","placeholder","disabled"],[3,"value"],["multiple","",3,"formControlName","placeholder","disabled"],[1,"radio-field"],[1,"field-label"],[3,"formControlName","disabled"],[3,"value","disabled"],[1,"field-container","checkbox-group-field"],[1,"checkbox-options"],[3,"checked","disabled"],[3,"change","checked","disabled"],[1,"file-field"],["type","file",3,"change","multiple","disabled"],[1,"file-list"],["matInput","","type","url",3,"formControlName","placeholder","readonly"],["matInput","",3,"input","formControlName","matAutocomplete","placeholder","readonly"],[3,"optionSelected","displayWith"],["disabled",""],[1,"user-option"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"label-text"],[1,"label-description"],[1,"divider-label"],[1,"yes-no-field"],["value","yes"],["value","no"],[1,"rating-field"],[1,"star-rating"],[3,"filled","readonly"],[3,"click"],["matInput","","type","time",3,"formControlName","readonly"],[1,"slider-field"],[3,"min","max","step","discrete","disabled"],["matSliderThumb","",3,"formControlName"],[1,"color-field"],["type","color",1,"color-input",3,"formControlName","disabled"],[1,"image-field"],[1,"image-upload-area"],["type","file","accept","image/*","hidden","",3,"change"],["mat-stroked-button","","type","button",3,"click","disabled"],[1,"image-preview",3,"src"],[1,"signature-field"],[1,"signature-pad-container"],[1,"signature-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"signature-actions"],["mat-icon-button","","type","button","matTooltip","Clear signature",3,"click","disabled"],[1,"rich-text-field"],[1,"rich-text-editor"],[1,"rich-text-toolbar"],["mat-icon-button","","type","button","matTooltip","Bold",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Italic",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Underline",3,"click","disabled"],[1,"toolbar-divider"],["mat-icon-button","","type","button","matTooltip","Bullet list",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Numbered list",3,"click","disabled"],["contenteditable","true",1,"rich-text-content",3,"input","blur","innerHTML"],[1,"icon-field"],[1,"icon-picker"],[1,"selected-icon",3,"click"],[1,"dropdown-arrow"],[1,"icon-picker-dropdown"],["type","text","placeholder","Search icons...",1,"icon-search",3,"input","value"],[1,"icon-grid"],[1,"icon-option",3,"selected"],[1,"icon-option",3,"click"],[1,"barcode-field"],[1,"barcode-input"],["matInput","","placeholder","Enter or scan barcode...",3,"formControlName","readonly"],["mat-icon-button","","matSuffix","","type","button","matTooltip","Scan barcode",3,"click","disabled"],[1,"location-field"],[1,"location-input"],[1,"location-coords"],["appearance","outline",1,"coord-field"],["matInput","","type","number","step","any",3,"input","value","readonly"],["mat-icon-button","","type","button","matTooltip","Get current location",3,"click","disabled"],[1,"spinning"],[1,"location-preview"],[1,"table-field"],[1,"table-input"],[1,"data-table"],[1,"actions-col"],["mat-stroked-button","","type","button",1,"add-row-btn",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Remove row",3,"click","disabled"],["type","text",1,"table-cell-input",3,"input","value","readonly"],[1,"empty-table"],[1,"checkbox-group-field",3,"has-error"],[1,"checkbox-group-field"],[1,"checkbox-group"],[3,"expanded","hideToggle"],["matInput","","rows","4",3,"formControlName","readonly"],["matInput","","type","number",3,"formControlName","readonly"],["multiple","",3,"formControlName","disabled"],["matTextPrefix",""],["matInput","","type","number","step","0.01",3,"formControlName","readonly"],["matInput","","type","email",3,"formControlName","readonly"],["matInput","","type","tel",3,"formControlName","readonly"],["matInput","","type","password",3,"formControlName","readonly"],["matInput","","type","url",3,"formControlName","readonly"],["matInput","",3,"formControlName","readonly"],[1,"attachment-area"],["type","file","multiple","","hidden","",3,"change"],["mat-stroked-button","","type","button",3,"click"],[1,"attachment-list"],[1,"attachment-item"],[1,"size"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20"],[1,"spacer"],["mat-raised-button","","color","primary","type","button",3,"click"]],template:function(t,o){t&1&&(_(0,"div",7)(1,"div",8)(2,"button",9),y("click",function(){return o.goBack()}),_(3,"mat-icon"),d(4,"arrow_back"),r()(),_(5,"div")(6,"h1"),d(7),r(),_(8,"p",10),d(9),r()()(),u(10,bt,4,0,"div",11)(11,al,8,5,"form",12),r()),t&2&&(n(7),f(o.workflow==null?null:o.workflow.name),n(2),f(o.isEditMode?"Edit Submission":"New Submission"),n(),C(o.loading?10:o.workflow?11:-1))},dependencies:[_e,ve,xe,Ce,Fe,ue,fe,ge,he,se,De,Me,Re,We,Oe,Ie,Ve,$e,Ae,Ne,Pe,Le,Ue,He,Ge,me,mt,dt,ct,st,pe,rt,at,Ft,ft,xt,ke,be,Te,we,Se,et,je,Ke,Ze,Qe,ze,Be,qe,it,tt,ut,pt,Ct,Xe,Je,_t,lt,Et,gt,ht,wt,vt,St],styles:[".workflow-form-container[_ngcontent-%COMP%]{padding:1rem;max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#666}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666}.form-card[_ngcontent-%COMP%]{margin-bottom:1rem}.group-card[_ngcontent-%COMP%]{padding:0}.group-card[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header{background:var(--form-field-header-bg, #1976d2)!important;color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header:hover{background:var(--form-field-header-bg, #1976d2)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-content{color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header-title, .group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header-description{color:var(--form-field-header-color, #ffffff)!important}.fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;padding:1rem 0}.field-wrapper[_ngcontent-%COMP%]{min-width:0}.full-width[_ngcontent-%COMP%]{width:100%}.field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;color:#0009}.required[_ngcontent-%COMP%]{color:#f44336}.required-asterisk[_ngcontent-%COMP%]{color:#f44336;font-weight:700;margin-left:2px}.has-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .3s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-2px)}75%{transform:translate(2px)}}.field-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem;margin-top:4px}.field-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.validation-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem;margin-top:-16px;padding-left:14px;line-height:1.2}.field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border-color:#f44336!important}.field-invalid[_ngcontent-%COMP%]     .mat-mdc-floating-label{color:#f44336!important}.radio-field[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.radio-field[_ngcontent-%COMP%]   mat-radio-group.horizontal-layout[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:1rem}.file-field[_ngcontent-%COMP%], .checkbox-group-field[_ngcontent-%COMP%]{padding:.5rem 0}.checkbox-group-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:#000000de}.checkbox-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkbox-options.horizontal-layout[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:1rem}.label-field[_ngcontent-%COMP%]{padding:1rem 0}.label-field[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0;color:#000000de}.label-field[_ngcontent-%COMP%]   .label-description[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:.25rem 0 0}.divider-field[_ngcontent-%COMP%]{padding:1rem 0;position:relative}.divider-field[_ngcontent-%COMP%]   .divider-label[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:0 1rem;color:#666;font-size:.875rem}.toggle-field[_ngcontent-%COMP%], .yes-no-field[_ngcontent-%COMP%]{padding:.5rem 0}.yes-no-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.rating-field[_ngcontent-%COMP%]{padding:.5rem 0}.star-rating[_ngcontent-%COMP%]{display:flex;gap:.25rem}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#ffc107;font-size:28px;width:28px;height:28px;transition:transform .1s ease}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover:not(.readonly){transform:scale(1.1)}.star-rating[_ngcontent-%COMP%]   mat-icon.readonly[_ngcontent-%COMP%]{cursor:default}.star-rating[_ngcontent-%COMP%]   mat-icon.filled[_ngcontent-%COMP%]{color:#ffc107}.slider-field[_ngcontent-%COMP%]{padding:.5rem 0}.slider-field[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.color-field[_ngcontent-%COMP%]{padding:.5rem 0}.color-field[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #ccc;border-radius:4px;cursor:pointer;padding:4px}.image-field[_ngcontent-%COMP%]{padding:.5rem 0}.image-upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.5rem}.image-preview[_ngcontent-%COMP%]{max-width:200px;max-height:150px;margin-top:.5rem;border-radius:4px;border:1px solid #ddd}.signature-field[_ngcontent-%COMP%], .rich-text-field[_ngcontent-%COMP%], .icon-field[_ngcontent-%COMP%], .barcode-field[_ngcontent-%COMP%], .location-field[_ngcontent-%COMP%], .table-field[_ngcontent-%COMP%]{padding:.5rem 0}.signature-pad-container[_ngcontent-%COMP%]{position:relative;border:1px solid #ddd;border-radius:4px;background:#fff}.signature-canvas[_ngcontent-%COMP%]{width:100%;height:150px;cursor:crosshair;display:block;touch-action:none}.signature-actions[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px}.signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffffe6}.rich-text-editor[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;overflow:hidden}.rich-text-toolbar[_ngcontent-%COMP%]{display:flex;gap:.25rem;padding:.5rem;background:#f5f5f5;border-bottom:1px solid #ddd;flex-wrap:wrap}.rich-text-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;width:36px;height:36px}.toolbar-divider[_ngcontent-%COMP%]{width:1px;background:#ddd;margin:0 .25rem}.rich-text-content[_ngcontent-%COMP%]{min-height:120px;padding:.75rem;outline:none;font-size:.875rem;line-height:1.5}.rich-text-content[_ngcontent-%COMP%]:focus{background:#fafafa}.rich-text-content[contenteditable=false][_ngcontent-%COMP%]{background:#f5f5f5;cursor:not-allowed}.icon-selector[_ngcontent-%COMP%]{position:relative}.selected-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;border:2px solid #ddd;border-radius:8px;cursor:pointer;transition:all .2s;background:#fff}.selected-icon[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#1976d2;background:#e3f2fd}.selected-icon.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.selected-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#333}.icon-picker-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:.75rem;width:320px;max-height:350px;overflow:hidden;display:flex;flex-direction:column}.icon-search[_ngcontent-%COMP%]{margin-bottom:.5rem}.icon-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.icon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:.25rem;overflow-y:auto;max-height:250px;padding:.25rem}.icon-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:4px;cursor:pointer;transition:all .15s}.icon-option[_ngcontent-%COMP%]:hover{background:#e3f2fd}.icon-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.icon-option[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.barcode-input[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.barcode-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.location-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.location-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.location-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}.location-display[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.75rem;color:#666}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #ddd;border-radius:4px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;padding:.5rem;text-align:left;font-weight:500;font-size:.875rem;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid transparent;border-radius:4px;font-size:.875rem}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1976d2;outline:none}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.data-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:50px;text-align:center}.data-table[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#999;font-style:italic}.table-actions[_ngcontent-%COMP%]{margin-top:.5rem}.file-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.attachment-area[_ngcontent-%COMP%]{padding:1rem;border:2px dashed #ddd;border-radius:4px;text-align:center}.attachment-list[_ngcontent-%COMP%]{margin-top:1rem;text-align:left}.attachment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:#f5f5f5;border-radius:4px;margin-bottom:.5rem}.attachment-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.attachment-item[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{flex:0;color:#666;font-size:.75rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}.form-actions.multi-step[_ngcontent-%COMP%]{justify-content:flex-start}.form-actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}.step-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.75rem .5rem;margin-bottom:.5rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;cursor:pointer;min-width:60px}.step-circle[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e0e0e0;color:#666;font-size:.875rem;font-weight:500;font-size:1rem;transition:all .3s ease}.step.active[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;box-shadow:0 2px 8px #1976d266}.step.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.step.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.step-label[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.7rem;color:#666;text-align:center;max-width:80px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#1976d2;font-weight:500}.step.completed[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#4caf50}.step-connector[_ngcontent-%COMP%]{flex:1;height:2px;background:#e0e0e0;margin:0 .25rem .75rem;max-width:80px;transition:background .3s ease}.step-connector.completed[_ngcontent-%COMP%]{background:#4caf50}.screen-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:.5rem .75rem;margin-bottom:.5rem;background:#f5f5f5;border-radius:6px;border-left:3px solid #1976d2}.screen-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:1.25rem;width:1.25rem;height:1.25rem;margin-top:.125rem}.screen-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:#333}.screen-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.125rem 0 0;font-size:.8rem;color:#666}.user-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.25rem 0}.user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem}.user-email[_ngcontent-%COMP%]{font-size:.75rem;color:#666}"]})}return i})();export{e_ as WorkflowFormComponent};
