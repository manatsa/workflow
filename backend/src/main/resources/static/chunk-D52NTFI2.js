import{a as ft,b as xt,c as gt,d as ht,e as Ft,f as vt,g as Et,h as St,i as wt}from"./chunk-QFPR6THL.js";import{a as pt,b as Ct,c as ut}from"./chunk-ZMVFBH4E.js";import{a as dt,b as ct,c as st,d as mt}from"./chunk-MSROSKVG.js";import{a as lt,b as _t}from"./chunk-6OSA477V.js";import{a as at,b as rt}from"./chunk-67L4UISH.js";import{a as ot}from"./chunk-KHA6H2VC.js";import{c as pe}from"./chunk-EC7BDYIR.js";import"./chunk-J43BGVIN.js";import"./chunk-MS4AQ6UA.js";import{a as Ge,b as He}from"./chunk-DCGWK6OW.js";import{d as me}from"./chunk-WNUHNPS4.js";import{a as je,b as Ke,c as Qe,d as Ze,f as et}from"./chunk-3QZG32TM.js";import{a as Je,b as Xe}from"./chunk-I4PAJBBT.js";import{a as tt,c as nt}from"./chunk-INV3KQYA.js";import{b as Ye,c as ze}from"./chunk-C5XODKZL.js";import"./chunk-LU6VCXUA.js";import"./chunk-AGZT6V36.js";import{a as qe,b as Be}from"./chunk-CDWC6WKW.js";import{b as De,e as Ae,f as Ne,i as $e,j as Ve,l as Ue,m as Le}from"./chunk-ZS434AQM.js";import{d as Ce,f as ie,i as ue,j as fe,n as xe,o as ge,q as he,r as Fe,u as ve,w as Ee}from"./chunk-M3VCE5SG.js";import{a as Oe,b as ye,c as Pe,d as Ie,f as Re,h as We}from"./chunk-BTSRKJZZ.js";import{a as it}from"./chunk-2UBRB5ZZ.js";import"./chunk-MNRHFUYD.js";import"./chunk-UF7Y5AYJ.js";import"./chunk-PMYQJTBZ.js";import{a as Me}from"./chunk-W7JX3HPD.js";import{a as de,c as ce,g as se}from"./chunk-M6HZK7Y7.js";import{Aa as ke,q as _e,va as Se,wa as we,xa as be,ya as Te}from"./chunk-37H25STD.js";import{B as ae,Cc as le,Db as H,Eb as F,Fb as ee,Gb as w,H as K,Jb as C,Kb as te,Lb as X,Mb as D,Nb as A,Ob as _,Pb as r,Qb as I,Ub as R,Yb as M,Zb as l,a as B,ab as Q,b as G,bb as Z,c as J,eb as i,gc as q,hc as d,ic as f,jb as L,jc as W,kc as j,oa as b,pa as T,qb as re,qc as ne,wb as u}from"./chunk-UYCZSUYP.js";var bt=()=>[],Y=(n,c)=>c.id,N=(n,c)=>c.value,z=(n,c)=>c.name;function Tt(n,c){n&1&&(_(0,"div",11),I(1,"mat-spinner",13),_(2,"p"),d(3,"Loading form..."),r()())}function kt(n,c){n&1&&(_(0,"mat-icon"),d(1,"check"),r())}function Mt(n,c){if(n&1&&d(0),n&2){let e=l().$index;W(" ",e+1," ")}}function Ot(n,c){if(n&1&&I(0,"div",25),n&2){let e=l().$index,t=l(3);w("completed",e<t.currentScreenIndex)}}function yt(n,c){if(n&1){let e=R();_(0,"div",21),M("click",function(){let o=b(e).$index,s=l(3);return T(s.goToScreen(o))}),_(1,"div",22),u(2,kt,2,0,"mat-icon")(3,Mt,1,1),r(),_(4,"span",23),d(5),r()(),u(6,Ot,1,2,"div",24)}if(n&2){let e=c.$implicit,t=c.$index,o=l(3);w("active",t===o.currentScreenIndex)("completed",t<o.currentScreenIndex),i(2),C(t<o.currentScreenIndex?2:3),i(3),f(e.title||"Step "+(t+1)),i(),C(t<o.screens.length-1?6:-1)}}function Pt(n,c){if(n&1&&(_(0,"mat-icon"),d(1),r()),n&2){let e=l(4);i(),f(e.currentScreen.icon)}}function It(n,c){if(n&1&&(_(0,"p"),d(1),r()),n&2){let e=l(4);i(),f(e.currentScreen.description)}}function Rt(n,c){if(n&1&&(_(0,"div",20),u(1,Pt,2,1,"mat-icon"),_(2,"div")(3,"h2"),d(4),r(),u(5,It,2,1,"p"),r()()),n&2){let e=l(3);i(),C(e.currentScreen.icon?1:-1),i(3),f(e.currentScreen.title),i(),C(e.currentScreen.description?5:-1)}}function Wt(n,c){if(n&1&&(_(0,"div",19),D(1,yt,7,7,null,null,Y),r(),u(3,Rt,6,3,"div",20)),n&2){let e=l(2);i(),A(e.screens),i(2),C(e.currentScreen?3:-1)}}function Dt(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function At(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Nt(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Dt,2,0,"span",49),r(),I(5,"input",50),r(),u(6,At,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function $t(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Vt(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ut(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,$t,2,0,"span",49),r(),I(5,"textarea",52),r(),u(6,Vt,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Lt(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function qt(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Bt(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Lt,2,0,"span",49),r(),I(5,"input",53),r(),u(6,qt,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Gt(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Ht(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Yt(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Gt,2,0,"span",49),r(),I(5,"input",53),_(6,"span",54),d(7,"$\xA0"),r()(),u(8,Ht,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(3),C(t.hasFieldError(e)?8:-1)}}function zt(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Jt(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Xt(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,zt,2,0,"span",49),r(),I(5,"input",55),r(),u(6,Jt,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function jt(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Kt(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Qt(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,jt,2,0,"span",49),r(),I(5,"input",56),r(),u(6,Kt,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Zt(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function en(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function tn(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Zt,2,0,"span",49),r(),I(5,"input",57),r(),u(6,en,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function nn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function on(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function an(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,nn,2,0,"span",49),r(),I(5,"input",58)(6,"mat-datepicker-toggle",59)(7,"mat-datepicker",60,0),r(),u(9,on,2,1,"div",51),r()),n&2){let e=q(8),t=l(2).$implicit,o=l(3);i(),w("field-invalid",o.hasFieldError(t)),i(2),f(t.label),i(),C(o.isFieldRequired(t)?4:-1),i(),F("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),i(),F("for",e)("disabled",o.isFieldReadonly(t)),i(),F("disabled",o.isFieldReadonly(t)),i(2),C(o.hasFieldError(t)?9:-1)}}function rn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ln(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function _n(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,rn,2,0,"span",49),r(),I(5,"input",61),r(),u(6,ln,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function dn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function cn(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function sn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function mn(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,dn,2,0,"span",49),r(),_(5,"mat-select",62),D(6,cn,2,2,"mat-option",63,N),r()(),u(8,sn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function pn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Cn(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function un(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function fn(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,pn,2,0,"span",49),r(),_(5,"mat-select",64),D(6,Cn,2,2,"mat-option",63,N),r()(),u(8,un,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function xn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function gn(n,c){if(n&1&&(_(0,"mat-radio-button",68),d(1),r()),n&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);F("value",e.value)("disabled",o.isFieldReadonly(t)),i(),f(e.label)}}function hn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Fn(n,c){if(n&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,xn,2,0,"span",49),r(),_(4,"mat-radio-group",67),D(5,gn,2,3,"mat-radio-button",68,N),r(),u(7,hn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?7:-1)}}function vn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function En(n,c){if(n&1&&(_(0,"div",29)(1,"mat-checkbox",67),d(2),r(),u(3,vn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),f(e.label),i(),C(t.hasFieldError(e)?3:-1)}}function Sn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function wn(n,c){if(n&1){let e=R();_(0,"mat-checkbox",72),M("change",function(o){let s=b(e).$implicit,p=l(3).$implicit,E=l(3);return T(E.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(n&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),W(" ",e.label||e.value," ")}}function bn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Tn(n,c){if(n&1&&(_(0,"div",69)(1,"label",66),d(2),u(3,Sn,2,0,"span",49),r(),_(4,"div",70),D(5,wn,2,3,"mat-checkbox",71,N),r(),u(7,bn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),A(e.options||ne(7,bt)),i(2),C(t.hasFieldError(e)?7:-1)}}function kn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Mn(n,c){if(n&1&&(_(0,"mat-chip"),d(1),r()),n&2){let e=c.$implicit;i(),f(e.name)}}function On(n,c){if(n&1&&(_(0,"div",75),D(1,Mn,2,1,"mat-chip",null,z),r()),n&2){let e=l(3).$implicit,t=l(3);i(),A(t.selectedFiles[e.name])}}function yn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Pn(n,c){if(n&1){let e=R();_(0,"div",73)(1,"label",66),d(2),u(3,kn,2,0,"span",49),r(),_(4,"input",74),M("change",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onFileSelect(o,s.name))}),r(),u(5,On,3,0,"div",75)(6,yn,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),F("multiple",e.multiple)("disabled",t.isFieldReadonly(e)),i(),C(t.selectedFiles[e.name]&&t.selectedFiles[e.name].length>0?5:-1),i(),C(t.hasFieldError(e)?6:-1)}}function In(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Rn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Wn(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,In,2,0,"span",49),r(),I(5,"input",76),r(),u(6,Rn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Dn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function An(n,c){if(n&1&&(_(0,"mat-option",63)(1,"div",80)(2,"mat-icon"),d(3,"person"),r(),_(4,"div",81)(5,"span",82),d(6),r(),_(7,"span",83),d(8),r()()()()),n&2){let e=c.$implicit;F("value",e),i(6),j("",e.firstName," ",e.lastName,""),i(2),f(e.email)}}function Nn(n,c){n&1&&(_(0,"mat-option",79),d(1,"No users found"),r())}function $n(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Vn(n,c){if(n&1){let e=R();_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Dn,2,0,"span",49),r(),_(5,"mat-icon",54),d(6,"person_search"),r(),_(7,"input",77),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onUserSearch(o,s.name))}),r(),_(8,"mat-autocomplete",78,1),M("optionSelected",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onUserSelected(o,s.name))}),D(10,An,9,4,"mat-option",63,Y),u(12,Nn,2,0,"mat-option",79),r()(),u(13,$n,2,1,"div",51),r()}if(n&2){let e=q(9),t=l(2).$implicit,o=l(3);i(),w("field-invalid",o.hasFieldError(t)),i(2),f(t.label),i(),C(o.isFieldRequired(t)?4:-1),i(3),F("formControlName",t.name)("matAutocomplete",e)("placeholder",t.placeholder||"Search for a user...")("readonly",o.isFieldReadonly(t)),i(),F("displayWith",o.displayUserFn),i(2),A(o.getFilteredUsers(t.name)),i(2),C(o.getFilteredUsers(t.name).length===0&&o.userSearchTerms[t.name]?12:-1),i(),C(o.hasFieldError(t)?13:-1)}}function Un(n,c){if(n&1&&I(0,"input",33),n&2){let e=l(2).$implicit;F("formControlName",e.name)}}function Ln(n,c){if(n&1&&(_(0,"p",85),d(1),r()),n&2){let e=l(3).$implicit;i(),f(e.defaultValue)}}function qn(n,c){if(n&1&&(_(0,"div",34)(1,"p",84),d(2),r(),u(3,Ln,2,1,"p",85),r()),n&2){let e=l(2).$implicit;i(2),f(e.label),i(),C(e.defaultValue?3:-1)}}function Bn(n,c){if(n&1&&(_(0,"span",86),d(1),r()),n&2){let e=l(3).$implicit;i(),f(e.label)}}function Gn(n,c){if(n&1&&(_(0,"div",35),I(1,"mat-divider"),u(2,Bn,2,1,"span",86),r()),n&2){let e=l(2).$implicit;i(2),C(e.label?2:-1)}}function Hn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Yn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function zn(n,c){if(n&1&&(_(0,"div",36)(1,"mat-slide-toggle",67),d(2),u(3,Hn,2,0,"span",49),r(),u(4,Yn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),W(" ",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),C(t.hasFieldError(e)?4:-1)}}function Jn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Xn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function jn(n,c){if(n&1&&(_(0,"div",87)(1,"label",66),d(2),u(3,Jn,2,0,"span",49),r(),_(4,"mat-button-toggle-group",67)(5,"mat-button-toggle",88),d(6,"Yes"),r(),_(7,"mat-button-toggle",89),d(8,"No"),r()(),u(9,Xn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(5),C(t.hasFieldError(e)?9:-1)}}function Kn(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Qn(n,c){if(n&1){let e=R();_(0,"mat-icon",93),M("click",function(){let o=b(e).$implicit,s=l(3).$implicit,p=l(3);return T(p.setRating(s,o))}),d(1),r()}if(n&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);w("filled",o.getRatingValue(t)>=e)("readonly",o.isFieldReadonly(t)),i(),W(" ",o.getRatingValue(t)>=e?"star":"star_border"," ")}}function Zn(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ei(n,c){if(n&1&&(_(0,"div",90)(1,"label",66),d(2),u(3,Kn,2,0,"span",49),r(),_(4,"div",91),D(5,Qn,2,5,"mat-icon",92,X),r(),u(7,Zn,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(2),A(t.getStarArray(e)),i(2),C(t.hasFieldError(e)?7:-1)}}function ti(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ni(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ii(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ti,2,0,"span",49),r(),I(5,"input",94),r(),u(6,ni,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function oi(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ai(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ri(n,c){if(n&1&&(_(0,"div",95)(1,"label",66),d(2),u(3,oi,2,0,"span",49),r(),_(4,"mat-slider",96),I(5,"input",97),r(),u(6,ai,2,1,"div",51),r()),n&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),i(2),j("",t.label,": ",((e=o.form.get(t.name))==null?null:e.value)||0," "),i(),C(o.isFieldRequired(t)?3:-1),i(),F("min",t.sliderMin||0)("max",t.sliderMax||100)("step",t.sliderStep||1)("discrete",!0)("disabled",o.isFieldReadonly(t)),i(),F("formControlName",t.name),i(),C(o.hasFieldError(t)?6:-1)}}function li(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function _i(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function di(n,c){if(n&1&&(_(0,"div",98)(1,"label",66),d(2),u(3,li,2,0,"span",49),r(),I(4,"input",99),u(5,_i,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?5:-1)}}function ci(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function si(n,c){if(n&1&&I(0,"img",104),n&2){let e=l(3).$implicit,t=l(3);F("src",t.getImagePreview(e),Z)}}function mi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function pi(n,c){if(n&1){let e=R();_(0,"div",100)(1,"label",66),d(2),u(3,ci,2,0,"span",49),r(),_(4,"div",101)(5,"input",102,2),M("change",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onImageSelect(o,s))}),r(),_(7,"button",103),M("click",function(){b(e);let o=q(6);return T(o.click())}),_(8,"mat-icon"),d(9,"add_photo_alternate"),r(),d(10," Select Image "),r(),u(11,si,1,1,"img",104),r(),u(12,mi,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(4),F("disabled",t.isFieldReadonly(e)),i(4),C(t.getImagePreview(e)?11:-1),i(),C(t.hasFieldError(e)?12:-1)}}function Ci(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ui(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function fi(n,c){if(n&1){let e=R();_(0,"div",105)(1,"label",66),d(2),u(3,Ci,2,0,"span",49),r(),_(4,"div",106)(5,"canvas",107),M("mousedown",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.startSignature(o,s))})("mousemove",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.drawSignature(o,s))})("mouseup",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.endSignature(o))})("mouseleave",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.endSignature(o))})("touchstart",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.startSignatureTouch(o,s))})("touchmove",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.drawSignatureTouch(o,s))})("touchend",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.endSignature(o))}),r(),_(6,"div",108)(7,"button",109),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.clearSignature(o))}),_(8,"mat-icon"),d(9,"clear"),r()()()(),u(10,ui,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(2),H("data-field",e.name),i(2),F("disabled",t.isFieldReadonly(e)),i(3),C(t.hasFieldError(e)?10:-1)}}function xi(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function gi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function hi(n,c){if(n&1){let e=R();_(0,"div",110)(1,"label",66),d(2),u(3,xi,2,0,"span",49),r(),_(4,"div",111)(5,"div",112)(6,"button",113),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("bold"))}),_(7,"mat-icon"),d(8,"format_bold"),r()(),_(9,"button",114),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("italic"))}),_(10,"mat-icon"),d(11,"format_italic"),r()(),_(12,"button",115),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("underline"))}),_(13,"mat-icon"),d(14,"format_underlined"),r()(),I(15,"span",116),_(16,"button",117),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("insertUnorderedList"))}),_(17,"mat-icon"),d(18,"format_list_bulleted"),r()(),_(19,"button",118),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("insertOrderedList"))}),_(20,"mat-icon"),d(21,"format_list_numbered"),r()()(),_(22,"div",119),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onRichTextInput(o,s))})("blur",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onRichTextBlur(o,s))}),r()(),u(23,gi,2,1,"div",51),r()}if(n&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),i(2),W("",t.label," "),i(),C(o.isFieldRequired(t)?3:-1),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(4),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),w("readonly",o.isFieldReadonly(t)),F("innerHTML",((e=o.form.get(t.name))==null?null:e.value)||"",Q),H("data-field",t.name),i(),C(o.hasFieldError(t)?23:-1)}}function Fi(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function vi(n,c){if(n&1&&(_(0,"mat-icon"),d(1),r(),_(2,"span"),d(3),r()),n&2){let e,t,o=l(3).$implicit,s=l(3);i(),f((e=s.form.get(o.name))==null?null:e.value),i(2),f((t=s.form.get(o.name))==null?null:t.value)}}function Ei(n,c){n&1&&(_(0,"mat-icon"),d(1,"emoji_symbols"),r(),_(2,"span"),d(3,"Select an icon..."),r())}function Si(n,c){if(n&1){let e=R();_(0,"div",128),M("click",function(){let o=b(e).$implicit,s=l(4).$implicit,p=l(3);return T(p.selectIcon(s,o))}),_(1,"mat-icon"),d(2),r()()}if(n&2){let e,t=c.$implicit,o=l(4).$implicit,s=l(3);w("selected",((e=s.form.get(o.name))==null?null:e.value)===t),i(2),f(t)}}function wi(n,c){if(n&1){let e=R();_(0,"div",124)(1,"input",125),M("input",function(o){b(e);let s=l(3).$implicit,p=l(3);return T(p.onIconSearch(o,s))}),r(),_(2,"div",126),D(3,Si,3,3,"div",127,X),r()()}if(n&2){let e=l(3).$implicit,t=l(3);i(),F("value",t.iconSearchText[e.name]||""),i(2),A(t.getFilteredIcons(e))}}function bi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ti(n,c){if(n&1){let e=R();_(0,"div",120)(1,"label",66),d(2),u(3,Fi,2,0,"span",49),r(),_(4,"div",121)(5,"div",122),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.toggleIconPicker(o))}),u(6,vi,4,2)(7,Ei,4,0),_(8,"mat-icon",123),d(9,"arrow_drop_down"),r()(),u(10,wi,5,1,"div",124),r(),u(11,bi,2,1,"div",51),r()}if(n&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),i(2),W("",t.label," "),i(),C(o.isFieldRequired(t)?3:-1),i(2),w("disabled",o.isFieldReadonly(t)),i(),C((e=o.form.get(t.name))!=null&&e.value?6:7),i(4),C(o.isIconPickerOpen(t)?10:-1),i(),C(o.hasFieldError(t)?11:-1)}}function ki(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Mi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Oi(n,c){if(n&1){let e=R();_(0,"div",129)(1,"label",66),d(2),u(3,ki,2,0,"span",49),r(),_(4,"div",130)(5,"mat-form-field",48)(6,"mat-label"),d(7,"Barcode/QR Code"),r(),I(8,"input",131),_(9,"button",132),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.scanBarcode(o))}),_(10,"mat-icon"),d(11,"qr_code_scanner"),r()()()(),u(12,Mi,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(5),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)),i(3),C(t.hasFieldError(e)?12:-1)}}function yi(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Pi(n,c){n&1&&(_(0,"mat-icon",139),d(1,"sync"),r())}function Ii(n,c){n&1&&(_(0,"mat-icon"),d(1,"my_location"),r())}function Ri(n,c){if(n&1&&(_(0,"div",140)(1,"mat-icon"),d(2,"place"),r(),_(3,"span"),d(4),r()()),n&2){let e=l(3).$implicit,t=l(3);i(4),f(t.getLocationDisplay(e))}}function Wi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Di(n,c){if(n&1){let e=R();_(0,"div",133)(1,"label",66),d(2),u(3,yi,2,0,"span",49),r(),_(4,"div",134)(5,"div",135)(6,"mat-form-field",136)(7,"mat-label"),d(8,"Latitude"),r(),_(9,"input",137),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onLocationLatChange(o,s))}),r()(),_(10,"mat-form-field",136)(11,"mat-label"),d(12,"Longitude"),r(),_(13,"input",137),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onLocationLngChange(o,s))}),r()(),_(14,"button",138),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.getCurrentLocation(o))}),u(15,Pi,2,0,"mat-icon",139)(16,Ii,2,0,"mat-icon"),r()(),u(17,Ri,5,1,"div",140),r(),u(18,Wi,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(6),F("value",t.getLocationLat(e))("readonly",t.isFieldReadonly(e)),i(4),F("value",t.getLocationLng(e))("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)||t.isGettingLocation(e)),i(),C(t.isGettingLocation(e)?15:16),i(2),C(t.getLocationDisplay(e)?17:-1),i(),C(t.hasFieldError(e)?18:-1)}}function Ai(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Ni(n,c){if(n&1&&(_(0,"th"),d(1),r()),n&2){let e=c.$implicit;i(),f(e.label)}}function $i(n,c){if(n&1){let e=R();_(0,"td")(1,"input",147),M("input",function(o){let s=b(e).$implicit,p=l().$index,E=l(3).$implicit,h=l(3);return T(h.onTableCellChange(o,E,p,s.name))}),r()()}if(n&2){let e=c.$implicit,t=l().$implicit,o=l(3).$implicit,s=l(3);i(),F("value",t[e.name]||"")("readonly",s.isFieldReadonly(o))}}function Vi(n,c){if(n&1){let e=R();_(0,"tr"),D(1,$i,2,2,"td",null,z),_(3,"td",144)(4,"button",146),M("click",function(){let o=b(e).$index,s=l(3).$implicit,p=l(3);return T(p.removeTableRow(s,o))}),_(5,"mat-icon"),d(6,"delete"),r()()()()}if(n&2){let e=l(3).$implicit,t=l(3);i(),A(t.getTableColumns(e)),i(3),F("disabled",t.isFieldReadonly(e))}}function Ui(n,c){if(n&1&&(_(0,"tr")(1,"td",148),d(2,' No rows added. Click "Add Row" to add data. '),r()()),n&2){let e=l(3).$implicit,t=l(3);i(),H("colspan",t.getTableColumns(e).length+1)}}function Li(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function qi(n,c){if(n&1){let e=R();_(0,"div",141)(1,"label",66),d(2),u(3,Ai,2,0,"span",49),r(),_(4,"div",142)(5,"table",143)(6,"thead")(7,"tr"),D(8,Ni,2,1,"th",null,z),_(10,"th",144),d(11,"Actions"),r()()(),_(12,"tbody"),D(13,Vi,7,1,"tr",null,te),u(15,Ui,3,1,"tr"),r()(),_(16,"button",145),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.addTableRow(o))}),_(17,"mat-icon"),d(18,"add"),r(),d(19," Add Row "),r()(),u(20,Li,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(5),A(t.getTableColumns(e)),i(5),A(t.getTableRows(e)),i(2),C(t.getTableRows(e).length===0?15:-1),i(),F("disabled",t.isFieldReadonly(e)),i(4),C(t.hasFieldError(e)?20:-1)}}function Bi(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Gi(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function Hi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Yi(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Bi,2,0,"span",49),r(),_(5,"mat-select",62),D(6,Gi,2,2,"mat-option",63,N),r()(),u(8,Hi,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function zi(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Ji(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function Xi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ji(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,zi,2,0,"span",49),r(),_(5,"mat-select",64),D(6,Ji,2,2,"mat-option",63,N),r()(),u(8,Xi,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function Ki(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Qi(n,c){if(n&1&&(_(0,"mat-radio-button",68),d(1),r()),n&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);F("value",e.value)("disabled",o.isFieldReadonly(t)),i(),f(e.label)}}function Zi(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function eo(n,c){if(n&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,Ki,2,0,"span",49),r(),_(4,"mat-radio-group",67),D(5,Qi,2,3,"mat-radio-button",68,N),r(),u(7,Zi,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?7:-1)}}function to(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function no(n,c){if(n&1){let e=R();_(0,"mat-checkbox",72),M("change",function(o){let s=b(e).$implicit,p=l(4).$implicit,E=l(3);return T(E.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(n&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),W(" ",e.label," ")}}function io(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function oo(n,c){if(n&1&&(_(0,"div",150)(1,"label",66),d(2),u(3,to,2,0,"span",49),r(),_(4,"div",151),D(5,no,2,3,"mat-checkbox",71,N),r(),u(7,io,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),A(e.options),i(2),C(t.hasFieldError(e)?7:-1)}}function ao(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ro(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function lo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function _o(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ao,2,0,"span",49),r(),_(5,"mat-select",62),D(6,ro,2,2,"mat-option",63,N),r()(),u(8,lo,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function co(n,c){if(n&1&&u(0,Yi,9,8,"div",29)(1,ji,9,8,"div",29)(2,eo,8,9,"div",30)(3,oo,8,7,"div",149)(4,_o,9,8,"div",29),n&2){let e,t=l(2).$implicit;C((e=t.viewType)==="SELECT"?0:e==="MULTISELECT"?1:e==="RADIO"?2:e==="CHECKBOX_GROUP"?3:4)}}function so(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),r(),I(4,"input",50),r()()),n&2){let e=l(2).$implicit,t=l(3);i(3),f(e.label),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e))}}function mo(n,c){if(n&1&&(_(0,"div",28),u(1,Nt,7,8,"div",29)(2,Ut,7,8,"div",29)(3,Bt,7,8,"div",29)(4,Yt,9,8,"div",29)(5,Xt,7,8,"div",29)(6,Qt,7,8,"div",29)(7,tn,7,8,"div",29)(8,an,10,11,"div",29)(9,_n,7,7,"div",29)(10,mn,9,8,"div",29)(11,fn,9,8,"div",29)(12,Fn,8,9,"div",30)(13,En,4,4,"div",29)(14,Tn,8,8,"div",31)(15,Pn,7,8,"div",32)(16,Wn,7,8,"div",29)(17,Vn,14,11,"div",29)(18,Un,1,1,"input",33)(19,qn,4,2,"div",34)(20,Gn,3,1,"div",35)(21,zn,5,5,"div",36)(22,jn,10,7,"div",37)(23,ei,8,5,"div",38)(24,ii,7,7,"div",29)(25,ri,7,12,"div",39)(26,di,6,7,"div",40)(27,pi,13,7,"div",41)(28,fi,11,7,"div",42)(29,hi,24,14,"div",43)(30,Ti,12,9,"div",44)(31,Oi,13,8,"div",45)(32,Di,19,12,"div",46)(33,qi,21,7,"div",47)(34,co,5,1)(35,so,5,4,"div",29),r()),n&2){let e,t=l().$implicit;ee("grid-column","span "+(t.columnSpan||2)),i(),C((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="CURRENCY"?4:e==="EMAIL"?5:e==="PHONE"?6:e==="PASSWORD"?7:e==="DATE"?8:e==="DATETIME"?9:e==="SELECT"?10:e==="MULTISELECT"?11:e==="RADIO"?12:e==="CHECKBOX"?13:e==="CHECKBOX_GROUP"?14:e==="FILE"?15:e==="URL"?16:e==="USER"?17:e==="HIDDEN"?18:e==="LABEL"?19:e==="DIVIDER"?20:e==="TOGGLE"?21:e==="YES_NO"?22:e==="RATING"?23:e==="TIME"?24:e==="SLIDER"?25:e==="COLOR"?26:e==="IMAGE"?27:e==="SIGNATURE"?28:e==="RICH_TEXT"?29:e==="ICON"?30:e==="BARCODE"?31:e==="LOCATION"?32:e==="TABLE"?33:e==="SQL_OBJECT"?34:35)}}function po(n,c){if(n&1&&u(0,mo,36,3,"div",27),n&2){let e=c.$implicit,t=l(3);C(t.isFieldVisible(e)?0:-1)}}function Co(n,c){if(n&1&&(_(0,"mat-card",15)(1,"mat-card-content")(2,"div",26),D(3,po,1,1,null,null,Y),r()()()),n&2){let e=l(2);i(3),A(e.isMultiStep?e.getUngroupedFieldsOnScreen():e.getUngroupedFields())}}function uo(n,c){if(n&1&&(_(0,"mat-panel-description"),d(1),r()),n&2){let e=l().$implicit;i(),f(e.description)}}function fo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function xo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function go(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,fo,2,0,"span",49),r(),I(5,"input",50),r(),u(6,xo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function ho(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Fo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function vo(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ho,2,0,"span",49),r(),I(5,"textarea",153),r(),u(6,Fo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Eo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function So(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function wo(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Eo,2,0,"span",49),r(),I(5,"input",154),r(),u(6,So,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function bo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function To(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function ko(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Mo(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,bo,2,0,"span",49),r(),_(5,"mat-select",67),D(6,To,2,2,"mat-option",63,N),r()(),u(8,ko,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function Oo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function yo(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function Po(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Io(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Oo,2,0,"span",49),r(),_(5,"mat-select",155),D(6,yo,2,2,"mat-option",63,N),r()(),u(8,Po,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function Ro(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Wo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Do(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Ro,2,0,"span",49),r(),_(5,"span",156),d(6,"$\xA0"),r(),I(7,"input",157),r(),u(8,Wo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(3),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?8:-1)}}function Ao(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function No(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function $o(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Ao,2,0,"span",49),r(),I(5,"input",158),r(),u(6,No,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Vo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Uo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Lo(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Vo,2,0,"span",49),r(),I(5,"input",159),r(),u(6,Uo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function qo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Bo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Go(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,qo,2,0,"span",49),r(),I(5,"input",160),r(),u(6,Bo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Ho(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Yo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function zo(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Ho,2,0,"span",49),r(),I(5,"input",58)(6,"mat-datepicker-toggle",59)(7,"mat-datepicker",60,3),r(),u(9,Yo,2,1,"div",51),r()),n&2){let e=q(8),t=l(2).$implicit,o=l(3);i(),w("field-invalid",o.hasFieldError(t)),i(2),f(t.label),i(),C(o.isFieldRequired(t)?4:-1),i(),F("matDatepicker",e)("formControlName",t.name)("readonly",o.isFieldReadonly(t)),i(),F("for",e)("disabled",o.isFieldReadonly(t)),i(),F("disabled",o.isFieldReadonly(t)),i(2),C(o.hasFieldError(t)?9:-1)}}function Jo(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Xo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function jo(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Jo,2,0,"span",49),r(),I(5,"input",61),r(),u(6,Xo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Ko(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Qo(n,c){if(n&1&&(_(0,"mat-radio-button",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function Zo(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ea(n,c){if(n&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,Ko,2,0,"span",49),r(),_(4,"mat-radio-group",67),D(5,Qo,2,2,"mat-radio-button",63,N),r(),u(7,Zo,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?7:-1)}}function ta(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function na(n,c){if(n&1&&(_(0,"div",29)(1,"mat-checkbox",67),d(2),r(),u(3,ta,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),f(e.label),i(),C(t.hasFieldError(e)?3:-1)}}function ia(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function oa(n,c){if(n&1){let e=R();_(0,"mat-checkbox",72),M("change",function(o){let s=b(e).$implicit,p=l(3).$implicit,E=l(3);return T(E.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(n&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),W(" ",e.label||e.value," ")}}function aa(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ra(n,c){if(n&1&&(_(0,"div",69)(1,"label",66),d(2),u(3,ia,2,0,"span",49),r(),_(4,"div",70),D(5,oa,2,3,"mat-checkbox",71,N),r(),u(7,aa,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),A(e.options||ne(7,bt)),i(2),C(t.hasFieldError(e)?7:-1)}}function la(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function _a(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function da(n,c){if(n&1){let e=R();_(0,"div",73)(1,"label",66),d(2),u(3,la,2,0,"span",49),r(),_(4,"input",74),M("change",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onFileSelect(o,s.name))}),r(),u(5,_a,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),F("multiple",e.multiple)("disabled",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?5:-1)}}function ca(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function sa(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ma(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,ca,2,0,"span",49),r(),I(5,"input",161),r(),u(6,sa,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function pa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Ca(n,c){if(n&1&&(_(0,"mat-option",63)(1,"div",80)(2,"mat-icon"),d(3,"person"),r(),_(4,"div",81)(5,"span",82),d(6),r(),_(7,"span",83),d(8),r()()()()),n&2){let e=c.$implicit;F("value",e),i(6),j("",e.firstName," ",e.lastName,""),i(2),f(e.email)}}function ua(n,c){n&1&&(_(0,"mat-option",79),d(1,"No users found"),r())}function fa(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function xa(n,c){if(n&1){let e=R();_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,pa,2,0,"span",49),r(),_(5,"mat-icon",54),d(6,"person_search"),r(),_(7,"input",77),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onUserSearch(o,s.name))}),r(),_(8,"mat-autocomplete",78,4),M("optionSelected",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onUserSelected(o,s.name))}),D(10,Ca,9,4,"mat-option",63,Y),u(12,ua,2,0,"mat-option",79),r()(),u(13,fa,2,1,"div",51),r()}if(n&2){let e=q(9),t=l(2).$implicit,o=l(3);i(),w("field-invalid",o.hasFieldError(t)),i(2),f(t.label),i(),C(o.isFieldRequired(t)?4:-1),i(3),F("formControlName",t.name)("matAutocomplete",e)("placeholder",t.placeholder||"Search for a user...")("readonly",o.isFieldReadonly(t)),i(),F("displayWith",o.displayUserFn),i(2),A(o.getFilteredUsers(t.name)),i(2),C(o.getFilteredUsers(t.name).length===0&&o.userSearchTerms[t.name]?12:-1),i(),C(o.hasFieldError(t)?13:-1)}}function ga(n,c){if(n&1&&I(0,"input",33),n&2){let e=l(2).$implicit;F("formControlName",e.name)}}function ha(n,c){if(n&1&&(_(0,"p",85),d(1),r()),n&2){let e=l(3).$implicit;i(),f(e.defaultValue)}}function Fa(n,c){if(n&1&&(_(0,"div",34)(1,"p",84),d(2),r(),u(3,ha,2,1,"p",85),r()),n&2){let e=l(2).$implicit;i(2),f(e.label),i(),C(e.defaultValue?3:-1)}}function va(n,c){if(n&1&&(_(0,"span",86),d(1),r()),n&2){let e=l(3).$implicit;i(),f(e.label)}}function Ea(n,c){if(n&1&&(_(0,"div",35),I(1,"mat-divider"),u(2,va,2,1,"span",86),r()),n&2){let e=l(2).$implicit;i(2),C(e.label?2:-1)}}function Sa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function wa(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function ba(n,c){if(n&1&&(_(0,"div",36)(1,"mat-slide-toggle",67),d(2),u(3,Sa,2,0,"span",49),r(),u(4,wa,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),W(" ",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),C(t.hasFieldError(e)?4:-1)}}function Ta(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ka(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ma(n,c){if(n&1&&(_(0,"div",87)(1,"label",66),d(2),u(3,Ta,2,0,"span",49),r(),_(4,"mat-button-toggle-group",67)(5,"mat-button-toggle",88),d(6,"Yes"),r(),_(7,"mat-button-toggle",89),d(8,"No"),r()(),u(9,ka,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(5),C(t.hasFieldError(e)?9:-1)}}function Oa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ya(n,c){if(n&1){let e=R();_(0,"mat-icon",93),M("click",function(){let o=b(e).$implicit,s=l(3).$implicit,p=l(3);return T(p.setRating(s,o))}),d(1),r()}if(n&2){let e=c.$implicit,t=l(3).$implicit,o=l(3);w("filled",o.getRatingValue(t)>=e)("readonly",o.isFieldReadonly(t)),i(),W(" ",o.getRatingValue(t)>=e?"star":"star_border"," ")}}function Pa(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ia(n,c){if(n&1&&(_(0,"div",90)(1,"label",66),d(2),u(3,Oa,2,0,"span",49),r(),_(4,"div",91),D(5,ya,2,5,"mat-icon",92,X),r(),u(7,Pa,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(2),A(t.getStarArray(e)),i(2),C(t.hasFieldError(e)?7:-1)}}function Ra(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Wa(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Da(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Ra,2,0,"span",49),r(),I(5,"input",94),r(),u(6,Wa,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?6:-1)}}function Aa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Na(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function $a(n,c){if(n&1&&(_(0,"div",95)(1,"label",66),d(2),u(3,Aa,2,0,"span",49),r(),_(4,"mat-slider",96),I(5,"input",97),r(),u(6,Na,2,1,"div",51),r()),n&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),i(2),j("",t.label,": ",((e=o.form.get(t.name))==null?null:e.value)||0," "),i(),C(o.isFieldRequired(t)?3:-1),i(),F("min",t.sliderMin||0)("max",t.sliderMax||100)("step",t.sliderStep||1)("discrete",!0)("disabled",o.isFieldReadonly(t)),i(),F("formControlName",t.name),i(),C(o.hasFieldError(t)?6:-1)}}function Va(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Ua(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function La(n,c){if(n&1&&(_(0,"div",98)(1,"label",66),d(2),u(3,Va,2,0,"span",49),r(),I(4,"input",99),u(5,Ua,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?5:-1)}}function qa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Ba(n,c){if(n&1&&I(0,"img",104),n&2){let e=l(3).$implicit,t=l(3);F("src",t.getImagePreview(e),Z)}}function Ga(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ha(n,c){if(n&1){let e=R();_(0,"div",100)(1,"label",66),d(2),u(3,qa,2,0,"span",49),r(),_(4,"div",101)(5,"input",102,5),M("change",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onImageSelect(o,s))}),r(),_(7,"button",103),M("click",function(){b(e);let o=q(6);return T(o.click())}),_(8,"mat-icon"),d(9,"add_photo_alternate"),r(),d(10," Select Image "),r(),u(11,Ba,1,1,"img",104),r(),u(12,Ga,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(4),F("disabled",t.isFieldReadonly(e)),i(4),C(t.getImagePreview(e)?11:-1),i(),C(t.hasFieldError(e)?12:-1)}}function Ya(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function za(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ja(n,c){if(n&1){let e=R();_(0,"div",105)(1,"label",66),d(2),u(3,Ya,2,0,"span",49),r(),_(4,"div",106)(5,"canvas",107),M("mousedown",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.startSignature(o,s))})("mousemove",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.drawSignature(o,s))})("mouseup",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.endSignature(o))})("mouseleave",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.endSignature(o))})("touchstart",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.startSignatureTouch(o,s))})("touchmove",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.drawSignatureTouch(o,s))})("touchend",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.endSignature(o))}),r(),_(6,"div",108)(7,"button",109),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.clearSignature(o))}),_(8,"mat-icon"),d(9,"clear"),r()()()(),u(10,za,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(2),H("data-field",e.name),i(2),F("disabled",t.isFieldReadonly(e)),i(3),C(t.hasFieldError(e)?10:-1)}}function Xa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ja(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ka(n,c){if(n&1){let e=R();_(0,"div",110)(1,"label",66),d(2),u(3,Xa,2,0,"span",49),r(),_(4,"div",111)(5,"div",112)(6,"button",113),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("bold"))}),_(7,"mat-icon"),d(8,"format_bold"),r()(),_(9,"button",114),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("italic"))}),_(10,"mat-icon"),d(11,"format_italic"),r()(),_(12,"button",115),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("underline"))}),_(13,"mat-icon"),d(14,"format_underlined"),r()(),I(15,"span",116),_(16,"button",117),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("insertUnorderedList"))}),_(17,"mat-icon"),d(18,"format_list_bulleted"),r()(),_(19,"button",118),M("click",function(){b(e);let o=l(5);return T(o.execRichTextCommand("insertOrderedList"))}),_(20,"mat-icon"),d(21,"format_list_numbered"),r()()(),_(22,"div",119),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onRichTextInput(o,s))})("blur",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onRichTextBlur(o,s))}),r()(),u(23,ja,2,1,"div",51),r()}if(n&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),i(2),W("",t.label," "),i(),C(o.isFieldRequired(t)?3:-1),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(4),F("disabled",o.isFieldReadonly(t)),i(3),F("disabled",o.isFieldReadonly(t)),i(3),w("readonly",o.isFieldReadonly(t)),F("innerHTML",((e=o.form.get(t.name))==null?null:e.value)||"",Q),H("data-field",t.name),i(),C(o.hasFieldError(t)?23:-1)}}function Qa(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Za(n,c){if(n&1&&(_(0,"mat-icon"),d(1),r(),_(2,"span"),d(3),r()),n&2){let e,t,o=l(3).$implicit,s=l(3);i(),f((e=s.form.get(o.name))==null?null:e.value),i(2),f((t=s.form.get(o.name))==null?null:t.value)}}function er(n,c){n&1&&(_(0,"mat-icon"),d(1,"emoji_symbols"),r(),_(2,"span"),d(3,"Select an icon..."),r())}function tr(n,c){if(n&1){let e=R();_(0,"div",128),M("click",function(){let o=b(e).$implicit,s=l(4).$implicit,p=l(3);return T(p.selectIcon(s,o))}),_(1,"mat-icon"),d(2),r()()}if(n&2){let e,t=c.$implicit,o=l(4).$implicit,s=l(3);w("selected",((e=s.form.get(o.name))==null?null:e.value)===t),i(2),f(t)}}function nr(n,c){if(n&1){let e=R();_(0,"div",124)(1,"input",125),M("input",function(o){b(e);let s=l(3).$implicit,p=l(3);return T(p.onIconSearch(o,s))}),r(),_(2,"div",126),D(3,tr,3,3,"div",127,X),r()()}if(n&2){let e=l(3).$implicit,t=l(3);i(),F("value",t.iconSearchText[e.name]||""),i(2),A(t.getFilteredIcons(e))}}function ir(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function or(n,c){if(n&1){let e=R();_(0,"div",120)(1,"label",66),d(2),u(3,Qa,2,0,"span",49),r(),_(4,"div",121)(5,"div",122),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.toggleIconPicker(o))}),u(6,Za,4,2)(7,er,4,0),_(8,"mat-icon",123),d(9,"arrow_drop_down"),r()(),u(10,nr,5,1,"div",124),r(),u(11,ir,2,1,"div",51),r()}if(n&2){let e,t=l(2).$implicit,o=l(3);w("has-error",o.hasFieldError(t)),i(2),W("",t.label," "),i(),C(o.isFieldRequired(t)?3:-1),i(2),w("disabled",o.isFieldReadonly(t)),i(),C((e=o.form.get(t.name))!=null&&e.value?6:7),i(4),C(o.isIconPickerOpen(t)?10:-1),i(),C(o.hasFieldError(t)?11:-1)}}function ar(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function rr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function lr(n,c){if(n&1){let e=R();_(0,"div",129)(1,"label",66),d(2),u(3,ar,2,0,"span",49),r(),_(4,"div",130)(5,"mat-form-field",48)(6,"mat-label"),d(7,"Barcode/QR Code"),r(),I(8,"input",131),_(9,"button",132),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.scanBarcode(o))}),_(10,"mat-icon"),d(11,"qr_code_scanner"),r()()()(),u(12,rr,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(5),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)),i(3),C(t.hasFieldError(e)?12:-1)}}function _r(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function dr(n,c){n&1&&(_(0,"mat-icon",139),d(1,"sync"),r())}function cr(n,c){n&1&&(_(0,"mat-icon"),d(1,"my_location"),r())}function sr(n,c){if(n&1&&(_(0,"div",140)(1,"mat-icon"),d(2,"place"),r(),_(3,"span"),d(4),r()()),n&2){let e=l(3).$implicit,t=l(3);i(4),f(t.getLocationDisplay(e))}}function mr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function pr(n,c){if(n&1){let e=R();_(0,"div",133)(1,"label",66),d(2),u(3,_r,2,0,"span",49),r(),_(4,"div",134)(5,"div",135)(6,"mat-form-field",136)(7,"mat-label"),d(8,"Latitude"),r(),_(9,"input",137),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onLocationLatChange(o,s))}),r()(),_(10,"mat-form-field",136)(11,"mat-label"),d(12,"Longitude"),r(),_(13,"input",137),M("input",function(o){b(e);let s=l(2).$implicit,p=l(3);return T(p.onLocationLngChange(o,s))}),r()(),_(14,"button",138),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.getCurrentLocation(o))}),u(15,dr,2,0,"mat-icon",139)(16,cr,2,0,"mat-icon"),r()(),u(17,sr,5,1,"div",140),r(),u(18,mr,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(6),F("value",t.getLocationLat(e))("readonly",t.isFieldReadonly(e)),i(4),F("value",t.getLocationLng(e))("readonly",t.isFieldReadonly(e)),i(),F("disabled",t.isFieldReadonly(e)||t.isGettingLocation(e)),i(),C(t.isGettingLocation(e)?15:16),i(2),C(t.getLocationDisplay(e)?17:-1),i(),C(t.hasFieldError(e)?18:-1)}}function Cr(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function ur(n,c){if(n&1&&(_(0,"th"),d(1),r()),n&2){let e=c.$implicit;i(),f(e.label)}}function fr(n,c){if(n&1){let e=R();_(0,"td")(1,"input",147),M("input",function(o){let s=b(e).$implicit,p=l().$index,E=l(3).$implicit,h=l(3);return T(h.onTableCellChange(o,E,p,s.name))}),r()()}if(n&2){let e=c.$implicit,t=l().$implicit,o=l(3).$implicit,s=l(3);i(),F("value",t[e.name]||"")("readonly",s.isFieldReadonly(o))}}function xr(n,c){if(n&1){let e=R();_(0,"tr"),D(1,fr,2,2,"td",null,z),_(3,"td",144)(4,"button",146),M("click",function(){let o=b(e).$index,s=l(3).$implicit,p=l(3);return T(p.removeTableRow(s,o))}),_(5,"mat-icon"),d(6,"delete"),r()()()()}if(n&2){let e=l(3).$implicit,t=l(3);i(),A(t.getTableColumns(e)),i(3),F("disabled",t.isFieldReadonly(e))}}function gr(n,c){if(n&1&&(_(0,"tr")(1,"td",148),d(2,' No rows added. Click "Add Row" to add data. '),r()()),n&2){let e=l(3).$implicit,t=l(3);i(),H("colspan",t.getTableColumns(e).length+1)}}function hr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Fr(n,c){if(n&1){let e=R();_(0,"div",141)(1,"label",66),d(2),u(3,Cr,2,0,"span",49),r(),_(4,"div",142)(5,"table",143)(6,"thead")(7,"tr"),D(8,ur,2,1,"th",null,z),_(10,"th",144),d(11,"Actions"),r()()(),_(12,"tbody"),D(13,xr,7,1,"tr",null,te),u(15,gr,3,1,"tr"),r()(),_(16,"button",145),M("click",function(){b(e);let o=l(2).$implicit,s=l(3);return T(s.addTableRow(o))}),_(17,"mat-icon"),d(18,"add"),r(),d(19," Add Row "),r()(),u(20,hr,2,1,"div",51),r()}if(n&2){let e=l(2).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(5),A(t.getTableColumns(e)),i(5),A(t.getTableRows(e)),i(2),C(t.getTableRows(e).length===0?15:-1),i(),F("disabled",t.isFieldReadonly(e)),i(4),C(t.hasFieldError(e)?20:-1)}}function vr(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Er(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function Sr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function wr(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,vr,2,0,"span",49),r(),_(5,"mat-select",62),D(6,Er,2,2,"mat-option",63,N),r()(),u(8,Sr,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function br(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Tr(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function kr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Mr(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,br,2,0,"span",49),r(),_(5,"mat-select",64),D(6,Tr,2,2,"mat-option",63,N),r()(),u(8,kr,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function Or(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function yr(n,c){if(n&1&&(_(0,"mat-radio-button",68),d(1),r()),n&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);F("value",e.value)("disabled",o.isFieldReadonly(t)),i(),f(e.label)}}function Pr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ir(n,c){if(n&1&&(_(0,"div",65)(1,"label",66),d(2),u(3,Or,2,0,"span",49),r(),_(4,"mat-radio-group",67),D(5,yr,2,3,"mat-radio-button",68,N),r(),u(7,Pr,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),F("formControlName",e.name)("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?7:-1)}}function Rr(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function Wr(n,c){if(n&1){let e=R();_(0,"mat-checkbox",72),M("change",function(o){let s=b(e).$implicit,p=l(4).$implicit,E=l(3);return T(E.onCheckboxGroupChange(p.name,s.value,o.checked))}),d(1),r()}if(n&2){let e=c.$implicit,t=l(4).$implicit,o=l(3);F("checked",o.isCheckboxOptionSelected(t.name,e.value))("disabled",o.isFieldReadonly(t)),i(),W(" ",e.label," ")}}function Dr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ar(n,c){if(n&1&&(_(0,"div",150)(1,"label",66),d(2),u(3,Rr,2,0,"span",49),r(),_(4,"div",151),D(5,Wr,2,3,"mat-checkbox",71,N),r(),u(7,Dr,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);w("has-error",t.hasFieldError(e)),i(2),W("",e.label," "),i(),C(t.isFieldRequired(e)?3:-1),i(),w("horizontal-layout",e.optionsLayout==="horizontal"),i(),A(e.options),i(2),C(t.hasFieldError(e)?7:-1)}}function Nr(n,c){n&1&&(_(0,"span",49),d(1,"*"),r())}function $r(n,c){if(n&1&&(_(0,"mat-option",63),d(1),r()),n&2){let e=c.$implicit;F("value",e.value),i(),f(e.label)}}function Vr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(4).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Ur(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),u(4,Nr,2,0,"span",49),r(),_(5,"mat-select",62),D(6,$r,2,2,"mat-option",63,N),r()(),u(8,Vr,2,1,"div",51),r()),n&2){let e=l(3).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),C(t.isFieldRequired(e)?4:-1),i(),F("formControlName",e.name)("placeholder",e.placeholder||"")("disabled",t.isFieldReadonly(e)),i(),A(e.options),i(2),C(t.hasFieldError(e)?8:-1)}}function Lr(n,c){if(n&1&&u(0,wr,9,8,"div",29)(1,Mr,9,8,"div",29)(2,Ir,8,9,"div",30)(3,Ar,8,7,"div",149)(4,Ur,9,8,"div",29),n&2){let e,t=l(2).$implicit;C((e=t.viewType)==="SELECT"?0:e==="MULTISELECT"?1:e==="RADIO"?2:e==="CHECKBOX_GROUP"?3:4)}}function qr(n,c){if(n&1&&(_(0,"div",51),d(1),r()),n&2){let e=l(3).$implicit,t=l(3);i(),f(t.getFieldErrorMessage(e))}}function Br(n,c){if(n&1&&(_(0,"div",29)(1,"mat-form-field",48)(2,"mat-label"),d(3),r(),I(4,"input",162),r(),u(5,qr,2,1,"div",51),r()),n&2){let e=l(2).$implicit,t=l(3);i(),w("field-invalid",t.hasFieldError(e)),i(2),f(e.label),i(),F("formControlName",e.name)("readonly",t.isFieldReadonly(e)),i(),C(t.hasFieldError(e)?5:-1)}}function Gr(n,c){if(n&1&&(_(0,"div",28),u(1,go,7,8,"div",29)(2,vo,7,7,"div",29)(3,wo,7,7,"div",29)(4,Mo,9,7,"div",29)(5,Io,9,7,"div",29)(6,Do,9,7,"div",29)(7,$o,7,7,"div",29)(8,Lo,7,7,"div",29)(9,Go,7,7,"div",29)(10,zo,10,11,"div",29)(11,jo,7,7,"div",29)(12,ea,8,9,"div",30)(13,na,4,4,"div",29)(14,ra,8,8,"div",31)(15,da,6,7,"div",32)(16,ma,7,7,"div",29)(17,xa,14,11,"div",29)(18,ga,1,1,"input",33)(19,Fa,4,2,"div",34)(20,Ea,3,1,"div",35)(21,ba,5,5,"div",36)(22,Ma,10,7,"div",37)(23,Ia,8,5,"div",38)(24,Da,7,7,"div",29)(25,$a,7,12,"div",39)(26,La,6,7,"div",40)(27,Ha,13,7,"div",41)(28,Ja,11,7,"div",42)(29,Ka,24,14,"div",43)(30,or,12,9,"div",44)(31,lr,13,8,"div",45)(32,pr,19,12,"div",46)(33,Fr,21,7,"div",47)(34,Lr,5,1)(35,Br,6,6,"div",29),r()),n&2){let e,t=l().$implicit;ee("grid-column","span "+(t.columnSpan||2)),i(),C((e=t.type)==="TEXT"?1:e==="TEXTAREA"?2:e==="NUMBER"?3:e==="SELECT"?4:e==="MULTISELECT"?5:e==="CURRENCY"?6:e==="EMAIL"?7:e==="PHONE"?8:e==="PASSWORD"?9:e==="DATE"?10:e==="DATETIME"?11:e==="RADIO"?12:e==="CHECKBOX"?13:e==="CHECKBOX_GROUP"?14:e==="FILE"?15:e==="URL"?16:e==="USER"?17:e==="HIDDEN"?18:e==="LABEL"?19:e==="DIVIDER"?20:e==="TOGGLE"?21:e==="YES_NO"?22:e==="RATING"?23:e==="TIME"?24:e==="SLIDER"?25:e==="COLOR"?26:e==="IMAGE"?27:e==="SIGNATURE"?28:e==="RICH_TEXT"?29:e==="ICON"?30:e==="BARCODE"?31:e==="LOCATION"?32:e==="TABLE"?33:e==="SQL_OBJECT"?34:35)}}function Hr(n,c){if(n&1&&u(0,Gr,36,3,"div",27),n&2){let e=c.$implicit,t=l(3);C(t.isFieldVisible(e)?0:-1)}}function Yr(n,c){if(n&1&&(_(0,"mat-card",16)(1,"mat-expansion-panel",152)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),d(4),r(),u(5,uo,2,1,"mat-panel-description"),r(),_(6,"div",26),D(7,Hr,1,1,null,null,Y),r()()()),n&2){let e=c.$implicit,t=l(2);i(),F("expanded",!e.collapsed)("hideToggle",!e.collapsible),i(3),f(e.title),i(),C(e.description?5:-1),i(2),A(t.getFieldsInGroup(e.id))}}function zr(n,c){if(n&1){let e=R();_(0,"div",167)(1,"mat-icon"),d(2,"description"),r(),_(3,"span"),d(4),r(),_(5,"span",168),d(6),r(),_(7,"button",9),M("click",function(){let o=b(e).$index,s=l(4);return T(s.removeAttachment(o))}),_(8,"mat-icon"),d(9,"close"),r()()()}if(n&2){let e=c.$implicit,t=l(4);i(4),f(e.name),i(2),W("(",t.formatFileSize(e.size),")")}}function Jr(n,c){if(n&1&&(_(0,"div",166),D(1,zr,10,2,"div",167,z),r()),n&2){let e=l(3);i(),A(e.attachments)}}function Xr(n,c){if(n&1){let e=R();_(0,"mat-card",15)(1,"mat-card-header")(2,"mat-card-title"),d(3,"Attachments"),r(),_(4,"mat-card-subtitle"),d(5,"Upload supporting documents"),r()(),_(6,"mat-card-content")(7,"div",163)(8,"input",164,6),M("change",function(o){b(e);let s=l(2);return T(s.onAttachmentSelect(o))}),r(),_(10,"button",165),M("click",function(){b(e);let o=q(9);return T(o.click())}),_(11,"mat-icon"),d(12,"attach_file"),r(),d(13," Add Attachments "),r(),u(14,Jr,3,0,"div",166),r()()()}if(n&2){let e=l(2);i(14),C(e.attachments.length>0?14:-1)}}function jr(n,c){n&1&&I(0,"mat-spinner",171)}function Kr(n,c){n&1&&d(0," Submit for Approval ")}function Qr(n,c){if(n&1){let e=R();_(0,"div",17)(1,"button",169),M("click",function(){b(e);let o=l(2);return T(o.goBack())}),d(2,"Cancel"),r(),_(3,"button",103),M("click",function(){b(e);let o=l(2);return T(o.saveDraft())}),d(4," Save Draft "),r(),_(5,"button",170),u(6,jr,1,0,"mat-spinner",171)(7,Kr,1,0),r()()}if(n&2){let e=l(2);i(3),F("disabled",e.submitting),i(2),F("disabled",e.submitting),i(),C(e.submitting?6:7)}}function Zr(n,c){if(n&1){let e=R();_(0,"button",169),M("click",function(){b(e);let o=l(3);return T(o.goBack())}),d(1,"Cancel"),r(),I(2,"span",172),_(3,"button",173),M("click",function(){b(e);let o=l(3);return T(o.goToNextScreen())}),d(4," Next "),_(5,"mat-icon"),d(6,"arrow_forward"),r()()}}function el(n,c){n&1&&I(0,"mat-spinner",171)}function tl(n,c){n&1&&d(0," Submit for Approval ")}function nl(n,c){if(n&1){let e=R();_(0,"button",165),M("click",function(){b(e);let o=l(3);return T(o.goToPreviousScreen())}),_(1,"mat-icon"),d(2,"arrow_back"),r(),d(3," Back "),r(),I(4,"span",172),_(5,"button",169),M("click",function(){b(e);let o=l(3);return T(o.goBack())}),d(6,"Cancel"),r(),_(7,"button",103),M("click",function(){b(e);let o=l(3);return T(o.saveDraft())}),d(8," Save Draft "),r(),_(9,"button",170),u(10,el,1,0,"mat-spinner",171)(11,tl,1,0),r()}if(n&2){let e=l(3);i(7),F("disabled",e.submitting),i(2),F("disabled",e.submitting),i(),C(e.submitting?10:11)}}function il(n,c){if(n&1){let e=R();_(0,"button",165),M("click",function(){b(e);let o=l(3);return T(o.goToPreviousScreen())}),_(1,"mat-icon"),d(2,"arrow_back"),r(),d(3," Back "),r(),I(4,"span",172),_(5,"button",173),M("click",function(){b(e);let o=l(3);return T(o.goToNextScreen())}),d(6," Next "),_(7,"mat-icon"),d(8,"arrow_forward"),r()()}}function ol(n,c){if(n&1&&(_(0,"div",18),u(1,Zr,7,0)(2,nl,12,3)(3,il,9,0),r()),n&2){let e=l(2);i(),C(e.isFirstScreen?1:e.isLastScreen?2:3)}}function al(n,c){if(n&1){let e=R();_(0,"form",14),M("ngSubmit",function(){b(e);let o=l();return T(o.onSubmit())}),u(1,Wt,4,1)(2,Co,5,0,"mat-card",15),D(3,Yr,9,4,"mat-card",16,Y),u(5,Xr,15,1,"mat-card",15)(6,Qr,8,3,"div",17)(7,ol,4,1,"div",18),r()}if(n&2){let e=l();F("formGroup",e.form),i(),C(e.isMultiStep?1:-1),i(),C((e.isMultiStep?e.getUngroupedFieldsOnScreen().length>0:e.getUngroupedFields().length>0)?2:-1),i(),A(e.isMultiStep?e.getFieldGroupsOnScreen():e.fieldGroups),i(2),C(e.workflow.requireAttachments?5:-1),i(),C(e.isMultiStep?7:6)}}var e_=(()=>{class n{fb;userService;workflowService;authService;router;route;snackBar;cdr;workflow=null;form;loading=!0;submitting=!1;workflowCode="";fields=[];fieldGroups=[];screens=[];currentScreenIndex=0;selectedFiles={};attachments=[];instanceId=null;isEditMode=!1;existingFieldValues={};checkboxGroupValues={};calculatedFields=new Map;subscriptions=[];validationErrors={};hasAttemptedSubmit=!1;pendingUniqueChecks=new Map;uniqueCheckCache=new Map;allUsers=[];filteredUsersMap={};userSearchTerms={};selectedUsers={};constructor(e,t,o,s,p,E,h,P){this.fb=e,this.userService=t,this.workflowService=o,this.authService=s,this.router=p,this.route=E,this.snackBar=h,this.cdr=P}ngOnInit(){this.workflowCode=this.route.snapshot.paramMap.get("workflowCode")||"",this.instanceId=this.route.snapshot.paramMap.get("instanceId")||null,this.isEditMode=!!this.instanceId,this.loadWorkflow(),this.loadUsers()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}loadWorkflow(){this.workflowService.getWorkflowByCode(this.workflowCode).subscribe({next:e=>{e.success?(this.workflow=e.data,this.isEditMode&&this.instanceId?this.loadInstance():(this.loading=!1,this.initializeForm())):this.loading=!1},error:()=>{this.loading=!1,this.snackBar.open("Failed to load workflow","Close",{duration:3e3})}})}loadInstance(){this.workflowService.getInstance(this.instanceId).subscribe({next:e=>{if(e.success&&e.data&&e.data.fieldValues){let t=e.data.fieldValues;Array.isArray(t)?t.forEach(o=>{this.existingFieldValues[o.fieldName]=o.value}):typeof t=="object"&&Object.keys(t).forEach(o=>{this.existingFieldValues[o]=t[o]})}this.loading=!1,this.initializeForm()},error:()=>{this.loading=!1,this.snackBar.open("Failed to load instance","Close",{duration:3e3})}})}initializeForm(){if(!this.workflow?.forms?.[0]){console.warn("No workflow forms found for initialization");return}let e=this.workflow.forms[0],t=e.fieldGroups||[],o=new Map;t.forEach(h=>{h.fields&&Array.isArray(h.fields)&&h.fields.forEach(P=>{let a=P.id?.toString();a&&o.set(a,h.id?.toString())})});let s=new Map;(e.fields||[]).forEach(h=>{let P=h.id?.toString();if(P){let a=h.fieldGroupId?.toString()||o.get(P)||null;s.set(P,G(B({},h),{fieldGroupId:a}))}}),t.forEach(h=>{h.fields&&Array.isArray(h.fields)&&h.fields.forEach(P=>{let a=P.id?.toString();a&&!s.has(a)&&s.set(a,G(B({},P),{fieldGroupId:h.id?.toString()}))})}),this.fields=Array.from(s.values()).map(h=>{let P=(h.type||h.fieldType||"TEXT").toString().toUpperCase();return G(B({},h),{type:P,fieldType:P,required:h.required??h.isMandatory??!1,hidden:h.hidden??h.isHidden??!1,readOnly:h.readOnly??h.isReadonly??!1})}),this.fieldGroups=t,this.screens=(e.screens||[]).sort((h,P)=>(h.displayOrder||0)-(P.displayOrder||0)),this.currentScreenIndex=0;let p=new Set(this.fields.map(h=>h.name)),E={};this.fields.forEach(h=>{let P=[];h.required&&P.push(ie.required),h.type==="EMAIL"&&P.push(ie.email);let a="";if(this.isEditMode&&this.existingFieldValues[h.name]!==void 0)a=this.existingFieldValues[h.name],h.type==="CHECKBOX"?a=a==="true"||a===!0:h.type==="NUMBER"||h.type==="CURRENCY"?a=Number(a)||null:(h.type==="DATE"||h.type==="DATETIME")&&(a=a?new Date(a):null);else if(h.defaultValue){let v=this.extractFieldDependencies(h.defaultValue,p);v.length>0?(this.calculatedFields.set(h.name,{expression:h.defaultValue,fieldType:h.type,dependencies:v}),a=""):(a=this.evaluateDefaultValue(h.defaultValue,h.type),h.type==="CHECKBOX"?a=a==="true"||a===!0||!1:h.type==="NUMBER"||h.type==="CURRENCY"?a=a?Number(a):null:(h.type==="DATE"||h.type==="DATETIME")&&!(a instanceof Date)&&(a=a?new Date(a):null))}E[h.name]=[a,P]}),this.form=this.fb.group(E),this.setupCalculatedFieldSubscriptions(),this.calculatedFields.forEach((h,P)=>{this.recalculateField(P,h)}),this.setupValidationSubscriptions()}extractFieldDependencies(e,t){let o=[],s=e.match(/^([A-Z_]+)\((.*)\)$/i);if(!s)return o;let p=s[2];return p&&this.parseArgsRaw(p).forEach(h=>{let P=h.trim().replace(/^["']|["']$/g,"");!h.startsWith('"')&&!h.startsWith("'")&&t.has(P)&&o.push(P)}),o}parseArgsRaw(e){let t=[],o="",s=!1,p="";for(let E of e)(E==='"'||E==="'")&&!s?(s=!0,p=E,o+=E):E===p&&s?(s=!1,o+=E,p=""):E===","&&!s?(t.push(o.trim()),o=""):o+=E;return o&&t.push(o.trim()),t}setupCalculatedFieldSubscriptions(){this.calculatedFields.forEach((e,t)=>{let o=e.dependencies.map(s=>this.form.get(s)).filter(s=>s!==null);if(o.length>0){let p=ae(...o.map(E=>E.valueChanges)).pipe(K(100)).subscribe(()=>{this.recalculateField(t,e)});this.subscriptions.push(p)}})}setupValidationSubscriptions(){let e=this.form.valueChanges.pipe(K(300)).subscribe(t=>{this.fields.forEach(o=>{if(o.validation&&/Unique\(/i.test(o.validation)){let s=t[o.name],p=[];this.uniqueCheckCache.forEach((E,h)=>{h.startsWith(`${o.name}:`)&&h!==`${o.name}:${s}`&&p.push(h)}),p.forEach(E=>this.uniqueCheckCache.delete(E))}}),this.clearValidationErrors()});this.subscriptions.push(e)}clearValidationErrors(){this.hasAttemptedSubmit=!1,this.fields.forEach(e=>{if(this.validationErrors[e.name]){this.validationErrors[e.name]=null;let o=this.form.get(e.name);if(o&&o.errors){let t=o.errors,{customValidation:s}=t,p=J(t,["customValidation"]);o.setErrors(Object.keys(p).length>0?p:null)}}})}validateAllFields(){this.fields.forEach(e=>{if(e.validation){let o=this.evaluateValidation(e);this.validationErrors[e.name]=o;let s=this.form.get(e.name);if(s){if(o)s.setErrors(G(B({},s.errors),{customValidation:o})),s.markAsTouched();else if(s.errors){let t=s.errors,{customValidation:p}=t,E=J(t,["customValidation"]);s.setErrors(Object.keys(E).length>0?E:null)}}}}),this.cdr.detectChanges()}evaluateValidation(e){let t=e.validation;if(!t)return null;try{let o=t.split(/\s+AND\s+/i);for(let s of o){let p=s.trim(),E=this.evaluateSingleValidation(p,e);if(E)return E}return null}catch{return null}}evaluateSingleValidation(e,t){let o=this.form.get(t.name)?.value,s=t.label||t.name,p=e.match(/^Required\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(p){let a=p[1]||p[2];return o==null||o===""||typeof o=="string"&&o.trim()===""?a||`${s} is required`:null}let E=e.match(/^Unique\(\s*(?:"([^"]*)"|'([^']*)')?\s*\)$/i);if(E){let a=E[1]||E[2];if(o==null||o===""||typeof o=="string"&&o.trim()==="")return null;let v=`${t.name}:${o}`;return this.uniqueCheckCache.has(v)?this.uniqueCheckCache.get(v)?null:a||`${s} value already exists`:(this.pendingUniqueChecks.get(v)||(this.pendingUniqueChecks.set(v,!0),this.checkUniqueField(t.name,String(o),a||`${s} value already exists`)),null)}let h=e.match(/^ValidWhen\(\s*(.+?)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(h){let a=h[1].trim(),v=h[2]||h[3],k=this.evaluateCondition(a);return k===!0||k==="true"||k===0||k==="0"?null:v||`${s} validation failed`}let P=e.match(/^InvalidWhen\(\s*(.+?)(?:\s*,\s*(?:"([^"]*)"|'([^']*)'))?\s*\)$/i);if(P){let a=P[1].trim(),v=P[2]||P[3],k=this.evaluateCondition(a);return k===!0||k==="true"||typeof k=="number"&&k!==0||typeof k=="string"&&k!=="0"&&k!=="false"&&k!==""?v||`${s} validation failed`:null}return null}evaluateCondition(e){if(/\s+OR\s+/i.test(e)){let s=e.split(/\s+OR\s+/i);for(let p of s)if(this.evaluateCondition(p.trim()))return!0;return!1}if(/\s+AND\s+/i.test(e)){let s=e.split(/\s+AND\s+/i);for(let p of s)if(!this.evaluateCondition(p.trim()))return!1;return!0}let t=e.match(/^(.+?)\s*(>=|<=|!=|=|>|<)\s*(.+)$/);if(t){let s=t[1].trim(),p=t[2],E=t[3].trim(),h=this.resolveValue(s),P=this.resolveValue(E);switch(p){case"=":return h==P;case"!=":return h!=P;case">":return Number(h)>Number(P);case"<":return Number(h)<Number(P);case">=":return Number(h)>=Number(P);case"<=":return Number(h)<=Number(P)}}return this.resolveValue(e)}resolveValue(e){let t=e.trim();if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(!isNaN(Number(t)))return Number(t);if(t.toLowerCase()==="true")return!0;if(t.toLowerCase()==="false")return!1;if(this.isFunctionExpression(t))return this.evaluateFunction(t,"TEXT");let o=this.form.get(t);return o?o.value:this.containsOperatorsOrFunctions(t)?this.evaluateArithmeticExpression(t):t}containsOperatorsOrFunctions(e){return!!(/[+\-*\/]/.test(e)||/[A-Z_]+\(/i.test(e))}evaluateArithmeticExpression(e){let t=e,o=/\b([a-zA-Z_][a-zA-Z0-9_]*)\b/g,s,p=[];for(;(s=o.exec(e))!==null;){let h=s[1];if(this.isFunctionExpression(h)||["AND","OR","TRUE","FALSE"].includes(h.toUpperCase()))continue;let P=this.form.get(h);P&&p.push({field:h,value:P.value??0})}for(let h of p){let P=typeof h.value=="number"?h.value:parseFloat(h.value)||0;t=t.replace(new RegExp(`\\b${h.field}\\b`,"g"),P.toString())}let E=/([A-Z_]+)\(([^()]*)\)/gi;for(;E.test(t);)t=t.replace(E,h=>this.evaluateFunction(h,"NUMBER").toString());try{return Function('"use strict"; return ('+t+")")()}catch{return t}}checkUniqueField(e,t,o){let s=`${e}:${t}`;this.workflowService.validateUniqueField(this.workflowCode,e,t,this.instanceId||void 0).subscribe({next:p=>{this.pendingUniqueChecks.delete(s);let E=p.data;this.uniqueCheckCache.set(s,E);let h=this.form.get(e);if(!E)this.validationErrors[e]=o,h&&(h.setErrors(G(B({},h.errors),{customValidation:o})),h.markAsTouched());else{let v=this.fields.find(k=>k.name===e);if(v?.validation){let k=this.evaluateNonUniqueValidations(v);if(this.validationErrors[e]=k,h){if(k)h.setErrors(G(B({},h.errors),{customValidation:k})),h.markAsTouched();else if(h.errors){let P=h.errors,{customValidation:g}=P,U=J(P,["customValidation"]);h.setErrors(Object.keys(U).length>0?U:null)}}}else if(this.validationErrors[e]=null,h&&h.errors){let a=h.errors,{customValidation:k}=a,g=J(a,["customValidation"]);h.setErrors(Object.keys(g).length>0?g:null)}}this.cdr.detectChanges()},error:()=>{this.pendingUniqueChecks.delete(s),this.uniqueCheckCache.set(s,!0)}})}evaluateNonUniqueValidations(e){let t=e.validation;if(!t)return null;try{let o=t.split(/\s+AND\s+/i);for(let s of o){let p=s.trim();if(/^Unique\(/i.test(p))continue;let E=this.evaluateSingleValidation(p,e);if(E)return E}return null}catch{return null}}recalculateField(e,t){let o=this.evaluateFunction(t.expression,t.fieldType);t.fieldType==="CHECKBOX"?o=o==="true"||o===!0||!1:t.fieldType==="NUMBER"||t.fieldType==="CURRENCY"?o=o?Number(o):null:(t.fieldType==="DATE"||t.fieldType==="DATETIME")&&!(o instanceof Date)&&(o=o?new Date(o):null);let s=this.form.get(e);s&&s.value!==o&&s.setValue(o,{emitEvent:!1})}getUngroupedFields(){return this.fields.filter(e=>!e.fieldGroupId&&!(e.hidden||e.isHidden))}getFieldsInGroup(e){let t=e?.toString();if(this.isMultiStep){let o=this.currentScreen?.id?.toString(),s=this.currentScreenIndex===0;return this.fields.filter(p=>{if(p.fieldGroupId?.toString()!==t||p.hidden||p.isHidden)return!1;let E=p.screenId?.toString();return E===o||s&&!E})}return this.fields.filter(o=>o.fieldGroupId?.toString()===t&&!(o.hidden||o.isHidden))}get isMultiStep(){return this.screens.length>1}get isFirstScreen(){return this.currentScreenIndex===0}get isLastScreen(){return this.currentScreenIndex===this.screens.length-1}get currentScreen(){return this.screens[this.currentScreenIndex]||null}getUngroupedFieldsOnScreen(){if(!this.isMultiStep)return this.getUngroupedFields();let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this.fields.filter(o=>{if(o.fieldGroupId||o.hidden||o.isHidden)return!1;let s=o.screenId?.toString();return s===e||t&&!s})}getFieldGroupsOnScreen(){if(!this.isMultiStep)return this.fieldGroups;let e=this.currentScreen?.id?.toString(),t=this.currentScreenIndex===0;return this.fieldGroups.filter(o=>{let s=o.screenId?.toString();return s===e||t&&!s})}goToNextScreen(){this.validateCurrentScreen()&&this.currentScreenIndex<this.screens.length-1&&(this.currentScreenIndex++,window.scrollTo({top:0,behavior:"smooth"}))}goToPreviousScreen(){this.currentScreenIndex>0&&(this.currentScreenIndex--,window.scrollTo({top:0,behavior:"smooth"}))}goToScreen(e){e<=this.currentScreenIndex&&(this.currentScreenIndex=e,window.scrollTo({top:0,behavior:"smooth"}))}validateCurrentScreen(){if(!this.isMultiStep||!this.currentScreen)return!0;let e=this.currentScreen.id?.toString(),t=this.currentScreenIndex===0,o=this.fields.filter(p=>{let E=p.screenId?.toString();return E===e||t&&!E}),s=!0;return o.forEach(p=>{let E=this.form.get(p.name);E&&(E.markAsTouched(),E.invalid&&(s=!1))}),s||this.snackBar.open("Please fill in all required fields on this screen","Close",{duration:3e3}),s}isFieldReadonly(e){return e.readOnly||e.isReadonly||!1}isFieldRequired(e){return e.required?!0:e.validation?/Required\s*\(/i.test(e.validation):!1}isFieldVisible(e){let t=e.visibilityExpression;if(!t||t.trim()===""||t.trim().toLowerCase()==="true")return!0;if(t.trim().toLowerCase()==="false")return!1;try{return this.evaluateVisibilityExpression(t)}catch(o){return console.warn("Error evaluating visibility expression for field",e.name,o),!0}}evaluateVisibilityExpression(e){let t=e.replace(/@\{([^}]+)\}/g,(o,s)=>{let p=this.form.get(s.trim())?.value;return p==null||p===""?"null":typeof p=="string"?`'${p.replace(/'/g,"\\'")}'`:typeof p=="boolean"||typeof p=="number"?p.toString():`'${String(p)}'`});try{let o=t.match(/^['"]?([^'"=!<>]+)['"]?\s*(==|!=|===|!==)\s*['"]?([^'"]+)['"]?$/);if(o){let p=o[1].trim(),E=o[2],h=o[3].trim();return E==="=="||E==="==="?p===h:p!==h}let s=t.match(/^['"]?([^'"<>=!]+)['"]?\s*(>=|<=|>|<)\s*['"]?([^'"]+)['"]?$/);if(s){let p=parseFloat(s[1].trim()),E=s[2],h=parseFloat(s[3].trim());if(!isNaN(p)&&!isNaN(h))switch(E){case">":return p>h;case"<":return p<h;case">=":return p>=h;case"<=":return p<=h}}if(t.includes("&&")||t.includes("||")){let p=t.split(/\s*(&&|\|\|)\s*/),E=this.evaluateSimpleCondition(p[0]);for(let h=1;h<p.length;h+=2){let P=p[h],a=this.evaluateSimpleCondition(p[h+1]);P==="&&"?E=E&&a:P==="||"&&(E=E||a)}return E}if(t.trim().startsWith("!")){let p=t.trim().substring(1).trim();return!this.evaluateSimpleCondition(p)}return this.evaluateSimpleCondition(t)}catch(o){return console.warn("Error in visibility expression evaluation:",o),!0}}evaluateSimpleCondition(e){if(e=e.trim(),e.startsWith("(")&&e.endsWith(")")&&(e=e.slice(1,-1).trim()),e==="null"||e==="''"||e==='""')return!1;if(e.toLowerCase()==="true")return!0;if(e.toLowerCase()==="false")return!1;let t=e.match(/^['"]?([^'"=!<>]+)['"]?\s*(==|!=|===|!==)\s*['"]?([^'"]+)['"]?$/);if(t){let s=t[1].trim().replace(/^['"]|['"]$/g,""),p=t[2],E=t[3].trim().replace(/^['"]|['"]$/g,"");return p==="=="||p==="==="?s===E:s!==E}let o=e.match(/^['"]?([^'"<>=!]+)['"]?\s*(>=|<=|>|<)\s*['"]?([^'"]+)['"]?$/);if(o){let s=parseFloat(o[1].trim()),p=o[2],E=parseFloat(o[3].trim());if(!isNaN(s)&&!isNaN(E))switch(p){case">":return s>E;case"<":return s<E;case">=":return s>=E;case"<=":return s<=E}}return e!=="null"&&e!==""&&e!=="0"}hasFieldError(e){if(!this.hasAttemptedSubmit)return!1;let t=this.form.get(e.name),o=t?.invalid,s=!!this.validationErrors[e.name],p=t?.hasError("customValidation");return o||s||!!p}getFieldErrorMessage(e){let t=this.form.get(e.name);return this.validationErrors[e.name]?this.validationErrors[e.name]:t?.hasError("customValidation")?t.getError("customValidation"):t?.hasError("required")?`${e.label} is required`:t?.hasError("email")?"Please enter a valid email":null}getErrorStateMatcher(e){let t=this.validationErrors;return{isErrorState:o=>{if(!o)return!1;let s=!!t[e.name],p=o.invalid&&(o.touched||o.dirty);return s||p}}}evaluateDefaultValue(e,t){if(!e)return"";let o=e.trim();return this.isFunctionExpression(o)?this.evaluateFunction(o,t):e}isFunctionExpression(e){let t=/^[A-Z_]+\(.*\)$/i,o=["TODAY","NOW","CURRENT_USER","CURRENT_USER_EMAIL","CURRENT_USER_ID","CURRENT_USERNAME","CURRENT_USER_PHONE","CURRENT_USER_DEPARTMENT","CURRENT_USER_STAFFID","CURRENT_USER_ROLE","CURRENT_USER_SBU","CURRENT_USER_BRANCH","CURRENT_DATE","CURRENT_TIME","CURRENT_DATETIME","CURRENT_YEAR","CURRENT_MONTH","UUID","SHORT_UUID","TIMESTAMP","PI","E","RANDOM","WORKFLOW_ID","WORKFLOW_NAME","INSTANCE_ID","INSTANCE_STATUS","SUBMISSION_DATE","SUBMITTER_NAME","SUBMITTER_EMAIL","APPROVAL_LEVEL","APPROVER_NAME","ENVIRONMENT","VERSION","LOCALE","TIMEZONE","BROWSER","PLATFORM","IS_MOBILE","SCREEN_WIDTH","SCREEN_HEIGHT"];return t.test(e)||o.includes(e.toUpperCase())}evaluateFunction(e,t){let o=this.authService.currentUser,s=e.toUpperCase().trim(),p=(t||"").toUpperCase(),E=e.match(/^([A-Z_]+)\((.*)\)$/i),h=E?E[1].toUpperCase():s,P=E?E[2]:"",a=P?this.parseArgs(P):[],v=$=>parseFloat($)||0,k=$=>parseInt($)||0,g=$=>String($??""),U=$=>$===!0||$==="true"||$==="1"||$===1,O=$=>$ instanceof Date?$:new Date($);switch(h){case"UPPER":return g(a[0]).toUpperCase();case"LOWER":return g(a[0]).toLowerCase();case"TRIM":return g(a[0]).trim();case"TRIM_LEFT":return g(a[0]).trimStart();case"TRIM_RIGHT":return g(a[0]).trimEnd();case"CONCAT":return a.join("");case"LEFT":return g(a[0]).substring(0,k(a[1]));case"RIGHT":{let m=g(a[0]);return m.substring(m.length-k(a[1]))}case"SUBSTRING":return g(a[0]).substring(k(a[1]),k(a[1])+k(a[2]));case"LENGTH":return g(a[0]).length.toString();case"REPLACE":return g(a[0]).split(g(a[1])).join(g(a[2]));case"REPLACE_FIRST":return g(a[0]).replace(g(a[1]),g(a[2]));case"CONTAINS":return g(a[0]).includes(g(a[1])).toString();case"CONTAINS_IGNORE_CASE":return g(a[0]).toLowerCase().includes(g(a[1]).toLowerCase()).toString();case"STARTS_WITH":return g(a[0]).startsWith(g(a[1])).toString();case"ENDS_WITH":return g(a[0]).endsWith(g(a[1])).toString();case"CAPITALIZE":return g(a[0]).charAt(0).toUpperCase()+g(a[0]).slice(1).toLowerCase();case"TITLE_CASE":return g(a[0]).replace(/\b\w/g,m=>m.toUpperCase());case"SENTENCE_CASE":return g(a[0]).replace(/(^\s*\w|[.!?]\s*\w)/g,m=>m.toUpperCase());case"REVERSE":return g(a[0]).split("").reverse().join("");case"REPEAT":return g(a[0]).repeat(k(a[1]));case"PAD_LEFT":return g(a[0]).padStart(k(a[1]),g(a[2])||" ");case"PAD_RIGHT":return g(a[0]).padEnd(k(a[1]),g(a[2])||" ");case"WORD_COUNT":return g(a[0]).trim().split(/\s+/).filter(m=>m).length.toString();case"CHAR_AT":return g(a[0]).charAt(k(a[1]));case"INDEX_OF":return g(a[0]).indexOf(g(a[1])).toString();case"LAST_INDEX_OF":return g(a[0]).lastIndexOf(g(a[1])).toString();case"SPLIT":return JSON.stringify(g(a[0]).split(g(a[1])));case"JOIN":try{return JSON.parse(g(a[0])).join(g(a[1]))}catch{return a[0]}case"INITIALS":return g(a[0]).split(/\s+/).map(m=>m.charAt(0).toUpperCase()).join("");case"SLUG":return g(a[0]).toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");case"CLEAN":return g(a[0]).replace(/[^\x20-\x7E]/g,"");case"REMOVE_SPACES":return g(a[0]).replace(/\s/g,"");case"COLLAPSE_SPACES":return g(a[0]).replace(/\s+/g," ");case"EXTRACT_NUMBERS":return g(a[0]).replace(/[^0-9]/g,"");case"EXTRACT_LETTERS":return g(a[0]).replace(/[^a-zA-Z]/g,"");case"EXTRACT_ALPHANUMERIC":return g(a[0]).replace(/[^a-zA-Z0-9]/g,"");case"MASK":{let m=g(a[0]),x=k(a[1]),S=k(a[2]),y=g(a[3])||"*",V=S<0?m.length+S:S;return m.substring(0,x)+y.repeat(V-x)+m.substring(V)}case"MASK_EMAIL":{let m=g(a[0]),[x,S]=m.split("@");return S?x.charAt(0)+"***@"+S:m}case"MASK_PHONE":{let m=g(a[0]).replace(/\D/g,"");return m.length>4?"*".repeat(m.length-4)+m.slice(-4):m}case"FORMAT_PHONE":{let m=g(a[0]).replace(/\D/g,""),x=g(a[1]).toUpperCase();return x==="US"&&m.length===10?`(${m.slice(0,3)}) ${m.slice(3,6)}-${m.slice(6)}`:x==="INTL"&&m.length>=10?`+${m.slice(0,-10)} ${m.slice(-10,-7)} ${m.slice(-7,-4)} ${m.slice(-4)}`:m}case"ENCODE_HTML":return g(a[0]).replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[m]||m);case"DECODE_HTML":return g(a[0]).replace(/&amp;|&lt;|&gt;|&quot;|&#39;/g,m=>({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"})[m]||m);case"WRAP":return g(a[1])+g(a[0])+g(a[2]);case"TRUNCATE":{let m=g(a[0]),x=k(a[1]),S=g(a[2])||"...";return m.length>x?m.substring(0,x-S.length)+S:m}case"REGEX_MATCH":try{return new RegExp(g(a[1])).test(g(a[0])).toString()}catch{return"false"}case"REGEX_EXTRACT":try{let m=g(a[0]).match(new RegExp(g(a[1])));return m?m[0]:""}catch{return""}case"REGEX_REPLACE":try{return g(a[0]).replace(new RegExp(g(a[1]),"g"),g(a[2]))}catch{return a[0]}case"SUM":return a.reduce((m,x)=>m+v(x),0).toString();case"SUBTRACT":return(v(a[0])-v(a[1])).toString();case"MULTIPLY":return(v(a[0])*v(a[1])).toString();case"DIVIDE":return v(a[1])===0?"0":(v(a[0])/v(a[1])).toString();case"ROUND":return v(a[0]).toFixed(k(a[1]));case"ROUND_UP":let $=Math.pow(10,k(a[1]));return(Math.ceil(v(a[0])*$)/$).toString();case"ROUND_DOWN":let oe=Math.pow(10,k(a[1]));return(Math.floor(v(a[0])*oe)/oe).toString();case"FLOOR":return Math.floor(v(a[0])).toString();case"CEIL":return Math.ceil(v(a[0])).toString();case"TRUNC":return Math.trunc(v(a[0])).toString();case"ABS":return Math.abs(v(a[0])).toString();case"SIGN":return Math.sign(v(a[0])).toString();case"NEGATE":return(-v(a[0])).toString();case"MIN":return Math.min(...a.map(v)).toString();case"MAX":return Math.max(...a.map(v)).toString();case"AVERAGE":{let m=a.map(v);return(m.reduce((x,S)=>x+S,0)/m.length).toString()}case"MEDIAN":{let m=a.map(v).sort((S,y)=>S-y),x=Math.floor(m.length/2);return(m.length%2?m[x]:(m[x-1]+m[x])/2).toString()}case"MODE":{let m={};return a.forEach(x=>{m[x]=(m[x]||0)+1}),Object.entries(m).sort((x,S)=>S[1]-x[1])[0]?.[0]||""}case"COUNT":return a.filter(m=>m!==""&&m!==null&&m!==void 0).length.toString();case"PRODUCT":return a.reduce((m,x)=>m*v(x),1).toString();case"PERCENTAGE":return v(a[1])===0?"0":(v(a[0])/v(a[1])*100).toString();case"PERCENT_OF":return(v(a[0])*v(a[1])/100).toString();case"PERCENT_CHANGE":return v(a[0])===0?"0":((v(a[1])-v(a[0]))/v(a[0])*100).toString();case"MOD":return(v(a[0])%v(a[1])).toString();case"POWER":return Math.pow(v(a[0]),v(a[1])).toString();case"SQRT":return Math.sqrt(v(a[0])).toString();case"CBRT":return Math.cbrt(v(a[0])).toString();case"LOG":return Math.log(v(a[0])).toString();case"LOG10":return Math.log10(v(a[0])).toString();case"LOG2":return Math.log2(v(a[0])).toString();case"EXP":return Math.exp(v(a[0])).toString();case"FACTORIAL":{let m=k(a[0]),x=1;for(let S=2;S<=m;S++)x*=S;return x.toString()}case"GCD":{let m=Math.abs(k(a[0])),x=Math.abs(k(a[1]));for(;x;)[m,x]=[x,m%x];return m.toString()}case"LCM":{let m=Math.abs(k(a[0])),x=Math.abs(k(a[1])),S=m,y=x;for(;y;)[S,y]=[y,S%y];return(m*x/S).toString()}case"RANDOM":return Math.random().toString();case"RANDOM_INT":return(Math.floor(Math.random()*(k(a[1])-k(a[0])+1))+k(a[0])).toString();case"CLAMP":return Math.min(Math.max(v(a[0]),v(a[1])),v(a[2])).toString();case"INTERPOLATE":return(v(a[0])+(v(a[1])-v(a[0]))*v(a[2])).toString();case"MAP_RANGE":{let m=v(a[0]),x=v(a[1]),S=v(a[2]),y=v(a[3]),V=v(a[4]);return((m-x)/(S-x)*(V-y)+y).toString()}case"SIN":return Math.sin(v(a[0])).toString();case"COS":return Math.cos(v(a[0])).toString();case"TAN":return Math.tan(v(a[0])).toString();case"DEGREES":return(v(a[0])*180/Math.PI).toString();case"RADIANS":return(v(a[0])*Math.PI/180).toString();case"PI":return Math.PI.toString();case"E":return Math.E.toString();case"VARIANCE":{let m=a.map(v),x=m.reduce((S,y)=>S+y,0)/m.length;return(m.reduce((S,y)=>S+Math.pow(y-x,2),0)/m.length).toString()}case"STDEV":{let m=a.map(v),x=m.reduce((S,y)=>S+y,0)/m.length;return Math.sqrt(m.reduce((S,y)=>S+Math.pow(y-x,2),0)/m.length).toString()}case"RANGE":{let m=a.map(v);return(Math.max(...m)-Math.min(...m)).toString()}case"COMPOUND_INTEREST":return(v(a[0])*Math.pow(1+v(a[1]),v(a[2]))).toString();case"SIMPLE_INTEREST":return(v(a[0])*(1+v(a[1])*v(a[2]))).toString();case"PMT":{let m=v(a[0]),x=v(a[1]),S=v(a[2]);return m===0?(S/x).toString():(S*m/(1-Math.pow(1+m,-x))).toString()}case"FV":return(v(a[2])*((Math.pow(1+v(a[0]),v(a[1]))-1)/v(a[0]))).toString();case"PV":return(v(a[2])*((1-Math.pow(1+v(a[0]),-v(a[1])))/v(a[0]))).toString();case"FORMAT_NUMBER":{let m=v(a[0]),x=k(a[1]);return m.toLocaleString("en-US",{minimumFractionDigits:x,maximumFractionDigits:x})}case"FORMAT_PERCENTAGE":return v(a[0]).toFixed(k(a[1]))+"%";case"FORMAT_BYTES":{let m=v(a[0]);if(m===0)return"0 Bytes";let x=1024,S=["Bytes","KB","MB","GB","TB"],y=Math.floor(Math.log(m)/Math.log(x));return(m/Math.pow(x,y)).toFixed(2)+" "+S[y]}case"FORMAT_ORDINAL":{let m=k(a[0]),x=["th","st","nd","rd"],S=m%100;return m+(x[(S-20)%10]||x[S]||x[0])}case"ROMAN":{let m=k(a[0]),x="",S=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];for(let[y,V]of S)for(;m>=y;)x+=V,m-=y;return x}case"HEX":return k(a[0]).toString(16).toUpperCase();case"BIN":return k(a[0]).toString(2);case"OCT":return k(a[0]).toString(8);case"PARSE_INT":return parseInt(g(a[0]),k(a[1])||10).toString();case"TODAY":return p==="DATE"||p==="DATETIME"?new Date:this.formatDate(new Date);case"NOW":return p==="DATETIME"?new Date:this.formatDateTime(new Date);case"TIMESTAMP":return Date.now().toString();case"DATE":{let m=new Date(k(a[0]),k(a[1])-1,k(a[2]));return p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"DATETIME":{let m=new Date(k(a[0]),k(a[1])-1,k(a[2]),k(a[3]),k(a[4]),k(a[5]));return p==="DATETIME"?m:this.formatDateTime(m)}case"DATE_FORMAT":{let m=O(a[0]),x=g(a[1]);return this.formatDateWithPattern(m,x)}case"DATE_PARSE":return new Date(g(a[0])).toISOString();case"DATE_ADD":{let m=O(a[0]),x=k(a[1]),S=g(a[2]).toLowerCase();return this.addToDate(m,x,S)}case"DATE_SUBTRACT":{let m=O(a[0]),x=k(a[1]),S=g(a[2]).toLowerCase();return this.addToDate(m,-x,S)}case"DATE_DIFF":{let m=O(a[0]),x=O(a[1]),S=g(a[2]).toLowerCase();return this.dateDiff(m,x,S)}case"AGE":{let m=O(a[0]),x=new Date,S=x.getFullYear()-m.getFullYear();return(x.getMonth()<m.getMonth()||x.getMonth()===m.getMonth()&&x.getDate()<m.getDate())&&S--,S.toString()}case"AGE_DETAILED":{let m=O(a[0]),x=new Date,S=x.getFullYear()-m.getFullYear(),y=x.getMonth()-m.getMonth(),V=x.getDate()-m.getDate();return V<0&&(y--,V+=new Date(x.getFullYear(),x.getMonth(),0).getDate()),y<0&&(S--,y+=12),`${S} years, ${y} months, ${V} days`}case"YEAR":return a[0]?O(a[0]).getFullYear().toString():new Date().getFullYear().toString();case"MONTH":return a[0]?(O(a[0]).getMonth()+1).toString():(new Date().getMonth()+1).toString();case"DAY":return a[0]?O(a[0]).getDate().toString():new Date().getDate().toString();case"HOUR":return a[0]?O(a[0]).getHours().toString():new Date().getHours().toString();case"MINUTE":return a[0]?O(a[0]).getMinutes().toString():new Date().getMinutes().toString();case"SECOND":return a[0]?O(a[0]).getSeconds().toString():new Date().getSeconds().toString();case"MILLISECOND":return a[0]?O(a[0]).getMilliseconds().toString():new Date().getMilliseconds().toString();case"WEEKDAY":return((a[0]?O(a[0]):new Date).getDay()||7).toString();case"WEEKDAY_NAME":{let m=a[0]?O(a[0]):new Date;return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][m.getDay()]}case"WEEKDAY_SHORT":{let m=a[0]?O(a[0]):new Date;return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][m.getDay()]}case"WEEK_NUMBER":{let m=a[0]?O(a[0]):new Date,x=new Date(m.getFullYear(),0,1);return Math.ceil(((m.getTime()-x.getTime())/864e5+x.getDay()+1)/7).toString()}case"QUARTER":{let m=a[0]?O(a[0]):new Date;return(Math.floor(m.getMonth()/3)+1).toString()}case"MONTH_NAME":{let m=a[0]?O(a[0]):new Date;return["January","February","March","April","May","June","July","August","September","October","November","December"][m.getMonth()]}case"MONTH_SHORT":{let m=a[0]?O(a[0]):new Date;return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m.getMonth()]}case"DAY_OF_YEAR":{let m=a[0]?O(a[0]):new Date,x=new Date(m.getFullYear(),0,0);return Math.floor((m.getTime()-x.getTime())/864e5).toString()}case"DAYS_IN_MONTH":{let m=a[0]?O(a[0]):new Date;return new Date(m.getFullYear(),m.getMonth()+1,0).getDate().toString()}case"DAYS_IN_YEAR":{let x=(a[0]?O(a[0]):new Date).getFullYear();return(x%4===0&&x%100!==0||x%400===0?366:365).toString()}case"IS_LEAP_YEAR":{let m=a[0]?O(a[0]).getFullYear():new Date().getFullYear();return(m%4===0&&m%100!==0||m%400===0).toString()}case"START_OF_DAY":{let m=new Date(a[0]?O(a[0]):new Date);return m.setHours(0,0,0,0),p==="DATETIME"?m:this.formatDateTime(m)}case"END_OF_DAY":{let m=new Date(a[0]?O(a[0]):new Date);return m.setHours(23,59,59,999),p==="DATETIME"?m:this.formatDateTime(m)}case"START_OF_WEEK":{let m=new Date(a[0]?O(a[0]):new Date),x=m.getDay()||7;return m.setDate(m.getDate()-x+1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_WEEK":{let m=new Date(a[0]?O(a[0]):new Date),x=m.getDay()||7;return m.setDate(m.getDate()+(7-x)),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"START_OF_MONTH":{let m=new Date(a[0]?O(a[0]):new Date);return m.setDate(1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_MONTH":{let m=new Date(a[0]?O(a[0]):new Date);return m.setMonth(m.getMonth()+1,0),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"START_OF_QUARTER":{let m=new Date(a[0]?O(a[0]):new Date);return m.setMonth(Math.floor(m.getMonth()/3)*3,1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_QUARTER":{let m=new Date(a[0]?O(a[0]):new Date);return m.setMonth(Math.floor(m.getMonth()/3)*3+3,0),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"START_OF_YEAR":{let m=new Date(a[0]?O(a[0]):new Date);return m.setMonth(0,1),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"END_OF_YEAR":{let m=new Date(a[0]?O(a[0]):new Date);return m.setMonth(11,31),p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"IS_WEEKEND":{let m=(a[0]?O(a[0]):new Date).getDay();return(m===0||m===6).toString()}case"IS_WEEKDAY":{let m=(a[0]?O(a[0]):new Date).getDay();return(m!==0&&m!==6).toString()}case"IS_TODAY":{let m=a[0]?O(a[0]):new Date,x=new Date;return(m.toDateString()===x.toDateString()).toString()}case"IS_YESTERDAY":{let m=a[0]?O(a[0]):new Date,x=new Date;return x.setDate(x.getDate()-1),(m.toDateString()===x.toDateString()).toString()}case"IS_TOMORROW":{let m=a[0]?O(a[0]):new Date,x=new Date;return x.setDate(x.getDate()+1),(m.toDateString()===x.toDateString()).toString()}case"IS_PAST":return((a[0]?O(a[0]):new Date)<new Date).toString();case"IS_FUTURE":return((a[0]?O(a[0]):new Date)>new Date).toString();case"IS_THIS_WEEK":{let m=a[0]?O(a[0]):new Date,x=new Date,S=new Date(x);S.setDate(x.getDate()-(x.getDay()||7)+1);let y=new Date(S);return y.setDate(S.getDate()+6),(m>=S&&m<=y).toString()}case"IS_THIS_MONTH":{let m=a[0]?O(a[0]):new Date,x=new Date;return(m.getMonth()===x.getMonth()&&m.getFullYear()===x.getFullYear()).toString()}case"IS_THIS_YEAR":return((a[0]?O(a[0]):new Date).getFullYear()===new Date().getFullYear()).toString();case"IS_SAME_DAY":return(O(a[0]).toDateString()===O(a[1]).toDateString()).toString();case"IS_BEFORE":return(O(a[0])<O(a[1])).toString();case"IS_AFTER":return(O(a[0])>O(a[1])).toString();case"IS_BETWEEN_DATES":{let m=O(a[0]),x=O(a[1]),S=O(a[2]);return(m>=x&&m<=S).toString()}case"BUSINESS_DAYS":{let m=O(a[0]),x=O(a[1]),S=0,y=new Date(m);for(;y<=x;){let V=y.getDay();V!==0&&V!==6&&S++,y.setDate(y.getDate()+1)}return S.toString()}case"ADD_BUSINESS_DAYS":{let m=new Date(a[0]?O(a[0]):new Date),x=k(a[1]);for(;x>0;)m.setDate(m.getDate()+1),m.getDay()!==0&&m.getDay()!==6&&x--;return p==="DATE"||p==="DATETIME"?m:this.formatDate(m)}case"RELATIVE_TIME":{let m=a[0]?O(a[0]):new Date,x=Date.now()-m.getTime(),S=Math.abs(x),y=x<0;return S<6e4?y?"in a few seconds":"just now":S<36e5?`${y?"in ":""}${Math.floor(S/6e4)} minutes${y?"":" ago"}`:S<864e5?`${y?"in ":""}${Math.floor(S/36e5)} hours${y?"":" ago"}`:`${y?"in ":""}${Math.floor(S/864e5)} days${y?"":" ago"}`}case"ISO_STRING":return(a[0]?O(a[0]):new Date).toISOString();case"CURRENT_DATE":return this.formatDate(new Date);case"CURRENT_TIME":return new Date().toTimeString().split(" ")[0];case"CURRENT_DATETIME":return this.formatDateTime(new Date);case"CURRENT_YEAR":return new Date().getFullYear().toString();case"CURRENT_MONTH":return(new Date().getMonth()+1).toString();case"IF":return this.evaluateCondition(a[0])?a[1]:a[2];case"IFS":{for(let m=0;m<a.length-1;m+=2)if(this.evaluateCondition(a[m]))return a[m+1];return a.length%2===1?a[a.length-1]:""}case"SWITCH":{let m=a[0];for(let x=1;x<a.length-1;x+=2)if(m===a[x])return a[x+1];return a.length%2===0?a[a.length-1]:""}case"AND":return a.every(m=>U(m)||this.evaluateCondition(m)).toString();case"OR":return a.some(m=>U(m)||this.evaluateCondition(m)).toString();case"NOT":return(!U(a[0])).toString();case"XOR":return(U(a[0])!==U(a[1])).toString();case"NAND":return(!(U(a[0])&&U(a[1]))).toString();case"NOR":return(!(U(a[0])||U(a[1]))).toString();case"IS_EMPTY":return(!a[0]||g(a[0]).trim()==="").toString();case"IS_NOT_EMPTY":return(a[0]&&g(a[0]).trim()!=="").toString();case"IS_NULL":return(a[0]===null||a[0]===void 0||a[0]==="").toString();case"IS_NOT_NULL":return(a[0]!==null&&a[0]!==void 0&&a[0]!=="").toString();case"IS_BLANK":return(!a[0]||g(a[0]).trim()==="").toString();case"IS_TRUE":return U(a[0]).toString();case"IS_FALSE":return(!U(a[0])).toString();case"EQUALS":return(a[0]===a[1]).toString();case"EQUALS_IGNORE_CASE":return(g(a[0]).toLowerCase()===g(a[1]).toLowerCase()).toString();case"NOT_EQUALS":return(a[0]!==a[1]).toString();case"GREATER_THAN":return(v(a[0])>v(a[1])).toString();case"GREATER_THAN_OR_EQUAL":return(v(a[0])>=v(a[1])).toString();case"LESS_THAN":return(v(a[0])<v(a[1])).toString();case"LESS_THAN_OR_EQUAL":return(v(a[0])<=v(a[1])).toString();case"BETWEEN":return(v(a[0])>=v(a[1])&&v(a[0])<=v(a[2])).toString();case"NOT_BETWEEN":return(v(a[0])<v(a[1])||v(a[0])>v(a[2])).toString();case"IN":try{return JSON.parse(a[1]).includes(a[0]).toString()}catch{return"false"}case"NOT_IN":try{return(!JSON.parse(a[1]).includes(a[0])).toString()}catch{return"true"}case"IS_NUMBER":return(!isNaN(parseFloat(a[0]))&&isFinite(v(a[0]))).toString();case"IS_INTEGER":return Number.isInteger(v(a[0])).toString();case"IS_DECIMAL":return(v(a[0])%1!==0).toString();case"IS_POSITIVE":return(v(a[0])>0).toString();case"IS_NEGATIVE":return(v(a[0])<0).toString();case"IS_ZERO":return(v(a[0])===0).toString();case"IS_EVEN":return(k(a[0])%2===0).toString();case"IS_ODD":return(k(a[0])%2!==0).toString();case"IS_TEXT":return(typeof a[0]=="string").toString();case"IS_DATE":return(!isNaN(new Date(a[0]).getTime())).toString();case"IS_BOOLEAN":return(a[0]==="true"||a[0]==="false"||typeof a[0]=="boolean").toString();case"IS_EMAIL":return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g(a[0])).toString();case"IS_URL":try{return new URL(g(a[0])),"true"}catch{return"false"}case"IS_PHONE":return/^[\d\s\-\+\(\)]{7,20}$/.test(g(a[0])).toString();case"IS_UUID":return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(g(a[0])).toString();case"IS_ALPHANUMERIC":return/^[a-zA-Z0-9]+$/.test(g(a[0])).toString();case"IS_ALPHA":return/^[a-zA-Z]+$/.test(g(a[0])).toString();case"IS_NUMERIC":return/^[0-9]+$/.test(g(a[0])).toString();case"IS_UPPERCASE":return(g(a[0])===g(a[0]).toUpperCase()).toString();case"IS_LOWERCASE":return(g(a[0])===g(a[0]).toLowerCase()).toString();case"MATCHES_PATTERN":try{return new RegExp(g(a[1])).test(g(a[0])).toString()}catch{return"false"}case"HAS_LENGTH":return(g(a[0]).length===k(a[1])).toString();case"HAS_MIN_LENGTH":return(g(a[0]).length>=k(a[1])).toString();case"HAS_MAX_LENGTH":return(g(a[0]).length<=k(a[1])).toString();case"CURRENT_USER":return o?.fullName||"";case"CURRENT_USER_EMAIL":return o?.email||"";case"CURRENT_USER_ID":return o?.userId||"";case"CURRENT_USERNAME":return o?.username||"";case"CURRENT_USER_PHONE":return o?.phoneNumber||"";case"CURRENT_USER_DEPARTMENT":return o?.department||"";case"CURRENT_USER_STAFFID":return o?.staffId||"";case"CURRENT_USER_ROLE":return o?.userType||"";case"CURRENT_USER_SBU":return o?.sbuIds?.[0]||"";case"CURRENT_USER_BRANCH":return o?.branchIds?.[0]||"";case"UUID":return this.generateUUID();case"SHORT_UUID":return this.generateUUID().substring(0,8);case"NANO_ID":{let m=k(a[0])||21,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",S="";for(let y=0;y<m;y++)S+=x.charAt(Math.floor(Math.random()*x.length));return S}case"SEQUENCE":return g(a[0])+Date.now().toString().slice(-8);case"SEQUENCE_PADDED":{let m=g(a[0]),x=k(a[1])||6;return m+Date.now().toString().slice(-x).padStart(x,"0")}case"RANDOM_STRING":{let m=k(a[0])||10,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",S="";for(let y=0;y<m;y++)S+=x.charAt(Math.floor(Math.random()*x.length));return S}case"RANDOM_CODE":{let m=k(a[0])||6,x=g(a[1]).toUpperCase(),S="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";x==="ALPHA"?S="ABCDEFGHIJKLMNOPQRSTUVWXYZ":x==="NUMERIC"&&(S="0123456789");let y="";for(let V=0;V<m;V++)y+=S.charAt(Math.floor(Math.random()*S.length));return y}case"COALESCE":case"DEFAULT":return a.find(m=>m&&g(m).trim()!=="")||"";case"NULLIF":return a[0]===a[1]?"":a[0];case"NVL":case"IFNULL":return a[0]===null||a[0]===void 0||a[0]===""?a[1]:a[0];case"FORMAT_CURRENCY":{let m=v(a[0]),x=g(a[1])||"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:x}).format(m)}catch{return m.toFixed(2)}}case"TO_NUMBER":return v(a[0]).toString();case"TO_TEXT":return g(a[0]);case"TO_BOOLEAN":return U(a[0]).toString();case"TO_DATE":return this.formatDate(O(a[0]));case"TO_ARRAY":return JSON.stringify(g(a[0]).split(",").map(m=>m.trim()));case"TO_JSON":try{return JSON.stringify(a[0])}catch{return""}case"FROM_JSON":try{return JSON.parse(g(a[0]))}catch{return a[0]}case"FIELD_VALUE":{let m=g(a[0]);return this.getFieldValue(m)||""}case"FIELD_LABEL":{let m=g(a[0]);return this.fields.find(S=>S.name===m)?.label||m}case"GET":try{let m=g(a[1]).split("."),x=JSON.parse(g(a[0]));for(let S of m)x=x?.[S];return x??a[2]??""}catch{return a[2]??""}case"KEYS":try{return JSON.stringify(Object.keys(JSON.parse(g(a[0]))))}catch{return"[]"}case"VALUES":try{return JSON.stringify(Object.values(JSON.parse(g(a[0]))))}catch{return"[]"}case"ARRAY_LENGTH":try{return JSON.parse(g(a[0])).length.toString()}catch{return"0"}case"ARRAY_FIRST":try{return JSON.parse(g(a[0]))[0]??""}catch{return""}case"ARRAY_LAST":try{let m=JSON.parse(g(a[0]));return m[m.length-1]??""}catch{return""}case"ARRAY_JOIN":try{return JSON.parse(g(a[0])).join(g(a[1]))}catch{return""}case"ARRAY_SUM":try{return JSON.parse(g(a[0])).reduce((m,x)=>m+v(x),0).toString()}catch{return"0"}case"ARRAY_AVERAGE":try{let m=JSON.parse(g(a[0]));return(m.reduce((x,S)=>x+v(S),0)/m.length).toString()}catch{return"0"}case"ARRAY_MIN":try{return Math.min(...JSON.parse(g(a[0])).map(v)).toString()}catch{return"0"}case"ARRAY_MAX":try{return Math.max(...JSON.parse(g(a[0])).map(v)).toString()}catch{return"0"}case"ARRAY_UNIQUE":try{return JSON.stringify([...new Set(JSON.parse(g(a[0])))])}catch{return"[]"}case"ARRAY_REVERSE":try{return JSON.stringify(JSON.parse(g(a[0])).reverse())}catch{return"[]"}case"ARRAY_SORT":try{let m=JSON.parse(g(a[0])),x=g(a[1]).toUpperCase();return JSON.stringify(m.sort((S,y)=>x==="DESC"?y>S?1:-1:S>y?1:-1))}catch{return"[]"}case"ARRAY_INCLUDES":try{return JSON.parse(g(a[0])).includes(a[1]).toString()}catch{return"false"}case"ARRAY_INDEX_OF":try{return JSON.parse(g(a[0])).indexOf(a[1]).toString()}catch{return"-1"}case"TEMPLATE":{let m=g(a[0]);try{let x=typeof a[1]=="object"?a[1]:JSON.parse(g(a[1]));return m.replace(/\{\{(\w+)\}\}/g,(S,y)=>x[y]??"")}catch{return m}}case"BASE64_ENCODE":try{return btoa(g(a[0]))}catch{return""}case"BASE64_DECODE":try{return atob(g(a[0]))}catch{return""}case"URL_ENCODE":return encodeURIComponent(g(a[0]));case"URL_DECODE":return decodeURIComponent(g(a[0]));case"TRY":try{return this.evaluateFunction(g(a[0]),t)}catch{return a[1]||""}case"TYPEOF":return typeof a[0];case"CLONE":try{return JSON.stringify(JSON.parse(JSON.stringify(a[0])))}catch{return a[0]}case"COMPARE":return a[0]>a[1]?"1":a[0]<a[1]?"-1":"0";case"EQUALS_DEEP":try{return(JSON.stringify(a[0])===JSON.stringify(a[1])).toString()}catch{return"false"}case"WORKFLOW_ID":return this.workflow?.id||"";case"WORKFLOW_NAME":return this.workflow?.name||"";case"INSTANCE_ID":return this.instanceId||"";case"ENVIRONMENT":return"PROD";case"VERSION":return"1.0.0";case"LOCALE":return navigator.language||"en-US";case"TIMEZONE":return Intl.DateTimeFormat().resolvedOptions().timeZone;case"BROWSER":return navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Unknown";case"PLATFORM":return navigator.platform||"Unknown";case"IS_MOBILE":return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent).toString();case"SCREEN_WIDTH":return window.screen.width.toString();case"SCREEN_HEIGHT":return window.screen.height.toString();default:return e}}formatDateWithPattern(e,t){if(!e||isNaN(e.getTime()))return"";let o=E=>E.toString().padStart(2,"0"),s={YYYY:e.getFullYear().toString(),YY:e.getFullYear().toString().slice(-2),MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],MM:o(e.getMonth()+1),DD:o(e.getDate()),ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],HH:o(e.getHours()),mm:o(e.getMinutes()),ss:o(e.getSeconds())},p=t;for(let[E,h]of Object.entries(s))p=p.replace(new RegExp(E,"g"),h);return p}addToDate(e,t,o){let s=new Date(e);switch(o){case"years":s.setFullYear(s.getFullYear()+t);break;case"months":s.setMonth(s.getMonth()+t);break;case"weeks":s.setDate(s.getDate()+t*7);break;case"days":s.setDate(s.getDate()+t);break;case"hours":s.setHours(s.getHours()+t);break;case"minutes":s.setMinutes(s.getMinutes()+t);break;case"seconds":s.setSeconds(s.getSeconds()+t);break}return this.formatDate(s)}dateDiff(e,t,o){let s=Math.abs(t.getTime()-e.getTime());switch(o){case"years":return Math.floor(s/(365.25*24*60*60*1e3)).toString();case"months":return Math.floor(s/(30.44*24*60*60*1e3)).toString();case"weeks":return Math.floor(s/(7*24*60*60*1e3)).toString();case"days":return Math.floor(s/(24*60*60*1e3)).toString();case"hours":return Math.floor(s/(60*60*1e3)).toString();case"minutes":return Math.floor(s/(60*1e3)).toString();case"seconds":return Math.floor(s/1e3).toString();default:return Math.floor(s/(24*60*60*1e3)).toString()}}parseStringArg(e,t=!0){let o=e.replace(/^["']|["']$/g,"").trim();if(t&&!e.startsWith('"')&&!e.startsWith("'")){let s=this.getFieldValue(o);if(s!==null)return String(s)}return o}parseArgs(e,t=!0){let o=[],s="",p=!1,E="";for(let h of e)(h==='"'||h==="'")&&!p?(p=!0,E=h,s+=h):h===E&&p?(p=!1,s+=h,E=""):h===","&&!p?(o.push(this.resolveArgValue(s.trim(),t)),s=""):s+=h;return s&&o.push(this.resolveArgValue(s.trim(),t)),o}resolveArgValue(e,t){if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);if(t){let o=this.getFieldValue(e);if(o!==null)return String(o)}return e}getFieldValue(e){if(!this.form)return null;let t=this.form.get(e);return t?t.value:null}generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}formatDate(e){return e.toISOString().split("T")[0]}formatDateTime(e){return e.toISOString().slice(0,16)}onFileSelect(e,t){let o=e.target;o.files&&(this.selectedFiles[t]=Array.from(o.files))}isCheckboxOptionSelected(e,t){if(!this.checkboxGroupValues[e]){let o=this.form.get(e)?.value;o?this.checkboxGroupValues[e]=Array.isArray(o)?o:o.split(",").filter(s=>s):this.checkboxGroupValues[e]=[]}return this.checkboxGroupValues[e].includes(t)}onCheckboxGroupChange(e,t,o){this.checkboxGroupValues[e]||(this.checkboxGroupValues[e]=[]),o?this.checkboxGroupValues[e].includes(t)||this.checkboxGroupValues[e].push(t):this.checkboxGroupValues[e]=this.checkboxGroupValues[e].filter(s=>s!==t),this.form.get(e)?.setValue(this.checkboxGroupValues[e].join(",")),this.form.get(e)?.markAsTouched()}imagePreviews={};getStarArray(e){let t=e.ratingMax||5;return Array.from({length:t},(o,s)=>s+1)}getRatingValue(e){let t=this.form.get(e.name)?.value;return t?parseInt(t,10):0}setRating(e,t){this.isFieldReadonly(e)||(this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched())}getImagePreview(e){return this.imagePreviews[e.name]||null}onImageSelect(e,t){let o=e.target;if(o.files&&o.files[0]){let s=o.files[0],p=new FileReader;p.onload=E=>{this.imagePreviews[t.name]=E.target.result,this.form.get(t.name)?.setValue(E.target.result),this.form.get(t.name)?.markAsTouched()},p.readAsDataURL(s)}}onAttachmentSelect(e){let t=e.target;t.files&&this.attachments.push(...Array.from(t.files))}removeAttachment(e){this.attachments.splice(e,1)}formatFileSize(e){if(e===0)return"0 Bytes";let t=1024,o=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+o[s]}goBack(){this.router.navigate(["/workflows",this.workflowCode,"instances"])}saveDraft(){this.submitForm(!0)}onSubmit(){if(this.hasAttemptedSubmit=!0,this.validateAllFields(),this.form.invalid){this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});return}if(this.pendingUniqueChecks.size>0){this.snackBar.open("Please wait for validation checks to complete","Close",{duration:3e3});return}if(Object.values(this.validationErrors).some(t=>t!==null)){this.snackBar.open("Please fix validation errors before submitting","Close",{duration:3e3});return}this.submitForm(!1)}submitForm(e){this.submitting=!0;let t=new FormData;t.append("workflowCode",this.workflowCode),t.append("isDraft",e.toString());let o={};this.fields.forEach(p=>{let E=this.form.value[p.name];p.type==="USER"&&E&&typeof E=="object"&&E.id&&(E=E.id),o[p.name]=E}),t.append("fieldValues",JSON.stringify(o)),this.attachments.forEach((p,E)=>{t.append("attachments",p)}),Object.keys(this.selectedFiles).forEach(p=>{this.selectedFiles[p].forEach(E=>{t.append(`files_${p}`,E)})}),(this.isEditMode&&this.instanceId?this.workflowService.updateInstance(this.instanceId,t):this.workflowService.submitInstance(t)).subscribe({next:p=>{if(this.submitting=!1,p.success){let E=this.isEditMode?e?"Draft updated successfully":"Submission updated successfully":e?"Draft saved successfully":"Submission created successfully";this.snackBar.open(E,"Close",{duration:3e3}),this.router.navigate(["/workflows",this.workflowCode,"instances"])}},error:p=>{this.submitting=!1,this.snackBar.open(p.error?.message||"Submission failed","Close",{duration:3e3})}})}loadUsers(){this.userService.getUsers().subscribe({next:e=>{e.success&&e.data&&(this.allUsers=e.data)},error:()=>{console.error("Failed to load users")}})}onUserSearch(e,t){let s=e.target.value?.toLowerCase()||"";if(this.userSearchTerms[t]=s,!s){this.filteredUsersMap[t]=[];return}this.filteredUsersMap[t]=this.allUsers.filter(p=>{let E=`${p.firstName} ${p.lastName}`.toLowerCase(),h=(p.email||"").toLowerCase(),P=(p.username||"").toLowerCase();return E.includes(s)||h.includes(s)||P.includes(s)}).slice(0,10)}getFilteredUsers(e){return this.filteredUsersMap[e]||[]}displayUserFn=e=>e?typeof e=="string"?e:`${e.firstName} ${e.lastName}`:"";onUserSelected(e,t){let o=e.option.value;this.selectedUsers[t]=o,this.form.get(t)?.setValue(o),this.filteredUsersMap[t]=[],this.userSearchTerms[t]=""}getUserFieldValue(e){let t=this.form.get(e)?.value;return t?typeof t=="object"&&t.id?t.id:t:""}signatureDrawing={};signatureContexts={};startSignature(e,t){if(this.isFieldReadonly(t))return;let o=e.target,s=o.getContext("2d");if(!s)return;this.signatureDrawing[t.name]=!0,this.signatureContexts[t.name]=s,o.width!==o.offsetWidth&&(o.width=o.offsetWidth,o.height=o.offsetHeight),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round";let p=o.getBoundingClientRect();s.beginPath(),s.moveTo(e.clientX-p.left,e.clientY-p.top)}drawSignature(e,t){if(!this.signatureDrawing[t.name]||this.isFieldReadonly(t))return;let o=this.signatureContexts[t.name];if(!o)return;let p=e.target.getBoundingClientRect();o.lineTo(e.clientX-p.left,e.clientY-p.top),o.stroke()}endSignature(e){if(this.signatureDrawing[e.name]){this.signatureDrawing[e.name]=!1;let t=document.querySelector(`canvas[data-field="${e.name}"]`);if(t){let o=t.toDataURL("image/png");this.form.get(e.name)?.setValue(o),this.form.get(e.name)?.markAsTouched()}}}startSignatureTouch(e,t){if(this.isFieldReadonly(t))return;e.preventDefault();let o=e.target,s=o.getContext("2d");if(!s)return;this.signatureDrawing[t.name]=!0,this.signatureContexts[t.name]=s,o.width!==o.offsetWidth&&(o.width=o.offsetWidth,o.height=o.offsetHeight),s.strokeStyle="#000",s.lineWidth=2,s.lineCap="round",s.lineJoin="round";let p=o.getBoundingClientRect(),E=e.touches[0];s.beginPath(),s.moveTo(E.clientX-p.left,E.clientY-p.top)}drawSignatureTouch(e,t){if(!this.signatureDrawing[t.name]||this.isFieldReadonly(t))return;e.preventDefault();let o=this.signatureContexts[t.name];if(!o)return;let p=e.target.getBoundingClientRect(),E=e.touches[0];o.lineTo(E.clientX-p.left,E.clientY-p.top),o.stroke()}clearSignature(e){let t=document.querySelector(`canvas[data-field="${e.name}"]`);if(t){let o=t.getContext("2d");o&&o.clearRect(0,0,t.width,t.height),this.form.get(e.name)?.setValue(""),this.form.get(e.name)?.markAsTouched()}}execRichTextCommand(e){document.execCommand(e,!1)}onRichTextInput(e,t){let o=e.target;this.form.get(t.name)?.setValue(o.innerHTML)}onRichTextBlur(e,t){let o=e.target;this.form.get(t.name)?.setValue(o.innerHTML),this.form.get(t.name)?.markAsTouched()}getRichTextValue(e){return this.form.get(e.name)?.value||""}iconPickerOpen={};iconSearchText={};availableIcons=["home","search","settings","favorite","star","check_circle","delete","edit","add","remove","close","menu","more_vert","more_horiz","refresh","sync","visibility","visibility_off","lock","lock_open","person","people","group","email","phone","chat","message","notifications","alarm","schedule","event","calendar_today","date_range","access_time","timer","hourglass_empty","folder","folder_open","file_copy","attach_file","cloud","cloud_upload","cloud_download","image","photo","camera","videocam","mic","volume_up","music_note","play_arrow","pause","stop","skip_next","skip_previous","replay","location_on","map","directions","navigation","explore","public","language","shopping_cart","store","payment","credit_card","account_balance","receipt","work","business","business_center","apartment","domain","corporate_fare","school","science","biotech","psychology","engineering","build","construction","handyman","plumbing","electrical_services","computer","laptop","smartphone","tablet","desktop_windows","devices","wifi","bluetooth","signal_wifi_4_bar","network_check","router","code","terminal","bug_report","memory","storage","dns","security","verified_user","shield","admin_panel_settings","policy","analytics","bar_chart","pie_chart","show_chart","trending_up","trending_down","assessment","leaderboard","insights","query_stats","local_shipping","flight","train","directions_car","directions_bus","two_wheeler","restaurant","local_cafe","local_bar","fastfood","lunch_dining","health_and_safety","medical_services","vaccines","medication","healing","pets","park","nature","eco","grass","forest","water_drop","sports_soccer","sports_basketball","sports_tennis","fitness_center","pool","thumb_up","thumb_down","sentiment_satisfied","sentiment_dissatisfied","mood","lightbulb","tips_and_updates","help","info","warning","error","report"];toggleIconPicker(e){this.isFieldReadonly(e)||(this.iconPickerOpen[e.name]=!this.iconPickerOpen[e.name],this.iconPickerOpen[e.name]&&(this.iconSearchText[e.name]=""))}isIconPickerOpen(e){return this.iconPickerOpen[e.name]||!1}selectIcon(e,t){this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched(),this.iconPickerOpen[e.name]=!1}getSelectedIcon(e){return this.form.get(e.name)?.value||"help_outline"}getFilteredIcons(e){let t=(this.iconSearchText[e.name]||"").toLowerCase();return t?this.availableIcons.filter(o=>o.includes(t)):this.availableIcons}onIconSearch(e,t){let o=e.target;this.iconSearchText[t.name]=o.value}scanBarcode(e){this.snackBar.open("Barcode scanning requires camera access. Please enter the code manually.","OK",{duration:5e3})}gettingLocation={};locationData={};getLocationLat(e){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string"){let o=t.split(",");if(o.length>=2)return parseFloat(o[0])||null}return this.locationData[e.name]?.lat||null}getLocationLng(e){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string"){let o=t.split(",");if(o.length>=2)return parseFloat(o[1])||null}return this.locationData[e.name]?.lng||null}onLocationLatChange(e,t){let o=e.target,s=parseFloat(o.value)||null;this.locationData[t.name]||(this.locationData[t.name]={lat:null,lng:null}),this.locationData[t.name].lat=s,this.updateLocationValue(t)}onLocationLngChange(e,t){let o=e.target,s=parseFloat(o.value)||null;this.locationData[t.name]||(this.locationData[t.name]={lat:null,lng:null}),this.locationData[t.name].lng=s,this.updateLocationValue(t)}updateLocationValue(e){let t=this.locationData[e.name];t&&t.lat!==null&&t.lng!==null?this.form.get(e.name)?.setValue(`${t.lat},${t.lng}`):this.form.get(e.name)?.setValue(""),this.form.get(e.name)?.markAsTouched()}getCurrentLocation(e){if(!this.isFieldReadonly(e)){if(!navigator.geolocation){this.snackBar.open("Geolocation is not supported by your browser","OK",{duration:3e3});return}this.gettingLocation[e.name]=!0,navigator.geolocation.getCurrentPosition(t=>{let o=t.coords.latitude,s=t.coords.longitude;this.locationData[e.name]={lat:o,lng:s},this.form.get(e.name)?.setValue(`${o},${s}`),this.form.get(e.name)?.markAsTouched(),this.gettingLocation[e.name]=!1,this.cdr.detectChanges()},t=>{this.gettingLocation[e.name]=!1;let o="Could not get location";switch(t.code){case t.PERMISSION_DENIED:o="Location permission denied";break;case t.POSITION_UNAVAILABLE:o="Location information unavailable";break;case t.TIMEOUT:o="Location request timed out";break}this.snackBar.open(o,"OK",{duration:3e3}),this.cdr.detectChanges()},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}}isGettingLocation(e){return this.gettingLocation[e.name]||!1}getLocationDisplay(e){let t=this.getLocationLat(e),o=this.getLocationLng(e);return t!==null&&o!==null?`${t.toFixed(6)}, ${o.toFixed(6)}`:"No location set"}tableData={};getTableColumns(e){if(e.options&&typeof e.options=="string")try{let t=JSON.parse(e.options);if(Array.isArray(t))return t.map(o=>({name:o.name||o.value||"column",label:o.label||o.name||"Column",type:o.type||"text"}))}catch{}return[{name:"col1",label:"Column 1",type:"text"},{name:"col2",label:"Column 2",type:"text"},{name:"col3",label:"Column 3",type:"text"}]}getTableRows(e){if(!this.tableData[e.name]){let t=this.form.get(e.name)?.value;if(t&&typeof t=="string")try{this.tableData[e.name]=JSON.parse(t)}catch{this.tableData[e.name]=[]}else Array.isArray(t)?this.tableData[e.name]=t:this.tableData[e.name]=[]}return this.tableData[e.name]}addTableRow(e){if(this.isFieldReadonly(e))return;this.tableData[e.name]||(this.tableData[e.name]=[]);let t=this.getTableColumns(e),o={};t.forEach(s=>{o[s.name]=""}),this.tableData[e.name].push(o),this.updateTableValue(e)}removeTableRow(e,t){this.isFieldReadonly(e)||this.tableData[e.name]&&(this.tableData[e.name].splice(t,1),this.updateTableValue(e))}onTableCellChange(e,t,o,s){if(this.isFieldReadonly(t))return;let p=e.target;this.tableData[t.name]&&this.tableData[t.name][o]&&(this.tableData[t.name][o][s]=p.value,this.updateTableValue(t))}updateTableValue(e){let t=JSON.stringify(this.tableData[e.name]||[]);this.form.get(e.name)?.setValue(t),this.form.get(e.name)?.markAsTouched()}static \u0275fac=function(t){return new(t||n)(L(ve),L(ot),L(it),L(Me),L(ce),L(de),L(Ye),L(le))};static \u0275cmp=re({type:n,selectors:[["app-workflow-form"]],decls:12,vars:3,consts:[["picker",""],["auto","matAutocomplete"],["imageInput",""],["groupPicker",""],["autoGroup","matAutocomplete"],["imageInputGroup",""],["fileInput",""],[1,"workflow-form-container"],[1,"header"],["mat-icon-button","",3,"click"],[1,"subtitle"],[1,"loading"],[3,"formGroup"],["diameter","40"],[3,"ngSubmit","formGroup"],[1,"form-card"],[1,"form-card","group-card"],[1,"form-actions"],[1,"form-actions","multi-step"],[1,"step-indicator"],[1,"screen-header"],[1,"step",3,"click"],[1,"step-circle"],[1,"step-label"],[1,"step-connector",3,"completed"],[1,"step-connector"],[1,"fields-grid"],[1,"field-wrapper",3,"grid-column"],[1,"field-wrapper"],[1,"field-container"],[1,"radio-field",3,"has-error"],[1,"field-container","checkbox-group-field",3,"has-error"],[1,"file-field",3,"has-error"],["type","hidden",3,"formControlName"],[1,"label-field"],[1,"divider-field"],[1,"toggle-field"],[1,"yes-no-field",3,"has-error"],[1,"rating-field",3,"has-error"],[1,"slider-field",3,"has-error"],[1,"color-field",3,"has-error"],[1,"image-field",3,"has-error"],[1,"signature-field",3,"has-error"],[1,"rich-text-field",3,"has-error"],[1,"icon-field",3,"has-error"],[1,"barcode-field",3,"has-error"],[1,"location-field",3,"has-error"],[1,"table-field",3,"has-error"],["appearance","outline",1,"full-width"],[1,"required-asterisk"],["matInput","",3,"formControlName","placeholder","readonly"],[1,"validation-error"],["matInput","","rows","4",3,"formControlName","placeholder","readonly"],["matInput","","type","number",3,"formControlName","placeholder","readonly"],["matPrefix",""],["matInput","","type","email",3,"formControlName","placeholder","readonly"],["matInput","","type","tel",3,"formControlName","placeholder","readonly"],["matInput","","type","password",3,"formControlName","placeholder","readonly"],["matInput","",3,"matDatepicker","formControlName","readonly"],["matIconSuffix","",3,"for","disabled"],[3,"disabled"],["matInput","","type","datetime-local",3,"formControlName","readonly"],[3,"formControlName","placeholder","disabled"],[3,"value"],["multiple","",3,"formControlName","placeholder","disabled"],[1,"radio-field"],[1,"field-label"],[3,"formControlName","disabled"],[3,"value","disabled"],[1,"field-container","checkbox-group-field"],[1,"checkbox-options"],[3,"checked","disabled"],[3,"change","checked","disabled"],[1,"file-field"],["type","file",3,"change","multiple","disabled"],[1,"file-list"],["matInput","","type","url",3,"formControlName","placeholder","readonly"],["matInput","",3,"input","formControlName","matAutocomplete","placeholder","readonly"],[3,"optionSelected","displayWith"],["disabled",""],[1,"user-option"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"label-text"],[1,"label-description"],[1,"divider-label"],[1,"yes-no-field"],["value","yes"],["value","no"],[1,"rating-field"],[1,"star-rating"],[3,"filled","readonly"],[3,"click"],["matInput","","type","time",3,"formControlName","readonly"],[1,"slider-field"],[3,"min","max","step","discrete","disabled"],["matSliderThumb","",3,"formControlName"],[1,"color-field"],["type","color",1,"color-input",3,"formControlName","disabled"],[1,"image-field"],[1,"image-upload-area"],["type","file","accept","image/*","hidden","",3,"change"],["mat-stroked-button","","type","button",3,"click","disabled"],[1,"image-preview",3,"src"],[1,"signature-field"],[1,"signature-pad-container"],[1,"signature-canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"signature-actions"],["mat-icon-button","","type","button","matTooltip","Clear signature",3,"click","disabled"],[1,"rich-text-field"],[1,"rich-text-editor"],[1,"rich-text-toolbar"],["mat-icon-button","","type","button","matTooltip","Bold",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Italic",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Underline",3,"click","disabled"],[1,"toolbar-divider"],["mat-icon-button","","type","button","matTooltip","Bullet list",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Numbered list",3,"click","disabled"],["contenteditable","true",1,"rich-text-content",3,"input","blur","innerHTML"],[1,"icon-field"],[1,"icon-picker"],[1,"selected-icon",3,"click"],[1,"dropdown-arrow"],[1,"icon-picker-dropdown"],["type","text","placeholder","Search icons...",1,"icon-search",3,"input","value"],[1,"icon-grid"],[1,"icon-option",3,"selected"],[1,"icon-option",3,"click"],[1,"barcode-field"],[1,"barcode-input"],["matInput","","placeholder","Enter or scan barcode...",3,"formControlName","readonly"],["mat-icon-button","","matSuffix","","type","button","matTooltip","Scan barcode",3,"click","disabled"],[1,"location-field"],[1,"location-input"],[1,"location-coords"],["appearance","outline",1,"coord-field"],["matInput","","type","number","step","any",3,"input","value","readonly"],["mat-icon-button","","type","button","matTooltip","Get current location",3,"click","disabled"],[1,"spinning"],[1,"location-preview"],[1,"table-field"],[1,"table-input"],[1,"data-table"],[1,"actions-col"],["mat-stroked-button","","type","button",1,"add-row-btn",3,"click","disabled"],["mat-icon-button","","type","button","matTooltip","Remove row",3,"click","disabled"],["type","text",1,"table-cell-input",3,"input","value","readonly"],[1,"empty-table"],[1,"checkbox-group-field",3,"has-error"],[1,"checkbox-group-field"],[1,"checkbox-group"],[3,"expanded","hideToggle"],["matInput","","rows","4",3,"formControlName","readonly"],["matInput","","type","number",3,"formControlName","readonly"],["multiple","",3,"formControlName","disabled"],["matTextPrefix",""],["matInput","","type","number","step","0.01",3,"formControlName","readonly"],["matInput","","type","email",3,"formControlName","readonly"],["matInput","","type","tel",3,"formControlName","readonly"],["matInput","","type","password",3,"formControlName","readonly"],["matInput","","type","url",3,"formControlName","readonly"],["matInput","",3,"formControlName","readonly"],[1,"attachment-area"],["type","file","multiple","","hidden","",3,"change"],["mat-stroked-button","","type","button",3,"click"],[1,"attachment-list"],[1,"attachment-item"],[1,"size"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20"],[1,"spacer"],["mat-raised-button","","color","primary","type","button",3,"click"]],template:function(t,o){t&1&&(_(0,"div",7)(1,"div",8)(2,"button",9),M("click",function(){return o.goBack()}),_(3,"mat-icon"),d(4,"arrow_back"),r()(),_(5,"div")(6,"h1"),d(7),r(),_(8,"p",10),d(9),r()()(),u(10,Tt,4,0,"div",11)(11,al,8,5,"form",12),r()),t&2&&(i(7),f(o.workflow==null?null:o.workflow.name),i(2),f(o.isEditMode?"Edit Submission":"New Submission"),i(),C(o.loading?10:o.workflow?11:-1))},dependencies:[_e,Ee,xe,Ce,ge,ue,fe,he,Fe,se,We,Oe,Pe,Re,Ie,ye,Ve,$e,De,Ae,Ne,Le,Ue,He,Ge,me,mt,dt,ct,st,pe,rt,at,gt,ft,xt,ke,Te,be,we,Se,et,je,Ke,Ze,Qe,ze,Be,qe,nt,tt,ut,pt,Ct,Xe,Je,_t,lt,vt,ht,Ft,wt,Et,St],styles:[".workflow-form-container[_ngcontent-%COMP%]{padding:1rem;max-width:1000px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.subtitle[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#666}.loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:3rem;color:#666}.form-card[_ngcontent-%COMP%]{margin-bottom:1rem}.group-card[_ngcontent-%COMP%]{padding:0}.group-card[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header{background:var(--form-field-header-bg, #1976d2)!important;color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header:hover{background:var(--form-field-header-bg, #1976d2)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-content{color:var(--form-field-header-color, #ffffff)!important}.group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header-title, .group-card[_ngcontent-%COMP%]     .mat-expansion-panel-header-description{color:var(--form-field-header-color, #ffffff)!important}.fields-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;padding:1rem 0}.field-wrapper[_ngcontent-%COMP%]{min-width:0}.full-width[_ngcontent-%COMP%]{width:100%}.field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-size:.875rem;color:#0009}.required[_ngcontent-%COMP%]{color:#f44336}.required-asterisk[_ngcontent-%COMP%]{color:#f44336;font-weight:700;margin-left:2px}.has-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .3s ease-in-out}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-2px)}75%{transform:translate(2px)}}.field-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem;margin-top:4px}.field-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column}.validation-error[_ngcontent-%COMP%]{color:#f44336;font-size:.75rem;margin-top:-16px;padding-left:14px;line-height:1.2}.field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .field-invalid[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border-color:#f44336!important}.field-invalid[_ngcontent-%COMP%]     .mat-mdc-floating-label{color:#f44336!important}.radio-field[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.radio-field[_ngcontent-%COMP%]   mat-radio-group.horizontal-layout[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:1rem}.file-field[_ngcontent-%COMP%], .checkbox-group-field[_ngcontent-%COMP%]{padding:.5rem 0}.checkbox-group-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;color:#000000de}.checkbox-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.checkbox-options.horizontal-layout[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;gap:1rem}.label-field[_ngcontent-%COMP%]{padding:1rem 0}.label-field[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin:0;color:#000000de}.label-field[_ngcontent-%COMP%]   .label-description[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:.25rem 0 0}.divider-field[_ngcontent-%COMP%]{padding:1rem 0;position:relative}.divider-field[_ngcontent-%COMP%]   .divider-label[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:0 1rem;color:#666;font-size:.875rem}.toggle-field[_ngcontent-%COMP%], .yes-no-field[_ngcontent-%COMP%]{padding:.5rem 0}.yes-no-field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.rating-field[_ngcontent-%COMP%]{padding:.5rem 0}.star-rating[_ngcontent-%COMP%]{display:flex;gap:.25rem}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#ffc107;font-size:28px;width:28px;height:28px;transition:transform .1s ease}.star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover:not(.readonly){transform:scale(1.1)}.star-rating[_ngcontent-%COMP%]   mat-icon.readonly[_ngcontent-%COMP%]{cursor:default}.star-rating[_ngcontent-%COMP%]   mat-icon.filled[_ngcontent-%COMP%]{color:#ffc107}.slider-field[_ngcontent-%COMP%]{padding:.5rem 0}.slider-field[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{width:100%}.color-field[_ngcontent-%COMP%]{padding:.5rem 0}.color-field[_ngcontent-%COMP%]   .color-input[_ngcontent-%COMP%]{width:60px;height:40px;border:1px solid #ccc;border-radius:4px;cursor:pointer;padding:4px}.image-field[_ngcontent-%COMP%]{padding:.5rem 0}.image-upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.5rem}.image-preview[_ngcontent-%COMP%]{max-width:200px;max-height:150px;margin-top:.5rem;border-radius:4px;border:1px solid #ddd}.signature-field[_ngcontent-%COMP%], .rich-text-field[_ngcontent-%COMP%], .icon-field[_ngcontent-%COMP%], .barcode-field[_ngcontent-%COMP%], .location-field[_ngcontent-%COMP%], .table-field[_ngcontent-%COMP%]{padding:.5rem 0}.signature-pad-container[_ngcontent-%COMP%]{position:relative;border:1px solid #ddd;border-radius:4px;background:#fff}.signature-canvas[_ngcontent-%COMP%]{width:100%;height:150px;cursor:crosshair;display:block;touch-action:none}.signature-actions[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px}.signature-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#ffffffe6}.rich-text-editor[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px;overflow:hidden}.rich-text-toolbar[_ngcontent-%COMP%]{display:flex;gap:.25rem;padding:.5rem;background:#f5f5f5;border-bottom:1px solid #ddd;flex-wrap:wrap}.rich-text-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:36px;width:36px;height:36px}.toolbar-divider[_ngcontent-%COMP%]{width:1px;background:#ddd;margin:0 .25rem}.rich-text-content[_ngcontent-%COMP%]{min-height:120px;padding:.75rem;outline:none;font-size:.875rem;line-height:1.5}.rich-text-content[_ngcontent-%COMP%]:focus{background:#fafafa}.rich-text-content[contenteditable=false][_ngcontent-%COMP%]{background:#f5f5f5;cursor:not-allowed}.icon-selector[_ngcontent-%COMP%]{position:relative}.selected-icon[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;width:60px;height:60px;border:2px solid #ddd;border-radius:8px;cursor:pointer;transition:all .2s;background:#fff}.selected-icon[_ngcontent-%COMP%]:hover:not(.disabled){border-color:#1976d2;background:#e3f2fd}.selected-icon.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.selected-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#333}.icon-picker-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px #00000026;padding:.75rem;width:320px;max-height:350px;overflow:hidden;display:flex;flex-direction:column}.icon-search[_ngcontent-%COMP%]{margin-bottom:.5rem}.icon-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:.875rem}.icon-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(8,1fr);gap:.25rem;overflow-y:auto;max-height:250px;padding:.25rem}.icon-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border-radius:4px;cursor:pointer;transition:all .15s}.icon-option[_ngcontent-%COMP%]:hover{background:#e3f2fd}.icon-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.icon-option[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.barcode-input[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.barcode-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.location-inputs[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:flex-start}.location-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.location-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:.5rem}.location-display[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.75rem;color:#666}.table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #ddd;border-radius:4px}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f5f5f5;padding:.5rem;text-align:left;font-weight:500;font-size:.875rem;border-bottom:1px solid #ddd}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.25rem;border-bottom:1px solid #eee}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid transparent;border-radius:4px;font-size:.875rem}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#1976d2;outline:none}.data-table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.data-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{width:50px;text-align:center}.data-table[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]{text-align:center;padding:1rem;color:#999;font-style:italic}.table-actions[_ngcontent-%COMP%]{margin-top:.5rem}.file-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.attachment-area[_ngcontent-%COMP%]{padding:1rem;border:2px dashed #ddd;border-radius:4px;text-align:center}.attachment-list[_ngcontent-%COMP%]{margin-top:1rem;text-align:left}.attachment-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem;background:#f5f5f5;border-radius:4px;margin-bottom:.5rem}.attachment-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.attachment-item[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{flex:0;color:#666;font-size:.75rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem}.form-actions.multi-step[_ngcontent-%COMP%]{justify-content:flex-start}.form-actions[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}.step-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.75rem .5rem;margin-bottom:.5rem;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;cursor:pointer;min-width:60px}.step-circle[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#e0e0e0;color:#666;font-size:.875rem;font-weight:500;font-size:1rem;transition:all .3s ease}.step.active[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#1976d2;color:#fff;box-shadow:0 2px 8px #1976d266}.step.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.step.completed[_ngcontent-%COMP%]   .step-circle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.step-label[_ngcontent-%COMP%]{margin-top:.25rem;font-size:.7rem;color:#666;text-align:center;max-width:80px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#1976d2;font-weight:500}.step.completed[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#4caf50}.step-connector[_ngcontent-%COMP%]{flex:1;height:2px;background:#e0e0e0;margin:0 .25rem .75rem;max-width:80px;transition:background .3s ease}.step-connector.completed[_ngcontent-%COMP%]{background:#4caf50}.screen-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:.5rem .75rem;margin-bottom:.5rem;background:#f5f5f5;border-radius:6px;border-left:3px solid #1976d2}.screen-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:1.25rem;width:1.25rem;height:1.25rem;margin-top:.125rem}.screen-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:500;color:#333}.screen-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.125rem 0 0;font-size:.8rem;color:#666}.user-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.25rem 0}.user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem}.user-email[_ngcontent-%COMP%]{font-size:.75rem;color:#666}.dark-mode[_nghost-%COMP%]   .workflow-form-container[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .workflow-form-container[_ngcontent-%COMP%]{background:#1e1e1e;color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .form-card[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-card[_ngcontent-%COMP%]{background:#2d2d2d!important}.dark-mode[_nghost-%COMP%]   .form-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .form-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1565c0,#0d47a1)}.dark-mode[_nghost-%COMP%]   .workflow-title[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .workflow-title[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   h3[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   h3[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .field-label[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .field-label[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .group-title[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .group-title[_ngcontent-%COMP%]{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]   .workflow-description[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .workflow-description[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .field-hint[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .field-hint[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .group-description[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .group-description[_ngcontent-%COMP%], .dark-mode[_nghost-%COMP%]   .screen-description[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-description[_ngcontent-%COMP%]{color:#aaa!important}.dark-mode[_nghost-%COMP%]   .required-indicator[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .required-indicator[_ngcontent-%COMP%]{color:#ff6b6b}.dark-mode[_nghost-%COMP%]   .field-group[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .field-group[_ngcontent-%COMP%]{background:#333;border-color:#444}.dark-mode[_nghost-%COMP%]   .group-header[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .group-header[_ngcontent-%COMP%]{background:#3d3d3d;border-color:#444}.dark-mode[_nghost-%COMP%]   .divider-field[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .divider-field[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .label-field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .label-field[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-upload-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .file-list[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-list[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .file-item[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .file-item[_ngcontent-%COMP%]{background:#333;border-color:#444;color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .star-rating[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ffc107}.dark-mode[_nghost-%COMP%]   .slider-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .slider-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .color-preview[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .color-preview[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .signature-pad[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888}.dark-mode[_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .image-preview-area[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#888}.dark-mode[_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   table[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#333;border-color:#444;color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .table-field[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .icon-display[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .icon-display[_ngcontent-%COMP%]{border-color:#444;background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .icon-name[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .icon-name[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .screen-tabs[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tabs[_ngcontent-%COMP%]{background:#2d2d2d}.dark-mode[_nghost-%COMP%]   .screen-tab[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tab[_ngcontent-%COMP%]{background:#333;border-color:#444;color:#aaa}.dark-mode[_nghost-%COMP%]   .screen-tab.active[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tab.active[_ngcontent-%COMP%]{background:#1976d2;color:#fff;border-color:#1976d2}.dark-mode[_nghost-%COMP%]   .screen-tab.completed[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-tab.completed[_ngcontent-%COMP%]{background:#2e7d32;color:#fff}.dark-mode[_nghost-%COMP%]   .screen-navigation[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-navigation[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .screen-counter[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .screen-counter[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .attachments-section[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .attachments-section[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .attachments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .attachments-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#e0e0e0}.dark-mode[_nghost-%COMP%]   .comments-section[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .comments-section[_ngcontent-%COMP%]{border-color:#444}.dark-mode[_nghost-%COMP%]   .user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .user-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]   .user-email[_ngcontent-%COMP%], .dark-mode   [_nghost-%COMP%]   .user-email[_ngcontent-%COMP%]{color:#aaa}.dark-mode[_nghost-%COMP%]     .mat-mdc-form-field, .dark-mode   [_nghost-%COMP%]     .mat-mdc-form-field{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-mdc-floating-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-floating-label{color:#aaa!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-input-element, .dark-mode   [_nghost-%COMP%]     .mat-mdc-input-element{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-select-value, .dark-mode   [_nghost-%COMP%]     .mat-mdc-select-value{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__leading, .dark-mode   [_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__leading, .dark-mode[_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__notch, .dark-mode   [_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__notch, .dark-mode[_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__trailing, .dark-mode   [_nghost-%COMP%]     .mdc-text-field--outlined .mdc-notched-outline__trailing{border-color:#555!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-form-field-hint, .dark-mode   [_nghost-%COMP%]     .mat-mdc-form-field-hint{color:#888!important}.dark-mode[_nghost-%COMP%]     .mat-expansion-panel, .dark-mode   [_nghost-%COMP%]     .mat-expansion-panel{background:#2d2d2d!important}.dark-mode[_nghost-%COMP%]     .mat-expansion-panel-header-title, .dark-mode   [_nghost-%COMP%]     .mat-expansion-panel-header-title{color:#e0e0e0!important}.dark-mode[_nghost-%COMP%]     .mat-mdc-radio-button .mdc-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-radio-button .mdc-label{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-mdc-checkbox .mdc-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-checkbox .mdc-label{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-label, .dark-mode   [_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-label{color:#e0e0e0}.dark-mode[_nghost-%COMP%]     .mat-button-toggle-group, .dark-mode   [_nghost-%COMP%]     .mat-button-toggle-group{border-color:#444}.dark-mode[_nghost-%COMP%]     .mat-button-toggle, .dark-mode   [_nghost-%COMP%]     .mat-button-toggle{color:#e0e0e0;background:#2d2d2d}.dark-mode[_nghost-%COMP%]     .mat-button-toggle-checked, .dark-mode   [_nghost-%COMP%]     .mat-button-toggle-checked{background:#1976d2;color:#fff}.dark-mode[_nghost-%COMP%]     .mat-mdc-card, .dark-mode   [_nghost-%COMP%]     .mat-mdc-card{background:#2d2d2d!important;color:#e0e0e0}"]})}return n})();export{e_ as WorkflowFormComponent};
