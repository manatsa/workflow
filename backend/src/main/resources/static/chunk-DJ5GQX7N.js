import{h as Y}from"./chunk-5TLSQL4E.js";import{a as Z,b as tt}from"./chunk-LUBHRDD6.js";import{a as nt,b as ot,c as rt,d as at,e as mt,f as lt,g as dt,h as ct,i as st,j as pt,k as ut}from"./chunk-S7OVDIVJ.js";import"./chunk-KPLEND2O.js";import{a as Ct}from"./chunk-3HKR6USX.js";import{a as et,b as it}from"./chunk-XQHIDIE5.js";import"./chunk-LETYTNCA.js";import"./chunk-M3GLKEYP.js";import{a as Q,c as W,d as X}from"./chunk-ZK2UDSKG.js";import{b as z,c as J,i as K}from"./chunk-FHBRY4FZ.js";import{d as F,f as w,h as T,i as L,l as k,n as D,o as I,r as V,s as B,t as O}from"./chunk-JITRQZ7S.js";import{a as $,b as H,c as j,f as G,h as U}from"./chunk-LB6LFADN.js";import"./chunk-Q5RCCGFX.js";import"./chunk-W4XF3NOO.js";import{m as E,qa as A,ra as N,sa as q,ta as P,va as R}from"./chunk-LBWRLA47.js";import{Ab as c,Fb as x,Kb as o,Lb as n,Mb as g,Nb as _,Ob as y,Qb as M,Ub as s,Vb as p,bb as l,dc as r,ec as h,fc as S,gb as v,na as C,nb as b,oa as f,tb as d}from"./chunk-5XIHPI6O.js";function ft(e,a){e&1&&(o(0,"th",17),r(1,"Code"),n())}function gt(e,a){if(e&1&&(o(0,"td",18),r(1),n()),e&2){let t=a.$implicit;l(),h(t.code)}}function _t(e,a){e&1&&(o(0,"th",17),r(1,"Name"),n())}function yt(e,a){if(e&1&&(o(0,"td",18),r(1),n()),e&2){let t=a.$implicit;l(),h(t.name)}}function ht(e,a){e&1&&(o(0,"th",17),r(1,"Description"),n())}function xt(e,a){if(e&1&&(o(0,"td",18),r(1),n()),e&2){let t=a.$implicit;l(),h(t.description)}}function vt(e,a){e&1&&(o(0,"th",17),r(1,"Status"),n())}function Mt(e,a){if(e&1&&(o(0,"td",18)(1,"mat-chip",19),r(2),n()()),e&2){let t=a.$implicit;l(),c("color",t.isActive?"primary":"warn"),l(),S(" ",t.isActive?"Active":"Inactive"," ")}}function St(e,a){e&1&&(o(0,"th",17),r(1,"Actions"),n())}function wt(e,a){if(e&1){let t=M();o(0,"td",18)(1,"button",20),s("click",function(){let i=C(t).$implicit,u=p();return f(u.editCategory(i))}),o(2,"mat-icon"),r(3,"edit"),n()(),o(4,"button",20),s("click",function(){let i=C(t).$implicit,u=p();return f(u.toggleStatus(i))}),o(5,"mat-icon"),r(6),n()(),o(7,"button",21),s("click",function(){let i=C(t).$implicit,u=p();return f(u.deleteCategory(i))}),o(8,"mat-icon"),r(9,"delete"),n()()()}if(e&2){let t=a.$implicit;l(6),h(t.isActive?"visibility_off":"visibility")}}function bt(e,a){e&1&&g(0,"tr",22)}function Et(e,a){e&1&&g(0,"tr",23)}function Ft(e,a){e&1&&(o(0,"div",15)(1,"mat-icon"),r(2,"category"),n(),o(3,"p"),r(4,"No categories found. Add your first category."),n()())}function Tt(e,a){e&1&&(o(0,"mat-error"),r(1,"Code is required"),n())}function Lt(e,a){e&1&&(o(0,"mat-error"),r(1,"Name is required"),n())}function kt(e,a){if(e&1){let t=M();o(0,"mat-card",16)(1,"mat-card-header")(2,"mat-card-title"),r(3),n()(),o(4,"mat-card-content")(5,"form",24),s("ngSubmit",function(){C(t);let i=p();return f(i.saveCategory())}),o(6,"mat-form-field",25)(7,"mat-label"),r(8,"Code"),n(),g(9,"input",26),d(10,Tt,2,0,"mat-error"),n(),o(11,"mat-form-field",25)(12,"mat-label"),r(13,"Name"),n(),g(14,"input",27),d(15,Lt,2,0,"mat-error"),n(),o(16,"mat-form-field",25)(17,"mat-label"),r(18,"Description"),n(),g(19,"textarea",28),n(),o(20,"div",29)(21,"button",30),s("click",function(){C(t);let i=p();return f(i.showForm=!1)}),r(22,"Cancel"),n(),o(23,"button",31),r(24),n()()()()()}if(e&2){let t,m,i=p();l(3),h(i.editingCategory?"Edit Category":"Add Category"),l(2),c("formGroup",i.categoryForm),l(5),x((t=i.categoryForm.get("code"))!=null&&t.hasError("required")?10:-1),l(5),x((m=i.categoryForm.get("name"))!=null&&m.hasError("required")?15:-1),l(8),c("disabled",i.loading||i.categoryForm.invalid),l(),S(" ",i.editingCategory?"Update":"Create"," ")}}var Zt=(()=>{class e{fb;userService;snackBar;categories=[];displayedColumns=["code","name","description","status","actions"];showForm=!1;editingCategory=null;loading=!1;categoryForm;constructor(t,m,i){this.fb=t,this.userService=m,this.snackBar=i,this.categoryForm=this.fb.group({code:["",w.required],name:["",w.required],description:[""]})}ngOnInit(){this.loadCategories()}loadCategories(){this.userService.getCategories().subscribe(t=>{t.success&&(this.categories=t.data)})}editCategory(t){this.editingCategory=t,this.showForm=!0,this.categoryForm.patchValue({code:t.code,name:t.name,description:t.description})}saveCategory(){if(this.categoryForm.invalid)return;this.loading=!0;let t=this.categoryForm.value;(this.editingCategory?this.userService.updateCategory(this.editingCategory.id,t):this.userService.createCategory(t)).subscribe({next:i=>{this.loading=!1,i.success&&(this.snackBar.open(this.editingCategory?"Category updated":"Category created","Close",{duration:3e3}),this.showForm=!1,this.editingCategory=null,this.categoryForm.reset(),this.loadCategories())},error:i=>{this.loading=!1,this.snackBar.open(i.error?.message||"Operation failed","Close",{duration:3e3})}})}toggleStatus(t){(t.isActive?this.userService.deactivateCategory(t.id):this.userService.activateCategory(t.id)).subscribe({next:()=>{this.snackBar.open(t.isActive?"Category deactivated":"Category activated","Close",{duration:3e3}),this.loadCategories()},error:i=>{this.snackBar.open(i.error?.message||"Operation failed","Close",{duration:3e3})}})}deleteCategory(t){confirm(`Are you sure you want to delete "${t.name}"?`)&&this.userService.deleteCategory(t.id).subscribe({next:()=>{this.snackBar.open("Category deleted","Close",{duration:3e3}),this.loadCategories()},error:m=>{this.snackBar.open(m.error?.message||"Failed to delete","Close",{duration:3e3})}})}static \u0275fac=function(m){return new(m||e)(v(V),v(Ct),v(et))};static \u0275cmp=b({type:e,selectors:[["app-category-list"]],decls:31,vars:5,consts:[[1,"category-list-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],[1,"content-grid"],[1,"table-card"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","description"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"no-data"],[1,"form-card"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-icon-button","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","code"],["matInput","","formControlName","name"],["matInput","","formControlName","description","rows","3"],[1,"form-actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(m,i){m&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Categories (Industries)"),n(),o(4,"button",2),s("click",function(){return i.showForm=!0,i.editingCategory=null,i.categoryForm.reset()}),o(5,"mat-icon"),r(6,"add"),n(),r(7," Add Category "),n()(),o(8,"div",3)(9,"mat-card",4)(10,"mat-card-content")(11,"table",5),_(12,6),d(13,ft,2,0,"th",7)(14,gt,2,1,"td",8),y(),_(15,9),d(16,_t,2,0,"th",7)(17,yt,2,1,"td",8),y(),_(18,10),d(19,ht,2,0,"th",7)(20,xt,2,1,"td",8),y(),_(21,11),d(22,vt,2,0,"th",7)(23,Mt,3,2,"td",8),y(),_(24,12),d(25,St,2,0,"th",7)(26,wt,10,1,"td",8),y(),d(27,bt,1,0,"tr",13)(28,Et,1,0,"tr",14),n(),d(29,Ft,5,0,"div",15),n()(),d(30,kt,25,6,"mat-card",16),n()()),m&2&&(l(11),c("dataSource",i.categories),l(16),c("matHeaderRowDef",i.displayedColumns),l(),c("matRowDefColumns",i.displayedColumns),l(),x(i.categories.length===0?29:-1),l(),x(i.showForm?30:-1))},dependencies:[E,B,k,F,T,L,O,D,I,U,$,j,G,H,ut,nt,rt,dt,at,ot,ct,mt,lt,st,pt,Q,K,z,J,X,W,R,P,q,N,A,it,tt,Z,Y],styles:[".category-list-container[_ngcontent-%COMP%]{padding:1rem}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;gap:1rem}@media (max-width: 900px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.full-width[_ngcontent-%COMP%]{width:100%}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;color:#666}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.5rem;margin-top:1rem}"]})}return e})();export{Zt as CategoryListComponent};
